var $n=Object.create;var ke=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var tr=Object.getOwnPropertyNames;var sr=Object.getPrototypeOf,nr=Object.prototype.hasOwnProperty;var rr=(p,a,s)=>a in p?ke(p,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[a]=s;var vt=(p,a)=>()=>(a||p((a={exports:{}}).exports,a),a.exports);var or=(p,a,s,r)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of tr(a))!nr.call(p,_)&&_!==s&&ke(p,_,{get:()=>a[_],enumerable:!(r=er(a,_))||r.enumerable});return p};var ir=(p,a,s)=>(s=p!=null?$n(sr(p)):{},or(a||!p||!p.__esModule?ke(s,"default",{value:p,enumerable:!0}):s,p));var Bt=(p,a,s)=>(rr(p,typeof a!="symbol"?a+"":a,s),s);var St=vt((Ct,Pt)=>{(function(p){var a=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"},r=10,_=typeof process=="object"&&typeof process.nextTick=="function",o=typeof Symbol=="function",i=typeof Reflect=="object",t=typeof setImmediate=="function",c=t?setImmediate:setTimeout,h=o?i&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var n=Object.getOwnPropertyNames(e);return n.push.apply(n,Object.getOwnPropertySymbols(e)),n}:Object.keys;function T(){this._events={},this._conf&&M.call(this,this._conf)}function M(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==p&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(e,n){var u="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(u+=" Event name: "+n+"."),typeof process<"u"&&process.emitWarning){var l=new Error(u);l.name="MaxListenersExceededWarning",l.emitter=this,l.count=e,process.emitWarning(l)}else console.error(u),console.trace&&console.trace()}var Z=function(e,n,u){var l=arguments.length;switch(l){case 0:return[];case 1:return[e];case 2:return[e,n];case 3:return[e,n,u];default:for(var E=new Array(l);l--;)E[l]=arguments[l];return E}};function pt(e,n){for(var u={},l,E=e.length,f=n?n.length:0,b=0;b<E;b++)l=e[b],u[l]=b<f?n[b]:p;return u}function At(e,n,u){this._emitter=e,this._target=n,this._listeners={},this._listenersCount=0;var l,E;if((u.on||u.off)&&(l=u.on,E=u.off),n.addEventListener?(l=n.addEventListener,E=n.removeEventListener):n.addListener?(l=n.addListener,E=n.removeListener):n.on&&(l=n.on,E=n.off),!l&&!E)throw Error("target does not implement any known event API");if(typeof l!="function")throw TypeError("on method must be a function");if(typeof E!="function")throw TypeError("off method must be a function");this._on=l,this._off=E;var f=e._observers;f?f.push(this):e._observers=[this]}Object.assign(At.prototype,{subscribe:function(e,n,u){var l=this,E=this._target,f=this._emitter,b=this._listeners,O=function(){var L=Z.apply(null,arguments),m={data:L,name:n,original:e};if(u){var N=u.call(E,m);N!==!1&&f.emit.apply(f,[m.name].concat(L));return}f.emit.apply(f,[n].concat(L))};if(b[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,f._newListener&&f._removeListener&&!l._onNewListener?(this._onNewListener=function(L){L===n&&b[e]===null&&(b[e]=O,l._on.call(E,e,O))},f.on("newListener",this._onNewListener),this._onRemoveListener=function(L){L===n&&!f.hasListeners(L)&&b[e]&&(b[e]=null,l._off.call(E,e,O))},b[e]=null,f.on("removeListener",this._onRemoveListener)):(b[e]=O,l._on.call(E,e,O))},unsubscribe:function(e){var n=this,u=this._listeners,l=this._emitter,E,f,b=this._off,O=this._target,L;if(e&&typeof e!="string")throw TypeError("event must be a string");function m(){n._onNewListener&&(l.off("newListener",n._onNewListener),l.off("removeListener",n._onRemoveListener),n._onNewListener=null,n._onRemoveListener=null);var N=Rt.call(l,n);l._observers.splice(N,1)}if(e){if(E=u[e],!E)return;b.call(O,e,E),delete u[e],--this._listenersCount||m()}else{for(f=h(u),L=f.length;L-- >0;)e=f[L],b.call(O,e,u[e]);this._listeners={},this._listenersCount=0,m()}}});function ne(e,n,u,l){var E=Object.assign({},n);if(!e)return E;if(typeof e!="object")throw TypeError("options must be an object");var f=Object.keys(e),b=f.length,O,L,m;function N(R){throw Error('Invalid "'+O+'" option value'+(R?". Reason: "+R:""))}for(var D=0;D<b;D++){if(O=f[D],!l&&!a.call(n,O))throw Error('Unknown "'+O+'" option');L=e[O],L!==p&&(m=u[O],E[O]=m?m(L,N):L)}return E}function Tt(e,n){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&n("value must be a constructor"),e}function Nt(e){var n="value must be type of "+e.join("|"),u=e.length,l=e[0],E=e[1];return u===1?function(f,b){if(typeof f===l)return f;b(n)}:u===2?function(f,b){var O=typeof f;if(O===l||O===E)return f;b(n)}:function(f,b){for(var O=typeof f,L=u;L-- >0;)if(O===e[L])return f;b(n)}}var pe=Nt(["function"]),Jn=Nt(["object","function"]);function dt(e,n,u){var l,E,f=0,b,O=new e(function(L,m,N){u=ne(u,{timeout:0,overload:!1},{timeout:function(v,w){return v*=1,(typeof v!="number"||v<0||!Number.isFinite(v))&&w("timeout must be a positive number"),v}}),l=!u.overload&&typeof e.prototype.cancel=="function"&&typeof N=="function";function D(){E&&(E=null),f&&(clearTimeout(f),f=0)}var R=function(v){D(),L(v)},k=function(v){D(),m(v)};l?n(R,k,N):(E=[function(v){k(v||Error("canceled"))}],n(R,k,function(v){if(b)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof v!="function")throw TypeError("onCancel callback must be a function");E.push(v)}),b=!0),u.timeout>0&&(f=setTimeout(function(){var v=Error("timeout");v.code="ETIMEDOUT",f=0,O.cancel(v),m(v)},u.timeout))});return l||(O.cancel=function(L){if(!!E){for(var m=E.length,N=1;N<m;N++)E[N](L);E[0](L),E=null}}),O}function Rt(e){var n=this._observers;if(!n)return-1;for(var u=n.length,l=0;l<u;l++)if(n[l]._target===e)return l;return-1}function C(e,n,u,l,E){if(!u)return null;if(l===0){var f=typeof n;if(f==="string"){var b,O,L=0,m=0,N=this.delimiter,D=N.length;if((O=n.indexOf(N))!==-1){b=new Array(5);do b[L++]=n.slice(m,O),m=O+D;while((O=n.indexOf(N,m))!==-1);b[L++]=n.slice(m),n=b,E=L}else n=[n],E=1}else f==="object"?E=n.length:(n=[n],E=1)}var R=null,k,v,w,Ne,de,W=n[l],Re=n[l+1],Y,K;if(l===E)u._listeners&&(typeof u._listeners=="function"?(e&&e.push(u._listeners),R=[u]):(e&&e.push.apply(e,u._listeners),R=[u]));else if(W==="*"){for(Y=h(u),O=Y.length;O-- >0;)k=Y[O],k!=="_listeners"&&(K=C(e,n,u[k],l+1,E),K&&(R?R.push.apply(R,K):R=K));return R}else if(W==="**"){for(de=l+1===E||l+2===E&&Re==="*",de&&u._listeners&&(R=C(e,n,u,E,E)),Y=h(u),O=Y.length;O-- >0;)k=Y[O],k!=="_listeners"&&(k==="*"||k==="**"?(u[k]._listeners&&!de&&(K=C(e,n,u[k],E,E),K&&(R?R.push.apply(R,K):R=K)),K=C(e,n,u[k],l,E)):k===Re?K=C(e,n,u[k],l+2,E):K=C(e,n,u[k],l,E),K&&(R?R.push.apply(R,K):R=K));return R}else u[W]&&(R=C(e,n,u[W],l+1,E));if(v=u["*"],v&&C(e,n,v,l+1,E),w=u["**"],w)if(l<E)for(w._listeners&&C(e,n,w,E,E),Y=h(w),O=Y.length;O-- >0;)k=Y[O],k!=="_listeners"&&(k===Re?C(e,n,w[k],l+2,E):k===W?C(e,n,w[k],l+1,E):(Ne={},Ne[k]=w[k],C(e,n,{"**":Ne},l+1,E)));else w._listeners?C(e,n,w,E,E):w["*"]&&w["*"]._listeners&&C(e,n,w["*"],E,E);return R}function Qn(e,n,u){var l=0,E=0,f,b=this.delimiter,O=b.length,L;if(typeof e=="string")if((f=e.indexOf(b))!==-1){L=new Array(5);do L[l++]=e.slice(E,f),E=f+O;while((f=e.indexOf(b,E))!==-1);L[l++]=e.slice(E)}else L=[e],l=1;else L=e,l=e.length;if(l>1){for(f=0;f+1<l;f++)if(L[f]==="**"&&L[f+1]==="**")return}var m=this.listenerTree,N;for(f=0;f<l;f++)if(N=L[f],m=m[N]||(m[N]={}),f===l-1)return m._listeners?(typeof m._listeners=="function"&&(m._listeners=[m._listeners]),u?m._listeners.unshift(n):m._listeners.push(n),!m._listeners.warned&&this._maxListeners>0&&m._listeners.length>this._maxListeners&&(m._listeners.warned=!0,g.call(this,m._listeners.length,N))):m._listeners=n,!0;return!0}function kt(e,n,u,l){for(var E=h(e),f=E.length,b,O,L,m=e._listeners,N;f-- >0;)O=E[f],b=e[O],O==="_listeners"?L=u:L=u?u.concat(O):[O],N=l||typeof O=="symbol",m&&n.push(N?L:L.join(this.delimiter)),typeof b=="object"&&kt.call(this,b,n,L,N);return n}function Ae(e){for(var n=h(e),u=n.length,l,E,f;u-- >0;)E=n[u],l=e[E],l&&(f=!0,E!=="_listeners"&&!Ae(l)&&delete e[E]);return f}function It(e,n,u){this.emitter=e,this.event=n,this.listener=u}It.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function Zn(e,n,u){if(u===!0)E=!0;else if(u===!1)l=!0;else{if(!u||typeof u!="object")throw TypeError("options should be an object or true");var l=u.async,E=u.promisify,f=u.nextTick,b=u.objectify}if(l||f||E){var O=n,L=n._origin||n;if(f&&!_)throw Error("process.nextTick is not supported");E===p&&(E=n.constructor.name==="AsyncFunction"),n=function(){var m=arguments,N=this,D=this.event;return E?f?Promise.resolve():new Promise(function(R){c(R)}).then(function(){return N.event=D,O.apply(N,m)}):(f?process.nextTick:c)(function(){N.event=D,O.apply(N,m)})},n._async=!0,n._origin=L}return[n,b?new It(this,e,n):this]}function d(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,M.call(this,e)}d.EventEmitter2=d,d.prototype.listenTo=function(e,n,u){if(typeof e!="object")throw TypeError("target musts be an object");var l=this;u=ne(u,{on:p,off:p,reducers:p},{on:pe,off:pe,reducers:Jn});function E(f){if(typeof f!="object")throw TypeError("events must be an object");var b=u.reducers,O=Rt.call(l,e),L;O===-1?L=new At(l,e,u):L=l._observers[O];for(var m=h(f),N=m.length,D,R=typeof b=="function",k=0;k<N;k++)D=m[k],L.subscribe(D,f[D]||D,R?b:b&&b[D])}return s(n)?E(pt(n)):E(typeof n=="string"?pt(n.split(/\s+/)):n),this},d.prototype.stopListeningTo=function(e,n){var u=this._observers;if(!u)return!1;var l=u.length,E,f=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;l-- >0;)E=u[l],(!e||E._target===e)&&(E.unsubscribe(n),f=!0);return f},d.prototype.delimiter=".",d.prototype.setMaxListeners=function(e){e!==p&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},d.prototype.getMaxListeners=function(){return this._maxListeners},d.prototype.event="",d.prototype.once=function(e,n,u){return this._once(e,n,!1,u)},d.prototype.prependOnceListener=function(e,n,u){return this._once(e,n,!0,u)},d.prototype._once=function(e,n,u,l){return this._many(e,1,n,u,l)},d.prototype.many=function(e,n,u,l){return this._many(e,n,u,!1,l)},d.prototype.prependMany=function(e,n,u,l){return this._many(e,n,u,!0,l)},d.prototype._many=function(e,n,u,l,E){var f=this;if(typeof u!="function")throw new Error("many only accepts instances of Function");function b(){return--n===0&&f.off(e,b),u.apply(this,arguments)}return b._origin=u,this._on(e,b,l,E)},d.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||T.call(this);var e=arguments[0],n,u=this.wildcard,l,E,f,b,O;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(u&&(n=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(E=e.length,o){for(f=0;f<E;f++)if(typeof e[f]=="symbol"){O=!0;break}}O||(e=e.join(this.delimiter))}var L=arguments.length,m;if(this._all&&this._all.length)for(m=this._all.slice(),f=0,E=m.length;f<E;f++)switch(this.event=e,L){case 1:m[f].call(this,e);break;case 2:m[f].call(this,e,arguments[1]);break;case 3:m[f].call(this,e,arguments[1],arguments[2]);break;default:m[f].apply(this,arguments)}if(u)m=[],C.call(this,m,n,this.listenerTree,0,E);else if(m=this._events[e],typeof m=="function"){switch(this.event=e,L){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);break;case 3:m.call(this,arguments[1],arguments[2]);break;default:for(l=new Array(L-1),b=1;b<L;b++)l[b-1]=arguments[b];m.apply(this,l)}return!0}else m&&(m=m.slice());if(m&&m.length){if(L>3)for(l=new Array(L-1),b=1;b<L;b++)l[b-1]=arguments[b];for(f=0,E=m.length;f<E;f++)switch(this.event=e,L){case 1:m[f].call(this);break;case 2:m[f].call(this,arguments[1]);break;case 3:m[f].call(this,arguments[1],arguments[2]);break;default:m[f].apply(this,l)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||T.call(this);var e=arguments[0],n=this.wildcard,u,l,E,f,b,O;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(n&&(u=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(f=e.length,o){for(b=0;b<f;b++)if(typeof e[b]=="symbol"){l=!0;break}}l||(e=e.join(this.delimiter))}var L=[],m=arguments.length,N;if(this._all)for(b=0,f=this._all.length;b<f;b++)switch(this.event=e,m){case 1:L.push(this._all[b].call(this,e));break;case 2:L.push(this._all[b].call(this,e,arguments[1]));break;case 3:L.push(this._all[b].call(this,e,arguments[1],arguments[2]));break;default:L.push(this._all[b].apply(this,arguments))}if(n?(N=[],C.call(this,N,u,this.listenerTree,0)):N=this._events[e],typeof N=="function")switch(this.event=e,m){case 1:L.push(N.call(this));break;case 2:L.push(N.call(this,arguments[1]));break;case 3:L.push(N.call(this,arguments[1],arguments[2]));break;default:for(E=new Array(m-1),O=1;O<m;O++)E[O-1]=arguments[O];L.push(N.apply(this,E))}else if(N&&N.length){if(N=N.slice(),m>3)for(E=new Array(m-1),O=1;O<m;O++)E[O-1]=arguments[O];for(b=0,f=N.length;b<f;b++)switch(this.event=e,m){case 1:L.push(N[b].call(this));break;case 2:L.push(N[b].call(this,arguments[1]));break;case 3:L.push(N[b].call(this,arguments[1],arguments[2]));break;default:L.push(N[b].apply(this,E))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(L)},d.prototype.on=function(e,n,u){return this._on(e,n,!1,u)},d.prototype.prependListener=function(e,n,u){return this._on(e,n,!0,u)},d.prototype.onAny=function(e){return this._onAny(e,!1)},d.prototype.prependAny=function(e){return this._onAny(e,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(e,n){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),n?this._all.unshift(e):this._all.push(e),this},d.prototype._on=function(e,n,u,l){if(typeof e=="function")return this._onAny(e,n),this;if(typeof n!="function")throw new Error("on only accepts instances of Function");this._events||T.call(this);var E=this,f;return l!==p&&(f=Zn.call(this,e,n,l),n=f[0],E=f[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(Qn.call(this,e,n,u),E):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),u?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,g.call(this,this._events[e].length,e))):this._events[e]=n,E)},d.prototype.off=function(e,n){if(typeof n!="function")throw new Error("removeListener only takes instances of Function");var u,l=[];if(this.wildcard){var E=typeof e=="string"?e.split(this.delimiter):e.slice();if(l=C.call(this,null,E,this.listenerTree,0),!l)return this}else{if(!this._events[e])return this;u=this._events[e],l.push({_listeners:u})}for(var f=0;f<l.length;f++){var b=l[f];if(u=b._listeners,s(u)){for(var O=-1,L=0,m=u.length;L<m;L++)if(u[L]===n||u[L].listener&&u[L].listener===n||u[L]._origin&&u[L]._origin===n){O=L;break}if(O<0)continue;return this.wildcard?b._listeners.splice(O,1):this._events[e].splice(O,1),u.length===0&&(this.wildcard?delete b._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,n),this}else(u===n||u.listener&&u.listener===n||u._origin&&u._origin===n)&&(this.wildcard?delete b._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,n))}return this.listenerTree&&Ae(this.listenerTree),this},d.prototype.offAny=function(e){var n=0,u=0,l;if(e&&this._all&&this._all.length>0){for(l=this._all,n=0,u=l.length;n<u;n++)if(e===l[n])return l.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(l=this._all,this._removeListener)for(n=0,u=l.length;n<u;n++)this.emit("removeListenerAny",l[n]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(e){if(e===p)return!this._events||T.call(this),this;if(this.wildcard){var n=C.call(this,null,e,this.listenerTree,0),u,l;if(!n)return this;for(l=0;l<n.length;l++)u=n[l],u._listeners=null;this.listenerTree&&Ae(this.listenerTree)}else this._events&&(this._events[e]=null);return this},d.prototype.listeners=function(e){var n=this._events,u,l,E,f,b;if(e===p){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!n)return[];for(u=h(n),f=u.length,E=[];f-- >0;)l=n[u[f]],typeof l=="function"?E.push(l):E.push.apply(E,l);return E}else{if(this.wildcard){if(b=this.listenerTree,!b)return[];var O=[],L=typeof e=="string"?e.split(this.delimiter):e.slice();return C.call(this,O,L,b,0),O}return n?(l=n[e],l?typeof l=="function"?[l]:l:[]):[]}},d.prototype.eventNames=function(e){var n=this._events;return this.wildcard?kt.call(this,this.listenerTree,[],null,e):n?h(n):[]},d.prototype.listenerCount=function(e){return this.listeners(e).length},d.prototype.hasListeners=function(e){if(this.wildcard){var n=[],u=typeof e=="string"?e.split(this.delimiter):e.slice();return C.call(this,n,u,this.listenerTree,0),n.length>0}var l=this._events,E=this._all;return!!(E&&E.length||l&&(e===p?h(l).length:l[e]))},d.prototype.listenersAny=function(){return this._all?this._all:[]},d.prototype.waitFor=function(e,n){var u=this,l=typeof n;return l==="number"?n={timeout:n}:l==="function"&&(n={filter:n}),n=ne(n,{timeout:0,filter:p,handleError:!1,Promise,overload:!1},{filter:pe,Promise:Tt}),dt(n.Promise,function(E,f,b){function O(){var L=n.filter;if(!(L&&!L.apply(u,arguments)))if(u.off(e,O),n.handleError){var m=arguments[0];m?f(m):E(Z.apply(null,arguments).slice(1))}else E(Z.apply(null,arguments))}b(function(){u.off(e,O)}),u._on(e,O,!1)},{timeout:n.timeout,overload:n.overload})};function Wn(e,n,u){u=ne(u,{Promise,timeout:0,overload:!1},{Promise:Tt});var l=u.Promise;return dt(l,function(E,f,b){var O;if(typeof e.addEventListener=="function"){O=function(){E(Z.apply(null,arguments))},b(function(){e.removeEventListener(n,O)}),e.addEventListener(n,O,{once:!0});return}var L=function(){m&&e.removeListener("error",m),E(Z.apply(null,arguments))},m;n!=="error"&&(m=function(N){e.removeListener(n,L),f(N)},e.once("error",m)),b(function(){m&&e.removeListener("error",m),e.removeListener(n,L)}),e.once(n,L)},{timeout:u.timeout,overload:u.overload})}var Te=d.prototype;if(Object.defineProperties(d,{defaultMaxListeners:{get:function(){return Te._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");Te._maxListeners=e},enumerable:!0},once:{value:Wn,writable:!0,configurable:!0}}),Object.defineProperties(Te,{_maxListeners:{value:r,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return d});else if(typeof Ct=="object")Pt.exports=d;else{var qn=new Function("","return this")();qn.EventEmitter2=d}})()});var Mt=vt((fi,Dt)=>{Dt.exports=St()});var Vn=ir(Mt(),1);var cr="as",ar="=",ur="break",lr="else",Er="enum",hr="export",_r="if",fr="import",br="->",Lr="is",mr="loop",Or="mut",pr="native",Ar="object",Tr="fn",Nr="return",dr="self",Rr="template",kr=Object.freeze({ALIAS:cr,ASSIGN:ar,BREAK:ur,ELSE:lr,ENUMERATION:Er,EXPORT:hr,IF:_r,IMPORT:fr,INTO:br,IS:Lr,LOOP:mr,MUTABLE:Or,NATIVE:pr,OBJECT:Ar,PROCEDURE:Tr,RETURN:Nr,SELF:dr,TEMPLATE:Rr}),wt=kr;var Ir="array",vr="assignment",Br="branch-default",Cr="branch-value",Pr="break",Sr="condition",Dr="declaration",Mr="enumeration",wr="export",Kr="expression",gr="import",Ur="label",yr="literal",Yr="loop",Gr="module",Hr="mutable",jr="name-list",xr="native",Fr="object",Xr="procedure",Vr="return",zr="self",Jr="submodule",Qr="template",Zr="type-pair",Wr=Object.freeze({ARRAY:Ir,ASSIGNMENT:vr,BRANCH_DEFAULT:Br,BRANCH_VALUE:Cr,BREAK:Pr,CONDITION:Sr,DECLARATION:Dr,ENUMERATION:Mr,EXPORT:wr,EXPRESSION:Kr,IMPORT:gr,LABEL:Ur,LITERAL:yr,LOOP:Yr,MODULE:Gr,MUTABLE:Hr,NAME_LIST:jr,NATIVE:xr,OBJECT:Fr,PROCEDURE:Xr,RETURN:Vr,SELF:zr,SUBMODULE:Jr,TEMPLATE:Qr,TYPE_PAIR:Zr}),Kt=Wr;var qr=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),gt=qr;var $r=Object.freeze([]),eo=Object.freeze({}),to="",so="	",no=`
`,ro="UTF-8",oo=Object.freeze({EMPTY_ARRAY:$r,EMPTY_OBJECT:eo,EMPTY_STRING:to,HORIZONTAL_TAB:so,LINE_BREAK:no,UNICODE_TEXT:ro,Codes:gt,Keys:wt,Types:Kt}),q=oo;var{EMPTY_STRING:io,UNICODE_TEXT:Pe}=q,co=-1,ao=1,uo=new TextDecoder(Pe),lo=new TextEncoder,Eo=(p,a,s=0,r=p.length|0,_=0,o=a.length|0)=>{for(_=_|0,s=s|0,o=o|0,r=r|0;;){let i=s>=r,t=_>=o;if(i||t)break;let h=p[s],T=a[_];if(s=s+1|0,_=_+1|0,h<T)return co;if(h>T)return ao}return 0},ho=(p,a,s=0,r=p.length|0,_=0,o=a.length|0)=>{for(_=_|0,s=s|0,o=o|0,r=r|0;;){let i=_>=o,t=s>=r;if(i||t)break;a[_]=p[s],_=_+1|0,s=s+1|0}},_o=(p,a,s=0,r=p.length|0,_=0,o=a.length|0)=>{for(s=s|0,_=_|0,r=r|0,o=o|0;;){let i=s>=r,t=_>=o;if(i||t)break;let h=p[s],T=a[_];if(s=s+1|0,_=_+1|0,h!==T)return!1}return!0},fo=p=>{p=p>>>0;let a=0,s=0;for(;s=(s<<1|1)>>>0,!(s>p);)a=a+1|0;return a},Yt=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),Be=(p,a,s,r)=>{for(p=p>>>0,r=r??a.length|0,s=s|0,r=r|0;p>0&&r>s;)r=r-1|0,a[r]=Yt[p&15],p=p>>>4},Gt=128,Ht=127,bo=-1,Ce=64,Se=p=>{p=p|0;let a=[];for(;;){let s=p&Ht;p=p>>7;let r=p===0,_=(s&Ce)===0,o=r&&_,i=p===-1,t=(s&Ce)!==0;if(o||i&&t){a.push(s);break}s=s|Gt,a.push(s)}return a},jt=(p,a)=>{a=a|0;let s=0,r=0;for(;;){let _=p[a]|0;a=a+1|0;let o=(_&Ht)<<r;if(r=r+7|0,s=s|o,(_&Gt)===0){let t=(_&Ce)!==0,c=r<32;if(t&&c){let T=bo<<r;s=s|T}break}}return s},Lo=p=>uo.decode(p),mo=p=>lo.encode(p),Oo=(p=io)=>{let a=p.length|0,s=Se(a),r=Buffer.from(p,Pe);return Object.freeze([...s,...r])},po=(p,a)=>{a=a|0;let s=jt(p,a),r=Se(s).length;return a=a+r|0,p.subarray(a,a+s|0).toString(Pe)},Ao=58,To=46,$=32,Ie=48,No=67,G=new Uint8Array(No),Ut=G.subarray(0,8),re=G.subarray(10,49),yt=G.subarray(51,68),ve=16,Ro=2;G[8]=Ao;G[9]=$;G[49]=$;G[50]=$;var ko=(p,a)=>{a=a??console.log;let s=32,r=126,_=p.length|0,o=0;for(;_>0;){Ut.fill(Ie),Be(o,Ut),re.fill($),yt.fill($);let i=_>=ve?ve:_;_=_-ve|0;let t=0,c=0;for(let T=1;T<=i;T=T+1|0){let M=p[o]&255;re[t+0|0]=Ie,re[t+1|0]=Ie,Be(M,re,t,t+2|0);let g=To;s<=M&&M<=r&&(g=M),yt[c]=g,o=o+1|0,t=t+2|0,c=c+1|0,T%Ro===0&&(t=t+1|0)}let h=String.fromCodePoint(...G);a(h)}},Io=function*(p,a){let s=p.length|0,r=a.length|0,_=0;for(;_<s&&_<r;){let o=p[_],i=a[_];yield[o,i],_=_+1|0}},vo=function*(p,a,s){let r=p.length|0,_=a.length|0,o=s.length|0,i=0;for(;i<r&&i<_&&i<o;){let t=p[i],c=a[i],h=s[i];yield[t,c,h],i=i+1|0}},Bo=Object.freeze({ARRAY_COMPARE:Eo,ARRAY_COPY:ho,ARRAY_EQUAL:_o,BIT_DEPTH:fo,HEX_DIGITS:Yt,HEX_ENCODE:Be,LEB128_DECODE:jt,LEB128_ENCODE:Se,UTF8_DECODE:Lo,UTF8_ENCODE:mo,WASM_STRING_ENCODE:Oo,WASM_STRING_DECODE:po,XXD_DUMP_HEX:ko,ZIP2:Io,ZIP3:vo}),xt=Bo;var{Keys:P,Types:I,Codes:A}=q,{EMPTY_STRING:ee,UNICODE_TEXT:Ii}=q,{ARRAY_EQUAL:Co,UTF8_DECODE:y,UTF8_ENCODE:S}=xt,U=new Error("unreachable code reached"),X=Co,Ft=S(P.ASSIGN),Po=S(P.ALIAS),So=S(P.BREAK),Do=S(P.ELSE),Mo=S(P.ENUMERATION),wo=S(P.EXPORT),Ko=S(P.IF),go=S(P.IMPORT),Uo=S(P.INTO),yo=S(P.IS),Yo=S(P.LOOP),Go=S(P.MUTABLE),Ho=S(P.NATIVE),jo=S(P.OBJECT),xo=S(P.PROCEDURE),Fo=S(P.RETURN),Xo=S(P.SELF),Vo=S(P.TEMPLATE),V=0,Xt=1,Vt=2,zt=1,Jt=2,Qt=1,Zt=2,Wt=1,qt=2,$t=1,es=2,ts=1,ss=2,ns=1,rs=2,zo=0,De=1,B=0,os=1,rt=2,ot=3,it=4,is=5,H=6,ct=7,at=8,ut=9,lt=10,Et=11,ht=12,_t=13,j=14,ft=15,bt=16,oe=17,Lt=18,cs=19,te=20,ie=21,as=22,us=1,ls=2,Es=3,hs=4,Me=5,we=6,_s=7,fs=1,Ke=2,bs=3,Ls=4,ce=5,ge=6,Ue=7,ms=8,ae=9,Os=1,ps=2,As=3,Ts=4,Ns=5,ds=1,Rs=2,ks=3,Is=4,ye=5,Ye=6,Ge=7,vs=8,Bs=1,Cs=2,Ps=3,Ss=4,He=5,je=6,Ds=7,Ms=1,ws=2,Ks=3,gs=4,xe=5,Fe=6,Us=7,ys=1,Ys=2,Gs=1,Xe=2,Hs=3,js=1,Ve=2,xs=3,Fs=4,Xs=5,Vs=6,ze=7,Je=8,zs=9,Js=10,Qs=11,Zs=1,Ws=2,ue=3,qs=4,x=1,$s=2,en=3,Qe=4,Ze=5,tn=6,sn=1,nn=2,rn=3,We=4,Jo=5,on=6,qe=7,cn=8,an=9,$e=10,F=1,et=2,un=3,ln=1,En=2,hn=3,_n=4,fn=5,tt=6,bn=7,Ln=1,mn=2,On=3,pn=4,An=5,Tn=6,st=7,Nn=8,dn=9,le=1,Rn=2,kn=1,In=2,vn=3,Qo=4,Zo=5,nt=6,Bn=7,Cn=8,Pn=1,Sn=2,Dn=3;var se=1,Mn=2,wn=3,Kn=4,gn=5,Un=6,yn=7,Ee=1,Yn=2,he=3,Gn=4,_e=1,Hn=2,fe=3,jn=4,xn=5,Fn=6,be=7,Xn=8,Wo=Object.freeze({array:So,situation:rt}),Le=Object.freeze({array:Mo,situation:ct}),qo=Object.freeze({array:wo,situation:at}),$o=Object.freeze({array:Ko,situation:it}),ei=Object.freeze({array:go,situation:ut}),ti=Object.freeze({array:Yo,situation:lt}),me=Object.freeze({array:Go,situation:Et}),si=Object.freeze({array:Ho,situation:ht}),mt=Object.freeze({array:jo,situation:ft}),Oe=Object.freeze({array:xo,situation:bt}),ni=Object.freeze({array:Fo,situation:ot}),zn=Object.freeze({array:Xo,situation:_t}),ri=Object.freeze({array:Vo,situation:Lt}),oi=Object.freeze([Le,mt,Oe]),ii=Object.freeze([zn]),ci=Object.freeze([Le,Oe]),ai=Object.freeze([Oe]),ui=Object.freeze([me,zn]),li=Object.freeze([Le,qo,ei,me,si,mt,Oe,ri]),Ei=Object.freeze([Wo,$o,me,ti,ni]),hi=Object.freeze([Le,mt]),z=1,J=2,Ot=class{constructor(){this.continueParse=!1,this.extraLineBreak=!0,this.foundError=!1,this.offset=0,this.root={type:I.MODULE,items:[]},this.events=new Map,this.emitter=new Vn.default,this.emitter.on("done",a=>{(this.events.get("done")||[]).forEach(r=>{r(a)})}),this.emitter.on("error",()=>{(this.events.get("error")||[]).forEach(s=>{s()})}),this.data=Object.seal({item:this.root,indentation:0,situations:Object.seal({general:os,blockExport:B,blockImport:B,blockLoop:B,blockMutable:B,blockNative:B,blockSelf:B,commandBreak:B,commandReturn:B,condition:B,constraintsList:B,declaration:B,enumeration:B,nameList:B,object:B,procedure:B,statementsList:B,template:B,typeName:B,typePair:B,typesList:B,value:B}),flags:Object.seal({enumeration:V,blockExport:V,blockImport:V,blockMutable:V,blockNative:V,blockSelf:V,procedure:V}),parents:Object.seal({blockMutable:zo})}),this.history=[],Object.seal(this)}on(a,s){if(Ot.SET_EVENTS.has(a)){let r=this.events.get(a)||[];r.push(s),this.events.set(a,r)}}feed(a,s,r,_){if(this.foundError)return;let{data:o}=this,{situations:i}=o,t=s[r];if(t!==A.HASHTAG){if(t===A.LINE_BREAK){if(this.offset=a+1|0,this.extraLineBreak)return;this.extraLineBreak=!0}else this.extraLineBreak=!1;for(this.continueParse=!0;this.continueParse;)switch(this.continueParse=!1,i.general){case at:{this.feedBlockExport(a,s,r,_);break}case ut:{this.feedBlockImport(a,s,r,_);break}case lt:{this.feedBlockLoop(a,s,r,_);break}case Et:{this.feedBlockMutable(a,s,r,_);break}case ht:{this.feedBlockNative(a,s,r,_);break}case _t:{this.feedBlockSelf(a,s,r,_);break}case rt:{this.feedCommandBreak(a,s,r,_);break}case ot:{this.feedCommandReturn(a,s,r,_);break}case it:{this.feedCondition(a,s,r,_);break}case is:{this.feedConstraintsList(a,s,r,_);break}case H:{this.feedDeclaration(a,s,r,_);break}case ct:{this.feedEnumeration(a,s,r,_);break}case j:{this.feedNameList(a,s,r,_);break}case ft:{this.feedObject(a,s,r,_);break}case bt:{this.feedProcedure(a,s,r,_);break}case os:{this.feedRoot(a,s,r,_);break}case oe:{this.feedStatementsList(a,s,r,_);break}case Lt:{this.feedTemplate(a,s,r,_);break}case cs:{this.feedTypeName(a,s,r,_);break}case te:{this.feedTypePair(a,s,r,_);break}case ie:{this.feedTypesList(a,s,r,_);break}case as:{this.feedValue(a,s,r,_);break}}}}feedBlockExport(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.blockExport){case us:{let{item:c}=o,h={type:I.EXPORT,items:[]};c.push(h),o.item=h,t.blockExport=ls;break}case ls:{if(s[r]===A.COLON){i.blockExport=Vt,t.blockExport=Es;return}i.blockExport=Xt,t.blockExport=we,this.continueParse=!0;break}case Es:{if(s[r]===A.LINE_BREAK){t.blockExport=hs;return}this.error();break}case hs:{if(this.indentationError(a,z)){this.error();return}o.indentation=this.indentationCalculate(a),t.blockExport=Me,this.continueParse=!0;break}case Me:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,J)){this.error();return}t.blockExport=we,this.continueParse=!0;break}case we:{let{item:c}=o,{items:h}=c;t.blockExport=_s,this.save(),o.item=h;let T=this.keyExpected(s,r,_,oi);if(T){this.keyDispatch(T);return}t.general=H,t.declaration=x,this.continueParse=!0;break}case _s:{switch(i.blockExport){case Xt:{this.undo(),this.undo(),this.continueParse=!0;break}case Vt:{t.blockExport=Me,this.continueParse=!0;break}default:throw U}break}}}feedBlockImport(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.blockImport){case fs:{let{item:c}=o,h={type:I.IMPORT,items:[]};c.push(h),o.item=h,t.blockImport=Ke;break}case Ke:{if(s[r]===A.COLON){i.blockImport=Jt,t.blockImport=bs;return}i.blockImport=zt,t.blockImport=ge,this.continueParse=!0;break}case bs:{if(s[r]===A.LINE_BREAK){t.blockImport=Ls;return}this.error();break}case Ls:{if(this.indentationError(a,z)){this.error();return}o.indentation=this.indentationCalculate(a),t.blockImport=ce,this.continueParse=!0;break}case ce:{if(this.indentationDecrease(a)){let{item:c}=o;switch(c.type){case I.SUBMODULE:{this.undo(),t.blockImport=ae;break}case I.IMPORT:this.undo(),this.undo()}this.continueParse=!0;return}if(this.indentationError(a,J)){this.error();return}t.blockImport=ge,this.continueParse=!0;break}case ge:{let{item:c}=o,{items:h}=c,T={type:I.SUBMODULE,name:[]};h.push(T),t.blockImport=ae,this.save(),o.item=T,t.blockImport=Ue,this.save();let{name:M}=T;o.item=M,t.general=j,t.nameList=F,this.continueParse=!0;break}case Ue:{let c=s[r];if(c===A.LINE_BREAK){this.undo(),t.blockImport=ae,this.continueParse=!0;return}if(c===A.COLON){let{item:T}=o;T.items=[],t.blockImport=Ke,this.continueParse=!0;return}let h=s.subarray(r,r+_|0);if(X(Po,h)){t.blockImport=ms;return}this.error();break}case ms:{let{item:c}=o,h=s.subarray(r,r+_|0),T=y(h);c.alias=T,t.blockImport=Ue;break}case ae:{let{item:c}=o;switch(c.type){case I.SUBMODULE:{t.blockImport=ce;break}case I.IMPORT:{switch(i.blockImport){case zt:{this.undo(),this.undo(),s[r]!==A.LINE_BREAK&&(this.continueParse=!0);break}case Jt:{t.blockImport=ce;break}default:throw U}break}default:throw U}break}default:throw U}}feedBlockLoop(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.blockLoop){case Os:{let{item:c}=o,h={type:I.LOOP,statements:[]};c.push(h),o.item=h,t.blockLoop=ps;break}case ps:{if(s[r]===A.COLON){t.blockLoop=As;return}this.error();break}case As:{if(s[r]===A.LINE_BREAK){t.blockLoop=Ts;return}this.error();break}case Ts:{let{item:c}=o,{statements:h}=c;t.blockLoop=Ns,this.save(),o.item=h,t.general=oe,t.statementsList=le,this.continueParse=!0;break}case Ns:{this.undo(),this.continueParse=!0;break}}}feedBlockMutable(a,s,r,_){let{data:o}=this,{flags:i,parents:t,situations:c}=o;switch(c.blockMutable){case ds:{let{item:h}=o,T={type:I.MUTABLE,items:[]};h.push(T),o.item=T,c.blockMutable=Rs;break}case Rs:{if(s[r]===A.COLON){i.blockMutable=Zt,c.blockMutable=ks;return}i.blockMutable=Qt,c.blockMutable=Ye,this.continueParse=!0;break}case ks:{if(s[r]===A.LINE_BREAK){c.blockMutable=Is;break}this.error();break}case Is:{c.blockMutable=ye,this.continueParse=!0;break}case ye:{c.blockMutable=Ye,this.continueParse=!0;break}case Ye:{let{item:h}=o,{items:T}=h,M=Ge,g=this.keyExpected(s,r,_,ii);if(!g&&t.blockMutable===De&&(M=vs),c.blockMutable=M,this.save(),o.item=T,g){this.keyDispatch(g);return}switch(t.blockMutable){case De:{c.general=te,c.typePair=se;break}default:{c.general=H,c.declaration=x;break}}this.continueParse=!0;break}case Ge:{switch(this.continueParse=!0,i.blockMutable){case Qt:{this.undo(),this.undo();break}case Zt:{c.blockMutable=ye;break}default:throw U}break}case vs:{if(s[r]===A.LINE_BREAK){c.blockMutable=Ge;return}this.error();break}}}feedBlockNative(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.blockNative){case Bs:{let{item:c}=o,h={type:I.NATIVE,items:[]};c.push(h),o.item=h,t.blockNative=Cs;break}case Cs:{if(s[r]===A.COLON){i.blockNative=qt,t.blockNative=Ps;return}i.blockNative=Wt,t.blockNative=je,this.continueParse=!0;break}case Ps:{if(s[r]===A.LINE_BREAK){t.blockNative=Ss;break}this.error();break}case Ss:{t.blockNative=He,this.continueParse=!0;break}case He:{t.blockNative=je,this.continueParse=!0;break}case je:{let{item:c}=o,{items:h}=c;t.blockNative=Ds,this.save(),o.item=h;let T=this.keyExpected(s,r,_,ci);if(T){this.keyDispatch(T);return}t.general=H,t.declaration=x,this.continueParse=!0;break}case Ds:{switch(this.continueParse=!0,i.blockNative){case Wt:{this.undo(),this.undo();break}case qt:{t.blockNative=He;break}default:throw U}break}}}feedBlockSelf(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.blockSelf){case Ms:{let{item:c}=o,h={type:I.SELF,items:[]};c.push(h),o.item=h,t.blockSelf=ws;break}case ws:{if(s[r]===A.COLON){i.blockSelf=es,t.blockSelf=Ks;return}i.blockSelf=$t,t.blockSelf=Fe,this.continueParse=!0;break}case Ks:{if(s[r]===A.LINE_BREAK){t.blockSelf=gs;break}this.error();break}case gs:{t.blockSelf=xe,this.continueParse=!0;break}case xe:{t.blockSelf=Fe,this.continueParse=!0;break}case Fe:{let{item:c}=o,{items:h}=c;t.blockSelf=Us,this.save(),o.item=h;let T=this.keyExpected(s,r,_,ai);if(T){this.keyDispatch(T);return}t.general=H,t.declaration=x,this.continueParse=!0;break}case Us:{switch(this.continueParse=!0,i.blockSelf){case $t:{this.undo(),this.undo();break}case es:{t.blockSelf=xe;break}default:throw U}break}}}feedCommandBreak(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.commandBreak){case ys:{let{item:t}=o,c={type:I.BREAK};t.push(c),i.commandBreak=Ys;break}case Ys:{if(s[r]===A.LINE_BREAK){this.undo();return}this.error();break}}}feedCommandReturn(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.commandReturn){case Gs:{let{item:t}=o,c={type:I.RETURN,values:[]};t.push(c),o.item=c,i.commandReturn=Xe;break}case Xe:{let{item:t}=o,{values:c}=t,h=s.subarray(r,r+_|0),T=y(h);c.push(T),i.commandReturn=Hs;break}case Hs:{let t=s[r];if(t===A.COMMA){i.commandReturn=Xe;return}if(t===A.LINE_BREAK){this.undo();return}this.error();break}}}feedCondition(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.condition){case js:{let{item:t}=o,c={type:I.CONDITION,values:[],branches:[]};t.push(c),o.item=c,i.condition=Ve;break}case Ve:{let{item:t}=o,{values:c}=t,h=s.subarray(r,r+_|0),T=y(h);c.push(T),i.condition=xs;break}case xs:{let t=s[r];if(t===A.COMMA){i.condition=Ve;return}if(t===A.COLON){i.condition=Fs;return}this.error();break}case Fs:{if(s[r]===A.LINE_BREAK){i.condition=Xs;return}this.error();break}case Xs:{o.indentation=this.indentationCalculate(a),i.condition=Vs,this.continueParse=!0;break}case Vs:{if(this.indentationDecrease(a)){this.undo(),this.continueParse=!0;return}let{item:t}=o,{branches:c}=t,h=s.subarray(r,r+_|0);if(X(yo,h)){this.save();let T={type:I.BRANCH_VALUE,values:[],statements:[]};c.push(T),o.item=T,i.condition=ze;return}if(X(Do,h)){this.save();let T={type:I.BRANCH_DEFAULT,statements:[]};c.push(T),o.item=T,i.condition=Je;break}break}case ze:{let{item:t}=o,{values:c}=t,h=s.subarray(r,r+_|0),T=y(h);c.push(T),i.condition=Je;break}case Je:{let t=s[r];if(t===A.COMMA){i.condition=ze;return}if(t===A.COLON){i.condition=zs;return}this.error();break}case zs:{if(s[r]===A.LINE_BREAK){i.condition=Js;return}this.error();break}case Js:{let{item:t}=o,{statements:c}=t;i.condition=Qs,this.save(),o.item=c,i.general=oe,i.statementsList=le,this.continueParse=!0;break}case Qs:{this.undo(),this.continueParse=!0;break}}}feedConstraintsList(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.constraintsList){case Zs:{let{item:t}=o;i.constraintsList=Ws,this.continueParse=!0;break}case Ws:{if(s[r]===A.LEFT_CURLY_BRACKET){i.constraintsList=ue;return}this.error();break}case ue:{let t=s[r];if(t===A.LINE_BREAK)return;if(t===A.RIGHT_CURLY_BRACKET){this.undo();return}i.constraintsList=qs,this.save(),i.general=te,i.typePair=se,this.continueParse=!0;break}case qs:{let t=s[r];if(t===A.RIGHT_CURLY_BRACKET){i.constraintsList=ue,this.continueParse=!0;return}if(t===A.COMMA){i.constraintsList=ue;return}this.error();break}}}feedDeclaration(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.declaration){case x:{let{item:t}=o,c={type:ee,name:[],value:{}};t.push(c),o.item=c;let{name:h}=c;i.declaration=$s,this.save(),o.item=h,i.general=j,i.nameList=F,this.continueParse=!0;break}case $s:{if(s[r]===A.COLON){let{item:h}=o;h.type=I.DECLARATION,i.declaration=en;return}let{item:c}=o;c.type=I.ASSIGNMENT,i.declaration=Qe,this.continueParse=!0;break}case en:{let t=s.subarray(r,r+_|0);if(X(Ft,t)){i.declaration=Ze;return}let{item:c}=o,h={};c.dataType=h,i.declaration=Qe,this.save(),o.item=h,i.general=cs,i.typeName=Pn,this.continueParse=!0;break}case Qe:{let t=s.subarray(r,r+_|0);if(X(Ft,t)){i.declaration=Ze;return}this.error();break}case Ze:{let{item:t}=o,{value:c}=t;i.declaration=tn,this.save(),o.item=c,i.general=as,i.value=_e,this.continueParse=!0;break}case tn:{if(s[r]===A.LINE_BREAK){this.undo();return}this.error();break}}}feedEnumeration(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.enumeration){case sn:{let{item:c}=o,h={type:I.ENUMERATION,name:ee,items:[]};c.push(h),o.item=h,t.enumeration=nn;break}case nn:{let{item:c}=o,h=s.subarray(r,r+_|0),T=y(h);c.name=T,t.enumeration=rn;break}case rn:{let c=s[r];if(c===A.SEMICOLON){i.enumeration=ts,t.enumeration=We;return}if(c===A.COLON){i.enumeration=ss,t.enumeration=We;return}this.error();break}case We:{if(s[r]===A.LINE_BREAK){switch(i.enumeration){case ts:{this.undo(),this.undo();return}case ss:{t.enumeration=on;return}}return}this.error();break}case Jo:break;case on:{if(this.indentationError(a,z)){this.error();return}o.indentation=this.indentationCalculate(a),t.enumeration=qe,this.continueParse=!0;break}case qe:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,J)){this.error();return}t.enumeration=cn,this.continueParse=!0;break}case cn:{let{item:c}=o,{items:h}=c;t.enumeration=qe,this.save();let T=s.subarray(r,r+_|0),M=y(T),g={type:I.LABEL,name:M,items:[]};h.push(g),o.item=g,t.enumeration=an;break}case an:{let c=s[r];if(c===A.LINE_BREAK){t.enumeration=$e,this.continueParse=!0;return}if(c===A.LEFT_PARENTHESIS){let{item:h}=o,{items:T}=h;t.enumeration=$e,this.save(),o.item=T,t.general=ie,t.typesList=Ee,this.continueParse=!0;return}this.error();break}case $e:{if(s[r]===A.LINE_BREAK){this.undo();return}this.error();break}default:throw U}}feedNameList(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.nameList){case F:{i.nameList=et,this.continueParse=!0;break}case et:{let{item:t}=o,c=s.subarray(r,r+_|0),h=y(c);t.push(h),i.nameList=un;break}case un:{if(s[r]===A.DOT){i.nameList=et;return}this.undo(),this.continueParse=!0;break}}}feedObject(a,s,r,_){let{data:o}=this,{parents:i,situations:t}=o;switch(t.object){case ln:{let{item:c}=o,h={type:I.OBJECT,name:ee,items:[]};c.push(h),o.item=h,t.object=En;break}case En:{let{item:c}=o,h=s.subarray(r,r+_|0),T=y(h);c.name=T,t.object=hn;break}case hn:{if(s[r]===A.COLON){t.object=_n;return}this.error();break}case _n:{if(s[r]===A.LINE_BREAK){t.object=fn;return}this.error();break}case fn:{if(this.indentationError(a,z)){this.error();return}o.indentation=this.indentationCalculate(a),t.object=tt,this.continueParse=!0;break}case tt:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,J)){this.error();return}let{item:c}=o,{items:h}=c,T=this.keyExpected(s,r,_,ui);if(T){T===me&&(i.blockMutable=De),this.save(),o.item=h,this.keyDispatch(T);return}t.object=bn,this.save(),o.item=h,t.general=te,t.typePair=se,this.continueParse=!0;break}case bn:{if(s[r]===A.LINE_BREAK){t.object=tt;return}this.error();break}}}feedProcedure(a,s,r,_){let{data:o}=this,{flags:i,situations:t}=o;switch(t.procedure){case Ln:{let{item:c}=o,h={type:I.PROCEDURE,head:{name:ee,inputs:[],outputs:[]},body:[]};c.push(h),o.item=h,t.procedure=mn;break}case mn:{let{item:c}=o,{head:h}=c,T=s.subarray(r,r+_|0),M=y(T);h.name=M,t.procedure=On;break}case On:{let{item:c}=o,{head:h}=c,{inputs:T}=h;t.procedure=pn,this.save(),o.item=T,t.general=ie,t.typesList=Ee,this.continueParse=!0;break}case pn:{let c=s.subarray(r,r+_|0);if(X(Uo,c)){t.procedure=An;return}this.error();break}case An:{let{item:c}=o,{head:h}=c,{outputs:T}=h;t.procedure=Tn,this.save(),o.item=T,t.general=ie,t.typesList=Ee,this.continueParse=!0;break}case Tn:{let c=s[r];if(c===A.SEMICOLON){i.procedure=ns,t.procedure=st;return}if(c===A.COLON){i.procedure=rs,t.procedure=st;return}this.error();break}case st:{if(s[r]===A.LINE_BREAK)switch(i.procedure){case ns:{this.undo(),this.undo();return}case rs:{t.procedure=Nn;return}default:throw U}this.error();break}case Nn:{let{item:c}=o,{body:h}=c;t.procedure=dn,this.save(),o.item=h,t.general=oe,t.statementsList=le,this.continueParse=!0;break}case dn:{this.undo(),this.undo(),this.continueParse=!0;break}}}feedRoot(a,s,r,_){let{data:o}=this,{situations:i}=o,{item:t}=o,{items:c}=t;this.save(),o.item=c;let h=this.keyExpected(s,r,_,li);if(h){this.keyDispatch(h);return}i.general=H,i.declaration=x,this.continueParse=!0}feedStatementsList(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.statementsList){case le:{if(this.indentationError(a,z)){this.error();return}o.indentation=this.indentationCalculate(a),i.statementsList=Rn,this.continueParse=!0;break}case Rn:{if(this.indentationDecrease(a)){this.undo(),this.continueParse=!0;return}if(this.indentationError(a,J)){this.error();return}this.save();let t=this.keyExpected(s,r,_,Ei);if(t){this.keyDispatch(t);return}i.general=H,i.declaration=x,this.continueParse=!0;break}}}feedTemplate(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.template){case kn:{let{item:t}=o,c={type:I.TEMPLATE,constraints:[],items:[]};t.push(c),o.item=c,i.template=In;break}case In:{if(s[r]===A.LEFT_CURLY_BRACKET){i.template=vn,this.save();let{item:c}=o,{constraints:h}=c;o.item=h,i.general=is,i.constraintsList=Zs,this.continueParse=!0;return}this.error();break}case vn:{let t=s[r];if(t===A.COLON){i.template=Qo;return}if(t===A.LINE_BREAK){i.template=nt;return}break}case Zo:{if(this.indentationError(a,z)){this.error();return}i.template=nt,this.continueParse=!0;break}case nt:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,J)){this.error();return}i.template=Bn,this.continueParse=!0;break}case Bn:{let{item:t}=o,{items:c}=t;i.template=Cn,this.save(),o.item=c;let h=this.keyExpected(s,r,_,hi);if(h){this.keyDispatch(h);return}i.general=H,i.declaration=x,this.continueParse=!0;break}case Cn:break}}feedTypesList(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.typesList){case Ee:{i.typesList=Yn,this.continueParse=!0;break}case Yn:{if(s[r]===A.LEFT_PARENTHESIS){i.typesList=he;return}this.error();break}case he:{let t=s[r];if(t===A.LINE_BREAK)return;if(t===A.RIGHT_PARENTHESIS){this.undo();return}i.typesList=Gn,this.save(),i.general=te,i.typePair=se,this.continueParse=!0;break}case Gn:{let t=s[r];if(t===A.RIGHT_PARENTHESIS){i.typesList=he,this.continueParse=!0;return}if(t===A.COMMA){i.typesList=he;return}this.error();break}}}feedTypeName(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.typeName){case Pn:{let{item:t}=o,c=[];t.name=c,i.typeName=Sn,this.save(),o.item=c,i.general=j,i.nameList=F,this.continueParse=!0;break}case Sn:{if(s[r]===A.LEFT_SQUARE_BRACKET){let{item:c}=o,h=[];c.array=h,i.typeName=Dn;return}this.undo(),this.continueParse=!0;break}case Dn:{if(s[r]===A.RIGHT_SQUARE_BRACKET){this.undo();return}let{item:c}=o,{array:h}=c;this.save(),o.item=h,i.general=j,i.nameList=F;return}}}feedTypePair(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.typePair){case se:{let{item:t}=o,c={type:I.TYPE_PAIR,key:ee,value:[]};t.push(c),o.item=c,i.typePair=Mn,this.continueParse=!0;break}case Mn:{let{item:t}=o,c=s.subarray(r,r+_|0),h=y(c);t.key=h,i.typePair=wn;break}case wn:{if(s[r]===A.COLON){i.typePair=Kn;return}this.error();break}case Kn:{let{item:t}=o,{value:c}=t;i.typePair=gn,this.save(),o.item=c,i.general=j,i.nameList=F,this.continueParse=!0;break}case gn:{if(s[r]===A.LEFT_SQUARE_BRACKET){i.typePair=Un,this.continueParse=!0;return}this.undo(),this.continueParse=!0;break}case Un:{if(s[r]===A.RIGHT_SQUARE_BRACKET){this.undo();return}let{item:c}=o;c.array=[];let{array:h}=c;i.typePair=yn,this.save(),o.item=h,i.general=j,i.nameList=F;return}case yn:{if(s[r]===A.RIGHT_SQUARE_BRACKET){this.undo();return}this.error();return}}}feedValue(a,s,r,_){let{data:o}=this,{situations:i}=o;switch(i.value){case _e:{let{item:t}=o;if(s[r]===A.LEFT_SQUARE_BRACKET){t.type=I.ARRAY,i.value=Hn;return}let h=[];t.name=h,i.value=xn,this.save(),o.item=h,i.general=j,i.nameList=F,this.continueParse=!0;break}case Hn:{let{item:t}=o,c=[];t.values=c,this.save(),o.item=c,i.value=fe,this.continueParse=!0;break}case fe:{let{item:t}=o,c=s[r];if(c===A.LINE_BREAK)return;if(c===A.RIGHT_SQUARE_BRACKET){this.undo(),this.undo();return}i.value=jn,this.save();let h={};t.push(h),o.item=h,i.value=_e,this.continueParse=!0;break}case jn:{let t=s[r];if(t===A.COMMA){i.value=fe;return}if(t===A.RIGHT_SQUARE_BRACKET){i.value=fe,this.continueParse=!0;return}this.error();break}case xn:{let{item:t}=o;if(s[r]===A.LEFT_PARENTHESIS){t.type=I.EXPRESSION,i.value=Fn;return}t.type=I.LITERAL,this.undo(),this.continueParse=!0;break}case Fn:{let{item:t}=o,c=[];t.inputs=c,this.save(),o.item=c,i.value=be,this.continueParse=!0;break}case be:{let{item:t}=o,c=s[r];if(c===A.LINE_BREAK)return;if(c===A.RIGHT_PARENTHESIS){this.undo(),this.undo();return}i.value=Xn,this.save();let h={};t.push(h),o.item=h,i.value=_e,this.continueParse=!0;break}case Xn:{let t=s[r];if(t===A.COMMA){i.value=be;return}if(t===A.RIGHT_PARENTHESIS){i.value=be,this.continueParse=!0;return}this.error();break}}}indentationCalculate(a){let{offset:s}=this;return a-s|0}indentationDecrease(a){let{data:s}=this,{indentation:r}=s;return this.indentationCalculate(a)<r}indentationError(a,s){let{data:r}=this,{indentation:_}=r,o=this.indentationCalculate(a);switch(s){case z:return o<=_;case J:return o!==_}throw U}keyDispatch(a){let{situations:s}=this.data,{situation:r}=a;switch(this.save(),s.general=r,this.continueParse=!0,r){case at:{s.blockExport=us;break}case ut:{s.blockImport=fs;break}case lt:{s.blockLoop=Os;break}case Et:{s.blockMutable=ds;break}case ht:{s.blockNative=Bs;break}case _t:{s.blockSelf=Ms;break}case rt:{s.commandBreak=ys;break}case ot:{s.commandReturn=Gs;break}case it:{s.condition=js;break}case ct:{s.enumeration=sn;break}case ft:{s.object=ln;break}case bt:{s.procedure=Ln;break}case Lt:{s.template=kn;break}default:throw U}}keyExpected(a,s,r,_){let o=a.subarray(s,s+r|0),i=c=>X(c.array,o);return _.find(i)}done(){this.foundError||this.emitter.emit("done",this.root)}close(){}save(){let{data:a}=this,s={flags:Object.assign({},a.flags),item:a.item,indentation:a.indentation|0,situations:Object.assign({},a.situations)};this.history.push(s)}undo(){let{data:a}=this,s=this.history.pop(),{flags:r,item:_,indentation:o,situations:i}=s;a.flags=Object.assign(a.flags,r),a.item=_,a.indentation=o,a.situations=Object.assign(a.situations,i)}error(){this.foundError=!0,this.emitter.emit("error")}},Q=Ot;Bt(Q,"SET_EVENTS",new Set(["done","error"]));Object.values(Q).forEach(Object.freeze);Object.freeze(Q);Object.freeze(Object.getPrototypeOf(Q));var vi=Q;export{vi as default};
