var ur=Object.create;var Pe=Object.defineProperty;var lr=Object.getOwnPropertyDescriptor;var Er=Object.getOwnPropertyNames;var _r=Object.getPrototypeOf,hr=Object.prototype.hasOwnProperty;var fr=(O,a,s)=>a in O?Pe(O,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):O[a]=s;var Mt=(O,a)=>()=>(a||O((a={exports:{}}).exports,a),a.exports);var mr=(O,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of Er(a))!hr.call(O,_)&&_!==s&&Pe(O,_,{get:()=>a[_],enumerable:!(n=lr(a,_))||n.enumerable});return O};var br=(O,a,s)=>(s=O!=null?ur(_r(O)):{},mr(a||!O||!O.__esModule?Pe(s,"default",{value:O,enumerable:!0}):s,O));var wt=(O,a,s)=>(fr(O,typeof a!="symbol"?a+"":a,s),s);var Kt=Mt((Ut,gt)=>{(function(O){var a=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(i){return Object.prototype.toString.call(i)==="[object Array]"},n=10,_=typeof process=="object"&&typeof process.nextTick=="function",r=typeof Symbol=="function",c=typeof Reflect=="object",t=typeof setImmediate=="function",o=t?setImmediate:setTimeout,l=r?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var i=Object.getOwnPropertyNames(e);return i.push.apply(i,Object.getOwnPropertySymbols(e)),i}:Object.keys;function p(){this._events={},this._conf&&I.call(this,this._conf)}function I(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==O&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function w(e,i){var u="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(u+=" Event name: "+i+"."),typeof process<"u"&&process.emitWarning){var E=new Error(u);E.name="MaxListenersExceededWarning",E.emitter=this,E.count=e,process.emitWarning(E)}else console.error(u),console.trace&&console.trace()}var y=function(e,i,u){var E=arguments.length;switch(E){case 0:return[];case 1:return[e];case 2:return[e,i];case 3:return[e,i,u];default:for(var h=new Array(E);E--;)h[E]=arguments[E];return h}};function oe(e,i){for(var u={},E,h=e.length,f=i?i.length:0,m=0;m<h;m++)E=e[m],u[E]=m<f?i[m]:O;return u}function W(e,i,u){this._emitter=e,this._target=i,this._listeners={},this._listenersCount=0;var E,h;if((u.on||u.off)&&(E=u.on,h=u.off),i.addEventListener?(E=i.addEventListener,h=i.removeEventListener):i.addListener?(E=i.addListener,h=i.removeListener):i.on&&(E=i.on,h=i.off),!E&&!h)throw Error("target does not implement any known event API");if(typeof E!="function")throw TypeError("on method must be a function");if(typeof h!="function")throw TypeError("off method must be a function");this._on=E,this._off=h;var f=e._observers;f?f.push(this):e._observers=[this]}Object.assign(W.prototype,{subscribe:function(e,i,u){var E=this,h=this._target,f=this._emitter,m=this._listeners,A=function(){var b=y.apply(null,arguments),L={data:b,name:i,original:e};if(u){var N=u.call(h,L);N!==!1&&f.emit.apply(f,[L.name].concat(b));return}f.emit.apply(f,[i].concat(b))};if(m[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,f._newListener&&f._removeListener&&!E._onNewListener?(this._onNewListener=function(b){b===i&&m[e]===null&&(m[e]=A,E._on.call(h,e,A))},f.on("newListener",this._onNewListener),this._onRemoveListener=function(b){b===i&&!f.hasListeners(b)&&m[e]&&(m[e]=null,E._off.call(h,e,A))},m[e]=null,f.on("removeListener",this._onRemoveListener)):(m[e]=A,E._on.call(h,e,A))},unsubscribe:function(e){var i=this,u=this._listeners,E=this._emitter,h,f,m=this._off,A=this._target,b;if(e&&typeof e!="string")throw TypeError("event must be a string");function L(){i._onNewListener&&(E.off("newListener",i._onNewListener),E.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var N=Pt.call(E,i);E._observers.splice(N,1)}if(e){if(h=u[e],!h)return;m.call(A,e,h),delete u[e],--this._listenersCount||L()}else{for(f=l(u),b=f.length;b-- >0;)e=f[b],m.call(A,e,u[e]);this._listeners={},this._listenersCount=0,L()}}});function ie(e,i,u,E){var h=Object.assign({},i);if(!e)return h;if(typeof e!="object")throw TypeError("options must be an object");var f=Object.keys(e),m=f.length,A,b,L;function N(k){throw Error('Invalid "'+A+'" option value'+(k?". Reason: "+k:""))}for(var M=0;M<m;M++){if(A=f[M],!E&&!a.call(i,A))throw Error('Unknown "'+A+'" option');b=e[A],b!==O&&(L=u[A],h[A]=L?L(b,N):b)}return h}function Ct(e,i){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&i("value must be a constructor"),e}function vt(e){var i="value must be type of "+e.join("|"),u=e.length,E=e[0],h=e[1];return u===1?function(f,m){if(typeof f===E)return f;m(i)}:u===2?function(f,m){var A=typeof f;if(A===E||A===h)return f;m(i)}:function(f,m){for(var A=typeof f,b=u;b-- >0;)if(A===e[b])return f;m(i)}}var Ie=vt(["function"]),rr=vt(["object","function"]);function Bt(e,i,u){var E,h,f=0,m,A=new e(function(b,L,N){u=ie(u,{timeout:0,overload:!1},{timeout:function(v,U){return v*=1,(typeof v!="number"||v<0||!Number.isFinite(v))&&U("timeout must be a positive number"),v}}),E=!u.overload&&typeof e.prototype.cancel=="function"&&typeof N=="function";function M(){h&&(h=null),f&&(clearTimeout(f),f=0)}var k=function(v){M(),b(v)},C=function(v){M(),L(v)};E?i(k,C,N):(h=[function(v){C(v||Error("canceled"))}],i(k,C,function(v){if(m)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof v!="function")throw TypeError("onCancel callback must be a function");h.push(v)}),m=!0),u.timeout>0&&(f=setTimeout(function(){var v=Error("timeout");v.code="ETIMEDOUT",f=0,A.cancel(v),L(v)},u.timeout))});return E||(A.cancel=function(b){if(h){for(var L=h.length,N=1;N<L;N++)h[N](b);h[0](b),h=null}}),A}function Pt(e){var i=this._observers;if(!i)return-1;for(var u=i.length,E=0;E<u;E++)if(i[E]._target===e)return E;return-1}function P(e,i,u,E,h){if(!u)return null;if(E===0){var f=typeof i;if(f==="string"){var m,A,b=0,L=0,N=this.delimiter,M=N.length;if((A=i.indexOf(N))!==-1){m=new Array(5);do m[b++]=i.slice(L,A),L=A+M;while((A=i.indexOf(N,L))!==-1);m[b++]=i.slice(L),i=m,h=b}else i=[i],h=1}else f==="object"?h=i.length:(i=[i],h=1)}var k=null,C,v,U,Ce,ve,q=i[E],Be=i[E+1],j,g;if(E===h)u._listeners&&(typeof u._listeners=="function"?(e&&e.push(u._listeners),k=[u]):(e&&e.push.apply(e,u._listeners),k=[u]));else if(q==="*"){for(j=l(u),A=j.length;A-- >0;)C=j[A],C!=="_listeners"&&(g=P(e,i,u[C],E+1,h),g&&(k?k.push.apply(k,g):k=g));return k}else if(q==="**"){for(ve=E+1===h||E+2===h&&Be==="*",ve&&u._listeners&&(k=P(e,i,u,h,h)),j=l(u),A=j.length;A-- >0;)C=j[A],C!=="_listeners"&&(C==="*"||C==="**"?(u[C]._listeners&&!ve&&(g=P(e,i,u[C],h,h),g&&(k?k.push.apply(k,g):k=g)),g=P(e,i,u[C],E,h)):C===Be?g=P(e,i,u[C],E+2,h):g=P(e,i,u[C],E,h),g&&(k?k.push.apply(k,g):k=g));return k}else u[q]&&(k=P(e,i,u[q],E+1,h));if(v=u["*"],v&&P(e,i,v,E+1,h),U=u["**"],U)if(E<h)for(U._listeners&&P(e,i,U,h,h),j=l(U),A=j.length;A-- >0;)C=j[A],C!=="_listeners"&&(C===Be?P(e,i,U[C],E+2,h):C===q?P(e,i,U[C],E+1,h):(Ce={},Ce[C]=U[C],P(e,i,{"**":Ce},E+1,h)));else U._listeners?P(e,i,U,h,h):U["*"]&&U["*"]._listeners&&P(e,i,U["*"],h,h);return k}function or(e,i,u){var E=0,h=0,f,m=this.delimiter,A=m.length,b;if(typeof e=="string")if((f=e.indexOf(m))!==-1){b=new Array(5);do b[E++]=e.slice(h,f),h=f+A;while((f=e.indexOf(m,h))!==-1);b[E++]=e.slice(h)}else b=[e],E=1;else b=e,E=e.length;if(E>1){for(f=0;f+1<E;f++)if(b[f]==="**"&&b[f+1]==="**")return}var L=this.listenerTree,N;for(f=0;f<E;f++)if(N=b[f],L=L[N]||(L[N]={}),f===E-1)return L._listeners?(typeof L._listeners=="function"&&(L._listeners=[L._listeners]),u?L._listeners.unshift(i):L._listeners.push(i),!L._listeners.warned&&this._maxListeners>0&&L._listeners.length>this._maxListeners&&(L._listeners.warned=!0,w.call(this,L._listeners.length,N))):L._listeners=i,!0;return!0}function St(e,i,u,E){for(var h=l(e),f=h.length,m,A,b,L=e._listeners,N;f-- >0;)A=h[f],m=e[A],A==="_listeners"?b=u:b=u?u.concat(A):[A],N=E||typeof A=="symbol",L&&i.push(N?b:b.join(this.delimiter)),typeof m=="object"&&St.call(this,m,i,b,N);return i}function Re(e){for(var i=l(e),u=i.length,E,h,f;u-- >0;)h=i[u],E=e[h],E&&(f=!0,h!=="_listeners"&&!Re(E)&&delete e[h]);return f}function Dt(e,i,u){this.emitter=e,this.event=i,this.listener=u}Dt.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function ir(e,i,u){if(u===!0)h=!0;else if(u===!1)E=!0;else{if(!u||typeof u!="object")throw TypeError("options should be an object or true");var E=u.async,h=u.promisify,f=u.nextTick,m=u.objectify}if(E||f||h){var A=i,b=i._origin||i;if(f&&!_)throw Error("process.nextTick is not supported");h===O&&(h=i.constructor.name==="AsyncFunction"),i=function(){var L=arguments,N=this,M=this.event;return h?f?Promise.resolve():new Promise(function(k){o(k)}).then(function(){return N.event=M,A.apply(N,L)}):(f?process.nextTick:o)(function(){N.event=M,A.apply(N,L)})},i._async=!0,i._origin=b}return[i,m?new Dt(this,e,i):this]}function d(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,I.call(this,e)}d.EventEmitter2=d,d.prototype.listenTo=function(e,i,u){if(typeof e!="object")throw TypeError("target musts be an object");var E=this;u=ie(u,{on:O,off:O,reducers:O},{on:Ie,off:Ie,reducers:rr});function h(f){if(typeof f!="object")throw TypeError("events must be an object");var m=u.reducers,A=Pt.call(E,e),b;A===-1?b=new W(E,e,u):b=E._observers[A];for(var L=l(f),N=L.length,M,k=typeof m=="function",C=0;C<N;C++)M=L[C],b.subscribe(M,f[M]||M,k?m:m&&m[M])}return s(i)?h(oe(i)):h(typeof i=="string"?oe(i.split(/\s+/)):i),this},d.prototype.stopListeningTo=function(e,i){var u=this._observers;if(!u)return!1;var E=u.length,h,f=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;E-- >0;)h=u[E],(!e||h._target===e)&&(h.unsubscribe(i),f=!0);return f},d.prototype.delimiter=".",d.prototype.setMaxListeners=function(e){e!==O&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},d.prototype.getMaxListeners=function(){return this._maxListeners},d.prototype.event="",d.prototype.once=function(e,i,u){return this._once(e,i,!1,u)},d.prototype.prependOnceListener=function(e,i,u){return this._once(e,i,!0,u)},d.prototype._once=function(e,i,u,E){return this._many(e,1,i,u,E)},d.prototype.many=function(e,i,u,E){return this._many(e,i,u,!1,E)},d.prototype.prependMany=function(e,i,u,E){return this._many(e,i,u,!0,E)},d.prototype._many=function(e,i,u,E,h){var f=this;if(typeof u!="function")throw new Error("many only accepts instances of Function");function m(){return--i===0&&f.off(e,m),u.apply(this,arguments)}return m._origin=u,this._on(e,m,E,h)},d.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e=arguments[0],i,u=this.wildcard,E,h,f,m,A;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(u&&(i=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(h=e.length,r){for(f=0;f<h;f++)if(typeof e[f]=="symbol"){A=!0;break}}A||(e=e.join(this.delimiter))}var b=arguments.length,L;if(this._all&&this._all.length)for(L=this._all.slice(),f=0,h=L.length;f<h;f++)switch(this.event=e,b){case 1:L[f].call(this,e);break;case 2:L[f].call(this,e,arguments[1]);break;case 3:L[f].call(this,e,arguments[1],arguments[2]);break;default:L[f].apply(this,arguments)}if(u)L=[],P.call(this,L,i,this.listenerTree,0,h);else if(L=this._events[e],typeof L=="function"){switch(this.event=e,b){case 1:L.call(this);break;case 2:L.call(this,arguments[1]);break;case 3:L.call(this,arguments[1],arguments[2]);break;default:for(E=new Array(b-1),m=1;m<b;m++)E[m-1]=arguments[m];L.apply(this,E)}return!0}else L&&(L=L.slice());if(L&&L.length){if(b>3)for(E=new Array(b-1),m=1;m<b;m++)E[m-1]=arguments[m];for(f=0,h=L.length;f<h;f++)switch(this.event=e,b){case 1:L[f].call(this);break;case 2:L[f].call(this,arguments[1]);break;case 3:L[f].call(this,arguments[1],arguments[2]);break;default:L[f].apply(this,E)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e=arguments[0],i=this.wildcard,u,E,h,f,m,A;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(i&&(u=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(f=e.length,r){for(m=0;m<f;m++)if(typeof e[m]=="symbol"){E=!0;break}}E||(e=e.join(this.delimiter))}var b=[],L=arguments.length,N;if(this._all)for(m=0,f=this._all.length;m<f;m++)switch(this.event=e,L){case 1:b.push(this._all[m].call(this,e));break;case 2:b.push(this._all[m].call(this,e,arguments[1]));break;case 3:b.push(this._all[m].call(this,e,arguments[1],arguments[2]));break;default:b.push(this._all[m].apply(this,arguments))}if(i?(N=[],P.call(this,N,u,this.listenerTree,0)):N=this._events[e],typeof N=="function")switch(this.event=e,L){case 1:b.push(N.call(this));break;case 2:b.push(N.call(this,arguments[1]));break;case 3:b.push(N.call(this,arguments[1],arguments[2]));break;default:for(h=new Array(L-1),A=1;A<L;A++)h[A-1]=arguments[A];b.push(N.apply(this,h))}else if(N&&N.length){if(N=N.slice(),L>3)for(h=new Array(L-1),A=1;A<L;A++)h[A-1]=arguments[A];for(m=0,f=N.length;m<f;m++)switch(this.event=e,L){case 1:b.push(N[m].call(this));break;case 2:b.push(N[m].call(this,arguments[1]));break;case 3:b.push(N[m].call(this,arguments[1],arguments[2]));break;default:b.push(N[m].apply(this,h))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(b)},d.prototype.on=function(e,i,u){return this._on(e,i,!1,u)},d.prototype.prependListener=function(e,i,u){return this._on(e,i,!0,u)},d.prototype.onAny=function(e){return this._onAny(e,!1)},d.prototype.prependAny=function(e){return this._onAny(e,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(e,i){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),i?this._all.unshift(e):this._all.push(e),this},d.prototype._on=function(e,i,u,E){if(typeof e=="function")return this._onAny(e,i),this;if(typeof i!="function")throw new Error("on only accepts instances of Function");this._events||p.call(this);var h=this,f;return E!==O&&(f=ir.call(this,e,i,E),i=f[0],h=f[1]),this._newListener&&this.emit("newListener",e,i),this.wildcard?(or.call(this,e,i,u),h):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),u?this._events[e].unshift(i):this._events[e].push(i),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,w.call(this,this._events[e].length,e))):this._events[e]=i,h)},d.prototype.off=function(e,i){if(typeof i!="function")throw new Error("removeListener only takes instances of Function");var u,E=[];if(this.wildcard){var h=typeof e=="string"?e.split(this.delimiter):e.slice();if(E=P.call(this,null,h,this.listenerTree,0),!E)return this}else{if(!this._events[e])return this;u=this._events[e],E.push({_listeners:u})}for(var f=0;f<E.length;f++){var m=E[f];if(u=m._listeners,s(u)){for(var A=-1,b=0,L=u.length;b<L;b++)if(u[b]===i||u[b].listener&&u[b].listener===i||u[b]._origin&&u[b]._origin===i){A=b;break}if(A<0)continue;return this.wildcard?m._listeners.splice(A,1):this._events[e].splice(A,1),u.length===0&&(this.wildcard?delete m._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,i),this}else(u===i||u.listener&&u.listener===i||u._origin&&u._origin===i)&&(this.wildcard?delete m._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,i))}return this.listenerTree&&Re(this.listenerTree),this},d.prototype.offAny=function(e){var i=0,u=0,E;if(e&&this._all&&this._all.length>0){for(E=this._all,i=0,u=E.length;i<u;i++)if(e===E[i])return E.splice(i,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(E=this._all,this._removeListener)for(i=0,u=E.length;i<u;i++)this.emit("removeListenerAny",E[i]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(e){if(e===O)return!this._events||p.call(this),this;if(this.wildcard){var i=P.call(this,null,e,this.listenerTree,0),u,E;if(!i)return this;for(E=0;E<i.length;E++)u=i[E],u._listeners=null;this.listenerTree&&Re(this.listenerTree)}else this._events&&(this._events[e]=null);return this},d.prototype.listeners=function(e){var i=this._events,u,E,h,f,m;if(e===O){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!i)return[];for(u=l(i),f=u.length,h=[];f-- >0;)E=i[u[f]],typeof E=="function"?h.push(E):h.push.apply(h,E);return h}else{if(this.wildcard){if(m=this.listenerTree,!m)return[];var A=[],b=typeof e=="string"?e.split(this.delimiter):e.slice();return P.call(this,A,b,m,0),A}return i?(E=i[e],E?typeof E=="function"?[E]:E:[]):[]}},d.prototype.eventNames=function(e){var i=this._events;return this.wildcard?St.call(this,this.listenerTree,[],null,e):i?l(i):[]},d.prototype.listenerCount=function(e){return this.listeners(e).length},d.prototype.hasListeners=function(e){if(this.wildcard){var i=[],u=typeof e=="string"?e.split(this.delimiter):e.slice();return P.call(this,i,u,this.listenerTree,0),i.length>0}var E=this._events,h=this._all;return!!(h&&h.length||E&&(e===O?l(E).length:E[e]))},d.prototype.listenersAny=function(){return this._all?this._all:[]},d.prototype.waitFor=function(e,i){var u=this,E=typeof i;return E==="number"?i={timeout:i}:E==="function"&&(i={filter:i}),i=ie(i,{timeout:0,filter:O,handleError:!1,Promise,overload:!1},{filter:Ie,Promise:Ct}),Bt(i.Promise,function(h,f,m){function A(){var b=i.filter;if(!(b&&!b.apply(u,arguments)))if(u.off(e,A),i.handleError){var L=arguments[0];L?f(L):h(y.apply(null,arguments).slice(1))}else h(y.apply(null,arguments))}m(function(){u.off(e,A)}),u._on(e,A,!1)},{timeout:i.timeout,overload:i.overload})};function cr(e,i,u){u=ie(u,{Promise,timeout:0,overload:!1},{Promise:Ct});var E=u.Promise;return Bt(E,function(h,f,m){var A;if(typeof e.addEventListener=="function"){A=function(){h(y.apply(null,arguments))},m(function(){e.removeEventListener(i,A)}),e.addEventListener(i,A,{once:!0});return}var b=function(){L&&e.removeListener("error",L),h(y.apply(null,arguments))},L;i!=="error"&&(L=function(N){e.removeListener(i,b),f(N)},e.once("error",L)),m(function(){L&&e.removeListener("error",L),e.removeListener(i,b)}),e.once(i,b)},{timeout:u.timeout,overload:u.overload})}var ke=d.prototype;if(Object.defineProperties(d,{defaultMaxListeners:{get:function(){return ke._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");ke._maxListeners=e},enumerable:!0},once:{value:cr,writable:!0,configurable:!0}}),Object.defineProperties(ke,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return d});else if(typeof Ut=="object")gt.exports=d;else{var ar=new Function("","return this")();ar.EventEmitter2=d}})()});var Gt=Mt((Ki,yt)=>{yt.exports=Kt()});var sr=br(Gt(),1);var Lr="as",Or="=",Ar="break",Tr="else",pr="enum",Nr="export",dr="if",Ir="import",Rr="->",kr="is",Cr="loop",vr="mut",Br="native",Pr="object",Sr="fn",Dr="return",Mr="self",wr="template",Ur=Object.freeze({ALIAS:Lr,ASSIGN:Or,BREAK:Ar,ELSE:Tr,ENUMERATION:pr,EXPORT:Nr,IF:dr,IMPORT:Ir,INTO:Rr,IS:kr,LOOP:Cr,MUTABLE:vr,NATIVE:Br,OBJECT:Pr,PROCEDURE:Sr,RETURN:Dr,SELF:Mr,TEMPLATE:wr}),Yt=Ur;var gr="array",Kr="assignment",yr="branch-default",Gr="branch-value",Yr="break",Hr="condition",xr="declaration",jr="enumeration",Fr="export",Xr="expression",Vr="import",zr="instance",Jr="label",Qr="literal",Zr="loop",Wr="module",qr="mutable",$r="name-list",eo="native",to="object",so="procedure",no="procedure-call",ro="return",oo="self",io="submodule",co="template",ao="type-pair",uo=Object.freeze({ARRAY:gr,ASSIGNMENT:Kr,BRANCH_DEFAULT:yr,BRANCH_VALUE:Gr,BREAK:Yr,CONDITION:Hr,DECLARATION:xr,ENUMERATION:jr,EXPORT:Fr,EXPRESSION:Xr,IMPORT:Vr,INSTANCE:zr,LABEL:Jr,LITERAL:Qr,LOOP:Zr,MODULE:Wr,MUTABLE:qr,NAME_LIST:$r,NATIVE:eo,OBJECT:to,PROCEDURE:so,PROCEDURE_CALL:no,RETURN:ro,SELF:oo,SUBMODULE:io,TEMPLATE:co,TYPE_PAIR:ao}),Ht=uo;var lo=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),xt=lo;var Eo=Object.freeze([]),_o=Object.freeze({}),ho="",fo="	",mo=`
`,bo="UTF-8",Lo=Object.freeze({EMPTY_ARRAY:Eo,EMPTY_OBJECT:_o,EMPTY_STRING:ho,HORIZONTAL_TAB:fo,LINE_BREAK:mo,UNICODE_TEXT:bo,Codes:xt,Keys:Yt,Types:Ht}),$=Lo;var{EMPTY_STRING:Oo,UNICODE_TEXT:Ue}=$,Ao=44,To=48,po=57,No=46,Io=45,Ro=43,ko=65,Co=90,vo=-1,Bo=1,Po=new TextDecoder(Ue),So=new TextEncoder,Do=(O,a,s=0,n=O.length|0,_=0,r=a.length|0)=>{for(_=_|0,s=s|0,r=r|0,n=n|0;;){let c=s>=n,t=_>=r;if(c||t)break;let l=O[s],p=a[_];if(s=s+1|0,_=_+1|0,l<p)return vo;if(l>p)return Bo}return 0},Mo=(O,a,s=0,n=O.length|0,_=0,r=a.length|0)=>{for(_=_|0,s=s|0,r=r|0,n=n|0;;){let c=_>=r,t=s>=n;if(c||t)break;a[_]=O[s],_=_+1|0,s=s+1|0}},wo=(O,a,s=0,n=O.length|0,_=0,r=a.length|0)=>{s=s|0,_=_|0,n=n|0,r=r|0;let c=n-s|0,t=r-_|0;if(c!==t)return!1;for(;;){let o=s>=n,l=_>=r;if(o||l)break;let I=O[s],w=a[_];if(s=s+1|0,_=_+1|0,I!==w)return!1}return!0},Uo=O=>{O=O>>>0;let a=0,s=0;for(;s=(s<<1|1)>>>0,!(s>O);)a=a+1|0;return a},Xt=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),Me=(O,a,s,n)=>{for(O=O>>>0,n=n??a.length|0,s=s|0,n=n|0;O>0&&n>s;)n=n-1|0,a[n]=Xt[O&15],O=O>>>4},go=(O,a,s,n)=>{let _=s|0,r=s+n|0;if(n===0)return!1;let c=a[_];for((c===Ro||c===Io)&&(_=_+1|0);_<r;){let t=a[_];if(_=_+1|0,!(To<=t&&t<=po||(No===t||Ao===t)))return!1}return!0},Ko=O=>{let a=O>=ko,s=O<=Co;return a&&s},Vt=128,zt=127,yo=-1,we=64,ge=O=>{O=O|0;let a=[];for(;;){let s=O&zt;O=O>>7;let n=O===0,_=(s&we)===0,r=n&&_,c=O===-1,t=(s&we)!==0;if(r||c&&t){a.push(s);break}s=s|Vt,a.push(s)}return a},Jt=(O,a)=>{a=a|0;let s=0,n=0;for(;;){let _=O[a]|0;a=a+1|0;let r=(_&zt)<<n;if(n=n+7|0,s=s|r,(_&Vt)===0){let t=(_&we)!==0,o=n<32;if(t&&o){let p=yo<<n;s=s|p}break}}return s},Go=O=>Po.decode(O),Yo=O=>So.encode(O),Ho=(O=Oo)=>{let a=O.length|0,s=ge(a),n=Buffer.from(O,Ue);return Object.freeze([...s,...n])},xo=(O,a)=>{a=a|0;let s=Jt(O,a),n=ge(s).length;return a=a+n|0,O.subarray(a,a+s|0).toString(Ue)},jo=58,Fo=46,ee=32,Se=48,Xo=67,F=new Uint8Array(Xo),jt=F.subarray(0,8),ce=F.subarray(10,49),Ft=F.subarray(51,68),De=16,Vo=2;F[8]=jo;F[9]=ee;F[49]=ee;F[50]=ee;var zo=(O,a)=>{a=a??console.log;let s=32,n=126,_=O.length|0,r=0;for(;_>0;){jt.fill(Se),Me(r,jt),ce.fill(ee),Ft.fill(ee);let c=_>=De?De:_;_=_-De|0;let t=0,o=0;for(let p=1;p<=c;p=p+1|0){let I=O[r]&255;ce[t+0|0]=Se,ce[t+1|0]=Se,Me(I,ce,t,t+2|0);let w=Fo;s<=I&&I<=n&&(w=I),Ft[o]=w,r=r+1|0,t=t+2|0,o=o+1|0,p%Vo===0&&(t=t+1|0)}let l=String.fromCodePoint(...F);a(l)}},Jo=function*(O,a){let s=O.length|0,n=a.length|0,_=0;for(;_<s&&_<n;){let r=O[_],c=a[_];yield[r,c],_=_+1|0}},Qo=function*(O,a,s){let n=O.length|0,_=a.length|0,r=s.length|0,c=0;for(;c<n&&c<_&&c<r;){let t=O[c],o=a[c],l=s[c];yield[t,o,l],c=c+1|0}},Zo=Object.freeze({ARRAY_COMPARE:Do,ARRAY_COPY:Mo,ARRAY_EQUAL:wo,BIT_DEPTH:Uo,HEX_DIGITS:Xt,HEX_ENCODE:Me,IS_NUMBER:go,IS_UPPERCASE:Ko,LEB128_DECODE:Jt,LEB128_ENCODE:ge,UTF8_DECODE:Go,UTF8_ENCODE:Yo,WASM_STRING_ENCODE:Ho,WASM_STRING_DECODE:xo,XXD_DUMP_HEX:zo,ZIP2:Jo,ZIP3:Qo}),Qt=Zo;var{Keys:S,Types:R,Codes:T}=$,{EMPTY_STRING:te,UNICODE_TEXT:Qi}=$,{ARRAY_EQUAL:Wo,IS_UPPERCASE:qo,UTF8_DECODE:G,UTF8_ENCODE:D}=Qt,K=new Error("unreachable code reached"),Y=Wo,ae=D(S.ASSIGN),$o=D(S.ALIAS),ei=D(S.BREAK),ti=D(S.ELSE),si=D(S.ENUMERATION),ni=D(S.EXPORT),ri=D(S.IF),oi=D(S.IMPORT),ii=D(S.INTO),Zt=D(S.IS),ci=D(S.LOOP),ai=D(S.MUTABLE),ui=D(S.NATIVE),li=D(S.OBJECT),Ei=D(S.PROCEDURE),_i=D(S.RETURN),hi=D(S.SELF),fi=D(S.TEMPLATE),X=0,Wt=1,qt=2,$t=1,es=2,ts=1,ss=2,ns=1,rs=2,os=1,is=2,cs=1,mi=2,as=1,us=2,ls=1,Es=2,bi=0,Ke=1,B=0,_s=1,_t=2,ht=3,ft=4,hs=5,V=6,fs=7,mt=8,bt=9,Lt=10,Ot=11,At=12,Tt=13,pt=14,H=15,Nt=16,dt=17,ue=18,It=19,ms=20,se=21,le=22,ye=23,bs=1,Ls=2,Os=3,As=4,Ge=5,Ye=6,Ts=7,ps=1,He=2,Ns=3,ds=4,Ee=5,xe=6,je=7,Is=8,_e=9,Rs=1,ks=2,Cs=3,vs=4,Bs=5,Ps=1,Ss=2,Ds=3,Ms=4,Fe=5,Xe=6,Ve=7,ws=8,Us=1,gs=2,Ks=3,ys=4,ze=5,Je=6,Gs=7,Ys=1,Hs=2,xs=3,js=4,Qe=5,Ze=6,Fs=7,Xs=1,Vs=2,zs=1,We=2,Js=3,Qs=1,qe=2,Zs=3,Ws=4,qs=5,$e=6,et=7,tt=8,$s=9,en=10,tn=11,sn=1,nn=2,he=3,rn=4,z=1,on=2,st=3,nt=4,fe=5,cn=6,an=1,un=2,ln=3,En=1,_n=2,hn=3,rt=4,Li=5,fn=6,ot=7,mn=8,bn=9,it=10,x=1,ct=2,Ln=3,On=1,An=2,Tn=3,pn=4,Nn=5,at=6,dn=7,In=1,Rn=2,kn=3,Cn=4,vn=5,Bn=6,ut=7,Pn=8,Sn=9,me=1,Dn=2,Mn=1,wn=2,Un=3,Oi=4,Ai=5,lt=6,gn=7,Kn=8,yn=1,Gn=2,Yn=3;var ne=1,Hn=2,xn=3,jn=4,Fn=5,Xn=6,Vn=7,be=1,zn=2,Le=3,Jn=4,re=1,Qn=2,Oe=3,Zn=4,Wn=5,Et=6,Ae=7,qn=8,$n=9,Te=10,er=11,tr=12,Ti=Object.freeze({array:ei,situation:_t}),pe=Object.freeze({array:si,situation:mt}),pi=Object.freeze({array:ni,situation:bt}),Ni=Object.freeze({array:ri,situation:ft}),di=Object.freeze({array:oi,situation:Lt}),Ii=Object.freeze({array:ci,situation:Ot}),Ne=Object.freeze({array:ai,situation:At}),Ri=Object.freeze({array:ui,situation:Tt}),Rt=Object.freeze({array:li,situation:Nt}),de=Object.freeze({array:Ei,situation:dt}),ki=Object.freeze({array:_i,situation:ht}),nr=Object.freeze({array:hi,situation:pt}),Ci=Object.freeze({array:fi,situation:It}),vi=Object.freeze([pe,Rt,de]),Bi=Object.freeze([nr]),Pi=Object.freeze([pe,de]),Si=Object.freeze([de]),Di=Object.freeze([Ne,nr]),Mi=Object.freeze([pe,pi,di,Ne,Ri,Rt,de,Ci]),wi=Object.freeze([Ti,Ni,Ne,Ii,ki]),Ui=Object.freeze([pe,Rt]),J=1,Q=2,kt=class{constructor(){this.continueParse=!1,this.extraLineBreak=!0,this.foundError=!1,this.offset=0,this.root={type:R.MODULE,items:[]},this.events=new Map,this.emitter=new sr.default,this.emitter.on("done",a=>{(this.events.get("done")||[]).forEach(n=>{n(a)})}),this.emitter.on("error",()=>{(this.events.get("error")||[]).forEach(s=>{s()})}),this.data=Object.seal({item:this.root,indentation:0,situations:Object.seal({general:_s,blockExport:B,blockImport:B,blockLoop:B,blockMutable:B,blockNative:B,blockSelf:B,commandBreak:B,commandReturn:B,condition:B,constraintsList:B,declaration:B,disambiguation:B,enumeration:B,nameList:B,object:B,procedure:B,statementsList:B,template:B,typeName:B,typePair:B,typesList:B,value:B}),flags:Object.seal({enumeration:X,blockExport:X,blockImport:X,blockMutable:X,blockNative:X,blockSelf:X,condition:X,procedure:X}),parents:Object.seal({blockMutable:bi})}),this.history=[],Object.seal(this)}on(a,s){if(kt.SET_EVENTS.has(a)){let n=this.events.get(a)||[];n.push(s),this.events.set(a,n)}}feed(a,s,n,_){if(this.foundError)return;let{data:r}=this,{situations:c}=r,t=s[n];if(t!==T.HASHTAG){if(t===T.LINE_BREAK){if(this.offset=a+1|0,this.extraLineBreak)return;this.extraLineBreak=!0}else this.extraLineBreak=!1;for(this.continueParse=!0;this.continueParse;)switch(this.continueParse=!1,c.general){case bt:{this.feedBlockExport(a,s,n,_);break}case Lt:{this.feedBlockImport(a,s,n,_);break}case Ot:{this.feedBlockLoop(a,s,n,_);break}case At:{this.feedBlockMutable(a,s,n,_);break}case Tt:{this.feedBlockNative(a,s,n,_);break}case pt:{this.feedBlockSelf(a,s,n,_);break}case _t:{this.feedCommandBreak(a,s,n,_);break}case ht:{this.feedCommandReturn(a,s,n,_);break}case ft:{this.feedCondition(a,s,n,_);break}case hs:{this.feedConstraintsList(a,s,n,_);break}case V:{this.feedDeclaration(a,s,n,_);break}case fs:{this.feedDisambiguation(a,s,n,_);break}case mt:{this.feedEnumeration(a,s,n,_);break}case H:{this.feedNameList(a,s,n,_);break}case Nt:{this.feedObject(a,s,n,_);break}case dt:{this.feedProcedure(a,s,n,_);break}case _s:{this.feedRoot(a,s,n,_);break}case ue:{this.feedStatementsList(a,s,n,_);break}case It:{this.feedTemplate(a,s,n,_);break}case ms:{this.feedTypeName(a,s,n,_);break}case se:{this.feedTypePair(a,s,n,_);break}case le:{this.feedTypesList(a,s,n,_);break}case ye:{this.feedValue(a,s,n,_);break}}}}feedBlockExport(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockExport){case bs:{let{item:o}=r,l={type:R.EXPORT,items:[]};o.push(l),r.item=l,t.blockExport=Ls;break}case Ls:{if(s[n]===T.COLON){c.blockExport=qt,t.blockExport=Os;return}c.blockExport=Wt,t.blockExport=Ye,this.continueParse=!0;break}case Os:{if(s[n]===T.LINE_BREAK){t.blockExport=As;return}this.error();break}case As:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.blockExport=Ge,this.continueParse=!0;break}case Ge:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}t.blockExport=Ye,this.continueParse=!0;break}case Ye:{let{item:o}=r,{items:l}=o;t.blockExport=Ts,this.save(),r.item=l;let p=this.keyExpected(s,n,_,vi);if(p){this.keyDispatch(p);return}t.general=V,t.declaration=z,this.continueParse=!0;break}case Ts:{switch(c.blockExport){case Wt:{this.undo(),this.undo(),this.continueParse=!0;break}case qt:{t.blockExport=Ge,this.continueParse=!0;break}default:throw K}break}}}feedBlockImport(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockImport){case ps:{let{item:o}=r,l={type:R.IMPORT,items:[]};o.push(l),r.item=l,t.blockImport=He;break}case He:{if(s[n]===T.COLON){c.blockImport=es,t.blockImport=Ns;return}c.blockImport=$t,t.blockImport=xe,this.continueParse=!0;break}case Ns:{if(s[n]===T.LINE_BREAK){t.blockImport=ds;return}this.error();break}case ds:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.blockImport=Ee,this.continueParse=!0;break}case Ee:{if(this.indentationDecrease(a)){let{item:o}=r;switch(o.type){case R.SUBMODULE:{this.undo(),t.blockImport=_e;break}case R.IMPORT:this.undo(),this.undo()}this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}t.blockImport=xe,this.continueParse=!0;break}case xe:{let{item:o}=r,{items:l}=o,p={type:R.SUBMODULE,name:[]};l.push(p),t.blockImport=_e,this.save(),r.item=p,t.blockImport=je,this.save();let{name:I}=p;r.item=I,t.general=H,t.nameList=x,this.continueParse=!0;break}case je:{let o=s[n];if(o===T.LINE_BREAK){this.undo(),t.blockImport=_e,this.continueParse=!0;return}if(o===T.COLON){let{item:p}=r;p.items=[],t.blockImport=He,this.continueParse=!0;return}let l=s.subarray(n,n+_|0);if(Y($o,l)){t.blockImport=Is;return}this.error();break}case Is:{let{item:o}=r,l=s.subarray(n,n+_|0),p=G(l);o.alias=p,t.blockImport=je;break}case _e:{let{item:o}=r;switch(o.type){case R.SUBMODULE:{t.blockImport=Ee;break}case R.IMPORT:{switch(c.blockImport){case $t:{this.undo(),this.undo(),s[n]!==T.LINE_BREAK&&(this.continueParse=!0);break}case es:{t.blockImport=Ee;break}default:throw K}break}default:throw K}break}default:throw K}}feedBlockLoop(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockLoop){case Rs:{let{item:o}=r,l={type:R.LOOP,statements:[]};o.push(l),r.item=l,t.blockLoop=ks;break}case ks:{if(s[n]===T.COLON){t.blockLoop=Cs;return}this.error();break}case Cs:{if(s[n]===T.LINE_BREAK){t.blockLoop=vs;return}this.error();break}case vs:{let{item:o}=r,{statements:l}=o;t.blockLoop=Bs,this.save(),r.item=l,t.general=ue,t.statementsList=me,this.continueParse=!0;break}case Bs:{this.undo(),this.continueParse=!0;break}}}feedBlockMutable(a,s,n,_){let{data:r}=this,{flags:c,parents:t,situations:o}=r;switch(o.blockMutable){case Ps:{let{item:l}=r,p={type:R.MUTABLE,items:[]};l.push(p),r.item=p,o.blockMutable=Ss;break}case Ss:{if(s[n]===T.COLON){c.blockMutable=ss,o.blockMutable=Ds;return}c.blockMutable=ts,o.blockMutable=Xe,this.continueParse=!0;break}case Ds:{if(s[n]===T.LINE_BREAK){o.blockMutable=Ms;break}this.error();break}case Ms:{o.blockMutable=Fe,this.continueParse=!0;break}case Fe:{o.blockMutable=Xe,this.continueParse=!0;break}case Xe:{let{item:l}=r,{items:p}=l,I=Ve,w=this.keyExpected(s,n,_,Bi);if(!w&&t.blockMutable===Ke&&(I=ws),o.blockMutable=I,this.save(),r.item=p,w){this.keyDispatch(w);return}switch(t.blockMutable){case Ke:{o.general=se,o.typePair=ne;break}default:{o.general=V,o.declaration=z;break}}this.continueParse=!0;break}case Ve:{switch(this.continueParse=!0,c.blockMutable){case ts:{this.undo(),this.undo();break}case ss:{o.blockMutable=Fe;break}default:throw K}break}case ws:{if(s[n]===T.LINE_BREAK){o.blockMutable=Ve;return}this.error();break}}}feedBlockNative(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockNative){case Us:{let{item:o}=r,l={type:R.NATIVE,items:[]};o.push(l),r.item=l,t.blockNative=gs;break}case gs:{if(s[n]===T.COLON){c.blockNative=rs,t.blockNative=Ks;return}c.blockNative=ns,t.blockNative=Je,this.continueParse=!0;break}case Ks:{if(s[n]===T.LINE_BREAK){t.blockNative=ys;break}this.error();break}case ys:{t.blockNative=ze,this.continueParse=!0;break}case ze:{t.blockNative=Je,this.continueParse=!0;break}case Je:{let{item:o}=r,{items:l}=o;t.blockNative=Gs,this.save(),r.item=l;let p=this.keyExpected(s,n,_,Pi);if(p){this.keyDispatch(p);return}t.general=V,t.declaration=z,this.continueParse=!0;break}case Gs:{switch(this.continueParse=!0,c.blockNative){case ns:{this.undo(),this.undo();break}case rs:{t.blockNative=ze;break}default:throw K}break}}}feedBlockSelf(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockSelf){case Ys:{let{item:o}=r,l={type:R.SELF,items:[]};o.push(l),r.item=l,t.blockSelf=Hs;break}case Hs:{if(s[n]===T.COLON){c.blockSelf=is,t.blockSelf=xs;return}c.blockSelf=os,t.blockSelf=Ze,this.continueParse=!0;break}case xs:{if(s[n]===T.LINE_BREAK){t.blockSelf=js;break}this.error();break}case js:{t.blockSelf=Qe,this.continueParse=!0;break}case Qe:{t.blockSelf=Ze,this.continueParse=!0;break}case Ze:{let{item:o}=r,{items:l}=o;t.blockSelf=Fs,this.save(),r.item=l;let p=this.keyExpected(s,n,_,Si);if(p){this.keyDispatch(p);return}t.general=V,t.declaration=z,this.continueParse=!0;break}case Fs:{switch(this.continueParse=!0,c.blockSelf){case os:{this.undo(),this.undo();break}case is:{t.blockSelf=Qe;break}default:throw K}break}}}feedCommandBreak(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.commandBreak){case Xs:{let{item:t}=r,o={type:R.BREAK};t.push(o),c.commandBreak=Vs;break}case Vs:{if(s[n]===T.LINE_BREAK){this.undo();return}this.error();break}}}feedCommandReturn(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.commandReturn){case zs:{let{item:t}=r,o={type:R.RETURN,values:[]};t.push(o),r.item=o,c.commandReturn=We;break}case We:{let{item:t}=r,{values:o}=t,l=s.subarray(n,n+_|0),p=G(l);o.push(p),c.commandReturn=Js;break}case Js:{let t=s[n];if(t===T.COMMA){c.commandReturn=We;return}if(t===T.LINE_BREAK){this.undo();return}this.error();break}}}feedCondition(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.condition){case Qs:{let{item:o}=r,l={type:R.CONDITION,values:[],branches:[]};o.push(l),r.item=l,t.condition=qe;break}case qe:{let{item:o}=r,{values:l}=o,p=s.subarray(n,n+_|0),I=G(p);l.push(I),t.condition=Zs;break}case Zs:{let o=s[n];if(o===T.COMMA){t.condition=qe;return}if(o===T.COLON){t.condition=Ws;return}let l=s.subarray(n,n+_|0);if(Y(Zt,l)){c.condition=cs,t.condition=$e,this.continueParse=!0;break}this.error();break}case Ws:{if(s[n]===T.LINE_BREAK){t.condition=qs;return}this.error();break}case qs:{r.indentation=this.indentationCalculate(a),c.condition=mi,t.condition=$e,this.continueParse=!0;break}case $e:{if(this.indentationDecrease(a)){this.undo(),this.continueParse=!0;return}let{item:o}=r,{branches:l}=o,p=s.subarray(n,n+_|0);if(Y(Zt,p)){this.save();let I={type:R.BRANCH_VALUE,values:[],statements:[]};l.push(I),r.item=I,t.condition=et;return}if(Y(ti,p)){this.save();let I={type:R.BRANCH_DEFAULT,statements:[]};l.push(I),r.item=I,t.condition=tt;break}if(c.condition==cs){this.undo(),this.continueParse=!0;break}this.error();break}case et:{let{item:o}=r,{values:l}=o,p=s.subarray(n,n+_|0),I=G(p);l.push(I),t.condition=tt;break}case tt:{let o=s[n];if(o===T.COMMA){t.condition=et;return}if(o===T.COLON){t.condition=$s;return}this.error();break}case $s:{if(s[n]===T.LINE_BREAK){t.condition=en;return}this.error();break}case en:{let{item:o}=r,{statements:l}=o;t.condition=tn,this.save(),r.item=l,t.general=ue,t.statementsList=me,this.continueParse=!0;break}case tn:{this.undo(),this.continueParse=!0;break}}}feedConstraintsList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.constraintsList){case sn:{let{item:t}=r;c.constraintsList=nn,this.continueParse=!0;break}case nn:{if(s[n]===T.LEFT_CURLY_BRACKET){c.constraintsList=he;return}this.error();break}case he:{let t=s[n];if(t===T.LINE_BREAK)return;if(t===T.RIGHT_CURLY_BRACKET){this.undo();return}c.constraintsList=rn,this.save(),c.general=se,c.typePair=ne,this.continueParse=!0;break}case rn:{let t=s[n];if(t===T.RIGHT_CURLY_BRACKET){c.constraintsList=he,this.continueParse=!0;return}if(t===T.COMMA){c.constraintsList=he;return}this.error();break}}}feedDeclaration(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.declaration){case z:{let{item:t}=r,o={type:te,name:[],value:{}};t.push(o),r.item=o;let{name:l}=o;c.declaration=on,this.save(),r.item=l,c.general=H,c.nameList=x,this.continueParse=!0;break}case on:{if(s[n]===T.COLON){let{item:l}=r;l.type=R.DECLARATION,c.declaration=st;return}let{item:o}=r;o.type=R.ASSIGNMENT,c.declaration=nt,this.continueParse=!0;break}case st:{let t=s.subarray(n,n+_|0);if(Y(ae,t)){c.declaration=fe;return}let{item:o}=r,l={};o.dataType=l,c.declaration=nt,this.save(),r.item=l,c.general=ms,c.typeName=yn,this.continueParse=!0;break}case nt:{let t=s.subarray(n,n+_|0);if(Y(ae,t)){c.declaration=fe;return}this.error();break}case fe:{let{item:t}=r,{value:o}=t;c.declaration=cn,this.save(),r.item=o,c.general=ye,c.value=re,this.continueParse=!0;break}case cn:{if(s[n]===T.LINE_BREAK){this.undo();return}this.error();break}}}feedDisambiguation(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.disambiguation){case an:{let{item:t}=r,o=[],l={parent:t,names:o};r.item=l,c.disambiguation=un,this.save(),r.item=o,c.general=H,c.nameList=x,this.continueParse=!0;break}case un:{let{item:t}=r,{parent:o,names:l}=t,p=s[n];if(p===T.LEFT_PARENTHESIS){let y={type:R.PROCEDURE_CALL,name:l};o.push(y),c.disambiguation=ln,this.save(),r.item=y,c.general=ye,c.value=Et;return}let I=(y,oe)=>{let W={type:y,name:l,value:{}};o.push(W),r.item=W,c.general=V,c.declaration=oe};if(p===T.COLON){I(R.DECLARATION,st);return}let w=s.subarray(n,n+_|0);if(Y(ae,w)){I(R.ASSIGNMENT,fe);return}this.error();break}case ln:{if(s[n]===T.LINE_BREAK){this.undo();return}this.error();break}}}feedEnumeration(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.enumeration){case En:{let{item:o}=r,l={type:R.ENUMERATION,name:te,items:[]};o.push(l),r.item=l,t.enumeration=_n;break}case _n:{let{item:o}=r,l=s.subarray(n,n+_|0),p=G(l);o.name=p,t.enumeration=hn;break}case hn:{let o=s[n];if(o===T.SEMICOLON){c.enumeration=as,t.enumeration=rt;return}if(o===T.COLON){c.enumeration=us,t.enumeration=rt;return}this.error();break}case rt:{if(s[n]===T.LINE_BREAK){switch(c.enumeration){case as:{this.undo(),this.undo();return}case us:{t.enumeration=fn;return}}return}this.error();break}case Li:break;case fn:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.enumeration=ot,this.continueParse=!0;break}case ot:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}t.enumeration=mn,this.continueParse=!0;break}case mn:{let{item:o}=r,{items:l}=o;t.enumeration=ot,this.save();let p=s.subarray(n,n+_|0),I=G(p),w={type:R.LABEL,name:I,items:[]};l.push(w),r.item=w,t.enumeration=bn;break}case bn:{let o=s[n];if(o===T.LINE_BREAK){t.enumeration=it,this.continueParse=!0;return}if(o===T.LEFT_PARENTHESIS){let{item:l}=r,{items:p}=l;t.enumeration=it,this.save(),r.item=p,t.general=le,t.typesList=be,this.continueParse=!0;return}this.error();break}case it:{if(s[n]===T.LINE_BREAK){this.undo();return}this.error();break}default:throw K}}feedNameList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.nameList){case x:{c.nameList=ct,this.continueParse=!0;break}case ct:{let{item:t}=r,o=s.subarray(n,n+_|0),l=G(o);t.push(l),c.nameList=Ln;break}case Ln:{if(s[n]===T.DOT){c.nameList=ct;return}this.undo(),this.continueParse=!0;break}}}feedObject(a,s,n,_){let{data:r}=this,{parents:c,situations:t}=r;switch(t.object){case On:{let{item:o}=r,l={type:R.OBJECT,name:te,items:[]};o.push(l),r.item=l,t.object=An;break}case An:{let{item:o}=r,l=s.subarray(n,n+_|0),p=G(l);o.name=p,t.object=Tn;break}case Tn:{if(s[n]===T.COLON){t.object=pn;return}this.error();break}case pn:{if(s[n]===T.LINE_BREAK){t.object=Nn;return}this.error();break}case Nn:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.object=at,this.continueParse=!0;break}case at:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}let{item:o}=r,{items:l}=o,p=this.keyExpected(s,n,_,Di);if(p){p===Ne&&(c.blockMutable=Ke),this.save(),r.item=l,this.keyDispatch(p);return}t.object=dn,this.save(),r.item=l,t.general=se,t.typePair=ne,this.continueParse=!0;break}case dn:{if(s[n]===T.LINE_BREAK){t.object=at;return}this.error();break}}}feedProcedure(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.procedure){case In:{let{item:o}=r,l={type:R.PROCEDURE,head:{name:te,inputs:[],outputs:[]},body:[]};o.push(l),r.item=l,t.procedure=Rn;break}case Rn:{let{item:o}=r,{head:l}=o,p=s.subarray(n,n+_|0),I=G(p);l.name=I,t.procedure=kn;break}case kn:{let{item:o}=r,{head:l}=o,{inputs:p}=l;t.procedure=Cn,this.save(),r.item=p,t.general=le,t.typesList=be,this.continueParse=!0;break}case Cn:{let o=s.subarray(n,n+_|0);if(Y(ii,o)){t.procedure=vn;return}this.error();break}case vn:{let{item:o}=r,{head:l}=o,{outputs:p}=l;t.procedure=Bn,this.save(),r.item=p,t.general=le,t.typesList=be,this.continueParse=!0;break}case Bn:{let o=s[n];if(o===T.SEMICOLON){c.procedure=ls,t.procedure=ut;return}if(o===T.COLON){c.procedure=Es,t.procedure=ut;return}this.error();break}case ut:{if(s[n]===T.LINE_BREAK)switch(c.procedure){case ls:{this.undo(),this.undo();return}case Es:{t.procedure=Pn;return}default:throw K}this.error();break}case Pn:{let{item:o}=r,{body:l}=o;t.procedure=Sn,this.save(),r.item=l,t.general=ue,t.statementsList=me,this.continueParse=!0;break}case Sn:{this.undo(),this.undo(),this.continueParse=!0;break}}}feedRoot(a,s,n,_){let{data:r}=this,{situations:c}=r,{item:t}=r,{items:o}=t;this.save(),r.item=o;let l=this.keyExpected(s,n,_,Mi);if(l){this.keyDispatch(l);return}c.general=V,c.declaration=z,this.continueParse=!0}feedStatementsList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.statementsList){case me:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),c.statementsList=Dn,this.continueParse=!0;break}case Dn:{if(this.indentationDecrease(a)){this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}this.save();let t=this.keyExpected(s,n,_,wi);if(t){this.keyDispatch(t);return}c.general=fs,c.disambiguation=an,this.continueParse=!0;break}}}feedTemplate(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.template){case Mn:{let{item:t}=r,o={type:R.TEMPLATE,constraints:[],items:[]};t.push(o),r.item=o,c.template=wn;break}case wn:{if(s[n]===T.LEFT_CURLY_BRACKET){c.template=Un,this.save();let{item:o}=r,{constraints:l}=o;r.item=l,c.general=hs,c.constraintsList=sn,this.continueParse=!0;return}this.error();break}case Un:{let t=s[n];if(t===T.COLON){c.template=Oi;return}if(t===T.LINE_BREAK){c.template=lt;return}break}case Ai:{if(this.indentationError(a,J)){this.error();return}c.template=lt,this.continueParse=!0;break}case lt:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}c.template=gn,this.continueParse=!0;break}case gn:{let{item:t}=r,{items:o}=t;c.template=Kn,this.save(),r.item=o;let l=this.keyExpected(s,n,_,Ui);if(l){this.keyDispatch(l);return}c.general=V,c.declaration=z,this.continueParse=!0;break}case Kn:break}}feedTypesList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.typesList){case be:{c.typesList=zn,this.continueParse=!0;break}case zn:{if(s[n]===T.LEFT_PARENTHESIS){c.typesList=Le;return}this.error();break}case Le:{let t=s[n];if(t===T.LINE_BREAK)return;if(t===T.RIGHT_PARENTHESIS){this.undo();return}c.typesList=Jn,this.save(),c.general=se,c.typePair=ne,this.continueParse=!0;break}case Jn:{let t=s[n];if(t===T.RIGHT_PARENTHESIS){c.typesList=Le,this.continueParse=!0;return}if(t===T.COMMA){c.typesList=Le;return}this.error();break}}}feedTypeName(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.typeName){case yn:{let{item:t}=r,o=[];t.name=o,c.typeName=Gn,this.save(),r.item=o,c.general=H,c.nameList=x,this.continueParse=!0;break}case Gn:{if(s[n]===T.LEFT_SQUARE_BRACKET){let{item:o}=r,l=[];o.array=l,c.typeName=Yn;return}this.undo(),this.continueParse=!0;break}case Yn:{if(s[n]===T.RIGHT_SQUARE_BRACKET){this.undo();return}let{item:o}=r,{array:l}=o;this.save(),r.item=l,c.general=H,c.nameList=x;return}}}feedTypePair(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.typePair){case ne:{let{item:t}=r,o={type:R.TYPE_PAIR,key:te,value:[]};t.push(o),r.item=o,c.typePair=Hn,this.continueParse=!0;break}case Hn:{let{item:t}=r,o=s.subarray(n,n+_|0),l=G(o);t.key=l,c.typePair=xn;break}case xn:{if(s[n]===T.COLON){c.typePair=jn;return}this.error();break}case jn:{let{item:t}=r,{value:o}=t;c.typePair=Fn,this.save(),r.item=o,c.general=H,c.nameList=x,this.continueParse=!0;break}case Fn:{if(s[n]===T.LEFT_SQUARE_BRACKET){c.typePair=Xn,this.continueParse=!0;return}this.undo(),this.continueParse=!0;break}case Xn:{if(s[n]===T.RIGHT_SQUARE_BRACKET){this.undo();return}let{item:o}=r;o.array=[];let{array:l}=o;c.typePair=Vn,this.save(),r.item=l,c.general=H,c.nameList=x;return}case Vn:{if(s[n]===T.RIGHT_SQUARE_BRACKET){this.undo();return}this.error();return}}}feedValue(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.value){case re:{let{item:t}=r;if(s[n]===T.LEFT_SQUARE_BRACKET){t.type=R.ARRAY,c.value=Qn;return}let l=[];t.name=l,c.value=Wn,this.save(),r.item=l,c.general=H,c.nameList=x,this.continueParse=!0;break}case Qn:{let{item:t}=r,o=[];t.values=o,this.save(),r.item=o,c.value=Oe,this.continueParse=!0;break}case Oe:{let{item:t}=r,o=s[n];if(o===T.LINE_BREAK)return;if(o===T.RIGHT_SQUARE_BRACKET){this.undo(),this.undo();return}c.value=Zn,this.save();let l={};t.push(l),r.item=l,c.value=re,this.continueParse=!0;break}case Zn:{let t=s[n];if(t===T.COMMA){c.value=Oe;return}if(t===T.RIGHT_SQUARE_BRACKET){c.value=Oe,this.continueParse=!0;return}this.error();break}case Wn:{let{item:t}=r;if(s[n]===T.LEFT_PARENTHESIS){let{name:l}=t,I=l[0].codePointAt(0);if(qo(I)){t.type=R.INSTANCE,c.value=$n;return}t.type=R.EXPRESSION,c.value=Et;return}t.type=R.LITERAL,this.undo(),this.continueParse=!0;break}case Et:{let{item:t}=r,o=[];t.inputs=o,this.save(),r.item=o,c.value=Ae,this.continueParse=!0;break}case Ae:{let{item:t}=r,o=s[n];if(o===T.LINE_BREAK)return;if(o===T.RIGHT_PARENTHESIS){this.undo(),this.undo();return}c.value=qn,this.save();let l={};t.push(l),r.item=l,c.value=re,this.continueParse=!0;break}case qn:{let t=s[n];if(t===T.COMMA){c.value=Ae;return}if(t===T.RIGHT_PARENTHESIS){c.value=Ae,this.continueParse=!0;return}this.error();break}case $n:{let{item:t}=r,o=[];t.members=o,this.save(),r.item=o,c.value=Te,this.continueParse=!0;break}case Te:{let{item:t}=r,o=s[n];if(o===T.LINE_BREAK)return;if(o===T.RIGHT_PARENTHESIS){this.undo(),this.undo();return}let l=[],p={name:l};t.push(p),this.save(),r.item=p,c.value=er,this.save(),r.item=l,c.general=H,c.nameList=x,this.continueParse=!0;break}case er:{let t=s.subarray(n,n+_|0);if(Y(ae,t)){let{item:o}=r,l={};o.value=l,c.value=tr,this.save(),r.item=l,c.value=re;return}this.error();break}case tr:{let t=s[n];if(t===T.COMMA){this.undo(),c.value=Te;return}if(t===T.RIGHT_PARENTHESIS){c.value=Te,this.continueParse=!0;return}this.error();break}}}indentationCalculate(a){let{offset:s}=this;return a-s|0}indentationDecrease(a){let{data:s}=this,{indentation:n}=s;return this.indentationCalculate(a)<n}indentationError(a,s){let{data:n}=this,{indentation:_}=n,r=this.indentationCalculate(a);switch(s){case J:return r<=_;case Q:return r!==_}throw K}keyDispatch(a){let{situations:s}=this.data,{situation:n}=a;switch(this.save(),s.general=n,this.continueParse=!0,n){case bt:{s.blockExport=bs;break}case Lt:{s.blockImport=ps;break}case Ot:{s.blockLoop=Rs;break}case At:{s.blockMutable=Ps;break}case Tt:{s.blockNative=Us;break}case pt:{s.blockSelf=Ys;break}case _t:{s.commandBreak=Xs;break}case ht:{s.commandReturn=zs;break}case ft:{s.condition=Qs;break}case mt:{s.enumeration=En;break}case Nt:{s.object=On;break}case dt:{s.procedure=In;break}case It:{s.template=Mn;break}default:throw K}}keyExpected(a,s,n,_){let r=a.subarray(s,s+n|0),c=o=>Y(o.array,r);return _.find(c)}done(){this.foundError||this.emitter.emit("done",this.root)}close(){}save(){let{data:a}=this,s={flags:Object.assign({},a.flags),item:a.item,indentation:a.indentation|0,situations:Object.assign({},a.situations)};this.history.push(s)}undo(){let{data:a}=this,s=this.history.pop(),{flags:n,item:_,indentation:r,situations:c}=s;a.flags=Object.assign(a.flags,n),a.item=_,a.indentation=r,a.situations=Object.assign(a.situations,c)}error(){this.foundError=!0,this.emitter.emit("error")}},Z=kt;wt(Z,"SET_EVENTS",new Set(["done","error"]));Object.values(Z).forEach(Object.freeze);Object.freeze(Z);Object.freeze(Object.getPrototypeOf(Z));var Zi=Z;export{Zi as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
