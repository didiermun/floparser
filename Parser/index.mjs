var lr=Object.create;var Me=Object.defineProperty;var Er=Object.getOwnPropertyDescriptor;var _r=Object.getOwnPropertyNames;var hr=Object.getPrototypeOf,fr=Object.prototype.hasOwnProperty;var mr=(b,a,s)=>a in b?Me(b,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):b[a]=s;var Ut=(b,a)=>()=>(a||b((a={exports:{}}).exports,a),a.exports);var br=(b,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of _r(a))!fr.call(b,_)&&_!==s&&Me(b,_,{get:()=>a[_],enumerable:!(n=Er(a,_))||n.enumerable});return b};var Lr=(b,a,s)=>(s=b!=null?lr(hr(b)):{},br(a||!b||!b.__esModule?Me(s,"default",{value:b,enumerable:!0}):s,b));var Kt=(b,a,s)=>(mr(b,typeof a!="symbol"?a+"":a,s),s);var Gt=Ut((gt,yt)=>{(function(b){var a=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(i){return Object.prototype.toString.call(i)==="[object Array]"},n=10,_=typeof process=="object"&&typeof process.nextTick=="function",r=typeof Symbol=="function",c=typeof Reflect=="object",t=typeof setImmediate=="function",o=t?setImmediate:setTimeout,l=r?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var i=Object.getOwnPropertyNames(e);return i.push.apply(i,Object.getOwnPropertySymbols(e)),i}:Object.keys;function T(){this._events={},this._conf&&I.call(this,this._conf)}function I(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==b&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function w(e,i){var u="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(u+=" Event name: "+i+"."),typeof process<"u"&&process.emitWarning){var E=new Error(u);E.name="MaxListenersExceededWarning",E.emitter=this,E.count=e,process.emitWarning(E)}else console.error(u),console.trace&&console.trace()}var y=function(e,i,u){var E=arguments.length;switch(E){case 0:return[];case 1:return[e];case 2:return[e,i];case 3:return[e,i,u];default:for(var h=new Array(E);E--;)h[E]=arguments[E];return h}};function ie(e,i){for(var u={},E,h=e.length,f=i?i.length:0,m=0;m<h;m++)E=e[m],u[E]=m<f?i[m]:b;return u}function q(e,i,u){this._emitter=e,this._target=i,this._listeners={},this._listenersCount=0;var E,h;if((u.on||u.off)&&(E=u.on,h=u.off),i.addEventListener?(E=i.addEventListener,h=i.removeEventListener):i.addListener?(E=i.addListener,h=i.removeListener):i.on&&(E=i.on,h=i.off),!E&&!h)throw Error("target does not implement any known event API");if(typeof E!="function")throw TypeError("on method must be a function");if(typeof h!="function")throw TypeError("off method must be a function");this._on=E,this._off=h;var f=e._observers;f?f.push(this):e._observers=[this]}Object.assign(q.prototype,{subscribe:function(e,i,u){var E=this,h=this._target,f=this._emitter,m=this._listeners,A=function(){var L=y.apply(null,arguments),O={data:L,name:i,original:e};if(u){var N=u.call(h,O);N!==!1&&f.emit.apply(f,[O.name].concat(L));return}f.emit.apply(f,[i].concat(L))};if(m[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,f._newListener&&f._removeListener&&!E._onNewListener?(this._onNewListener=function(L){L===i&&m[e]===null&&(m[e]=A,E._on.call(h,e,A))},f.on("newListener",this._onNewListener),this._onRemoveListener=function(L){L===i&&!f.hasListeners(L)&&m[e]&&(m[e]=null,E._off.call(h,e,A))},m[e]=null,f.on("removeListener",this._onRemoveListener)):(m[e]=A,E._on.call(h,e,A))},unsubscribe:function(e){var i=this,u=this._listeners,E=this._emitter,h,f,m=this._off,A=this._target,L;if(e&&typeof e!="string")throw TypeError("event must be a string");function O(){i._onNewListener&&(E.off("newListener",i._onNewListener),E.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var N=Dt.call(E,i);E._observers.splice(N,1)}if(e){if(h=u[e],!h)return;m.call(A,e,h),delete u[e],--this._listenersCount||O()}else{for(f=l(u),L=f.length;L-- >0;)e=f[L],m.call(A,e,u[e]);this._listeners={},this._listenersCount=0,O()}}});function ce(e,i,u,E){var h=Object.assign({},i);if(!e)return h;if(typeof e!="object")throw TypeError("options must be an object");var f=Object.keys(e),m=f.length,A,L,O;function N(k){throw Error('Invalid "'+A+'" option value'+(k?". Reason: "+k:""))}for(var M=0;M<m;M++){if(A=f[M],!E&&!a.call(i,A))throw Error('Unknown "'+A+'" option');L=e[A],L!==b&&(O=u[A],h[A]=O?O(L,N):L)}return h}function Bt(e,i){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&i("value must be a constructor"),e}function Pt(e){var i="value must be type of "+e.join("|"),u=e.length,E=e[0],h=e[1];return u===1?function(f,m){if(typeof f===E)return f;m(i)}:u===2?function(f,m){var A=typeof f;if(A===E||A===h)return f;m(i)}:function(f,m){for(var A=typeof f,L=u;L-- >0;)if(A===e[L])return f;m(i)}}var Ce=Pt(["function"]),or=Pt(["object","function"]);function St(e,i,u){var E,h,f=0,m,A=new e(function(L,O,N){u=ce(u,{timeout:0,overload:!1},{timeout:function(v,U){return v*=1,(typeof v!="number"||v<0||!Number.isFinite(v))&&U("timeout must be a positive number"),v}}),E=!u.overload&&typeof e.prototype.cancel=="function"&&typeof N=="function";function M(){h&&(h=null),f&&(clearTimeout(f),f=0)}var k=function(v){M(),L(v)},C=function(v){M(),O(v)};E?i(k,C,N):(h=[function(v){C(v||Error("canceled"))}],i(k,C,function(v){if(m)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof v!="function")throw TypeError("onCancel callback must be a function");h.push(v)}),m=!0),u.timeout>0&&(f=setTimeout(function(){var v=Error("timeout");v.code="ETIMEDOUT",f=0,A.cancel(v),O(v)},u.timeout))});return E||(A.cancel=function(L){if(h){for(var O=h.length,N=1;N<O;N++)h[N](L);h[0](L),h=null}}),A}function Dt(e){var i=this._observers;if(!i)return-1;for(var u=i.length,E=0;E<u;E++)if(i[E]._target===e)return E;return-1}function P(e,i,u,E,h){if(!u)return null;if(E===0){var f=typeof i;if(f==="string"){var m,A,L=0,O=0,N=this.delimiter,M=N.length;if((A=i.indexOf(N))!==-1){m=new Array(5);do m[L++]=i.slice(O,A),O=A+M;while((A=i.indexOf(N,O))!==-1);m[L++]=i.slice(O),i=m,h=L}else i=[i],h=1}else f==="object"?h=i.length:(i=[i],h=1)}var k=null,C,v,U,Pe,Se,$=i[E],De=i[E+1],j,K;if(E===h)u._listeners&&(typeof u._listeners=="function"?(e&&e.push(u._listeners),k=[u]):(e&&e.push.apply(e,u._listeners),k=[u]));else if($==="*"){for(j=l(u),A=j.length;A-- >0;)C=j[A],C!=="_listeners"&&(K=P(e,i,u[C],E+1,h),K&&(k?k.push.apply(k,K):k=K));return k}else if($==="**"){for(Se=E+1===h||E+2===h&&De==="*",Se&&u._listeners&&(k=P(e,i,u,h,h)),j=l(u),A=j.length;A-- >0;)C=j[A],C!=="_listeners"&&(C==="*"||C==="**"?(u[C]._listeners&&!Se&&(K=P(e,i,u[C],h,h),K&&(k?k.push.apply(k,K):k=K)),K=P(e,i,u[C],E,h)):C===De?K=P(e,i,u[C],E+2,h):K=P(e,i,u[C],E,h),K&&(k?k.push.apply(k,K):k=K));return k}else u[$]&&(k=P(e,i,u[$],E+1,h));if(v=u["*"],v&&P(e,i,v,E+1,h),U=u["**"],U)if(E<h)for(U._listeners&&P(e,i,U,h,h),j=l(U),A=j.length;A-- >0;)C=j[A],C!=="_listeners"&&(C===De?P(e,i,U[C],E+2,h):C===$?P(e,i,U[C],E+1,h):(Pe={},Pe[C]=U[C],P(e,i,{"**":Pe},E+1,h)));else U._listeners?P(e,i,U,h,h):U["*"]&&U["*"]._listeners&&P(e,i,U["*"],h,h);return k}function ir(e,i,u){var E=0,h=0,f,m=this.delimiter,A=m.length,L;if(typeof e=="string")if((f=e.indexOf(m))!==-1){L=new Array(5);do L[E++]=e.slice(h,f),h=f+A;while((f=e.indexOf(m,h))!==-1);L[E++]=e.slice(h)}else L=[e],E=1;else L=e,E=e.length;if(E>1){for(f=0;f+1<E;f++)if(L[f]==="**"&&L[f+1]==="**")return}var O=this.listenerTree,N;for(f=0;f<E;f++)if(N=L[f],O=O[N]||(O[N]={}),f===E-1)return O._listeners?(typeof O._listeners=="function"&&(O._listeners=[O._listeners]),u?O._listeners.unshift(i):O._listeners.push(i),!O._listeners.warned&&this._maxListeners>0&&O._listeners.length>this._maxListeners&&(O._listeners.warned=!0,w.call(this,O._listeners.length,N))):O._listeners=i,!0;return!0}function Mt(e,i,u,E){for(var h=l(e),f=h.length,m,A,L,O=e._listeners,N;f-- >0;)A=h[f],m=e[A],A==="_listeners"?L=u:L=u?u.concat(A):[A],N=E||typeof A=="symbol",O&&i.push(N?L:L.join(this.delimiter)),typeof m=="object"&&Mt.call(this,m,i,L,N);return i}function ve(e){for(var i=l(e),u=i.length,E,h,f;u-- >0;)h=i[u],E=e[h],E&&(f=!0,h!=="_listeners"&&!ve(E)&&delete e[h]);return f}function wt(e,i,u){this.emitter=e,this.event=i,this.listener=u}wt.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function cr(e,i,u){if(u===!0)h=!0;else if(u===!1)E=!0;else{if(!u||typeof u!="object")throw TypeError("options should be an object or true");var E=u.async,h=u.promisify,f=u.nextTick,m=u.objectify}if(E||f||h){var A=i,L=i._origin||i;if(f&&!_)throw Error("process.nextTick is not supported");h===b&&(h=i.constructor.name==="AsyncFunction"),i=function(){var O=arguments,N=this,M=this.event;return h?f?Promise.resolve():new Promise(function(k){o(k)}).then(function(){return N.event=M,A.apply(N,O)}):(f?process.nextTick:o)(function(){N.event=M,A.apply(N,O)})},i._async=!0,i._origin=L}return[i,m?new wt(this,e,i):this]}function d(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,I.call(this,e)}d.EventEmitter2=d,d.prototype.listenTo=function(e,i,u){if(typeof e!="object")throw TypeError("target musts be an object");var E=this;u=ce(u,{on:b,off:b,reducers:b},{on:Ce,off:Ce,reducers:or});function h(f){if(typeof f!="object")throw TypeError("events must be an object");var m=u.reducers,A=Dt.call(E,e),L;A===-1?L=new q(E,e,u):L=E._observers[A];for(var O=l(f),N=O.length,M,k=typeof m=="function",C=0;C<N;C++)M=O[C],L.subscribe(M,f[M]||M,k?m:m&&m[M])}return s(i)?h(ie(i)):h(typeof i=="string"?ie(i.split(/\s+/)):i),this},d.prototype.stopListeningTo=function(e,i){var u=this._observers;if(!u)return!1;var E=u.length,h,f=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;E-- >0;)h=u[E],(!e||h._target===e)&&(h.unsubscribe(i),f=!0);return f},d.prototype.delimiter=".",d.prototype.setMaxListeners=function(e){e!==b&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},d.prototype.getMaxListeners=function(){return this._maxListeners},d.prototype.event="",d.prototype.once=function(e,i,u){return this._once(e,i,!1,u)},d.prototype.prependOnceListener=function(e,i,u){return this._once(e,i,!0,u)},d.prototype._once=function(e,i,u,E){return this._many(e,1,i,u,E)},d.prototype.many=function(e,i,u,E){return this._many(e,i,u,!1,E)},d.prototype.prependMany=function(e,i,u,E){return this._many(e,i,u,!0,E)},d.prototype._many=function(e,i,u,E,h){var f=this;if(typeof u!="function")throw new Error("many only accepts instances of Function");function m(){return--i===0&&f.off(e,m),u.apply(this,arguments)}return m._origin=u,this._on(e,m,E,h)},d.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||T.call(this);var e=arguments[0],i,u=this.wildcard,E,h,f,m,A;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(u&&(i=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(h=e.length,r){for(f=0;f<h;f++)if(typeof e[f]=="symbol"){A=!0;break}}A||(e=e.join(this.delimiter))}var L=arguments.length,O;if(this._all&&this._all.length)for(O=this._all.slice(),f=0,h=O.length;f<h;f++)switch(this.event=e,L){case 1:O[f].call(this,e);break;case 2:O[f].call(this,e,arguments[1]);break;case 3:O[f].call(this,e,arguments[1],arguments[2]);break;default:O[f].apply(this,arguments)}if(u)O=[],P.call(this,O,i,this.listenerTree,0,h);else if(O=this._events[e],typeof O=="function"){switch(this.event=e,L){case 1:O.call(this);break;case 2:O.call(this,arguments[1]);break;case 3:O.call(this,arguments[1],arguments[2]);break;default:for(E=new Array(L-1),m=1;m<L;m++)E[m-1]=arguments[m];O.apply(this,E)}return!0}else O&&(O=O.slice());if(O&&O.length){if(L>3)for(E=new Array(L-1),m=1;m<L;m++)E[m-1]=arguments[m];for(f=0,h=O.length;f<h;f++)switch(this.event=e,L){case 1:O[f].call(this);break;case 2:O[f].call(this,arguments[1]);break;case 3:O[f].call(this,arguments[1],arguments[2]);break;default:O[f].apply(this,E)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||T.call(this);var e=arguments[0],i=this.wildcard,u,E,h,f,m,A;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(i&&(u=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(f=e.length,r){for(m=0;m<f;m++)if(typeof e[m]=="symbol"){E=!0;break}}E||(e=e.join(this.delimiter))}var L=[],O=arguments.length,N;if(this._all)for(m=0,f=this._all.length;m<f;m++)switch(this.event=e,O){case 1:L.push(this._all[m].call(this,e));break;case 2:L.push(this._all[m].call(this,e,arguments[1]));break;case 3:L.push(this._all[m].call(this,e,arguments[1],arguments[2]));break;default:L.push(this._all[m].apply(this,arguments))}if(i?(N=[],P.call(this,N,u,this.listenerTree,0)):N=this._events[e],typeof N=="function")switch(this.event=e,O){case 1:L.push(N.call(this));break;case 2:L.push(N.call(this,arguments[1]));break;case 3:L.push(N.call(this,arguments[1],arguments[2]));break;default:for(h=new Array(O-1),A=1;A<O;A++)h[A-1]=arguments[A];L.push(N.apply(this,h))}else if(N&&N.length){if(N=N.slice(),O>3)for(h=new Array(O-1),A=1;A<O;A++)h[A-1]=arguments[A];for(m=0,f=N.length;m<f;m++)switch(this.event=e,O){case 1:L.push(N[m].call(this));break;case 2:L.push(N[m].call(this,arguments[1]));break;case 3:L.push(N[m].call(this,arguments[1],arguments[2]));break;default:L.push(N[m].apply(this,h))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(L)},d.prototype.on=function(e,i,u){return this._on(e,i,!1,u)},d.prototype.prependListener=function(e,i,u){return this._on(e,i,!0,u)},d.prototype.onAny=function(e){return this._onAny(e,!1)},d.prototype.prependAny=function(e){return this._onAny(e,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(e,i){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),i?this._all.unshift(e):this._all.push(e),this},d.prototype._on=function(e,i,u,E){if(typeof e=="function")return this._onAny(e,i),this;if(typeof i!="function")throw new Error("on only accepts instances of Function");this._events||T.call(this);var h=this,f;return E!==b&&(f=cr.call(this,e,i,E),i=f[0],h=f[1]),this._newListener&&this.emit("newListener",e,i),this.wildcard?(ir.call(this,e,i,u),h):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),u?this._events[e].unshift(i):this._events[e].push(i),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,w.call(this,this._events[e].length,e))):this._events[e]=i,h)},d.prototype.off=function(e,i){if(typeof i!="function")throw new Error("removeListener only takes instances of Function");var u,E=[];if(this.wildcard){var h=typeof e=="string"?e.split(this.delimiter):e.slice();if(E=P.call(this,null,h,this.listenerTree,0),!E)return this}else{if(!this._events[e])return this;u=this._events[e],E.push({_listeners:u})}for(var f=0;f<E.length;f++){var m=E[f];if(u=m._listeners,s(u)){for(var A=-1,L=0,O=u.length;L<O;L++)if(u[L]===i||u[L].listener&&u[L].listener===i||u[L]._origin&&u[L]._origin===i){A=L;break}if(A<0)continue;return this.wildcard?m._listeners.splice(A,1):this._events[e].splice(A,1),u.length===0&&(this.wildcard?delete m._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,i),this}else(u===i||u.listener&&u.listener===i||u._origin&&u._origin===i)&&(this.wildcard?delete m._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,i))}return this.listenerTree&&ve(this.listenerTree),this},d.prototype.offAny=function(e){var i=0,u=0,E;if(e&&this._all&&this._all.length>0){for(E=this._all,i=0,u=E.length;i<u;i++)if(e===E[i])return E.splice(i,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(E=this._all,this._removeListener)for(i=0,u=E.length;i<u;i++)this.emit("removeListenerAny",E[i]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(e){if(e===b)return!this._events||T.call(this),this;if(this.wildcard){var i=P.call(this,null,e,this.listenerTree,0),u,E;if(!i)return this;for(E=0;E<i.length;E++)u=i[E],u._listeners=null;this.listenerTree&&ve(this.listenerTree)}else this._events&&(this._events[e]=null);return this},d.prototype.listeners=function(e){var i=this._events,u,E,h,f,m;if(e===b){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!i)return[];for(u=l(i),f=u.length,h=[];f-- >0;)E=i[u[f]],typeof E=="function"?h.push(E):h.push.apply(h,E);return h}else{if(this.wildcard){if(m=this.listenerTree,!m)return[];var A=[],L=typeof e=="string"?e.split(this.delimiter):e.slice();return P.call(this,A,L,m,0),A}return i?(E=i[e],E?typeof E=="function"?[E]:E:[]):[]}},d.prototype.eventNames=function(e){var i=this._events;return this.wildcard?Mt.call(this,this.listenerTree,[],null,e):i?l(i):[]},d.prototype.listenerCount=function(e){return this.listeners(e).length},d.prototype.hasListeners=function(e){if(this.wildcard){var i=[],u=typeof e=="string"?e.split(this.delimiter):e.slice();return P.call(this,i,u,this.listenerTree,0),i.length>0}var E=this._events,h=this._all;return!!(h&&h.length||E&&(e===b?l(E).length:E[e]))},d.prototype.listenersAny=function(){return this._all?this._all:[]},d.prototype.waitFor=function(e,i){var u=this,E=typeof i;return E==="number"?i={timeout:i}:E==="function"&&(i={filter:i}),i=ce(i,{timeout:0,filter:b,handleError:!1,Promise,overload:!1},{filter:Ce,Promise:Bt}),St(i.Promise,function(h,f,m){function A(){var L=i.filter;if(!(L&&!L.apply(u,arguments)))if(u.off(e,A),i.handleError){var O=arguments[0];O?f(O):h(y.apply(null,arguments).slice(1))}else h(y.apply(null,arguments))}m(function(){u.off(e,A)}),u._on(e,A,!1)},{timeout:i.timeout,overload:i.overload})};function ar(e,i,u){u=ce(u,{Promise,timeout:0,overload:!1},{Promise:Bt});var E=u.Promise;return St(E,function(h,f,m){var A;if(typeof e.addEventListener=="function"){A=function(){h(y.apply(null,arguments))},m(function(){e.removeEventListener(i,A)}),e.addEventListener(i,A,{once:!0});return}var L=function(){O&&e.removeListener("error",O),h(y.apply(null,arguments))},O;i!=="error"&&(O=function(N){e.removeListener(i,L),f(N)},e.once("error",O)),m(function(){O&&e.removeListener("error",O),e.removeListener(i,L)}),e.once(i,L)},{timeout:u.timeout,overload:u.overload})}var Be=d.prototype;if(Object.defineProperties(d,{defaultMaxListeners:{get:function(){return Be._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");Be._maxListeners=e},enumerable:!0},once:{value:ar,writable:!0,configurable:!0}}),Object.defineProperties(Be,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return d});else if(typeof gt=="object")yt.exports=d;else{var ur=new Function("","return this")();ur.EventEmitter2=d}})()});var Ht=Ut((Gi,Yt)=>{Yt.exports=Gt()});var nr=Lr(Ht(),1);var Or="as",Ar="=",pr="break",Tr="else",Nr="enum",dr="export",Ir="if",Rr="import",kr="->",Cr="is",vr="loop",Br="mut",Pr="native",Sr="object",Dr="fn",Mr="return",wr="self",Ur="template",Kr=Object.freeze({ALIAS:Or,ASSIGN:Ar,BREAK:pr,ELSE:Tr,ENUMERATION:Nr,EXPORT:dr,IF:Ir,IMPORT:Rr,INTO:kr,IS:Cr,LOOP:vr,MUTABLE:Br,NATIVE:Pr,OBJECT:Sr,PROCEDURE:Dr,RETURN:Mr,SELF:wr,TEMPLATE:Ur}),xt=Kr;var gr="array",yr="assignment",Gr="branch-default",Yr="branch-value",Hr="break",xr="condition",jr="declaration",Fr="enumeration",Xr="export",Vr="expression",zr="import",Jr="instance",Qr="label",Zr="literal",Wr="loop",qr="module",$r="mutable",eo="name-list",to="native",so="object",no="procedure",ro="procedure-call",oo="return",io="self",co="submodule",ao="template",uo="type-pair",lo=Object.freeze({ARRAY:gr,ASSIGNMENT:yr,BRANCH_DEFAULT:Gr,BRANCH_VALUE:Yr,BREAK:Hr,CONDITION:xr,DECLARATION:jr,ENUMERATION:Fr,EXPORT:Xr,EXPRESSION:Vr,IMPORT:zr,INSTANCE:Jr,LABEL:Qr,LITERAL:Zr,LOOP:Wr,MODULE:qr,MUTABLE:$r,NAME_LIST:eo,NATIVE:to,OBJECT:so,PROCEDURE:no,PROCEDURE_CALL:ro,RETURN:oo,SELF:io,SUBMODULE:co,TEMPLATE:ao,TYPE_PAIR:uo}),jt=lo;var Eo=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Ft=Eo;var _o=Object.freeze([]),ho=Object.freeze({}),fo="",mo="	",bo=`
`,Lo="UTF-8",Oo=Object.freeze({EMPTY_ARRAY:_o,EMPTY_OBJECT:ho,EMPTY_STRING:fo,HORIZONTAL_TAB:mo,LINE_BREAK:bo,UNICODE_TEXT:Lo,Codes:Ft,Keys:xt,Types:jt}),ee=Oo;var{EMPTY_STRING:Ao,UNICODE_TEXT:ge}=ee,po=44,To=48,No=57,Io=46,Ro=45,ko=43,Co=65,vo=90,Bo=-1,Po=1,So=new TextDecoder(ge),Do=new TextEncoder,Mo=(b,a,s=0,n=b.length|0,_=0,r=a.length|0)=>{for(_=_|0,s=s|0,r=r|0,n=n|0;;){let c=s>=n,t=_>=r;if(c||t)break;let l=b[s],T=a[_];if(s=s+1|0,_=_+1|0,l<T)return Bo;if(l>T)return Po}return 0},wo=(b,a,s=0,n=b.length|0,_=0,r=a.length|0)=>{for(_=_|0,s=s|0,r=r|0,n=n|0;;){let c=_>=r,t=s>=n;if(c||t)break;a[_]=b[s],_=_+1|0,s=s+1|0}},Uo=(b,a,s=0,n=b.length|0,_=0,r=a.length|0)=>{s=s|0,_=_|0,n=n|0,r=r|0;let c=n-s|0,t=r-_|0;if(c!==t)return!1;for(;;){let o=s>=n,l=_>=r;if(o||l)break;let I=b[s],w=a[_];if(s=s+1|0,_=_+1|0,I!==w)return!1}return!0},Ko=b=>{b=b>>>0;let a=0,s=0;for(;s=(s<<1|1)>>>0,!(s>b);)a=a+1|0;return a},zt=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),Ke=(b,a,s,n)=>{for(b=b>>>0,n=n??a.length|0,s=s|0,n=n|0;b>0&&n>s;)n=n-1|0,a[n]=zt[b&15],b=b>>>4},go=(b,a,s,n)=>{let _=s|0,r=s+n|0;if(n===0)return!1;let c=a[_];for((c===ko||c===Ro)&&(_=_+1|0);_<r;){let t=a[_];if(_=_+1|0,!(To<=t&&t<=No||(Io===t||po===t)))return!1}return!0},yo=b=>{let a=b>=Co,s=b<=vo;return a&&s},ue=128,le=127,Jt=-1,W=64,ye=b=>{b=b|0;let a=[];for(;;){let s=b&le;b=b>>7;let n=b===0,_=(s&W)===0,r=n&&_,c=b===-1,t=(s&W)!==0;if(r||c&&t){a.push(s);break}s=s|ue,a.push(s)}return a},Go=b=>{let a=[],s=!0;for(;s;){let n=b&le;b>>=7,b===0&&!(n&W)||b===-1&&n&W?s=!1:n|=ue,a.push(n)}return a},Qt=(b,a)=>{a=a|0;let s=0,n=0;for(;;){let _=b[a]|0;a=a+1|0;let r=(_&le)<<n;if(n=n+7|0,s=s|r,(_&ue)===0){let t=(_&W)!==0,o=n<32;if(t&&o){let T=Jt<<n;s=s|T}break}}return s},Yo=(b,a)=>{a=a|0;let s=0,n=0;for(;;){let _=b[a]|0;a=a+1|0;let r=(_&le)<<n;if(n=n+7|0,s=s|r,!(_&ue)){if(_&W){let c=Jt<<n;s=s|c}break}}return s},Ho=b=>So.decode(b),xo=b=>Do.encode(b),jo=(b=Ao)=>{let a=b.length|0,s=ye(a),n=Buffer.from(b,ge);return Object.freeze([...s,...n])},Fo=(b,a)=>{a=a|0;let s=Qt(b,a),n=ye(s).length;return a=a+n|0,b.subarray(a,a+s|0).toString(ge)},Xo=58,Vo=46,te=32,we=48,zo=67,F=new Uint8Array(zo),Xt=F.subarray(0,8),ae=F.subarray(10,49),Vt=F.subarray(51,68),Ue=16,Jo=2;F[8]=Xo;F[9]=te;F[49]=te;F[50]=te;var Qo=(b,a)=>{a=a??console.log;let s=32,n=126,_=b.length|0,r=0;for(;_>0;){Xt.fill(we),Ke(r,Xt),ae.fill(te),Vt.fill(te);let c=_>=Ue?Ue:_;_=_-Ue|0;let t=0,o=0;for(let T=1;T<=c;T=T+1|0){let I=b[r]&255;ae[t+0|0]=we,ae[t+1|0]=we,Ke(I,ae,t,t+2|0);let w=Vo;s<=I&&I<=n&&(w=I),Vt[o]=w,r=r+1|0,t=t+2|0,o=o+1|0,T%Jo===0&&(t=t+1|0)}let l=String.fromCodePoint(...F);a(l)}},Zo=function*(b,a){let s=b.length|0,n=a.length|0,_=0;for(;_<s&&_<n;){let r=b[_],c=a[_];yield[r,c],_=_+1|0}},Wo=function*(b,a,s){let n=b.length|0,_=a.length|0,r=s.length|0,c=0;for(;c<n&&c<_&&c<r;){let t=b[c],o=a[c],l=s[c];yield[t,o,l],c=c+1|0}},qo=Object.freeze({ARRAY_COMPARE:Mo,ARRAY_COPY:wo,ARRAY_EQUAL:Uo,BIT_DEPTH:Ko,HEX_DIGITS:zt,HEX_ENCODE:Ke,IS_NUMBER:go,IS_UPPERCASE:yo,LEB128_DECODE:Qt,LEB128_DECODE_SIGNED:Yo,LEB128_ENCODE:ye,LEB128_ENCODE_SIGNED:Go,UTF8_DECODE:Ho,UTF8_ENCODE:xo,WASM_STRING_ENCODE:jo,WASM_STRING_DECODE:Fo,XXD_DUMP_HEX:Qo,ZIP2:Zo,ZIP3:Wo}),Zt=qo;var{Keys:S,Types:R,Codes:p}=ee,{EMPTY_STRING:se,UNICODE_TEXT:Wi}=ee,{ARRAY_EQUAL:$o,IS_UPPERCASE:ei,UTF8_DECODE:G,UTF8_ENCODE:D}=Zt,g=new Error("unreachable code reached"),Y=$o,Ee=D(S.ASSIGN),ti=D(S.ALIAS),si=D(S.BREAK),ni=D(S.ELSE),ri=D(S.ENUMERATION),oi=D(S.EXPORT),ii=D(S.IF),ci=D(S.IMPORT),ai=D(S.INTO),Wt=D(S.IS),ui=D(S.LOOP),li=D(S.MUTABLE),Ei=D(S.NATIVE),_i=D(S.OBJECT),hi=D(S.PROCEDURE),fi=D(S.RETURN),mi=D(S.SELF),bi=D(S.TEMPLATE),X=0,qt=1,$t=2,es=1,ts=2,ss=1,ns=2,rs=1,os=2,is=1,cs=2,as=1,Li=2,us=1,ls=2,Es=1,_s=2,Oi=0,Ge=1,B=0,hs=1,ft=2,mt=3,bt=4,fs=5,V=6,ms=7,Lt=8,Ot=9,At=10,pt=11,Tt=12,Nt=13,dt=14,H=15,It=16,Rt=17,_e=18,kt=19,bs=20,ne=21,he=22,Ye=23,Ls=1,Os=2,As=3,ps=4,He=5,xe=6,Ts=7,Ns=1,je=2,ds=3,Is=4,fe=5,Fe=6,Xe=7,Rs=8,me=9,ks=1,Cs=2,vs=3,Bs=4,Ps=5,Ss=1,Ds=2,Ms=3,ws=4,Ve=5,ze=6,Je=7,Us=8,Ks=1,gs=2,ys=3,Gs=4,Qe=5,Ze=6,Ys=7,Hs=1,xs=2,js=3,Fs=4,We=5,qe=6,Xs=7,Vs=1,zs=2,Js=1,$e=2,Qs=3,Zs=1,et=2,Ws=3,qs=4,$s=5,tt=6,st=7,nt=8,en=9,tn=10,sn=11,nn=1,rn=2,be=3,on=4,z=1,cn=2,rt=3,ot=4,Le=5,an=6,un=1,ln=2,En=3,_n=1,hn=2,fn=3,it=4,Ai=5,mn=6,ct=7,bn=8,Ln=9,at=10,x=1,ut=2,On=3,An=1,pn=2,Tn=3,Nn=4,dn=5,lt=6,In=7,Rn=1,kn=2,Cn=3,vn=4,Bn=5,Pn=6,Et=7,Sn=8,Dn=9,Oe=1,Mn=2,wn=1,Un=2,Kn=3,pi=4,Ti=5,_t=6,gn=7,yn=8,Gn=1,Yn=2,Hn=3;var re=1,xn=2,jn=3,Fn=4,Xn=5,Vn=6,zn=7,Ae=1,Jn=2,pe=3,Qn=4,oe=1,Zn=2,Te=3,Wn=4,qn=5,ht=6,Ne=7,$n=8,er=9,de=10,tr=11,sr=12,Ni=Object.freeze({array:si,situation:ft}),Ie=Object.freeze({array:ri,situation:Lt}),di=Object.freeze({array:oi,situation:Ot}),Ii=Object.freeze({array:ii,situation:bt}),Ri=Object.freeze({array:ci,situation:At}),ki=Object.freeze({array:ui,situation:pt}),Re=Object.freeze({array:li,situation:Tt}),Ci=Object.freeze({array:Ei,situation:Nt}),Ct=Object.freeze({array:_i,situation:It}),ke=Object.freeze({array:hi,situation:Rt}),vi=Object.freeze({array:fi,situation:mt}),rr=Object.freeze({array:mi,situation:dt}),Bi=Object.freeze({array:bi,situation:kt}),Pi=Object.freeze([Ie,Ct,ke]),Si=Object.freeze([rr]),Di=Object.freeze([Ie,ke]),Mi=Object.freeze([ke]),wi=Object.freeze([Re,rr]),Ui=Object.freeze([Ie,di,Ri,Re,Ci,Ct,ke,Bi]),Ki=Object.freeze([Ni,Ii,Re,ki,vi]),gi=Object.freeze([Ie,Ct]),J=1,Q=2,vt=class{constructor(){this.continueParse=!1,this.extraLineBreak=!0,this.foundError=!1,this.offset=0,this.root={type:R.MODULE,items:[]},this.events=new Map,this.emitter=new nr.default,this.emitter.on("done",a=>{(this.events.get("done")||[]).forEach(n=>{n(a)})}),this.emitter.on("error",()=>{(this.events.get("error")||[]).forEach(s=>{s()})}),this.data=Object.seal({item:this.root,indentation:0,situations:Object.seal({general:hs,blockExport:B,blockImport:B,blockLoop:B,blockMutable:B,blockNative:B,blockSelf:B,commandBreak:B,commandReturn:B,condition:B,constraintsList:B,declaration:B,disambiguation:B,enumeration:B,nameList:B,object:B,procedure:B,statementsList:B,template:B,typeName:B,typePair:B,typesList:B,value:B}),flags:Object.seal({enumeration:X,blockExport:X,blockImport:X,blockMutable:X,blockNative:X,blockSelf:X,condition:X,procedure:X}),parents:Object.seal({blockMutable:Oi})}),this.history=[],Object.seal(this)}on(a,s){if(vt.SET_EVENTS.has(a)){let n=this.events.get(a)||[];n.push(s),this.events.set(a,n)}}feed(a,s,n,_){if(this.foundError)return;let{data:r}=this,{situations:c}=r,t=s[n];if(t!==p.HASHTAG){if(t===p.LINE_BREAK){if(this.offset=a+1|0,this.extraLineBreak)return;this.extraLineBreak=!0}else this.extraLineBreak=!1;for(this.continueParse=!0;this.continueParse;)switch(this.continueParse=!1,c.general){case Ot:{this.feedBlockExport(a,s,n,_);break}case At:{this.feedBlockImport(a,s,n,_);break}case pt:{this.feedBlockLoop(a,s,n,_);break}case Tt:{this.feedBlockMutable(a,s,n,_);break}case Nt:{this.feedBlockNative(a,s,n,_);break}case dt:{this.feedBlockSelf(a,s,n,_);break}case ft:{this.feedCommandBreak(a,s,n,_);break}case mt:{this.feedCommandReturn(a,s,n,_);break}case bt:{this.feedCondition(a,s,n,_);break}case fs:{this.feedConstraintsList(a,s,n,_);break}case V:{this.feedDeclaration(a,s,n,_);break}case ms:{this.feedDisambiguation(a,s,n,_);break}case Lt:{this.feedEnumeration(a,s,n,_);break}case H:{this.feedNameList(a,s,n,_);break}case It:{this.feedObject(a,s,n,_);break}case Rt:{this.feedProcedure(a,s,n,_);break}case hs:{this.feedRoot(a,s,n,_);break}case _e:{this.feedStatementsList(a,s,n,_);break}case kt:{this.feedTemplate(a,s,n,_);break}case bs:{this.feedTypeName(a,s,n,_);break}case ne:{this.feedTypePair(a,s,n,_);break}case he:{this.feedTypesList(a,s,n,_);break}case Ye:{this.feedValue(a,s,n,_);break}}}}feedBlockExport(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockExport){case Ls:{let{item:o}=r,l={type:R.EXPORT,items:[]};o.push(l),r.item=l,t.blockExport=Os;break}case Os:{if(s[n]===p.COLON){c.blockExport=$t,t.blockExport=As;return}c.blockExport=qt,t.blockExport=xe,this.continueParse=!0;break}case As:{if(s[n]===p.LINE_BREAK){t.blockExport=ps;return}this.error();break}case ps:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.blockExport=He,this.continueParse=!0;break}case He:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}t.blockExport=xe,this.continueParse=!0;break}case xe:{let{item:o}=r,{items:l}=o;t.blockExport=Ts,this.save(),r.item=l;let T=this.keyExpected(s,n,_,Pi);if(T){this.keyDispatch(T);return}t.general=V,t.declaration=z,this.continueParse=!0;break}case Ts:{switch(c.blockExport){case qt:{this.undo(),this.undo(),this.continueParse=!0;break}case $t:{t.blockExport=He,this.continueParse=!0;break}default:throw g}break}}}feedBlockImport(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockImport){case Ns:{let{item:o}=r,l={type:R.IMPORT,items:[]};o.push(l),r.item=l,t.blockImport=je;break}case je:{if(s[n]===p.COLON){c.blockImport=ts,t.blockImport=ds;return}c.blockImport=es,t.blockImport=Fe,this.continueParse=!0;break}case ds:{if(s[n]===p.LINE_BREAK){t.blockImport=Is;return}this.error();break}case Is:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.blockImport=fe,this.continueParse=!0;break}case fe:{if(this.indentationDecrease(a)){let{item:o}=r;switch(o.type){case R.SUBMODULE:{this.undo(),t.blockImport=me;break}case R.IMPORT:this.undo(),this.undo()}this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}t.blockImport=Fe,this.continueParse=!0;break}case Fe:{let{item:o}=r,{items:l}=o,T={type:R.SUBMODULE,name:[]};l.push(T),t.blockImport=me,this.save(),r.item=T,t.blockImport=Xe,this.save();let{name:I}=T;r.item=I,t.general=H,t.nameList=x,this.continueParse=!0;break}case Xe:{let o=s[n];if(o===p.LINE_BREAK){this.undo(),t.blockImport=me,this.continueParse=!0;return}if(o===p.COLON){let{item:T}=r;T.items=[],t.blockImport=je,this.continueParse=!0;return}let l=s.subarray(n,n+_|0);if(Y(ti,l)){t.blockImport=Rs;return}this.error();break}case Rs:{let{item:o}=r,l=s.subarray(n,n+_|0),T=G(l);o.alias=T,t.blockImport=Xe;break}case me:{let{item:o}=r;switch(o.type){case R.SUBMODULE:{t.blockImport=fe;break}case R.IMPORT:{switch(c.blockImport){case es:{this.undo(),this.undo(),s[n]!==p.LINE_BREAK&&(this.continueParse=!0);break}case ts:{t.blockImport=fe;break}default:throw g}break}default:throw g}break}default:throw g}}feedBlockLoop(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockLoop){case ks:{let{item:o}=r,l={type:R.LOOP,statements:[]};o.push(l),r.item=l,t.blockLoop=Cs;break}case Cs:{if(s[n]===p.COLON){t.blockLoop=vs;return}this.error();break}case vs:{if(s[n]===p.LINE_BREAK){t.blockLoop=Bs;return}this.error();break}case Bs:{let{item:o}=r,{statements:l}=o;t.blockLoop=Ps,this.save(),r.item=l,t.general=_e,t.statementsList=Oe,this.continueParse=!0;break}case Ps:{this.undo(),this.continueParse=!0;break}}}feedBlockMutable(a,s,n,_){let{data:r}=this,{flags:c,parents:t,situations:o}=r;switch(o.blockMutable){case Ss:{let{item:l}=r,T={type:R.MUTABLE,items:[]};l.push(T),r.item=T,o.blockMutable=Ds;break}case Ds:{if(s[n]===p.COLON){c.blockMutable=ns,o.blockMutable=Ms;return}c.blockMutable=ss,o.blockMutable=ze,this.continueParse=!0;break}case Ms:{if(s[n]===p.LINE_BREAK){o.blockMutable=ws;break}this.error();break}case ws:{o.blockMutable=Ve,this.continueParse=!0;break}case Ve:{o.blockMutable=ze,this.continueParse=!0;break}case ze:{let{item:l}=r,{items:T}=l,I=Je,w=this.keyExpected(s,n,_,Si);if(!w&&t.blockMutable===Ge&&(I=Us),o.blockMutable=I,this.save(),r.item=T,w){this.keyDispatch(w);return}switch(t.blockMutable){case Ge:{o.general=ne,o.typePair=re;break}default:{o.general=V,o.declaration=z;break}}this.continueParse=!0;break}case Je:{switch(this.continueParse=!0,c.blockMutable){case ss:{this.undo(),this.undo();break}case ns:{o.blockMutable=Ve;break}default:throw g}break}case Us:{if(s[n]===p.LINE_BREAK){o.blockMutable=Je;return}this.error();break}}}feedBlockNative(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockNative){case Ks:{let{item:o}=r,l={type:R.NATIVE,items:[]};o.push(l),r.item=l,t.blockNative=gs;break}case gs:{if(s[n]===p.COLON){c.blockNative=os,t.blockNative=ys;return}c.blockNative=rs,t.blockNative=Ze,this.continueParse=!0;break}case ys:{if(s[n]===p.LINE_BREAK){t.blockNative=Gs;break}this.error();break}case Gs:{t.blockNative=Qe,this.continueParse=!0;break}case Qe:{t.blockNative=Ze,this.continueParse=!0;break}case Ze:{let{item:o}=r,{items:l}=o;t.blockNative=Ys,this.save(),r.item=l;let T=this.keyExpected(s,n,_,Di);if(T){this.keyDispatch(T);return}t.general=V,t.declaration=z,this.continueParse=!0;break}case Ys:{switch(this.continueParse=!0,c.blockNative){case rs:{this.undo(),this.undo();break}case os:{t.blockNative=Qe;break}default:throw g}break}}}feedBlockSelf(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.blockSelf){case Hs:{let{item:o}=r,l={type:R.SELF,items:[]};o.push(l),r.item=l,t.blockSelf=xs;break}case xs:{if(s[n]===p.COLON){c.blockSelf=cs,t.blockSelf=js;return}c.blockSelf=is,t.blockSelf=qe,this.continueParse=!0;break}case js:{if(s[n]===p.LINE_BREAK){t.blockSelf=Fs;break}this.error();break}case Fs:{t.blockSelf=We,this.continueParse=!0;break}case We:{t.blockSelf=qe,this.continueParse=!0;break}case qe:{let{item:o}=r,{items:l}=o;t.blockSelf=Xs,this.save(),r.item=l;let T=this.keyExpected(s,n,_,Mi);if(T){this.keyDispatch(T);return}t.general=V,t.declaration=z,this.continueParse=!0;break}case Xs:{switch(this.continueParse=!0,c.blockSelf){case is:{this.undo(),this.undo();break}case cs:{t.blockSelf=We;break}default:throw g}break}}}feedCommandBreak(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.commandBreak){case Vs:{let{item:t}=r,o={type:R.BREAK};t.push(o),c.commandBreak=zs;break}case zs:{if(s[n]===p.LINE_BREAK){this.undo();return}this.error();break}}}feedCommandReturn(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.commandReturn){case Js:{let{item:t}=r,o={type:R.RETURN,values:[]};t.push(o),r.item=o,c.commandReturn=$e;break}case $e:{let{item:t}=r,{values:o}=t,l=s.subarray(n,n+_|0),T=G(l);o.push(T),c.commandReturn=Qs;break}case Qs:{let t=s[n];if(t===p.COMMA){c.commandReturn=$e;return}if(t===p.LINE_BREAK){this.undo();return}this.error();break}}}feedCondition(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.condition){case Zs:{let{item:o}=r,l={type:R.CONDITION,values:[],branches:[]};o.push(l),r.item=l,t.condition=et;break}case et:{let{item:o}=r,{values:l}=o,T=s.subarray(n,n+_|0),I=G(T);l.push(I),t.condition=Ws;break}case Ws:{let o=s[n];if(o===p.COMMA){t.condition=et;return}if(o===p.COLON){t.condition=qs;return}let l=s.subarray(n,n+_|0);if(Y(Wt,l)){c.condition=as,t.condition=tt,this.continueParse=!0;break}this.error();break}case qs:{if(s[n]===p.LINE_BREAK){t.condition=$s;return}this.error();break}case $s:{r.indentation=this.indentationCalculate(a),c.condition=Li,t.condition=tt,this.continueParse=!0;break}case tt:{if(this.indentationDecrease(a)){this.undo(),this.continueParse=!0;return}let{item:o}=r,{branches:l}=o,T=s.subarray(n,n+_|0);if(Y(Wt,T)){this.save();let I={type:R.BRANCH_VALUE,values:[],statements:[]};l.push(I),r.item=I,t.condition=st;return}if(Y(ni,T)){this.save();let I={type:R.BRANCH_DEFAULT,statements:[]};l.push(I),r.item=I,t.condition=nt;break}if(c.condition==as){this.undo(),this.continueParse=!0;break}this.error();break}case st:{let{item:o}=r,{values:l}=o,T=s.subarray(n,n+_|0),I=G(T);l.push(I),t.condition=nt;break}case nt:{let o=s[n];if(o===p.COMMA){t.condition=st;return}if(o===p.COLON){t.condition=en;return}this.error();break}case en:{if(s[n]===p.LINE_BREAK){t.condition=tn;return}this.error();break}case tn:{let{item:o}=r,{statements:l}=o;t.condition=sn,this.save(),r.item=l,t.general=_e,t.statementsList=Oe,this.continueParse=!0;break}case sn:{this.undo(),this.continueParse=!0;break}}}feedConstraintsList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.constraintsList){case nn:{let{item:t}=r;c.constraintsList=rn,this.continueParse=!0;break}case rn:{if(s[n]===p.LEFT_CURLY_BRACKET){c.constraintsList=be;return}this.error();break}case be:{let t=s[n];if(t===p.LINE_BREAK)return;if(t===p.RIGHT_CURLY_BRACKET){this.undo();return}c.constraintsList=on,this.save(),c.general=ne,c.typePair=re,this.continueParse=!0;break}case on:{let t=s[n];if(t===p.RIGHT_CURLY_BRACKET){c.constraintsList=be,this.continueParse=!0;return}if(t===p.COMMA){c.constraintsList=be;return}this.error();break}}}feedDeclaration(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.declaration){case z:{let{item:t}=r,o={type:se,name:[],value:{}};t.push(o),r.item=o;let{name:l}=o;c.declaration=cn,this.save(),r.item=l,c.general=H,c.nameList=x,this.continueParse=!0;break}case cn:{if(s[n]===p.COLON){let{item:l}=r;l.type=R.DECLARATION,c.declaration=rt;return}let{item:o}=r;o.type=R.ASSIGNMENT,c.declaration=ot,this.continueParse=!0;break}case rt:{let t=s.subarray(n,n+_|0);if(Y(Ee,t)){c.declaration=Le;return}let{item:o}=r,l={};o.dataType=l,c.declaration=ot,this.save(),r.item=l,c.general=bs,c.typeName=Gn,this.continueParse=!0;break}case ot:{let t=s.subarray(n,n+_|0);if(Y(Ee,t)){c.declaration=Le;return}this.error();break}case Le:{let{item:t}=r,{value:o}=t;c.declaration=an,this.save(),r.item=o,c.general=Ye,c.value=oe,this.continueParse=!0;break}case an:{if(s[n]===p.LINE_BREAK){this.undo();return}this.error();break}}}feedDisambiguation(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.disambiguation){case un:{let{item:t}=r,o=[],l={parent:t,names:o};r.item=l,c.disambiguation=ln,this.save(),r.item=o,c.general=H,c.nameList=x,this.continueParse=!0;break}case ln:{let{item:t}=r,{parent:o,names:l}=t,T=s[n];if(T===p.LEFT_PARENTHESIS){let y={type:R.PROCEDURE_CALL,name:l};o.push(y),c.disambiguation=En,this.save(),r.item=y,c.general=Ye,c.value=ht;return}let I=(y,ie)=>{let q={type:y,name:l,value:{}};o.push(q),r.item=q,c.general=V,c.declaration=ie};if(T===p.COLON){I(R.DECLARATION,rt);return}let w=s.subarray(n,n+_|0);if(Y(Ee,w)){I(R.ASSIGNMENT,Le);return}this.error();break}case En:{if(s[n]===p.LINE_BREAK){this.undo();return}this.error();break}}}feedEnumeration(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.enumeration){case _n:{let{item:o}=r,l={type:R.ENUMERATION,name:se,items:[]};o.push(l),r.item=l,t.enumeration=hn;break}case hn:{let{item:o}=r,l=s.subarray(n,n+_|0),T=G(l);o.name=T,t.enumeration=fn;break}case fn:{let o=s[n];if(o===p.SEMICOLON){c.enumeration=us,t.enumeration=it;return}if(o===p.COLON){c.enumeration=ls,t.enumeration=it;return}this.error();break}case it:{if(s[n]===p.LINE_BREAK){switch(c.enumeration){case us:{this.undo(),this.undo();return}case ls:{t.enumeration=mn;return}}return}this.error();break}case Ai:break;case mn:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.enumeration=ct,this.continueParse=!0;break}case ct:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}t.enumeration=bn,this.continueParse=!0;break}case bn:{let{item:o}=r,{items:l}=o;t.enumeration=ct,this.save();let T=s.subarray(n,n+_|0),I=G(T),w={type:R.LABEL,name:I,items:[]};l.push(w),r.item=w,t.enumeration=Ln;break}case Ln:{let o=s[n];if(o===p.LINE_BREAK){t.enumeration=at,this.continueParse=!0;return}if(o===p.LEFT_PARENTHESIS){let{item:l}=r,{items:T}=l;t.enumeration=at,this.save(),r.item=T,t.general=he,t.typesList=Ae,this.continueParse=!0;return}this.error();break}case at:{if(s[n]===p.LINE_BREAK){this.undo();return}this.error();break}default:throw g}}feedNameList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.nameList){case x:{c.nameList=ut,this.continueParse=!0;break}case ut:{let{item:t}=r,o=s.subarray(n,n+_|0),l=G(o);t.push(l),c.nameList=On;break}case On:{if(s[n]===p.DOT){c.nameList=ut;return}this.undo(),this.continueParse=!0;break}}}feedObject(a,s,n,_){let{data:r}=this,{parents:c,situations:t}=r;switch(t.object){case An:{let{item:o}=r,l={type:R.OBJECT,name:se,items:[]};o.push(l),r.item=l,t.object=pn;break}case pn:{let{item:o}=r,l=s.subarray(n,n+_|0),T=G(l);o.name=T,t.object=Tn;break}case Tn:{if(s[n]===p.COLON){t.object=Nn;return}this.error();break}case Nn:{if(s[n]===p.LINE_BREAK){t.object=dn;return}this.error();break}case dn:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),t.object=lt,this.continueParse=!0;break}case lt:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}let{item:o}=r,{items:l}=o,T=this.keyExpected(s,n,_,wi);if(T){T===Re&&(c.blockMutable=Ge),this.save(),r.item=l,this.keyDispatch(T);return}t.object=In,this.save(),r.item=l,t.general=ne,t.typePair=re,this.continueParse=!0;break}case In:{if(s[n]===p.LINE_BREAK){t.object=lt;return}this.error();break}}}feedProcedure(a,s,n,_){let{data:r}=this,{flags:c,situations:t}=r;switch(t.procedure){case Rn:{let{item:o}=r,l={type:R.PROCEDURE,head:{name:se,inputs:[],outputs:[]},body:[]};o.push(l),r.item=l,t.procedure=kn;break}case kn:{let{item:o}=r,{head:l}=o,T=s.subarray(n,n+_|0),I=G(T);l.name=I,t.procedure=Cn;break}case Cn:{let{item:o}=r,{head:l}=o,{inputs:T}=l;t.procedure=vn,this.save(),r.item=T,t.general=he,t.typesList=Ae,this.continueParse=!0;break}case vn:{let o=s.subarray(n,n+_|0);if(Y(ai,o)){t.procedure=Bn;return}this.error();break}case Bn:{let{item:o}=r,{head:l}=o,{outputs:T}=l;t.procedure=Pn,this.save(),r.item=T,t.general=he,t.typesList=Ae,this.continueParse=!0;break}case Pn:{let o=s[n];if(o===p.SEMICOLON){c.procedure=Es,t.procedure=Et;return}if(o===p.COLON){c.procedure=_s,t.procedure=Et;return}this.error();break}case Et:{if(s[n]===p.LINE_BREAK)switch(c.procedure){case Es:{this.undo(),this.undo();return}case _s:{t.procedure=Sn;return}default:throw g}this.error();break}case Sn:{let{item:o}=r,{body:l}=o;t.procedure=Dn,this.save(),r.item=l,t.general=_e,t.statementsList=Oe,this.continueParse=!0;break}case Dn:{this.undo(),this.undo(),this.continueParse=!0;break}}}feedRoot(a,s,n,_){let{data:r}=this,{situations:c}=r,{item:t}=r,{items:o}=t;this.save(),r.item=o;let l=this.keyExpected(s,n,_,Ui);if(l){this.keyDispatch(l);return}c.general=V,c.declaration=z,this.continueParse=!0}feedStatementsList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.statementsList){case Oe:{if(this.indentationError(a,J)){this.error();return}r.indentation=this.indentationCalculate(a),c.statementsList=Mn,this.continueParse=!0;break}case Mn:{if(this.indentationDecrease(a)){this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}this.save();let t=this.keyExpected(s,n,_,Ki);if(t){this.keyDispatch(t);return}c.general=ms,c.disambiguation=un,this.continueParse=!0;break}}}feedTemplate(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.template){case wn:{let{item:t}=r,o={type:R.TEMPLATE,constraints:[],items:[]};t.push(o),r.item=o,c.template=Un;break}case Un:{if(s[n]===p.LEFT_CURLY_BRACKET){c.template=Kn,this.save();let{item:o}=r,{constraints:l}=o;r.item=l,c.general=fs,c.constraintsList=nn,this.continueParse=!0;return}this.error();break}case Kn:{let t=s[n];if(t===p.COLON){c.template=pi;return}if(t===p.LINE_BREAK){c.template=_t;return}break}case Ti:{if(this.indentationError(a,J)){this.error();return}c.template=_t,this.continueParse=!0;break}case _t:{if(this.indentationDecrease(a)){this.undo(),this.undo(),this.continueParse=!0;return}if(this.indentationError(a,Q)){this.error();return}c.template=gn,this.continueParse=!0;break}case gn:{let{item:t}=r,{items:o}=t;c.template=yn,this.save(),r.item=o;let l=this.keyExpected(s,n,_,gi);if(l){this.keyDispatch(l);return}c.general=V,c.declaration=z,this.continueParse=!0;break}case yn:break}}feedTypesList(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.typesList){case Ae:{c.typesList=Jn,this.continueParse=!0;break}case Jn:{if(s[n]===p.LEFT_PARENTHESIS){c.typesList=pe;return}this.error();break}case pe:{let t=s[n];if(t===p.LINE_BREAK)return;if(t===p.RIGHT_PARENTHESIS){this.undo();return}c.typesList=Qn,this.save(),c.general=ne,c.typePair=re,this.continueParse=!0;break}case Qn:{let t=s[n];if(t===p.RIGHT_PARENTHESIS){c.typesList=pe,this.continueParse=!0;return}if(t===p.COMMA){c.typesList=pe;return}this.error();break}}}feedTypeName(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.typeName){case Gn:{let{item:t}=r,o=[];t.name=o,c.typeName=Yn,this.save(),r.item=o,c.general=H,c.nameList=x,this.continueParse=!0;break}case Yn:{if(s[n]===p.LEFT_SQUARE_BRACKET){let{item:o}=r,l=[];o.array=l,c.typeName=Hn;return}this.undo(),this.continueParse=!0;break}case Hn:{if(s[n]===p.RIGHT_SQUARE_BRACKET){this.undo();return}let{item:o}=r,{array:l}=o;this.save(),r.item=l,c.general=H,c.nameList=x;return}}}feedTypePair(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.typePair){case re:{let{item:t}=r,o={type:R.TYPE_PAIR,key:se,value:[]};t.push(o),r.item=o,c.typePair=xn,this.continueParse=!0;break}case xn:{let{item:t}=r,o=s.subarray(n,n+_|0),l=G(o);t.key=l,c.typePair=jn;break}case jn:{if(s[n]===p.COLON){c.typePair=Fn;return}this.error();break}case Fn:{let{item:t}=r,{value:o}=t;c.typePair=Xn,this.save(),r.item=o,c.general=H,c.nameList=x,this.continueParse=!0;break}case Xn:{if(s[n]===p.LEFT_SQUARE_BRACKET){c.typePair=Vn,this.continueParse=!0;return}this.undo(),this.continueParse=!0;break}case Vn:{if(s[n]===p.RIGHT_SQUARE_BRACKET){this.undo();return}let{item:o}=r;o.array=[];let{array:l}=o;c.typePair=zn,this.save(),r.item=l,c.general=H,c.nameList=x;return}case zn:{if(s[n]===p.RIGHT_SQUARE_BRACKET){this.undo();return}this.error();return}}}feedValue(a,s,n,_){let{data:r}=this,{situations:c}=r;switch(c.value){case oe:{let{item:t}=r;if(s[n]===p.LEFT_SQUARE_BRACKET){t.type=R.ARRAY,c.value=Zn;return}let l=[];t.name=l,c.value=qn,this.save(),r.item=l,c.general=H,c.nameList=x,this.continueParse=!0;break}case Zn:{let{item:t}=r,o=[];t.values=o,this.save(),r.item=o,c.value=Te,this.continueParse=!0;break}case Te:{let{item:t}=r,o=s[n];if(o===p.LINE_BREAK)return;if(o===p.RIGHT_SQUARE_BRACKET){this.undo(),this.undo();return}c.value=Wn,this.save();let l={};t.push(l),r.item=l,c.value=oe,this.continueParse=!0;break}case Wn:{let t=s[n];if(t===p.COMMA){c.value=Te;return}if(t===p.RIGHT_SQUARE_BRACKET){c.value=Te,this.continueParse=!0;return}this.error();break}case qn:{let{item:t}=r;if(s[n]===p.LEFT_PARENTHESIS){let{name:l}=t,I=l[0].codePointAt(0);if(ei(I)){t.type=R.INSTANCE,c.value=er;return}t.type=R.EXPRESSION,c.value=ht;return}t.type=R.LITERAL,this.undo(),this.continueParse=!0;break}case ht:{let{item:t}=r,o=[];t.inputs=o,this.save(),r.item=o,c.value=Ne,this.continueParse=!0;break}case Ne:{let{item:t}=r,o=s[n];if(o===p.LINE_BREAK)return;if(o===p.RIGHT_PARENTHESIS){this.undo(),this.undo();return}c.value=$n,this.save();let l={};t.push(l),r.item=l,c.value=oe,this.continueParse=!0;break}case $n:{let t=s[n];if(t===p.COMMA){c.value=Ne;return}if(t===p.RIGHT_PARENTHESIS){c.value=Ne,this.continueParse=!0;return}this.error();break}case er:{let{item:t}=r,o=[];t.members=o,this.save(),r.item=o,c.value=de,this.continueParse=!0;break}case de:{let{item:t}=r,o=s[n];if(o===p.LINE_BREAK)return;if(o===p.RIGHT_PARENTHESIS){this.undo(),this.undo();return}let l=[],T={name:l};t.push(T),this.save(),r.item=T,c.value=tr,this.save(),r.item=l,c.general=H,c.nameList=x,this.continueParse=!0;break}case tr:{let t=s.subarray(n,n+_|0);if(Y(Ee,t)){let{item:o}=r,l={};o.value=l,c.value=sr,this.save(),r.item=l,c.value=oe;return}this.error();break}case sr:{let t=s[n];if(t===p.COMMA){this.undo(),c.value=de;return}if(t===p.RIGHT_PARENTHESIS){c.value=de,this.continueParse=!0;return}this.error();break}}}indentationCalculate(a){let{offset:s}=this;return a-s|0}indentationDecrease(a){let{data:s}=this,{indentation:n}=s;return this.indentationCalculate(a)<n}indentationError(a,s){let{data:n}=this,{indentation:_}=n,r=this.indentationCalculate(a);switch(s){case J:return r<=_;case Q:return r!==_}throw g}keyDispatch(a){let{situations:s}=this.data,{situation:n}=a;switch(this.save(),s.general=n,this.continueParse=!0,n){case Ot:{s.blockExport=Ls;break}case At:{s.blockImport=Ns;break}case pt:{s.blockLoop=ks;break}case Tt:{s.blockMutable=Ss;break}case Nt:{s.blockNative=Ks;break}case dt:{s.blockSelf=Hs;break}case ft:{s.commandBreak=Vs;break}case mt:{s.commandReturn=Js;break}case bt:{s.condition=Zs;break}case Lt:{s.enumeration=_n;break}case It:{s.object=An;break}case Rt:{s.procedure=Rn;break}case kt:{s.template=wn;break}default:throw g}}keyExpected(a,s,n,_){let r=a.subarray(s,s+n|0),c=o=>Y(o.array,r);return _.find(c)}done(){this.foundError||this.emitter.emit("done",this.root)}close(){}save(){let{data:a}=this,s={flags:Object.assign({},a.flags),item:a.item,indentation:a.indentation|0,situations:Object.assign({},a.situations)};this.history.push(s)}undo(){let{data:a}=this,s=this.history.pop(),{flags:n,item:_,indentation:r,situations:c}=s;a.flags=Object.assign(a.flags,n),a.item=_,a.indentation=r,a.situations=Object.assign(a.situations,c)}error(){this.foundError=!0,this.emitter.emit("error")}},Z=vt;Kt(Z,"SET_EVENTS",new Set(["done","error"]));Object.values(Z).forEach(Object.freeze);Object.freeze(Z);Object.freeze(Object.getPrototypeOf(Z));var qi=Z;export{qi as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
