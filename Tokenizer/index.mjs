var He=Object.create;var q=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Ge=Object.getOwnPropertyNames;var Xe=Object.getPrototypeOf,Ke=Object.prototype.hasOwnProperty;var Ye=(f,o,h)=>o in f?q(f,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[o]=h;var me=(f,o)=>()=>(o||f((o={exports:{}}).exports,o),o.exports);var ze=(f,o,h,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let _ of Ge(o))!Ke.call(f,_)&&_!==h&&q(f,_,{get:()=>o[_],enumerable:!(m=Fe(o,_))||m.enumerable});return f};var Ze=(f,o,h)=>(h=f!=null?He(Xe(f)):{},ze(o||!f||!f.__esModule?q(h,"default",{value:f,enumerable:!0}):h,f));var j=(f,o,h)=>(Ye(f,typeof o!="symbol"?o+"":o,h),h);var ve=me((pe,Ee)=>{(function(f){var o=Object.hasOwnProperty,h=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},m=10,_=typeof process=="object"&&typeof process.nextTick=="function",E=typeof Symbol=="function",d=typeof Reflect=="object",x=typeof setImmediate=="function",O=x?setImmediate:setTimeout,g=E?d&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function A(){this._events={},this._conf&&y.call(this,this._conf)}function y(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==f&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function P(e,t){var s="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(s+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var n=new Error(s);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(s),console.trace&&console.trace()}var D=function(e,t,s){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,s];default:for(var r=new Array(n);n--;)r[n]=arguments[n];return r}};function oe(e,t){for(var s={},n,r=e.length,i=t?t.length:0,l=0;l<r;l++)n=e[l],s[n]=l<i?t[l]:f;return s}function le(e,t,s){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var n,r;if((s.on||s.off)&&(n=s.on,r=s.off),t.addEventListener?(n=t.addEventListener,r=t.removeEventListener):t.addListener?(n=t.addListener,r=t.removeListener):t.on&&(n=t.on,r=t.off),!n&&!r)throw Error("target does not implement any known event API");if(typeof n!="function")throw TypeError("on method must be a function");if(typeof r!="function")throw TypeError("off method must be a function");this._on=n,this._off=r;var i=e._observers;i?i.push(this):e._observers=[this]}Object.assign(le.prototype,{subscribe:function(e,t,s){var n=this,r=this._target,i=this._emitter,l=this._listeners,u=function(){var c=D.apply(null,arguments),a={data:c,name:t,original:e};if(s){var p=s.call(r,a);p!==!1&&i.emit.apply(i,[a.name].concat(c));return}i.emit.apply(i,[t].concat(c))};if(l[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,i._newListener&&i._removeListener&&!n._onNewListener?(this._onNewListener=function(c){c===t&&l[e]===null&&(l[e]=u,n._on.call(r,e,u))},i.on("newListener",this._onNewListener),this._onRemoveListener=function(c){c===t&&!i.hasListeners(c)&&l[e]&&(l[e]=null,n._off.call(r,e,u))},l[e]=null,i.on("removeListener",this._onRemoveListener)):(l[e]=u,n._on.call(r,e,u))},unsubscribe:function(e){var t=this,s=this._listeners,n=this._emitter,r,i,l=this._off,u=this._target,c;if(e&&typeof e!="string")throw TypeError("event must be a string");function a(){t._onNewListener&&(n.off("newListener",t._onNewListener),n.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var p=ae.call(n,t);n._observers.splice(p,1)}if(e){if(r=s[e],!r)return;l.call(u,e,r),delete s[e],--this._listenersCount||a()}else{for(i=g(s),c=i.length;c-- >0;)e=i[c],l.call(u,e,s[e]);this._listeners={},this._listenersCount=0,a()}}});function X(e,t,s,n){var r=Object.assign({},t);if(!e)return r;if(typeof e!="object")throw TypeError("options must be an object");var i=Object.keys(e),l=i.length,u,c,a;function p(T){throw Error('Invalid "'+u+'" option value'+(T?". Reason: "+T:""))}for(var R=0;R<l;R++){if(u=i[R],!n&&!o.call(t,u))throw Error('Unknown "'+u+'" option');c=e[u],c!==f&&(a=s[u],r[u]=a?a(c,p):c)}return r}function ce(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function he(e){var t="value must be type of "+e.join("|"),s=e.length,n=e[0],r=e[1];return s===1?function(i,l){if(typeof i===n)return i;l(t)}:s===2?function(i,l){var u=typeof i;if(u===n||u===r)return i;l(t)}:function(i,l){for(var u=typeof i,c=s;c-- >0;)if(u===e[c])return i;l(t)}}var Y=he(["function"]),Pe=he(["object","function"]);function fe(e,t,s){var n,r,i=0,l,u=new e(function(c,a,p){s=X(s,{timeout:0,overload:!1},{timeout:function(L,I){return L*=1,(typeof L!="number"||L<0||!Number.isFinite(L))&&I("timeout must be a positive number"),L}}),n=!s.overload&&typeof e.prototype.cancel=="function"&&typeof p=="function";function R(){r&&(r=null),i&&(clearTimeout(i),i=0)}var T=function(L){R(),c(L)},b=function(L){R(),a(L)};n?t(T,b,p):(r=[function(L){b(L||Error("canceled"))}],t(T,b,function(L){if(l)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof L!="function")throw TypeError("onCancel callback must be a function");r.push(L)}),l=!0),s.timeout>0&&(i=setTimeout(function(){var L=Error("timeout");L.code="ETIMEDOUT",i=0,u.cancel(L),a(L)},s.timeout))});return n||(u.cancel=function(c){if(r){for(var a=r.length,p=1;p<a;p++)r[p](c);r[0](c),r=null}}),u}function ae(e){var t=this._observers;if(!t)return-1;for(var s=t.length,n=0;n<s;n++)if(t[n]._target===e)return n;return-1}function w(e,t,s,n,r){if(!s)return null;if(n===0){var i=typeof t;if(i==="string"){var l,u,c=0,a=0,p=this.delimiter,R=p.length;if((u=t.indexOf(p))!==-1){l=new Array(5);do l[c++]=t.slice(a,u),a=u+R;while((u=t.indexOf(p,a))!==-1);l[c++]=t.slice(a),t=l,r=c}else t=[t],r=1}else i==="object"?r=t.length:(t=[t],r=1)}var T=null,b,L,I,Q,V,U=t[n],W=t[n+1],S,N;if(n===r)s._listeners&&(typeof s._listeners=="function"?(e&&e.push(s._listeners),T=[s]):(e&&e.push.apply(e,s._listeners),T=[s]));else if(U==="*"){for(S=g(s),u=S.length;u-- >0;)b=S[u],b!=="_listeners"&&(N=w(e,t,s[b],n+1,r),N&&(T?T.push.apply(T,N):T=N));return T}else if(U==="**"){for(V=n+1===r||n+2===r&&W==="*",V&&s._listeners&&(T=w(e,t,s,r,r)),S=g(s),u=S.length;u-- >0;)b=S[u],b!=="_listeners"&&(b==="*"||b==="**"?(s[b]._listeners&&!V&&(N=w(e,t,s[b],r,r),N&&(T?T.push.apply(T,N):T=N)),N=w(e,t,s[b],n,r)):b===W?N=w(e,t,s[b],n+2,r):N=w(e,t,s[b],n,r),N&&(T?T.push.apply(T,N):T=N));return T}else s[U]&&(T=w(e,t,s[U],n+1,r));if(L=s["*"],L&&w(e,t,L,n+1,r),I=s["**"],I)if(n<r)for(I._listeners&&w(e,t,I,r,r),S=g(I),u=S.length;u-- >0;)b=S[u],b!=="_listeners"&&(b===W?w(e,t,I[b],n+2,r):b===U?w(e,t,I[b],n+1,r):(Q={},Q[b]=I[b],w(e,t,{"**":Q},n+1,r)));else I._listeners?w(e,t,I,r,r):I["*"]&&I["*"]._listeners&&w(e,t,I["*"],r,r);return T}function Me(e,t,s){var n=0,r=0,i,l=this.delimiter,u=l.length,c;if(typeof e=="string")if((i=e.indexOf(l))!==-1){c=new Array(5);do c[n++]=e.slice(r,i),r=i+u;while((i=e.indexOf(l,r))!==-1);c[n++]=e.slice(r)}else c=[e],n=1;else c=e,n=e.length;if(n>1){for(i=0;i+1<n;i++)if(c[i]==="**"&&c[i+1]==="**")return}var a=this.listenerTree,p;for(i=0;i<n;i++)if(p=c[i],a=a[p]||(a[p]={}),i===n-1)return a._listeners?(typeof a._listeners=="function"&&(a._listeners=[a._listeners]),s?a._listeners.unshift(t):a._listeners.push(t),!a._listeners.warned&&this._maxListeners>0&&a._listeners.length>this._maxListeners&&(a._listeners.warned=!0,P.call(this,a._listeners.length,p))):a._listeners=t,!0;return!0}function ue(e,t,s,n){for(var r=g(e),i=r.length,l,u,c,a=e._listeners,p;i-- >0;)u=r[i],l=e[u],u==="_listeners"?c=s:c=s?s.concat(u):[u],p=n||typeof u=="symbol",a&&t.push(p?c:c.join(this.delimiter)),typeof l=="object"&&ue.call(this,l,t,c,p);return t}function z(e){for(var t=g(e),s=t.length,n,r,i;s-- >0;)r=t[s],n=e[r],n&&(i=!0,r!=="_listeners"&&!z(n)&&delete e[r]);return i}function _e(e,t,s){this.emitter=e,this.event=t,this.listener=s}_e.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function De(e,t,s){if(s===!0)r=!0;else if(s===!1)n=!0;else{if(!s||typeof s!="object")throw TypeError("options should be an object or true");var n=s.async,r=s.promisify,i=s.nextTick,l=s.objectify}if(n||i||r){var u=t,c=t._origin||t;if(i&&!_)throw Error("process.nextTick is not supported");r===f&&(r=t.constructor.name==="AsyncFunction"),t=function(){var a=arguments,p=this,R=this.event;return r?i?Promise.resolve():new Promise(function(T){O(T)}).then(function(){return p.event=R,u.apply(p,a)}):(i?process.nextTick:O)(function(){p.event=R,u.apply(p,a)})},t._async=!0,t._origin=c}return[t,l?new _e(this,e,t):this]}function v(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,y.call(this,e)}v.EventEmitter2=v,v.prototype.listenTo=function(e,t,s){if(typeof e!="object")throw TypeError("target musts be an object");var n=this;s=X(s,{on:f,off:f,reducers:f},{on:Y,off:Y,reducers:Pe});function r(i){if(typeof i!="object")throw TypeError("events must be an object");var l=s.reducers,u=ae.call(n,e),c;u===-1?c=new le(n,e,s):c=n._observers[u];for(var a=g(i),p=a.length,R,T=typeof l=="function",b=0;b<p;b++)R=a[b],c.subscribe(R,i[R]||R,T?l:l&&l[R])}return h(t)?r(oe(t)):r(typeof t=="string"?oe(t.split(/\s+/)):t),this},v.prototype.stopListeningTo=function(e,t){var s=this._observers;if(!s)return!1;var n=s.length,r,i=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;n-- >0;)r=s[n],(!e||r._target===e)&&(r.unsubscribe(t),i=!0);return i},v.prototype.delimiter=".",v.prototype.setMaxListeners=function(e){e!==f&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},v.prototype.getMaxListeners=function(){return this._maxListeners},v.prototype.event="",v.prototype.once=function(e,t,s){return this._once(e,t,!1,s)},v.prototype.prependOnceListener=function(e,t,s){return this._once(e,t,!0,s)},v.prototype._once=function(e,t,s,n){return this._many(e,1,t,s,n)},v.prototype.many=function(e,t,s,n){return this._many(e,t,s,!1,n)},v.prototype.prependMany=function(e,t,s,n){return this._many(e,t,s,!0,n)},v.prototype._many=function(e,t,s,n,r){var i=this;if(typeof s!="function")throw new Error("many only accepts instances of Function");function l(){return--t===0&&i.off(e,l),s.apply(this,arguments)}return l._origin=s,this._on(e,l,n,r)},v.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||A.call(this);var e=arguments[0],t,s=this.wildcard,n,r,i,l,u;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(s&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(r=e.length,E){for(i=0;i<r;i++)if(typeof e[i]=="symbol"){u=!0;break}}u||(e=e.join(this.delimiter))}var c=arguments.length,a;if(this._all&&this._all.length)for(a=this._all.slice(),i=0,r=a.length;i<r;i++)switch(this.event=e,c){case 1:a[i].call(this,e);break;case 2:a[i].call(this,e,arguments[1]);break;case 3:a[i].call(this,e,arguments[1],arguments[2]);break;default:a[i].apply(this,arguments)}if(s)a=[],w.call(this,a,t,this.listenerTree,0,r);else if(a=this._events[e],typeof a=="function"){switch(this.event=e,c){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(n=new Array(c-1),l=1;l<c;l++)n[l-1]=arguments[l];a.apply(this,n)}return!0}else a&&(a=a.slice());if(a&&a.length){if(c>3)for(n=new Array(c-1),l=1;l<c;l++)n[l-1]=arguments[l];for(i=0,r=a.length;i<r;i++)switch(this.event=e,c){case 1:a[i].call(this);break;case 2:a[i].call(this,arguments[1]);break;case 3:a[i].call(this,arguments[1],arguments[2]);break;default:a[i].apply(this,n)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},v.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||A.call(this);var e=arguments[0],t=this.wildcard,s,n,r,i,l,u;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(s=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(i=e.length,E){for(l=0;l<i;l++)if(typeof e[l]=="symbol"){n=!0;break}}n||(e=e.join(this.delimiter))}var c=[],a=arguments.length,p;if(this._all)for(l=0,i=this._all.length;l<i;l++)switch(this.event=e,a){case 1:c.push(this._all[l].call(this,e));break;case 2:c.push(this._all[l].call(this,e,arguments[1]));break;case 3:c.push(this._all[l].call(this,e,arguments[1],arguments[2]));break;default:c.push(this._all[l].apply(this,arguments))}if(t?(p=[],w.call(this,p,s,this.listenerTree,0)):p=this._events[e],typeof p=="function")switch(this.event=e,a){case 1:c.push(p.call(this));break;case 2:c.push(p.call(this,arguments[1]));break;case 3:c.push(p.call(this,arguments[1],arguments[2]));break;default:for(r=new Array(a-1),u=1;u<a;u++)r[u-1]=arguments[u];c.push(p.apply(this,r))}else if(p&&p.length){if(p=p.slice(),a>3)for(r=new Array(a-1),u=1;u<a;u++)r[u-1]=arguments[u];for(l=0,i=p.length;l<i;l++)switch(this.event=e,a){case 1:c.push(p[l].call(this));break;case 2:c.push(p[l].call(this,arguments[1]));break;case 3:c.push(p[l].call(this,arguments[1],arguments[2]));break;default:c.push(p[l].apply(this,r))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},v.prototype.on=function(e,t,s){return this._on(e,t,!1,s)},v.prototype.prependListener=function(e,t,s){return this._on(e,t,!0,s)},v.prototype.onAny=function(e){return this._onAny(e,!1)},v.prototype.prependAny=function(e){return this._onAny(e,!0)},v.prototype.addListener=v.prototype.on,v.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},v.prototype._on=function(e,t,s,n){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||A.call(this);var r=this,i;return n!==f&&(i=De.call(this,e,t,n),t=i[0],r=i[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(Me.call(this,e,t,s),r):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),s?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,P.call(this,this._events[e].length,e))):this._events[e]=t,r)},v.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var s,n=[];if(this.wildcard){var r=typeof e=="string"?e.split(this.delimiter):e.slice();if(n=w.call(this,null,r,this.listenerTree,0),!n)return this}else{if(!this._events[e])return this;s=this._events[e],n.push({_listeners:s})}for(var i=0;i<n.length;i++){var l=n[i];if(s=l._listeners,h(s)){for(var u=-1,c=0,a=s.length;c<a;c++)if(s[c]===t||s[c].listener&&s[c].listener===t||s[c]._origin&&s[c]._origin===t){u=c;break}if(u<0)continue;return this.wildcard?l._listeners.splice(u,1):this._events[e].splice(u,1),s.length===0&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(s===t||s.listener&&s.listener===t||s._origin&&s._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&z(this.listenerTree),this},v.prototype.offAny=function(e){var t=0,s=0,n;if(e&&this._all&&this._all.length>0){for(n=this._all,t=0,s=n.length;t<s;t++)if(e===n[t])return n.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(n=this._all,this._removeListener)for(t=0,s=n.length;t<s;t++)this.emit("removeListenerAny",n[t]);this._all=[]}return this},v.prototype.removeListener=v.prototype.off,v.prototype.removeAllListeners=function(e){if(e===f)return!this._events||A.call(this),this;if(this.wildcard){var t=w.call(this,null,e,this.listenerTree,0),s,n;if(!t)return this;for(n=0;n<t.length;n++)s=t[n],s._listeners=null;this.listenerTree&&z(this.listenerTree)}else this._events&&(this._events[e]=null);return this},v.prototype.listeners=function(e){var t=this._events,s,n,r,i,l;if(e===f){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(s=g(t),i=s.length,r=[];i-- >0;)n=t[s[i]],typeof n=="function"?r.push(n):r.push.apply(r,n);return r}else{if(this.wildcard){if(l=this.listenerTree,!l)return[];var u=[],c=typeof e=="string"?e.split(this.delimiter):e.slice();return w.call(this,u,c,l,0),u}return t?(n=t[e],n?typeof n=="function"?[n]:n:[]):[]}},v.prototype.eventNames=function(e){var t=this._events;return this.wildcard?ue.call(this,this.listenerTree,[],null,e):t?g(t):[]},v.prototype.listenerCount=function(e){return this.listeners(e).length},v.prototype.hasListeners=function(e){if(this.wildcard){var t=[],s=typeof e=="string"?e.split(this.delimiter):e.slice();return w.call(this,t,s,this.listenerTree,0),t.length>0}var n=this._events,r=this._all;return!!(r&&r.length||n&&(e===f?g(n).length:n[e]))},v.prototype.listenersAny=function(){return this._all?this._all:[]},v.prototype.waitFor=function(e,t){var s=this,n=typeof t;return n==="number"?t={timeout:t}:n==="function"&&(t={filter:t}),t=X(t,{timeout:0,filter:f,handleError:!1,Promise,overload:!1},{filter:Y,Promise:ce}),fe(t.Promise,function(r,i,l){function u(){var c=t.filter;if(!(c&&!c.apply(s,arguments)))if(s.off(e,u),t.handleError){var a=arguments[0];a?i(a):r(D.apply(null,arguments).slice(1))}else r(D.apply(null,arguments))}l(function(){s.off(e,u)}),s._on(e,u,!1)},{timeout:t.timeout,overload:t.overload})};function Ue(e,t,s){s=X(s,{Promise,timeout:0,overload:!1},{Promise:ce});var n=s.Promise;return fe(n,function(r,i,l){var u;if(typeof e.addEventListener=="function"){u=function(){r(D.apply(null,arguments))},l(function(){e.removeEventListener(t,u)}),e.addEventListener(t,u,{once:!0});return}var c=function(){a&&e.removeListener("error",a),r(D.apply(null,arguments))},a;t!=="error"&&(a=function(p){e.removeListener(t,c),i(p)},e.once("error",a)),l(function(){a&&e.removeListener("error",a),e.removeListener(t,c)}),e.once(t,c)},{timeout:s.timeout,overload:s.overload})}var Z=v.prototype;if(Object.defineProperties(v,{defaultMaxListeners:{get:function(){return Z._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");Z._maxListeners=e},enumerable:!0},once:{value:Ue,writable:!0,configurable:!0}}),Object.defineProperties(Z,{_maxListeners:{value:m,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return v});else if(typeof pe=="object")Ee.exports=v;else{var je=new Function("","return this")();je.EventEmitter2=v}})()});var de=me((ys,xe)=>{xe.exports=ve()});var Ce=Ze(de(),1);var Qe="as",Ve="=",We="break",qe="else",Je="enum",$e="export",et="if",tt="import",st="->",nt="is",rt="loop",it="mut",ot="native",lt="object",ct="fn",ht="return",ft="self",at="template",ut=Object.freeze({ALIAS:Qe,ASSIGN:Ve,BREAK:We,ELSE:qe,ENUMERATION:Je,EXPORT:$e,IF:et,IMPORT:tt,INTO:st,IS:nt,LOOP:rt,MUTABLE:it,NATIVE:ot,OBJECT:lt,PROCEDURE:ct,RETURN:ht,SELF:ft,TEMPLATE:at}),Te=ut;var _t="array",mt="assignment",pt="branch-default",Et="branch-value",vt="break",xt="condition",dt="declaration",Tt="enumeration",bt="export",gt="expression",At="import",Lt="instance",wt="label",Ot="literal",Rt="loop",It="module",Nt="mutable",Ct="name-list",yt="native",Bt="object",St="procedure",kt="procedure-call",Pt="return",Mt="self",Dt="submodule",Ut="template",jt="type-pair",Ht=Object.freeze({ARRAY:_t,ASSIGNMENT:mt,BRANCH_DEFAULT:pt,BRANCH_VALUE:Et,BREAK:vt,CONDITION:xt,DECLARATION:dt,ENUMERATION:Tt,EXPORT:bt,EXPRESSION:gt,IMPORT:At,INSTANCE:Lt,LABEL:wt,LITERAL:Ot,LOOP:Rt,MODULE:It,MUTABLE:Nt,NAME_LIST:Ct,NATIVE:yt,OBJECT:Bt,PROCEDURE:St,PROCEDURE_CALL:kt,RETURN:Pt,SELF:Mt,SUBMODULE:Dt,TEMPLATE:Ut,TYPE_PAIR:jt}),be=Ht;var Ft=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),ge=Ft;var Gt=Object.freeze([]),Xt=Object.freeze({}),Kt="",Yt="	",zt=`
`,Zt="UTF-8",Qt=Object.freeze({EMPTY_ARRAY:Gt,EMPTY_OBJECT:Xt,EMPTY_STRING:Kt,HORIZONTAL_TAB:Yt,LINE_BREAK:zt,UNICODE_TEXT:Zt,Codes:ge,Keys:Te,Types:be}),H=Qt;var{EMPTY_STRING:Vt,UNICODE_TEXT:se}=H,Wt=44,qt=48,Jt=57,$t=46,es=45,ts=43,ss=65,ns=90,rs=-1,is=1,os=new TextDecoder(se),ls=new TextEncoder,cs=(f,o,h=0,m=f.length|0,_=0,E=o.length|0)=>{for(_=_|0,h=h|0,E=E|0,m=m|0;;){let d=h>=m,x=_>=E;if(d||x)break;let g=f[h],A=o[_];if(h=h+1|0,_=_+1|0,g<A)return rs;if(g>A)return is}return 0},hs=(f,o,h=0,m=f.length|0,_=0,E=o.length|0)=>{for(_=_|0,h=h|0,E=E|0,m=m|0;;){let d=_>=E,x=h>=m;if(d||x)break;o[_]=f[h],_=_+1|0,h=h+1|0}},fs=(f,o,h=0,m=f.length|0,_=0,E=o.length|0)=>{h=h|0,_=_|0,m=m|0,E=E|0;let d=m-h|0,x=E-_|0;if(d!==x)return!1;for(;;){let O=h>=m,g=_>=E;if(O||g)break;let y=f[h],P=o[_];if(h=h+1|0,_=_+1|0,y!==P)return!1}return!0},as=f=>{f=f>>>0;let o=0,h=0;for(;h=(h<<1|1)>>>0,!(h>f);)o=o+1|0;return o},we=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),ee=(f,o,h,m)=>{for(f=f>>>0,m=m??o.length|0,h=h|0,m=m|0;f>0&&m>h;)m=m-1|0,o[m]=we[f&15],f=f>>>4},us=(f,o,h,m)=>{let _=h|0,E=h+m|0;if(m===0)return!1;let d=o[_];for((d===ts||d===es)&&(_=_+1|0);_<E;){let x=o[_];if(_=_+1|0,!(qt<=x&&x<=Jt||($t===x||Wt===x)))return!1}return!0},_s=f=>{let o=f>=ss,h=f<=ns;return o&&h},Oe=128,Re=127,ms=-1,te=64,ne=f=>{f=f|0;let o=[];for(;;){let h=f&Re;f=f>>7;let m=f===0,_=(h&te)===0,E=m&&_,d=f===-1,x=(h&te)!==0;if(E||d&&x){o.push(h);break}h=h|Oe,o.push(h)}return o},Ie=(f,o)=>{o=o|0;let h=0,m=0;for(;;){let _=f[o]|0;o=o+1|0;let E=(_&Re)<<m;if(m=m+7|0,h=h|E,(_&Oe)===0){let x=(_&te)!==0,O=m<32;if(x&&O){let A=ms<<m;h=h|A}break}}return h},ps=f=>os.decode(f),Es=f=>ls.encode(f),vs=(f=Vt)=>{let o=f.length|0,h=ne(o),m=Buffer.from(f,se);return Object.freeze([...h,...m])},xs=(f,o)=>{o=o|0;let h=Ie(f,o),m=ne(h).length;return o=o+m|0,f.subarray(o,o+h|0).toString(se)},ds=58,Ts=46,F=32,J=48,bs=67,k=new Uint8Array(bs),Ae=k.subarray(0,8),K=k.subarray(10,49),Le=k.subarray(51,68),$=16,gs=2;k[8]=ds;k[9]=F;k[49]=F;k[50]=F;var As=(f,o)=>{o=o??console.log;let h=32,m=126,_=f.length|0,E=0;for(;_>0;){Ae.fill(J),ee(E,Ae),K.fill(F),Le.fill(F);let d=_>=$?$:_;_=_-$|0;let x=0,O=0;for(let A=1;A<=d;A=A+1|0){let y=f[E]&255;K[x+0|0]=J,K[x+1|0]=J,ee(y,K,x,x+2|0);let P=Ts;h<=y&&y<=m&&(P=y),Le[O]=P,E=E+1|0,x=x+2|0,O=O+1|0,A%gs===0&&(x=x+1|0)}let g=String.fromCodePoint(...k);o(g)}},Ls=function*(f,o){let h=f.length|0,m=o.length|0,_=0;for(;_<h&&_<m;){let E=f[_],d=o[_];yield[E,d],_=_+1|0}},ws=function*(f,o,h){let m=f.length|0,_=o.length|0,E=h.length|0,d=0;for(;d<m&&d<_&&d<E;){let x=f[d],O=o[d],g=h[d];yield[x,O,g],d=d+1|0}},Os=Object.freeze({ARRAY_COMPARE:cs,ARRAY_COPY:hs,ARRAY_EQUAL:fs,BIT_DEPTH:as,HEX_DIGITS:we,HEX_ENCODE:ee,IS_NUMBER:us,IS_UPPERCASE:_s,LEB128_DECODE:Ie,LEB128_ENCODE:ne,UTF8_DECODE:ps,UTF8_ENCODE:Es,WASM_STRING_ENCODE:vs,WASM_STRING_DECODE:xs,XXD_DUMP_HEX:As,ZIP2:Ls,ZIP3:ws}),Ne=Os;var{Codes:C}=H,{EMPTY_STRING:Xs}=H,{ARRAY_COPY:Rs}=Ne,Is=Object.freeze({tabSize:4}),ye=new Set([40,41,91,93,123,125,46,44,58,59,64]);Object.freeze(ye);var Be=new Set([46,44]);Object.freeze(Be);var Se=new Set([34,39]);Object.freeze(Se);var ke=new Set([9,13,32]);Object.freeze(ke);var G=1,re=2,ie=3,Ns=(f,o,h)=>{if(o=o|0,h=h|0,(h-o|0)===0)return!1;let _=f[o];for((_===C.PLUS_SIGN||_===C.HYPHEN_MINUS)&&(o=o+1|0);o<h;){let E=f[o];o=o+1|0;let d=C.DIGIT_ZERO<=E&&E<=C.DIGIT_NINE,x=C.DOT===E||C.COMMA===E;if(!(d||x))return!1}return!0},M=class{constructor(o=Is){this.options=o,this.numberMark=!1,this.position=0,this.array=new Uint8Array(M.LIMIT_ARRAY),this.target=0,this.length=0,this.indexA=0,this.indexB=0,this.events=new Map,this.emitter=new Ce.default,this.emitter.on("token",(h,m,_,E)=>{(this.events.get("token")||[]).forEach(x=>{x(h,m,_,E)})}),this.emitter.on("error",()=>{}),this.comment=!1,this.situation=G,this.quote=C.NULL,Object.seal(this)}on(o,h){if(M.SET_EVENTS.has(o)){let m=this.events.get(o)||[];m.push(h),this.events.set(o,m)}}feed(o){let h=o.length|0,m=0,_=0,E=h;for(;E>0;){let d=M.LIMIT_ARRAY-this.length|0,x=Math.min(d,E)|0;E=E-x|0,_=_+x|0,Rs(o,this.array,m,_,this.target),this.length=this.length+x|0,this.flush(),m=m+x|0}}done(){this.array[this.indexB]=C.SPACE,this.length=this.length+1,this.flush()}flush(){for(;this.indexB<this.length;)switch(this.situation){case G:{this.flushTopLevel();break}case re:{this.flushQuotation();break}case ie:{this.flushComment();break}}let o=this.length-this.indexA|0;o>M.LIMIT_TOKEN||(o>0&&(this.array.copyWithin(0,this.indexA,this.indexB),this.indexA=0,this.indexB=o,this.target=o),this.length=o)}flushComment(){for(;this.indexB<this.length;){if((this.array[this.indexB]|0)===C.LINE_BREAK){this.drain("comment"),this.indexB=this.indexB+1|0,this.drain("token"),this.comment=!1,this.situation=G;break}this.indexB=this.indexB+1|0}this.comment===!0&&(this.length-this.indexA|0)>0&&this.drain("comment")}flushQuotation(){for(;this.indexB<this.length;){let o=this.indexB-this.indexA|0;if((this.array[this.indexB]|0)===this.quote){this.quote=C.NULL,o>0&&this.drain("token"),this.indexB=this.indexB+1|0,this.drain("token"),this.situation=G;return}this.indexB=this.indexB+1|0}}flushTopLevel(){let{options:o}=this,{tabSize:h}=o;for(;this.indexB<this.length;){let m=()=>{let A=0;this.numberMark&&(this.indexB=this.indexB-1|0),A=this.indexB-this.indexA|0,A>0&&this.drain("token"),this.numberMark&&(this.indexB=this.indexB+1|0),A=this.indexB-this.indexA|0,A>0&&this.drain("token"),this.numberMark=!1},_=this.array[this.indexB]|0;if(_===C.HASHTAG){m(),this.indexB=this.indexB+1|0,this.drain("token"),this.comment=!0,this.situation=ie;return}if(_===C.LINE_BREAK){m(),this.indexB=this.indexB+1|0,this.drain("token");continue}if(Se.has(_)){m(),this.indexB=this.indexB+1|0,this.drain("token"),this.quote=_,this.situation=re;return}if(ke.has(_)){m(),_===C.HORIZONTAL_TAB?this.position=this.position+h|0:this.position=this.position+1|0,this.indexA=this.indexA+1|0,this.indexB=this.indexB+1|0;continue}if(this.numberMark=!1,ye.has(_)){let A=!Ns(this.array,this.indexA,this.indexB),y=!Be.has(_);if(A||y){m(),this.indexB=this.indexB+1|0,this.drain("token");continue}this.numberMark=!0}this.indexB=this.indexB+1|0}}drain(o){let{array:h,position:m}=this,_=this.indexB-this.indexA|0,E=this.indexA;this.emitter.emit(o,m,h,E,_),this.position=this.position+_|0,this.indexA=this.indexB|0}close(){}},B=M;j(B,"LIMIT_TOKEN",256),j(B,"LIMIT_ARRAY",M.LIMIT_TOKEN*2|0),j(B,"SET_EVENTS",new Set(["comment","error","token"])),j(B,"SET_SITUATIONS",new Set([G,re,ie]));Object.values(B).forEach(Object.freeze);Object.freeze(B);Object.freeze(Object.getPrototypeOf(B));var Ks=B;export{Ks as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
