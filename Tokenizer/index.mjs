var Fe=Object.create;var ee=Object.defineProperty;var Ke=Object.getOwnPropertyDescriptor;var Xe=Object.getOwnPropertyNames;var ze=Object.getPrototypeOf,Qe=Object.prototype.hasOwnProperty;var Ze=(l,i,c)=>i in l?ee(l,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[i]=c;var me=(l,i)=>()=>(i||l((i={exports:{}}).exports,i),i.exports);var Ve=(l,i,c,E)=>{if(i&&typeof i=="object"||typeof i=="function")for(let u of Xe(i))!Qe.call(l,u)&&u!==c&&ee(l,u,{get:()=>i[u],enumerable:!(E=Ke(i,u))||E.enumerable});return l};var We=(l,i,c)=>(c=l!=null?Fe(ze(l)):{},Ve(i||!l||!l.__esModule?ee(c,"default",{value:l,enumerable:!0}):c,l));var j=(l,i,c)=>(Ze(l,typeof i!="symbol"?i+"":i,c),c);var Te=me((xe,ve)=>{(function(l){var i=Object.hasOwnProperty,c=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},E=10,u=typeof process=="object"&&typeof process.nextTick=="function",m=typeof Symbol=="function",T=typeof Reflect=="object",v=typeof setImmediate=="function",w=v?setImmediate:setTimeout,A=m?T&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function O(){this._events={},this._conf&&P.call(this,this._conf)}function P(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==l&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function k(e,t){var s="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(s+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var n=new Error(s);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(s),console.trace&&console.trace()}var U=function(e,t,s){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,s];default:for(var r=new Array(n);n--;)r[n]=arguments[n];return r}};function le(e,t){for(var s={},n,r=e.length,o=t?t.length:0,h=0;h<r;h++)n=e[h],s[n]=h<o?t[h]:l;return s}function he(e,t,s){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var n,r;if((s.on||s.off)&&(n=s.on,r=s.off),t.addEventListener?(n=t.addEventListener,r=t.removeEventListener):t.addListener?(n=t.addListener,r=t.removeListener):t.on&&(n=t.on,r=t.off),!n&&!r)throw Error("target does not implement any known event API");if(typeof n!="function")throw TypeError("on method must be a function");if(typeof r!="function")throw TypeError("off method must be a function");this._on=n,this._off=r;var o=e._observers;o?o.push(this):e._observers=[this]}Object.assign(he.prototype,{subscribe:function(e,t,s){var n=this,r=this._target,o=this._emitter,h=this._listeners,_=function(){var f=U.apply(null,arguments),a={data:f,name:t,original:e};if(s){var p=s.call(r,a);p!==!1&&o.emit.apply(o,[a.name].concat(f));return}o.emit.apply(o,[t].concat(f))};if(h[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!n._onNewListener?(this._onNewListener=function(f){f===t&&h[e]===null&&(h[e]=_,n._on.call(r,e,_))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(f){f===t&&!o.hasListeners(f)&&h[e]&&(h[e]=null,n._off.call(r,e,_))},h[e]=null,o.on("removeListener",this._onRemoveListener)):(h[e]=_,n._on.call(r,e,_))},unsubscribe:function(e){var t=this,s=this._listeners,n=this._emitter,r,o,h=this._off,_=this._target,f;if(e&&typeof e!="string")throw TypeError("event must be a string");function a(){t._onNewListener&&(n.off("newListener",t._onNewListener),n.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var p=_e.call(n,t);n._observers.splice(p,1)}if(e){if(r=s[e],!r)return;h.call(_,e,r),delete s[e],--this._listenersCount||a()}else{for(o=A(s),f=o.length;f-- >0;)e=o[f],h.call(_,e,s[e]);this._listeners={},this._listenersCount=0,a()}}});function K(e,t,s,n){var r=Object.assign({},t);if(!e)return r;if(typeof e!="object")throw TypeError("options must be an object");var o=Object.keys(e),h=o.length,_,f,a;function p(d){throw Error('Invalid "'+_+'" option value'+(d?". Reason: "+d:""))}for(var S=0;S<h;S++){if(_=o[S],!n&&!i.call(t,_))throw Error('Unknown "'+_+'" option');f=e[_],f!==l&&(a=s[_],r[_]=a?a(f,p):f)}return r}function fe(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function ae(e){var t="value must be type of "+e.join("|"),s=e.length,n=e[0],r=e[1];return s===1?function(o,h){if(typeof o===n)return o;h(t)}:s===2?function(o,h){var _=typeof o;if(_===n||_===r)return o;h(t)}:function(o,h){for(var _=typeof o,f=s;f-- >0;)if(_===e[f])return o;h(t)}}var Z=ae(["function"]),Ue=ae(["object","function"]);function ue(e,t,s){var n,r,o=0,h,_=new e(function(f,a,p){s=K(s,{timeout:0,overload:!1},{timeout:function(L,R){return L*=1,(typeof L!="number"||L<0||!Number.isFinite(L))&&R("timeout must be a positive number"),L}}),n=!s.overload&&typeof e.prototype.cancel=="function"&&typeof p=="function";function S(){r&&(r=null),o&&(clearTimeout(o),o=0)}var d=function(L){S(),f(L)},b=function(L){S(),a(L)};n?t(d,b,p):(r=[function(L){b(L||Error("canceled"))}],t(d,b,function(L){if(h)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof L!="function")throw TypeError("onCancel callback must be a function");r.push(L)}),h=!0),s.timeout>0&&(o=setTimeout(function(){var L=Error("timeout");L.code="ETIMEDOUT",o=0,_.cancel(L),a(L)},s.timeout))});return n||(_.cancel=function(f){if(r){for(var a=r.length,p=1;p<a;p++)r[p](f);r[0](f),r=null}}),_}function _e(e){var t=this._observers;if(!t)return-1;for(var s=t.length,n=0;n<s;n++)if(t[n]._target===e)return n;return-1}function g(e,t,s,n,r){if(!s)return null;if(n===0){var o=typeof t;if(o==="string"){var h,_,f=0,a=0,p=this.delimiter,S=p.length;if((_=t.indexOf(p))!==-1){h=new Array(5);do h[f++]=t.slice(a,_),a=_+S;while((_=t.indexOf(p,a))!==-1);h[f++]=t.slice(a),t=h,r=f}else t=[t],r=1}else o==="object"?r=t.length:(t=[t],r=1)}var d=null,b,L,R,q,J,Y=t[n],$=t[n+1],y,I;if(n===r)s._listeners&&(typeof s._listeners=="function"?(e&&e.push(s._listeners),d=[s]):(e&&e.push.apply(e,s._listeners),d=[s]));else if(Y==="*"){for(y=A(s),_=y.length;_-- >0;)b=y[_],b!=="_listeners"&&(I=g(e,t,s[b],n+1,r),I&&(d?d.push.apply(d,I):d=I));return d}else if(Y==="**"){for(J=n+1===r||n+2===r&&$==="*",J&&s._listeners&&(d=g(e,t,s,r,r)),y=A(s),_=y.length;_-- >0;)b=y[_],b!=="_listeners"&&(b==="*"||b==="**"?(s[b]._listeners&&!J&&(I=g(e,t,s[b],r,r),I&&(d?d.push.apply(d,I):d=I)),I=g(e,t,s[b],n,r)):b===$?I=g(e,t,s[b],n+2,r):I=g(e,t,s[b],n,r),I&&(d?d.push.apply(d,I):d=I));return d}else s[Y]&&(d=g(e,t,s[Y],n+1,r));if(L=s["*"],L&&g(e,t,L,n+1,r),R=s["**"],R)if(n<r)for(R._listeners&&g(e,t,R,r,r),y=A(R),_=y.length;_-- >0;)b=y[_],b!=="_listeners"&&(b===$?g(e,t,R[b],n+2,r):b===Y?g(e,t,R[b],n+1,r):(q={},q[b]=R[b],g(e,t,{"**":q},n+1,r)));else R._listeners?g(e,t,R,r,r):R["*"]&&R["*"]._listeners&&g(e,t,R["*"],r,r);return d}function Ye(e,t,s){var n=0,r=0,o,h=this.delimiter,_=h.length,f;if(typeof e=="string")if((o=e.indexOf(h))!==-1){f=new Array(5);do f[n++]=e.slice(r,o),r=o+_;while((o=e.indexOf(h,r))!==-1);f[n++]=e.slice(r)}else f=[e],n=1;else f=e,n=e.length;if(n>1){for(o=0;o+1<n;o++)if(f[o]==="**"&&f[o+1]==="**")return}var a=this.listenerTree,p;for(o=0;o<n;o++)if(p=f[o],a=a[p]||(a[p]={}),o===n-1)return a._listeners?(typeof a._listeners=="function"&&(a._listeners=[a._listeners]),s?a._listeners.unshift(t):a._listeners.push(t),!a._listeners.warned&&this._maxListeners>0&&a._listeners.length>this._maxListeners&&(a._listeners.warned=!0,k.call(this,a._listeners.length,p))):a._listeners=t,!0;return!0}function Ee(e,t,s,n){for(var r=A(e),o=r.length,h,_,f,a=e._listeners,p;o-- >0;)_=r[o],h=e[_],_==="_listeners"?f=s:f=s?s.concat(_):[_],p=n||typeof _=="symbol",a&&t.push(p?f:f.join(this.delimiter)),typeof h=="object"&&Ee.call(this,h,t,f,p);return t}function V(e){for(var t=A(e),s=t.length,n,r,o;s-- >0;)r=t[s],n=e[r],n&&(o=!0,r!=="_listeners"&&!V(n)&&delete e[r]);return o}function pe(e,t,s){this.emitter=e,this.event=t,this.listener=s}pe.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function je(e,t,s){if(s===!0)r=!0;else if(s===!1)n=!0;else{if(!s||typeof s!="object")throw TypeError("options should be an object or true");var n=s.async,r=s.promisify,o=s.nextTick,h=s.objectify}if(n||o||r){var _=t,f=t._origin||t;if(o&&!u)throw Error("process.nextTick is not supported");r===l&&(r=t.constructor.name==="AsyncFunction"),t=function(){var a=arguments,p=this,S=this.event;return r?o?Promise.resolve():new Promise(function(d){w(d)}).then(function(){return p.event=S,_.apply(p,a)}):(o?process.nextTick:w)(function(){p.event=S,_.apply(p,a)})},t._async=!0,t._origin=f}return[t,h?new pe(this,e,t):this]}function x(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,P.call(this,e)}x.EventEmitter2=x,x.prototype.listenTo=function(e,t,s){if(typeof e!="object")throw TypeError("target musts be an object");var n=this;s=K(s,{on:l,off:l,reducers:l},{on:Z,off:Z,reducers:Ue});function r(o){if(typeof o!="object")throw TypeError("events must be an object");var h=s.reducers,_=_e.call(n,e),f;_===-1?f=new he(n,e,s):f=n._observers[_];for(var a=A(o),p=a.length,S,d=typeof h=="function",b=0;b<p;b++)S=a[b],f.subscribe(S,o[S]||S,d?h:h&&h[S])}return c(t)?r(le(t)):r(typeof t=="string"?le(t.split(/\s+/)):t),this},x.prototype.stopListeningTo=function(e,t){var s=this._observers;if(!s)return!1;var n=s.length,r,o=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;n-- >0;)r=s[n],(!e||r._target===e)&&(r.unsubscribe(t),o=!0);return o},x.prototype.delimiter=".",x.prototype.setMaxListeners=function(e){e!==l&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},x.prototype.getMaxListeners=function(){return this._maxListeners},x.prototype.event="",x.prototype.once=function(e,t,s){return this._once(e,t,!1,s)},x.prototype.prependOnceListener=function(e,t,s){return this._once(e,t,!0,s)},x.prototype._once=function(e,t,s,n){return this._many(e,1,t,s,n)},x.prototype.many=function(e,t,s,n){return this._many(e,t,s,!1,n)},x.prototype.prependMany=function(e,t,s,n){return this._many(e,t,s,!0,n)},x.prototype._many=function(e,t,s,n,r){var o=this;if(typeof s!="function")throw new Error("many only accepts instances of Function");function h(){return--t===0&&o.off(e,h),s.apply(this,arguments)}return h._origin=s,this._on(e,h,n,r)},x.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||O.call(this);var e=arguments[0],t,s=this.wildcard,n,r,o,h,_;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(s&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(r=e.length,m){for(o=0;o<r;o++)if(typeof e[o]=="symbol"){_=!0;break}}_||(e=e.join(this.delimiter))}var f=arguments.length,a;if(this._all&&this._all.length)for(a=this._all.slice(),o=0,r=a.length;o<r;o++)switch(this.event=e,f){case 1:a[o].call(this,e);break;case 2:a[o].call(this,e,arguments[1]);break;case 3:a[o].call(this,e,arguments[1],arguments[2]);break;default:a[o].apply(this,arguments)}if(s)a=[],g.call(this,a,t,this.listenerTree,0,r);else if(a=this._events[e],typeof a=="function"){switch(this.event=e,f){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(n=new Array(f-1),h=1;h<f;h++)n[h-1]=arguments[h];a.apply(this,n)}return!0}else a&&(a=a.slice());if(a&&a.length){if(f>3)for(n=new Array(f-1),h=1;h<f;h++)n[h-1]=arguments[h];for(o=0,r=a.length;o<r;o++)switch(this.event=e,f){case 1:a[o].call(this);break;case 2:a[o].call(this,arguments[1]);break;case 3:a[o].call(this,arguments[1],arguments[2]);break;default:a[o].apply(this,n)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},x.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||O.call(this);var e=arguments[0],t=this.wildcard,s,n,r,o,h,_;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(s=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(o=e.length,m){for(h=0;h<o;h++)if(typeof e[h]=="symbol"){n=!0;break}}n||(e=e.join(this.delimiter))}var f=[],a=arguments.length,p;if(this._all)for(h=0,o=this._all.length;h<o;h++)switch(this.event=e,a){case 1:f.push(this._all[h].call(this,e));break;case 2:f.push(this._all[h].call(this,e,arguments[1]));break;case 3:f.push(this._all[h].call(this,e,arguments[1],arguments[2]));break;default:f.push(this._all[h].apply(this,arguments))}if(t?(p=[],g.call(this,p,s,this.listenerTree,0)):p=this._events[e],typeof p=="function")switch(this.event=e,a){case 1:f.push(p.call(this));break;case 2:f.push(p.call(this,arguments[1]));break;case 3:f.push(p.call(this,arguments[1],arguments[2]));break;default:for(r=new Array(a-1),_=1;_<a;_++)r[_-1]=arguments[_];f.push(p.apply(this,r))}else if(p&&p.length){if(p=p.slice(),a>3)for(r=new Array(a-1),_=1;_<a;_++)r[_-1]=arguments[_];for(h=0,o=p.length;h<o;h++)switch(this.event=e,a){case 1:f.push(p[h].call(this));break;case 2:f.push(p[h].call(this,arguments[1]));break;case 3:f.push(p[h].call(this,arguments[1],arguments[2]));break;default:f.push(p[h].apply(this,r))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(f)},x.prototype.on=function(e,t,s){return this._on(e,t,!1,s)},x.prototype.prependListener=function(e,t,s){return this._on(e,t,!0,s)},x.prototype.onAny=function(e){return this._onAny(e,!1)},x.prototype.prependAny=function(e){return this._onAny(e,!0)},x.prototype.addListener=x.prototype.on,x.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},x.prototype._on=function(e,t,s,n){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||O.call(this);var r=this,o;return n!==l&&(o=je.call(this,e,t,n),t=o[0],r=o[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(Ye.call(this,e,t,s),r):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),s?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,k.call(this,this._events[e].length,e))):this._events[e]=t,r)},x.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var s,n=[];if(this.wildcard){var r=typeof e=="string"?e.split(this.delimiter):e.slice();if(n=g.call(this,null,r,this.listenerTree,0),!n)return this}else{if(!this._events[e])return this;s=this._events[e],n.push({_listeners:s})}for(var o=0;o<n.length;o++){var h=n[o];if(s=h._listeners,c(s)){for(var _=-1,f=0,a=s.length;f<a;f++)if(s[f]===t||s[f].listener&&s[f].listener===t||s[f]._origin&&s[f]._origin===t){_=f;break}if(_<0)continue;return this.wildcard?h._listeners.splice(_,1):this._events[e].splice(_,1),s.length===0&&(this.wildcard?delete h._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(s===t||s.listener&&s.listener===t||s._origin&&s._origin===t)&&(this.wildcard?delete h._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&V(this.listenerTree),this},x.prototype.offAny=function(e){var t=0,s=0,n;if(e&&this._all&&this._all.length>0){for(n=this._all,t=0,s=n.length;t<s;t++)if(e===n[t])return n.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(n=this._all,this._removeListener)for(t=0,s=n.length;t<s;t++)this.emit("removeListenerAny",n[t]);this._all=[]}return this},x.prototype.removeListener=x.prototype.off,x.prototype.removeAllListeners=function(e){if(e===l)return!this._events||O.call(this),this;if(this.wildcard){var t=g.call(this,null,e,this.listenerTree,0),s,n;if(!t)return this;for(n=0;n<t.length;n++)s=t[n],s._listeners=null;this.listenerTree&&V(this.listenerTree)}else this._events&&(this._events[e]=null);return this},x.prototype.listeners=function(e){var t=this._events,s,n,r,o,h;if(e===l){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(s=A(t),o=s.length,r=[];o-- >0;)n=t[s[o]],typeof n=="function"?r.push(n):r.push.apply(r,n);return r}else{if(this.wildcard){if(h=this.listenerTree,!h)return[];var _=[],f=typeof e=="string"?e.split(this.delimiter):e.slice();return g.call(this,_,f,h,0),_}return t?(n=t[e],n?typeof n=="function"?[n]:n:[]):[]}},x.prototype.eventNames=function(e){var t=this._events;return this.wildcard?Ee.call(this,this.listenerTree,[],null,e):t?A(t):[]},x.prototype.listenerCount=function(e){return this.listeners(e).length},x.prototype.hasListeners=function(e){if(this.wildcard){var t=[],s=typeof e=="string"?e.split(this.delimiter):e.slice();return g.call(this,t,s,this.listenerTree,0),t.length>0}var n=this._events,r=this._all;return!!(r&&r.length||n&&(e===l?A(n).length:n[e]))},x.prototype.listenersAny=function(){return this._all?this._all:[]},x.prototype.waitFor=function(e,t){var s=this,n=typeof t;return n==="number"?t={timeout:t}:n==="function"&&(t={filter:t}),t=K(t,{timeout:0,filter:l,handleError:!1,Promise,overload:!1},{filter:Z,Promise:fe}),ue(t.Promise,function(r,o,h){function _(){var f=t.filter;if(!(f&&!f.apply(s,arguments)))if(s.off(e,_),t.handleError){var a=arguments[0];a?o(a):r(U.apply(null,arguments).slice(1))}else r(U.apply(null,arguments))}h(function(){s.off(e,_)}),s._on(e,_,!1)},{timeout:t.timeout,overload:t.overload})};function Ge(e,t,s){s=K(s,{Promise,timeout:0,overload:!1},{Promise:fe});var n=s.Promise;return ue(n,function(r,o,h){var _;if(typeof e.addEventListener=="function"){_=function(){r(U.apply(null,arguments))},h(function(){e.removeEventListener(t,_)}),e.addEventListener(t,_,{once:!0});return}var f=function(){a&&e.removeListener("error",a),r(U.apply(null,arguments))},a;t!=="error"&&(a=function(p){e.removeListener(t,f),o(p)},e.once("error",a)),h(function(){a&&e.removeListener("error",a),e.removeListener(t,f)}),e.once(t,f)},{timeout:s.timeout,overload:s.overload})}var W=x.prototype;if(Object.defineProperties(x,{defaultMaxListeners:{get:function(){return W._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");W._maxListeners=e},enumerable:!0},once:{value:Ge,writable:!0,configurable:!0}}),Object.defineProperties(W,{_maxListeners:{value:E,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return x});else if(typeof xe=="object")ve.exports=x;else{var He=new Function("","return this")();He.EventEmitter2=x}})()});var be=me(($s,de)=>{de.exports=Te()});var Ce=We(be(),1);var qe="as",Je="=",$e="break",et="else",tt="enum",st="export",nt="if",rt="import",it="->",ot="is",ct="loop",lt="mut",ht="native",ft="object",at="fn",ut="return",_t="self",Et="template",pt=Object.freeze({ALIAS:qe,ASSIGN:Je,BREAK:$e,ELSE:et,ENUMERATION:tt,EXPORT:st,IF:nt,IMPORT:rt,INTO:it,IS:ot,LOOP:ct,MUTABLE:lt,NATIVE:ht,OBJECT:ft,PROCEDURE:at,RETURN:ut,SELF:_t,TEMPLATE:Et}),Ae=pt;var mt="assign",xt="array_assignment",vt="branch-match",Tt="branch-default",dt="condition",bt="loop",At="data",Ot="generics",Lt="enumeration",gt="expression",wt="instance",St="Link",Rt="local",Nt="object",It="procedure",Pt="return",Ct="select",yt="member",Bt="store",kt="break",Dt="literal",Mt="array_access",Ut="valueLink",Yt="linkValue",jt="self",Gt="procedure-call",Ht="Maybe",Ft="native",Kt="move",Xt="String",zt="Array",Qt="import",Zt="library",Vt="constructor",Wt="destructor",qt="free",Jt="block-end",$t="default-block",es="continue",ts="branch",ss="statement",ns="draw",rs=Object.freeze({TYPES_ASSIGN:mt,TYPES_ARRAY:zt,TYPES_ARRAY_ASSIGNMENT:xt,TYPES_BRANCH_MATCH:vt,TYPES_BRANCH_DEFAULT:Tt,TYPES_CONDITION:dt,TYPES_LOOP:bt,TYPES_DATA:At,TYPES_GENERICS:Ot,TYPES_ENUMERATION:Lt,TYPES_EXPRESSION:gt,TYPES_INSTANCE:wt,TYPES_LINK:St,TYPES_IMPORT:Qt,TYPES_LOCAL:Rt,TYPES_OBJECT:Nt,TYPES_PROCEDURE:It,TYPES_RETURN:Pt,TYPES_SELECT:Ct,TYPES_MEMBER:yt,TYPES_STORE:Bt,TYPES_BREAK:kt,TYPES_LITERAL:Dt,TYPES_ARRAY_ACCESS:Mt,TYPES_LINK_TO:Ut,TYPES_VALUE_AT:Yt,TYPES_SELF:jt,TYPES_LIBRARY:Zt,TYPES_DROP:Gt,TYPES_MAYBE:Ht,TYPES_NATIVE:Ft,TYPES_MOVE:Kt,TYPES_STRING:Xt,TYPES_CONSTRUCTOR:Vt,TYPES_FREE:qt,TYPES_DEFAULT_BLOCK:$t,TYPES_BLOCK_END:Jt,TYPES_CONTINUE:es,TYPES_BRANCH:ts,TYPES_STATEMENT:ss,TYPES_DESTRUCTOR:Wt,TYPES_DRAW:ns}),Oe=rs;var is=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Le=is;var os=Object.freeze([]),cs=Object.freeze({}),ls="",hs="	",fs=`
`,as="UTF-8";var us=Object.freeze({EMPTY_ARRAY:os,EMPTY_OBJECT:cs,EMPTY_STRING:ls,HORIZONTAL_TAB:hs,LINE_BREAK:fs,UNICODE_TEXT:as,Codes:Le,Keys:Ae,Types:Oe}),G=us;var{EMPTY_STRING:_s,UNICODE_TEXT:re}=G,Es=44,ps=48,ms=57,xs=46,vs=45,Ts=43,ds=65,bs=90,As=-1,Os=1,Ls=new TextDecoder(re),gs=new TextEncoder,ws=(l,i,c=0,E=l.length|0,u=0,m=i.length|0)=>{for(u=u|0,c=c|0,m=m|0,E=E|0;;){let T=c>=E,v=u>=m;if(T||v)break;let A=l[c],O=i[u];if(c=c+1|0,u=u+1|0,A<O)return As;if(A>O)return Os}return 0},Ss=(l,i,c=0,E=l.length|0,u=0,m=i.length|0)=>{for(u=u|0,c=c|0,m=m|0,E=E|0;;){let T=u>=m,v=c>=E;if(T||v)break;i[u]=l[c],u=u+1|0,c=c+1|0}},Rs=(l,i,c=0,E=l.length|0,u=0,m=i.length|0)=>{c=c|0,u=u|0,E=E|0,m=m|0;let T=E-c|0,v=m-u|0;if(T!==v)return!1;for(;;){let w=c>=E,A=u>=m;if(w||A)break;let P=l[c],k=i[u];if(c=c+1|0,u=u+1|0,P!==k)return!1}return!0},Ns=l=>{l=l>>>0;let i=0,c=0;for(;c=(c<<1|1)>>>0,!(c>l);)i=i+1|0;return i},Se=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),ne=(l,i,c,E)=>{for(l=l>>>0,E=E??i.length|0,c=c|0,E=E|0;l>0&&E>c;)E=E-1|0,i[E]=Se[l&15],l=l>>>4},Is=(l,i,c,E)=>{let u=c|0,m=c+E|0;if(E===0)return!1;let T=i[u];for((T===Ts||T===vs)&&(u=u+1|0);u<m;){let v=i[u];if(u=u+1|0,!(ps<=v&&v<=ms||(xs===v||Es===v)))return!1}return!0},Ps=l=>{let i=l>=ds,c=l<=bs;return i&&c},z=128,Q=127,Re=-1,M=64,ie=l=>{l=l|0;let i=[];for(;;){let c=l&Q;l=l>>7;let E=l===0,u=(c&M)===0,m=E&&u,T=l===-1,v=(c&M)!==0;if(m||T&&v){i.push(c);break}c=c|z,i.push(c)}return i},Cs=l=>{let i=[],c=!0;for(;c;){let E=l&Q;l>>=7,l===0&&!(E&M)||l===-1&&E&M?c=!1:E|=z,i.push(E)}return i},Ne=(l,i)=>{i=i|0;let c=0,E=0;for(;;){let u=l[i]|0;i=i+1|0;let m=(u&Q)<<E;if(E=E+7|0,c=c|m,(u&z)===0){let v=(u&M)!==0,w=E<32;if(v&&w){let O=Re<<E;c=c|O}break}}return c},ys=(l,i)=>{i=i|0;let c=0,E=0;for(;;){let u=l[i]|0;i=i+1|0;let m=(u&Q)<<E;if(E=E+7|0,c=c|m,!(u&z)){if(u&M){let T=Re<<E;c=c|T}break}}return c},Bs=l=>Ls.decode(l),ks=l=>gs.encode(l),Ds=(l=_s)=>{let i=l.length|0,c=ie(i),E=Buffer.from(l,re);return Object.freeze([...c,...E])},Ms=(l,i)=>{i=i|0;let c=Ne(l,i),E=ie(c).length;return i=i+E|0,l.subarray(i,i+c|0).toString(re)},Us=58,Ys=46,H=32,te=48,js=67,B=new Uint8Array(js),ge=B.subarray(0,8),X=B.subarray(10,49),we=B.subarray(51,68),se=16,Gs=2;B[8]=Us;B[9]=H;B[49]=H;B[50]=H;var Hs=(l,i)=>{i=i??console.log;let c=32,E=126,u=l.length|0,m=0;for(;u>0;){ge.fill(te),ne(m,ge),X.fill(H),we.fill(H);let T=u>=se?se:u;u=u-se|0;let v=0,w=0;for(let O=1;O<=T;O=O+1|0){let P=l[m]&255;X[v+0|0]=te,X[v+1|0]=te,ne(P,X,v,v+2|0);let k=Ys;c<=P&&P<=E&&(k=P),we[w]=k,m=m+1|0,v=v+2|0,w=w+1|0,O%Gs===0&&(v=v+1|0)}let A=String.fromCodePoint(...B);i(A)}},Fs=function*(l,i){let c=l.length|0,E=i.length|0,u=0;for(;u<c&&u<E;){let m=l[u],T=i[u];yield[m,T],u=u+1|0}},Ks=function*(l,i,c){let E=l.length|0,u=i.length|0,m=c.length|0,T=0;for(;T<E&&T<u&&T<m;){let v=l[T],w=i[T],A=c[T];yield[v,w,A],T=T+1|0}},Xs=Object.freeze({ARRAY_COMPARE:ws,ARRAY_COPY:Ss,ARRAY_EQUAL:Rs,BIT_DEPTH:Ns,HEX_DIGITS:Se,HEX_ENCODE:ne,IS_NUMBER:Is,IS_UPPERCASE:Ps,LEB128_DECODE:Ne,LEB128_DECODE_SIGNED:ys,LEB128_ENCODE:ie,LEB128_ENCODE_SIGNED:Cs,UTF8_DECODE:Bs,UTF8_ENCODE:ks,WASM_STRING_ENCODE:Ds,WASM_STRING_DECODE:Ms,XXD_DUMP_HEX:Hs,ZIP2:Fs,ZIP3:Ks}),Ie=Xs;var{Codes:N}=G,{EMPTY_STRING:un}=G,{ARRAY_COPY:zs}=Ie,Qs=Object.freeze({tabSize:4}),ye=new Set([40,41,91,93,123,125,46,44,58,59,64,61,47]);Object.freeze(ye);var Be=new Set([46,44]);Object.freeze(Be);var ke=new Set([34,39]),De=new Set([61,33,62,60]);Object.freeze(De);var Pe=61,Zs=58,Vs=64,Ws=47;Object.freeze(ke);var Me=new Set([9,13,32]);Object.freeze(Me);var F=1,oe=2,ce=3,qs=(l,i,c)=>{if(i=i|0,c=c|0,(c-i|0)===0)return!1;let u=l[i];for((u===N.PLUS_SIGN||u===N.HYPHEN_MINUS)&&(i=i+1|0);i<c;){let m=l[i];i=i+1|0;let T=N.DIGIT_ZERO<=m&&m<=N.DIGIT_NINE,v=N.DOT===m||N.COMMA===m;if(!(T||v&&i<c&&N.DIGIT_ZERO<=l[i]&&l[i]<=N.DIGIT_NINE))return!1}return!0},D=class{constructor(i=Qs){this.options=i,this.numberMark=!1,this.position=0,this.array=new Uint8Array(D.LIMIT_ARRAY),this.target=0,this.length=0,this.indexA=0,this.indexB=0,this.events=new Map,this.emitter=new Ce.default,this.emitter.on("token",(c,E,u,m)=>{(this.events.get("token")||[]).forEach(v=>{v(c,E,u,m)})}),this.emitter.on("error",()=>{}),this.comment=!1,this.situation=F,this.quote=N.NULL,Object.seal(this)}on(i,c){if(D.SET_EVENTS.has(i)){let E=this.events.get(i)||[];E.push(c),this.events.set(i,E)}}feed(i){let c=i.length|0,E=0,u=0,m=c;for(;m>0;){let T=D.LIMIT_ARRAY-this.length|0,v=Math.min(T,m)|0;m=m-v|0,u=u+v|0,zs(i,this.array,E,u,this.target),this.length=this.length+v|0,this.flush(),E=E+v|0}}done(){this.array[this.indexB]=N.SPACE,this.length=this.length+1,this.flush()}flush(){for(;this.indexB<this.length;)switch(this.situation){case F:{this.flushTopLevel();break}case oe:{this.flushQuotation();break}case ce:{this.flushComment();break}}let i=this.length-this.indexA|0;i>D.LIMIT_TOKEN||(i>0&&(this.array.copyWithin(0,this.indexA,this.indexB),this.indexA=0,this.indexB=i,this.target=i),this.length=i)}flushComment(){for(;this.indexB<this.length;){if((this.array[this.indexB]|0)===N.LINE_BREAK){this.drain("comment"),this.indexB=this.indexB+1|0,this.drain("token"),this.comment=!1,this.situation=F;break}this.indexB=this.indexB+1|0}this.comment===!0&&(this.length-this.indexA|0)>0&&this.drain("comment")}flushQuotation(){for(;this.indexB<this.length;){let i=this.indexB-this.indexA|0;if((this.array[this.indexB]|0)===this.quote){this.quote=N.NULL,i>0&&this.drain("token"),this.indexB=this.indexB+1|0,this.drain("token"),this.situation=F;return}this.indexB=this.indexB+1|0}}flushTopLevel(){let{options:i}=this,{tabSize:c}=i;for(;this.indexB<this.length;){let E=()=>{let O=0;this.numberMark&&(this.indexB=this.indexB-1|0),O=this.indexB-this.indexA|0,O>0&&this.drain("token"),this.numberMark&&(this.indexB=this.indexB+1|0),O=this.indexB-this.indexA|0,O>0&&this.drain("token"),this.numberMark=!1},u=this.array[this.indexB]|0;if(u===N.HASHTAG){E(),this.indexB=this.indexB+1|0,this.drain("token"),this.comment=!0,this.situation=ce;return}if(u===N.LINE_BREAK){E(),this.indexB=this.indexB+1|0,this.drain("token");continue}if(ke.has(u)){E(),this.indexB=this.indexB+1|0,this.drain("token"),this.quote=u,this.situation=oe;return}if(De.has(u)&&this.array[this.indexB+1]===Pe){E(),this.indexB=this.indexB+2|0,this.drain("token");continue}if(u===Vs&&this.array[this.indexB+1]===Ws){E(),this.indexB=this.indexB+2|0,this.drain("token");continue}if(u===Zs&&this.array[this.indexB+1]===Pe){E(),this.indexB=this.indexB+2|0,this.drain("token");continue}if(Me.has(u)){E(),u===N.HORIZONTAL_TAB?this.position=this.position+c|0:this.position=this.position+1|0,this.indexA=this.indexA+1|0,this.indexB=this.indexB+1|0;continue}if(this.numberMark=!1,ye.has(u)){let O=!qs(this.array,this.indexA,this.indexB),P=!Be.has(u);if(O||P){E(),this.indexB=this.indexB+1|0,this.drain("token");continue}this.numberMark=!0}this.indexB=this.indexB+1|0}}drain(i){let{array:c,position:E}=this,u=this.indexB-this.indexA|0,m=this.indexA;this.emitter.emit(i,E,c,m,u),this.position=this.position+u|0,this.indexA=this.indexB|0}close(){}},C=D;j(C,"LIMIT_TOKEN",1e3),j(C,"LIMIT_ARRAY",D.LIMIT_TOKEN*2|0),j(C,"SET_EVENTS",new Set(["comment","error","token"])),j(C,"SET_SITUATIONS",new Set([F,oe,ce]));Object.values(C).forEach(Object.freeze);Object.freeze(C);Object.freeze(Object.getPrototypeOf(C));var _n=C;export{_n as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
