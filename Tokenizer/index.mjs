var Fe=Object.create;var ee=Object.defineProperty;var Ke=Object.getOwnPropertyDescriptor;var Xe=Object.getOwnPropertyNames;var ze=Object.getPrototypeOf,Qe=Object.prototype.hasOwnProperty;var Ze=(l,r,c)=>r in l?ee(l,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[r]=c;var me=(l,r)=>()=>(r||l((r={exports:{}}).exports,r),r.exports);var Ve=(l,r,c,E)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of Xe(r))!Qe.call(l,u)&&u!==c&&ee(l,u,{get:()=>r[u],enumerable:!(E=Ke(r,u))||E.enumerable});return l};var We=(l,r,c)=>(c=l!=null?Fe(ze(l)):{},Ve(r||!l||!l.__esModule?ee(c,"default",{value:l,enumerable:!0}):c,l));var Y=(l,r,c)=>(Ze(l,typeof r!="symbol"?r+"":r,c),c);var Te=me((ve,xe)=>{(function(l){var r=Object.hasOwnProperty,c=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},E=10,u=typeof process=="object"&&typeof process.nextTick=="function",m=typeof Symbol=="function",T=typeof Reflect=="object",x=typeof setImmediate=="function",w=x?setImmediate:setTimeout,A=m?T&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function O(){this._events={},this._conf&&C.call(this,this._conf)}function C(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==l&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function k(e,t){var s="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(s+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var n=new Error(s);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(s),console.trace&&console.trace()}var U=function(e,t,s){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,s];default:for(var i=new Array(n);n--;)i[n]=arguments[n];return i}};function le(e,t){for(var s={},n,i=e.length,o=t?t.length:0,h=0;h<i;h++)n=e[h],s[n]=h<o?t[h]:l;return s}function he(e,t,s){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var n,i;if((s.on||s.off)&&(n=s.on,i=s.off),t.addEventListener?(n=t.addEventListener,i=t.removeEventListener):t.addListener?(n=t.addListener,i=t.removeListener):t.on&&(n=t.on,i=t.off),!n&&!i)throw Error("target does not implement any known event API");if(typeof n!="function")throw TypeError("on method must be a function");if(typeof i!="function")throw TypeError("off method must be a function");this._on=n,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}Object.assign(he.prototype,{subscribe:function(e,t,s){var n=this,i=this._target,o=this._emitter,h=this._listeners,_=function(){var f=U.apply(null,arguments),a={data:f,name:t,original:e};if(s){var p=s.call(i,a);p!==!1&&o.emit.apply(o,[a.name].concat(f));return}o.emit.apply(o,[t].concat(f))};if(h[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!n._onNewListener?(this._onNewListener=function(f){f===t&&h[e]===null&&(h[e]=_,n._on.call(i,e,_))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(f){f===t&&!o.hasListeners(f)&&h[e]&&(h[e]=null,n._off.call(i,e,_))},h[e]=null,o.on("removeListener",this._onRemoveListener)):(h[e]=_,n._on.call(i,e,_))},unsubscribe:function(e){var t=this,s=this._listeners,n=this._emitter,i,o,h=this._off,_=this._target,f;if(e&&typeof e!="string")throw TypeError("event must be a string");function a(){t._onNewListener&&(n.off("newListener",t._onNewListener),n.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var p=_e.call(n,t);n._observers.splice(p,1)}if(e){if(i=s[e],!i)return;h.call(_,e,i),delete s[e],--this._listenersCount||a()}else{for(o=A(s),f=o.length;f-- >0;)e=o[f],h.call(_,e,s[e]);this._listeners={},this._listenersCount=0,a()}}});function K(e,t,s,n){var i=Object.assign({},t);if(!e)return i;if(typeof e!="object")throw TypeError("options must be an object");var o=Object.keys(e),h=o.length,_,f,a;function p(d){throw Error('Invalid "'+_+'" option value'+(d?". Reason: "+d:""))}for(var R=0;R<h;R++){if(_=o[R],!n&&!r.call(t,_))throw Error('Unknown "'+_+'" option');f=e[_],f!==l&&(a=s[_],i[_]=a?a(f,p):f)}return i}function fe(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function ae(e){var t="value must be type of "+e.join("|"),s=e.length,n=e[0],i=e[1];return s===1?function(o,h){if(typeof o===n)return o;h(t)}:s===2?function(o,h){var _=typeof o;if(_===n||_===i)return o;h(t)}:function(o,h){for(var _=typeof o,f=s;f-- >0;)if(_===e[f])return o;h(t)}}var Z=ae(["function"]),Ue=ae(["object","function"]);function ue(e,t,s){var n,i,o=0,h,_=new e(function(f,a,p){s=K(s,{timeout:0,overload:!1},{timeout:function(g,I){return g*=1,(typeof g!="number"||g<0||!Number.isFinite(g))&&I("timeout must be a positive number"),g}}),n=!s.overload&&typeof e.prototype.cancel=="function"&&typeof p=="function";function R(){i&&(i=null),o&&(clearTimeout(o),o=0)}var d=function(g){R(),f(g)},b=function(g){R(),a(g)};n?t(d,b,p):(i=[function(g){b(g||Error("canceled"))}],t(d,b,function(g){if(h)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof g!="function")throw TypeError("onCancel callback must be a function");i.push(g)}),h=!0),s.timeout>0&&(o=setTimeout(function(){var g=Error("timeout");g.code="ETIMEDOUT",o=0,_.cancel(g),a(g)},s.timeout))});return n||(_.cancel=function(f){if(i){for(var a=i.length,p=1;p<a;p++)i[p](f);i[0](f),i=null}}),_}function _e(e){var t=this._observers;if(!t)return-1;for(var s=t.length,n=0;n<s;n++)if(t[n]._target===e)return n;return-1}function L(e,t,s,n,i){if(!s)return null;if(n===0){var o=typeof t;if(o==="string"){var h,_,f=0,a=0,p=this.delimiter,R=p.length;if((_=t.indexOf(p))!==-1){h=new Array(5);do h[f++]=t.slice(a,_),a=_+R;while((_=t.indexOf(p,a))!==-1);h[f++]=t.slice(a),t=h,i=f}else t=[t],i=1}else o==="object"?i=t.length:(t=[t],i=1)}var d=null,b,g,I,q,J,j=t[n],$=t[n+1],y,N;if(n===i)s._listeners&&(typeof s._listeners=="function"?(e&&e.push(s._listeners),d=[s]):(e&&e.push.apply(e,s._listeners),d=[s]));else if(j==="*"){for(y=A(s),_=y.length;_-- >0;)b=y[_],b!=="_listeners"&&(N=L(e,t,s[b],n+1,i),N&&(d?d.push.apply(d,N):d=N));return d}else if(j==="**"){for(J=n+1===i||n+2===i&&$==="*",J&&s._listeners&&(d=L(e,t,s,i,i)),y=A(s),_=y.length;_-- >0;)b=y[_],b!=="_listeners"&&(b==="*"||b==="**"?(s[b]._listeners&&!J&&(N=L(e,t,s[b],i,i),N&&(d?d.push.apply(d,N):d=N)),N=L(e,t,s[b],n,i)):b===$?N=L(e,t,s[b],n+2,i):N=L(e,t,s[b],n,i),N&&(d?d.push.apply(d,N):d=N));return d}else s[j]&&(d=L(e,t,s[j],n+1,i));if(g=s["*"],g&&L(e,t,g,n+1,i),I=s["**"],I)if(n<i)for(I._listeners&&L(e,t,I,i,i),y=A(I),_=y.length;_-- >0;)b=y[_],b!=="_listeners"&&(b===$?L(e,t,I[b],n+2,i):b===j?L(e,t,I[b],n+1,i):(q={},q[b]=I[b],L(e,t,{"**":q},n+1,i)));else I._listeners?L(e,t,I,i,i):I["*"]&&I["*"]._listeners&&L(e,t,I["*"],i,i);return d}function je(e,t,s){var n=0,i=0,o,h=this.delimiter,_=h.length,f;if(typeof e=="string")if((o=e.indexOf(h))!==-1){f=new Array(5);do f[n++]=e.slice(i,o),i=o+_;while((o=e.indexOf(h,i))!==-1);f[n++]=e.slice(i)}else f=[e],n=1;else f=e,n=e.length;if(n>1){for(o=0;o+1<n;o++)if(f[o]==="**"&&f[o+1]==="**")return}var a=this.listenerTree,p;for(o=0;o<n;o++)if(p=f[o],a=a[p]||(a[p]={}),o===n-1)return a._listeners?(typeof a._listeners=="function"&&(a._listeners=[a._listeners]),s?a._listeners.unshift(t):a._listeners.push(t),!a._listeners.warned&&this._maxListeners>0&&a._listeners.length>this._maxListeners&&(a._listeners.warned=!0,k.call(this,a._listeners.length,p))):a._listeners=t,!0;return!0}function Ee(e,t,s,n){for(var i=A(e),o=i.length,h,_,f,a=e._listeners,p;o-- >0;)_=i[o],h=e[_],_==="_listeners"?f=s:f=s?s.concat(_):[_],p=n||typeof _=="symbol",a&&t.push(p?f:f.join(this.delimiter)),typeof h=="object"&&Ee.call(this,h,t,f,p);return t}function V(e){for(var t=A(e),s=t.length,n,i,o;s-- >0;)i=t[s],n=e[i],n&&(o=!0,i!=="_listeners"&&!V(n)&&delete e[i]);return o}function pe(e,t,s){this.emitter=e,this.event=t,this.listener=s}pe.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function Ye(e,t,s){if(s===!0)i=!0;else if(s===!1)n=!0;else{if(!s||typeof s!="object")throw TypeError("options should be an object or true");var n=s.async,i=s.promisify,o=s.nextTick,h=s.objectify}if(n||o||i){var _=t,f=t._origin||t;if(o&&!u)throw Error("process.nextTick is not supported");i===l&&(i=t.constructor.name==="AsyncFunction"),t=function(){var a=arguments,p=this,R=this.event;return i?o?Promise.resolve():new Promise(function(d){w(d)}).then(function(){return p.event=R,_.apply(p,a)}):(o?process.nextTick:w)(function(){p.event=R,_.apply(p,a)})},t._async=!0,t._origin=f}return[t,h?new pe(this,e,t):this]}function v(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,C.call(this,e)}v.EventEmitter2=v,v.prototype.listenTo=function(e,t,s){if(typeof e!="object")throw TypeError("target musts be an object");var n=this;s=K(s,{on:l,off:l,reducers:l},{on:Z,off:Z,reducers:Ue});function i(o){if(typeof o!="object")throw TypeError("events must be an object");var h=s.reducers,_=_e.call(n,e),f;_===-1?f=new he(n,e,s):f=n._observers[_];for(var a=A(o),p=a.length,R,d=typeof h=="function",b=0;b<p;b++)R=a[b],f.subscribe(R,o[R]||R,d?h:h&&h[R])}return c(t)?i(le(t)):i(typeof t=="string"?le(t.split(/\s+/)):t),this},v.prototype.stopListeningTo=function(e,t){var s=this._observers;if(!s)return!1;var n=s.length,i,o=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;n-- >0;)i=s[n],(!e||i._target===e)&&(i.unsubscribe(t),o=!0);return o},v.prototype.delimiter=".",v.prototype.setMaxListeners=function(e){e!==l&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},v.prototype.getMaxListeners=function(){return this._maxListeners},v.prototype.event="",v.prototype.once=function(e,t,s){return this._once(e,t,!1,s)},v.prototype.prependOnceListener=function(e,t,s){return this._once(e,t,!0,s)},v.prototype._once=function(e,t,s,n){return this._many(e,1,t,s,n)},v.prototype.many=function(e,t,s,n){return this._many(e,t,s,!1,n)},v.prototype.prependMany=function(e,t,s,n){return this._many(e,t,s,!0,n)},v.prototype._many=function(e,t,s,n,i){var o=this;if(typeof s!="function")throw new Error("many only accepts instances of Function");function h(){return--t===0&&o.off(e,h),s.apply(this,arguments)}return h._origin=s,this._on(e,h,n,i)},v.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||O.call(this);var e=arguments[0],t,s=this.wildcard,n,i,o,h,_;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(s&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(i=e.length,m){for(o=0;o<i;o++)if(typeof e[o]=="symbol"){_=!0;break}}_||(e=e.join(this.delimiter))}var f=arguments.length,a;if(this._all&&this._all.length)for(a=this._all.slice(),o=0,i=a.length;o<i;o++)switch(this.event=e,f){case 1:a[o].call(this,e);break;case 2:a[o].call(this,e,arguments[1]);break;case 3:a[o].call(this,e,arguments[1],arguments[2]);break;default:a[o].apply(this,arguments)}if(s)a=[],L.call(this,a,t,this.listenerTree,0,i);else if(a=this._events[e],typeof a=="function"){switch(this.event=e,f){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(n=new Array(f-1),h=1;h<f;h++)n[h-1]=arguments[h];a.apply(this,n)}return!0}else a&&(a=a.slice());if(a&&a.length){if(f>3)for(n=new Array(f-1),h=1;h<f;h++)n[h-1]=arguments[h];for(o=0,i=a.length;o<i;o++)switch(this.event=e,f){case 1:a[o].call(this);break;case 2:a[o].call(this,arguments[1]);break;case 3:a[o].call(this,arguments[1],arguments[2]);break;default:a[o].apply(this,n)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},v.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||O.call(this);var e=arguments[0],t=this.wildcard,s,n,i,o,h,_;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(s=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(o=e.length,m){for(h=0;h<o;h++)if(typeof e[h]=="symbol"){n=!0;break}}n||(e=e.join(this.delimiter))}var f=[],a=arguments.length,p;if(this._all)for(h=0,o=this._all.length;h<o;h++)switch(this.event=e,a){case 1:f.push(this._all[h].call(this,e));break;case 2:f.push(this._all[h].call(this,e,arguments[1]));break;case 3:f.push(this._all[h].call(this,e,arguments[1],arguments[2]));break;default:f.push(this._all[h].apply(this,arguments))}if(t?(p=[],L.call(this,p,s,this.listenerTree,0)):p=this._events[e],typeof p=="function")switch(this.event=e,a){case 1:f.push(p.call(this));break;case 2:f.push(p.call(this,arguments[1]));break;case 3:f.push(p.call(this,arguments[1],arguments[2]));break;default:for(i=new Array(a-1),_=1;_<a;_++)i[_-1]=arguments[_];f.push(p.apply(this,i))}else if(p&&p.length){if(p=p.slice(),a>3)for(i=new Array(a-1),_=1;_<a;_++)i[_-1]=arguments[_];for(h=0,o=p.length;h<o;h++)switch(this.event=e,a){case 1:f.push(p[h].call(this));break;case 2:f.push(p[h].call(this,arguments[1]));break;case 3:f.push(p[h].call(this,arguments[1],arguments[2]));break;default:f.push(p[h].apply(this,i))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(f)},v.prototype.on=function(e,t,s){return this._on(e,t,!1,s)},v.prototype.prependListener=function(e,t,s){return this._on(e,t,!0,s)},v.prototype.onAny=function(e){return this._onAny(e,!1)},v.prototype.prependAny=function(e){return this._onAny(e,!0)},v.prototype.addListener=v.prototype.on,v.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},v.prototype._on=function(e,t,s,n){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||O.call(this);var i=this,o;return n!==l&&(o=Ye.call(this,e,t,n),t=o[0],i=o[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(je.call(this,e,t,s),i):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),s?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,k.call(this,this._events[e].length,e))):this._events[e]=t,i)},v.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var s,n=[];if(this.wildcard){var i=typeof e=="string"?e.split(this.delimiter):e.slice();if(n=L.call(this,null,i,this.listenerTree,0),!n)return this}else{if(!this._events[e])return this;s=this._events[e],n.push({_listeners:s})}for(var o=0;o<n.length;o++){var h=n[o];if(s=h._listeners,c(s)){for(var _=-1,f=0,a=s.length;f<a;f++)if(s[f]===t||s[f].listener&&s[f].listener===t||s[f]._origin&&s[f]._origin===t){_=f;break}if(_<0)continue;return this.wildcard?h._listeners.splice(_,1):this._events[e].splice(_,1),s.length===0&&(this.wildcard?delete h._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(s===t||s.listener&&s.listener===t||s._origin&&s._origin===t)&&(this.wildcard?delete h._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&V(this.listenerTree),this},v.prototype.offAny=function(e){var t=0,s=0,n;if(e&&this._all&&this._all.length>0){for(n=this._all,t=0,s=n.length;t<s;t++)if(e===n[t])return n.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(n=this._all,this._removeListener)for(t=0,s=n.length;t<s;t++)this.emit("removeListenerAny",n[t]);this._all=[]}return this},v.prototype.removeListener=v.prototype.off,v.prototype.removeAllListeners=function(e){if(e===l)return!this._events||O.call(this),this;if(this.wildcard){var t=L.call(this,null,e,this.listenerTree,0),s,n;if(!t)return this;for(n=0;n<t.length;n++)s=t[n],s._listeners=null;this.listenerTree&&V(this.listenerTree)}else this._events&&(this._events[e]=null);return this},v.prototype.listeners=function(e){var t=this._events,s,n,i,o,h;if(e===l){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(s=A(t),o=s.length,i=[];o-- >0;)n=t[s[o]],typeof n=="function"?i.push(n):i.push.apply(i,n);return i}else{if(this.wildcard){if(h=this.listenerTree,!h)return[];var _=[],f=typeof e=="string"?e.split(this.delimiter):e.slice();return L.call(this,_,f,h,0),_}return t?(n=t[e],n?typeof n=="function"?[n]:n:[]):[]}},v.prototype.eventNames=function(e){var t=this._events;return this.wildcard?Ee.call(this,this.listenerTree,[],null,e):t?A(t):[]},v.prototype.listenerCount=function(e){return this.listeners(e).length},v.prototype.hasListeners=function(e){if(this.wildcard){var t=[],s=typeof e=="string"?e.split(this.delimiter):e.slice();return L.call(this,t,s,this.listenerTree,0),t.length>0}var n=this._events,i=this._all;return!!(i&&i.length||n&&(e===l?A(n).length:n[e]))},v.prototype.listenersAny=function(){return this._all?this._all:[]},v.prototype.waitFor=function(e,t){var s=this,n=typeof t;return n==="number"?t={timeout:t}:n==="function"&&(t={filter:t}),t=K(t,{timeout:0,filter:l,handleError:!1,Promise,overload:!1},{filter:Z,Promise:fe}),ue(t.Promise,function(i,o,h){function _(){var f=t.filter;if(!(f&&!f.apply(s,arguments)))if(s.off(e,_),t.handleError){var a=arguments[0];a?o(a):i(U.apply(null,arguments).slice(1))}else i(U.apply(null,arguments))}h(function(){s.off(e,_)}),s._on(e,_,!1)},{timeout:t.timeout,overload:t.overload})};function Ge(e,t,s){s=K(s,{Promise,timeout:0,overload:!1},{Promise:fe});var n=s.Promise;return ue(n,function(i,o,h){var _;if(typeof e.addEventListener=="function"){_=function(){i(U.apply(null,arguments))},h(function(){e.removeEventListener(t,_)}),e.addEventListener(t,_,{once:!0});return}var f=function(){a&&e.removeListener("error",a),i(U.apply(null,arguments))},a;t!=="error"&&(a=function(p){e.removeListener(t,f),o(p)},e.once("error",a)),h(function(){a&&e.removeListener("error",a),e.removeListener(t,f)}),e.once(t,f)},{timeout:s.timeout,overload:s.overload})}var W=v.prototype;if(Object.defineProperties(v,{defaultMaxListeners:{get:function(){return W._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");W._maxListeners=e},enumerable:!0},once:{value:Ge,writable:!0,configurable:!0}}),Object.defineProperties(W,{_maxListeners:{value:E,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return v});else if(typeof ve=="object")xe.exports=v;else{var He=new Function("","return this")();He.EventEmitter2=v}})()});var be=me((Ks,de)=>{de.exports=Te()});var Pe=We(be(),1);var qe="as",Je="=",$e="break",et="else",tt="enum",st="export",nt="if",it="import",rt="->",ot="is",ct="loop",lt="mut",ht="native",ft="object",at="fn",ut="return",_t="self",Et="template",pt=Object.freeze({ALIAS:qe,ASSIGN:Je,BREAK:$e,ELSE:et,ENUMERATION:tt,EXPORT:st,IF:nt,IMPORT:it,INTO:rt,IS:ot,LOOP:ct,MUTABLE:lt,NATIVE:ht,OBJECT:ft,PROCEDURE:at,RETURN:ut,SELF:_t,TEMPLATE:Et}),Ae=pt;var mt="assign",vt="array_assignment",xt="branch-match",Tt="branch-default",dt="condition",bt="loop",At="data",Ot="generics",gt="enumeration",Lt="expression",wt="instance",Rt="Link",It="local",St="object",Nt="procedure",Ct="return",Pt="select",yt="member",Bt="store",kt="break",Dt="literal",Mt="array_access",Ut="valueLink",jt="linkValue",Yt="self",Gt="procedure-call",Ht="Maybe",Ft="native",Kt="move",Xt="String",zt="Array",Qt="import",Zt="library",Vt=Object.freeze({TYPES_ASSIGN:mt,TYPES_ARRAY:zt,TYPES_ARRAY_ASSIGNMENT:vt,TYPES_BRANCH_MATCH:xt,TYPES_BRANCH_DEFAULT:Tt,TYPES_CONDITION:dt,TYPES_LOOP:bt,TYPES_DATA:At,TYPES_GENERICS:Ot,TYPES_ENUMERATION:gt,TYPES_EXPRESSION:Lt,TYPES_INSTANCE:wt,TYPES_LINK:Rt,TYPES_IMPORT:Qt,TYPES_LOCAL:It,TYPES_OBJECT:St,TYPES_PROCEDURE:Nt,TYPES_RETURN:Ct,TYPES_SELECT:Pt,TYPES_MEMBER:yt,TYPES_STORE:Bt,TYPES_BREAK:kt,TYPES_LITERAL:Dt,TYPES_ARRAY_ACCESS:Mt,TYPES_LINK_TO:Ut,TYPES_VALUE_AT:jt,TYPES_SELF:Yt,TYPES_LIBRARY:Zt,TYPES_DROP:Gt,TYPES_MAYBE:Ht,TYPES_NATIVE:Ft,TYPES_MOVE:Kt,TYPES_STRING:Xt}),Oe=Vt;var Wt=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),ge=Wt;var qt=Object.freeze([]),Jt=Object.freeze({}),$t="",es="	",ts=`
`,ss="UTF-8";var ns=Object.freeze({EMPTY_ARRAY:qt,EMPTY_OBJECT:Jt,EMPTY_STRING:$t,HORIZONTAL_TAB:es,LINE_BREAK:ts,UNICODE_TEXT:ss,Codes:ge,Keys:Ae,Types:Oe}),G=ns;var{EMPTY_STRING:is,UNICODE_TEXT:ie}=G,rs=44,os=48,cs=57,ls=46,hs=45,fs=43,as=65,us=90,_s=-1,Es=1,ps=new TextDecoder(ie),ms=new TextEncoder,vs=(l,r,c=0,E=l.length|0,u=0,m=r.length|0)=>{for(u=u|0,c=c|0,m=m|0,E=E|0;;){let T=c>=E,x=u>=m;if(T||x)break;let A=l[c],O=r[u];if(c=c+1|0,u=u+1|0,A<O)return _s;if(A>O)return Es}return 0},xs=(l,r,c=0,E=l.length|0,u=0,m=r.length|0)=>{for(u=u|0,c=c|0,m=m|0,E=E|0;;){let T=u>=m,x=c>=E;if(T||x)break;r[u]=l[c],u=u+1|0,c=c+1|0}},Ts=(l,r,c=0,E=l.length|0,u=0,m=r.length|0)=>{c=c|0,u=u|0,E=E|0,m=m|0;let T=E-c|0,x=m-u|0;if(T!==x)return!1;for(;;){let w=c>=E,A=u>=m;if(w||A)break;let C=l[c],k=r[u];if(c=c+1|0,u=u+1|0,C!==k)return!1}return!0},ds=l=>{l=l>>>0;let r=0,c=0;for(;c=(c<<1|1)>>>0,!(c>l);)r=r+1|0;return r},Re=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),ne=(l,r,c,E)=>{for(l=l>>>0,E=E??r.length|0,c=c|0,E=E|0;l>0&&E>c;)E=E-1|0,r[E]=Re[l&15],l=l>>>4},bs=(l,r,c,E)=>{let u=c|0,m=c+E|0;if(E===0)return!1;let T=r[u];for((T===fs||T===hs)&&(u=u+1|0);u<m;){let x=r[u];if(u=u+1|0,!(os<=x&&x<=cs||(ls===x||rs===x)))return!1}return!0},As=l=>{let r=l>=as,c=l<=us;return r&&c},z=128,Q=127,Ie=-1,M=64,re=l=>{l=l|0;let r=[];for(;;){let c=l&Q;l=l>>7;let E=l===0,u=(c&M)===0,m=E&&u,T=l===-1,x=(c&M)!==0;if(m||T&&x){r.push(c);break}c=c|z,r.push(c)}return r},Os=l=>{let r=[],c=!0;for(;c;){let E=l&Q;l>>=7,l===0&&!(E&M)||l===-1&&E&M?c=!1:E|=z,r.push(E)}return r},Se=(l,r)=>{r=r|0;let c=0,E=0;for(;;){let u=l[r]|0;r=r+1|0;let m=(u&Q)<<E;if(E=E+7|0,c=c|m,(u&z)===0){let x=(u&M)!==0,w=E<32;if(x&&w){let O=Ie<<E;c=c|O}break}}return c},gs=(l,r)=>{r=r|0;let c=0,E=0;for(;;){let u=l[r]|0;r=r+1|0;let m=(u&Q)<<E;if(E=E+7|0,c=c|m,!(u&z)){if(u&M){let T=Ie<<E;c=c|T}break}}return c},Ls=l=>ps.decode(l),ws=l=>ms.encode(l),Rs=(l=is)=>{let r=l.length|0,c=re(r),E=Buffer.from(l,ie);return Object.freeze([...c,...E])},Is=(l,r)=>{r=r|0;let c=Se(l,r),E=re(c).length;return r=r+E|0,l.subarray(r,r+c|0).toString(ie)},Ss=58,Ns=46,H=32,te=48,Cs=67,B=new Uint8Array(Cs),Le=B.subarray(0,8),X=B.subarray(10,49),we=B.subarray(51,68),se=16,Ps=2;B[8]=Ss;B[9]=H;B[49]=H;B[50]=H;var ys=(l,r)=>{r=r??console.log;let c=32,E=126,u=l.length|0,m=0;for(;u>0;){Le.fill(te),ne(m,Le),X.fill(H),we.fill(H);let T=u>=se?se:u;u=u-se|0;let x=0,w=0;for(let O=1;O<=T;O=O+1|0){let C=l[m]&255;X[x+0|0]=te,X[x+1|0]=te,ne(C,X,x,x+2|0);let k=Ns;c<=C&&C<=E&&(k=C),we[w]=k,m=m+1|0,x=x+2|0,w=w+1|0,O%Ps===0&&(x=x+1|0)}let A=String.fromCodePoint(...B);r(A)}},Bs=function*(l,r){let c=l.length|0,E=r.length|0,u=0;for(;u<c&&u<E;){let m=l[u],T=r[u];yield[m,T],u=u+1|0}},ks=function*(l,r,c){let E=l.length|0,u=r.length|0,m=c.length|0,T=0;for(;T<E&&T<u&&T<m;){let x=l[T],w=r[T],A=c[T];yield[x,w,A],T=T+1|0}},Ds=Object.freeze({ARRAY_COMPARE:vs,ARRAY_COPY:xs,ARRAY_EQUAL:Ts,BIT_DEPTH:ds,HEX_DIGITS:Re,HEX_ENCODE:ne,IS_NUMBER:bs,IS_UPPERCASE:As,LEB128_DECODE:Se,LEB128_DECODE_SIGNED:gs,LEB128_ENCODE:re,LEB128_ENCODE_SIGNED:Os,UTF8_DECODE:Ls,UTF8_ENCODE:ws,WASM_STRING_ENCODE:Rs,WASM_STRING_DECODE:Is,XXD_DUMP_HEX:ys,ZIP2:Bs,ZIP3:ks}),Ne=Ds;var{Codes:S}=G,{EMPTY_STRING:sn}=G,{ARRAY_COPY:Ms}=Ne,Us=Object.freeze({tabSize:4}),ye=new Set([40,41,91,93,123,125,46,44,58,59,64,61,47]);Object.freeze(ye);var Be=new Set([46,44]);Object.freeze(Be);var ke=new Set([34,39]),De=new Set([61,33,62,60]);Object.freeze(De);var Ce=61,js=58,Ys=64,Gs=47;Object.freeze(ke);var Me=new Set([9,13,32]);Object.freeze(Me);var F=1,oe=2,ce=3,Hs=(l,r,c)=>{if(r=r|0,c=c|0,(c-r|0)===0)return!1;let u=l[r];for((u===S.PLUS_SIGN||u===S.HYPHEN_MINUS)&&(r=r+1|0);r<c;){let m=l[r];r=r+1|0;let T=S.DIGIT_ZERO<=m&&m<=S.DIGIT_NINE,x=S.DOT===m||S.COMMA===m;if(!(T||x&&r<c&&S.DIGIT_ZERO<=l[r]&&l[r]<=S.DIGIT_NINE))return!1}return!0},D=class{constructor(r=Us){this.options=r,this.numberMark=!1,this.position=0,this.array=new Uint8Array(D.LIMIT_ARRAY),this.target=0,this.length=0,this.indexA=0,this.indexB=0,this.events=new Map,this.emitter=new Pe.default,this.emitter.on("token",(c,E,u,m)=>{(this.events.get("token")||[]).forEach(x=>{x(c,E,u,m)})}),this.emitter.on("error",()=>{}),this.comment=!1,this.situation=F,this.quote=S.NULL,Object.seal(this)}on(r,c){if(D.SET_EVENTS.has(r)){let E=this.events.get(r)||[];E.push(c),this.events.set(r,E)}}feed(r){let c=r.length|0,E=0,u=0,m=c;for(;m>0;){let T=D.LIMIT_ARRAY-this.length|0,x=Math.min(T,m)|0;m=m-x|0,u=u+x|0,Ms(r,this.array,E,u,this.target),this.length=this.length+x|0,this.flush(),E=E+x|0}}done(){this.array[this.indexB]=S.SPACE,this.length=this.length+1,this.flush()}flush(){for(;this.indexB<this.length;)switch(this.situation){case F:{this.flushTopLevel();break}case oe:{this.flushQuotation();break}case ce:{this.flushComment();break}}let r=this.length-this.indexA|0;r>D.LIMIT_TOKEN||(r>0&&(this.array.copyWithin(0,this.indexA,this.indexB),this.indexA=0,this.indexB=r,this.target=r),this.length=r)}flushComment(){for(;this.indexB<this.length;){if((this.array[this.indexB]|0)===S.LINE_BREAK){this.drain("comment"),this.indexB=this.indexB+1|0,this.drain("token"),this.comment=!1,this.situation=F;break}this.indexB=this.indexB+1|0}this.comment===!0&&(this.length-this.indexA|0)>0&&this.drain("comment")}flushQuotation(){for(;this.indexB<this.length;){let r=this.indexB-this.indexA|0;if((this.array[this.indexB]|0)===this.quote){this.quote=S.NULL,r>0&&this.drain("token"),this.indexB=this.indexB+1|0,this.drain("token"),this.situation=F;return}this.indexB=this.indexB+1|0}}flushTopLevel(){let{options:r}=this,{tabSize:c}=r;for(;this.indexB<this.length;){let E=()=>{let O=0;this.numberMark&&(this.indexB=this.indexB-1|0),O=this.indexB-this.indexA|0,O>0&&this.drain("token"),this.numberMark&&(this.indexB=this.indexB+1|0),O=this.indexB-this.indexA|0,O>0&&this.drain("token"),this.numberMark=!1},u=this.array[this.indexB]|0;if(u===S.HASHTAG){E(),this.indexB=this.indexB+1|0,this.drain("token"),this.comment=!0,this.situation=ce;return}if(u===S.LINE_BREAK){E(),this.indexB=this.indexB+1|0,this.drain("token");continue}if(ke.has(u)){E(),this.indexB=this.indexB+1|0,this.drain("token"),this.quote=u,this.situation=oe;return}if(De.has(u)&&this.array[this.indexB+1]===Ce){E(),this.indexB=this.indexB+2|0,this.drain("token");continue}if(u===Ys&&this.array[this.indexB+1]===Gs){E(),this.indexB=this.indexB+2|0,this.drain("token");continue}if(u===js&&this.array[this.indexB+1]===Ce){E(),this.indexB=this.indexB+2|0,this.drain("token");continue}if(Me.has(u)){E(),u===S.HORIZONTAL_TAB?this.position=this.position+c|0:this.position=this.position+1|0,this.indexA=this.indexA+1|0,this.indexB=this.indexB+1|0;continue}if(this.numberMark=!1,ye.has(u)){let O=!Hs(this.array,this.indexA,this.indexB),C=!Be.has(u);if(O||C){E(),this.indexB=this.indexB+1|0,this.drain("token");continue}this.numberMark=!0}this.indexB=this.indexB+1|0}}drain(r){let{array:c,position:E}=this,u=this.indexB-this.indexA|0,m=this.indexA;this.emitter.emit(r,E,c,m,u),this.position=this.position+u|0,this.indexA=this.indexB|0}close(){}},P=D;Y(P,"LIMIT_TOKEN",1e3),Y(P,"LIMIT_ARRAY",D.LIMIT_TOKEN*2|0),Y(P,"SET_EVENTS",new Set(["comment","error","token"])),Y(P,"SET_SITUATIONS",new Set([F,oe,ce]));Object.values(P).forEach(Object.freeze);Object.freeze(P);Object.freeze(Object.getPrototypeOf(P));var nn=P;export{nn as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
