var Ol=Object.create;var co=Object.defineProperty;var Al=Object.getOwnPropertyDescriptor;var Tl=Object.getOwnPropertyNames;var Nl=Object.getPrototypeOf,Il=Object.prototype.hasOwnProperty;var ys=(L,k)=>()=>(k||L((k={exports:{}}).exports,k),k.exports);var dl=(L,k,v,K)=>{if(k&&typeof k=="object"||typeof k=="function")for(let H of Tl(k))!Il.call(L,H)&&H!==v&&co(L,H,{get:()=>k[H],enumerable:!(K=Al(k,H))||K.enumerable});return L};var ro=(L,k,v)=>(v=L!=null?Ol(Nl(L)):{},dl(k||!L||!L.__esModule?co(v,"default",{value:L,enumerable:!0}):v,L));var lo=ys((ao,uo)=>{(function(L){var k=Object.hasOwnProperty,v=Array.isArray?Array.isArray:function(m){return Object.prototype.toString.call(m)==="[object Array]"},K=10,H=typeof process=="object"&&typeof process.nextTick=="function",x=typeof Symbol=="function",oe=typeof Reflect=="object",re=typeof setImmediate=="function",Ae=re?setImmediate:setTimeout,ce=x?oe&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(i){var m=Object.getOwnPropertyNames(i);return m.push.apply(m,Object.getOwnPropertySymbols(i)),m}:Object.keys;function fe(){this._events={},this._conf&&he.call(this,this._conf)}function he(i){i&&(this._conf=i,i.delimiter&&(this.delimiter=i.delimiter),i.maxListeners!==L&&(this._maxListeners=i.maxListeners),i.wildcard&&(this.wildcard=i.wildcard),i.newListener&&(this._newListener=i.newListener),i.removeListener&&(this._removeListener=i.removeListener),i.verboseMemoryLeak&&(this.verboseMemoryLeak=i.verboseMemoryLeak),i.ignoreErrors&&(this.ignoreErrors=i.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function Ye(i,m){var S="(node) warning: possible EventEmitter memory leak detected. "+i+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(S+=" Event name: "+m+"."),typeof process<"u"&&process.emitWarning){var l=new Error(S);l.name="MaxListenersExceededWarning",l.emitter=this,l.count=i,process.emitWarning(l)}else console.error(S),console.trace&&console.trace()}var De=function(i,m,S){var l=arguments.length;switch(l){case 0:return[];case 1:return[i];case 2:return[i,m];case 3:return[i,m,S];default:for(var h=new Array(l);l--;)h[l]=arguments[l];return h}};function Nt(i,m){for(var S={},l,h=i.length,C=m?m.length:0,j=0;j<h;j++)l=i[j],S[l]=j<C?m[j]:L;return S}function qe(i,m,S){this._emitter=i,this._target=m,this._listeners={},this._listenersCount=0;var l,h;if((S.on||S.off)&&(l=S.on,h=S.off),m.addEventListener?(l=m.addEventListener,h=m.removeEventListener):m.addListener?(l=m.addListener,h=m.removeListener):m.on&&(l=m.on,h=m.off),!l&&!h)throw Error("target does not implement any known event API");if(typeof l!="function")throw TypeError("on method must be a function");if(typeof h!="function")throw TypeError("off method must be a function");this._on=l,this._off=h;var C=i._observers;C?C.push(this):i._observers=[this]}Object.assign(qe.prototype,{subscribe:function(i,m,S){var l=this,h=this._target,C=this._emitter,j=this._listeners,Y=function(){var F=De.apply(null,arguments),I={data:F,name:m,original:i};if(S){var c=S.call(h,I);c!==!1&&C.emit.apply(C,[I.name].concat(F));return}C.emit.apply(C,[m].concat(F))};if(j[i])throw Error("Event '"+i+"' is already listening");this._listenersCount++,C._newListener&&C._removeListener&&!l._onNewListener?(this._onNewListener=function(F){F===m&&j[i]===null&&(j[i]=Y,l._on.call(h,i,Y))},C.on("newListener",this._onNewListener),this._onRemoveListener=function(F){F===m&&!C.hasListeners(F)&&j[i]&&(j[i]=null,l._off.call(h,i,Y))},j[i]=null,C.on("removeListener",this._onRemoveListener)):(j[i]=Y,l._on.call(h,i,Y))},unsubscribe:function(i){var m=this,S=this._listeners,l=this._emitter,h,C,j=this._off,Y=this._target,F;if(i&&typeof i!="string")throw TypeError("event must be a string");function I(){m._onNewListener&&(l.off("newListener",m._onNewListener),l.off("removeListener",m._onRemoveListener),m._onNewListener=null,m._onRemoveListener=null);var c=M.call(l,m);l._observers.splice(c,1)}if(i){if(h=S[i],!h)return;j.call(Y,i,h),delete S[i],--this._listenersCount||I()}else{for(C=ce(S),F=C.length;F-- >0;)i=C[F],j.call(Y,i,S[i]);this._listeners={},this._listenersCount=0,I()}}});function Ee(i,m,S,l){var h=Object.assign({},m);if(!i)return h;if(typeof i!="object")throw TypeError("options must be an object");var C=Object.keys(i),j=C.length,Y,F,I;function c(le){throw Error('Invalid "'+Y+'" option value'+(le?". Reason: "+le:""))}for(var r=0;r<j;r++){if(Y=C[r],!l&&!k.call(m,Y))throw Error('Unknown "'+Y+'" option');F=i[Y],F!==L&&(I=S[Y],h[Y]=I?I(F,c):F)}return h}function Te(i,m){return(typeof i!="function"||!i.hasOwnProperty("prototype"))&&m("value must be a constructor"),i}function rt(i){var m="value must be type of "+i.join("|"),S=i.length,l=i[0],h=i[1];return S===1?function(C,j){if(typeof C===l)return C;j(m)}:S===2?function(C,j){var Y=typeof C;if(Y===l||Y===h)return C;j(m)}:function(C,j){for(var Y=typeof C,F=S;F-- >0;)if(Y===i[F])return C;j(m)}}var Xe=rt(["function"]),It=rt(["object","function"]);function at(i,m,S){var l,h,C=0,j,Y=new i(function(F,I,c){S=Ee(S,{timeout:0,overload:!1},{timeout:function(ae,A){return ae*=1,(typeof ae!="number"||ae<0||!Number.isFinite(ae))&&A("timeout must be a positive number"),ae}}),l=!S.overload&&typeof i.prototype.cancel=="function"&&typeof c=="function";function r(){h&&(h=null),C&&(clearTimeout(C),C=0)}var le=function(ae){r(),F(ae)},ie=function(ae){r(),I(ae)};l?m(le,ie,c):(h=[function(ae){ie(ae||Error("canceled"))}],m(le,ie,function(ae){if(j)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ae!="function")throw TypeError("onCancel callback must be a function");h.push(ae)}),j=!0),S.timeout>0&&(C=setTimeout(function(){var ae=Error("timeout");ae.code="ETIMEDOUT",C=0,Y.cancel(ae),I(ae)},S.timeout))});return l||(Y.cancel=function(F){if(h){for(var I=h.length,c=1;c<I;c++)h[c](F);h[0](F),h=null}}),Y}function M(i){var m=this._observers;if(!m)return-1;for(var S=m.length,l=0;l<S;l++)if(m[l]._target===i)return l;return-1}function U(i,m,S,l,h){if(!S)return null;if(l===0){var C=typeof m;if(C==="string"){var j,Y,F=0,I=0,c=this.delimiter,r=c.length;if((Y=m.indexOf(c))!==-1){j=new Array(5);do j[F++]=m.slice(I,Y),I=Y+r;while((Y=m.indexOf(c,I))!==-1);j[F++]=m.slice(I),m=j,h=F}else m=[m],h=1}else C==="object"?h=m.length:(m=[m],h=1)}var le=null,ie,ae,A,N,_e,ut=m[l],b=m[l+1],p,Oe;if(l===h)S._listeners&&(typeof S._listeners=="function"?(i&&i.push(S._listeners),le=[S]):(i&&i.push.apply(i,S._listeners),le=[S]));else if(ut==="*"){for(p=ce(S),Y=p.length;Y-- >0;)ie=p[Y],ie!=="_listeners"&&(Oe=U(i,m,S[ie],l+1,h),Oe&&(le?le.push.apply(le,Oe):le=Oe));return le}else if(ut==="**"){for(_e=l+1===h||l+2===h&&b==="*",_e&&S._listeners&&(le=U(i,m,S,h,h)),p=ce(S),Y=p.length;Y-- >0;)ie=p[Y],ie!=="_listeners"&&(ie==="*"||ie==="**"?(S[ie]._listeners&&!_e&&(Oe=U(i,m,S[ie],h,h),Oe&&(le?le.push.apply(le,Oe):le=Oe)),Oe=U(i,m,S[ie],l,h)):ie===b?Oe=U(i,m,S[ie],l+2,h):Oe=U(i,m,S[ie],l,h),Oe&&(le?le.push.apply(le,Oe):le=Oe));return le}else S[ut]&&(le=U(i,m,S[ut],l+1,h));if(ae=S["*"],ae&&U(i,m,ae,l+1,h),A=S["**"],A)if(l<h)for(A._listeners&&U(i,m,A,h,h),p=ce(A),Y=p.length;Y-- >0;)ie=p[Y],ie!=="_listeners"&&(ie===b?U(i,m,A[ie],l+2,h):ie===ut?U(i,m,A[ie],l+1,h):(N={},N[ie]=A[ie],U(i,m,{"**":N},l+1,h)));else A._listeners?U(i,m,A,h,h):A["*"]&&A["*"]._listeners&&U(i,m,A["*"],h,h);return le}function B(i,m,S){var l=0,h=0,C,j=this.delimiter,Y=j.length,F;if(typeof i=="string")if((C=i.indexOf(j))!==-1){F=new Array(5);do F[l++]=i.slice(h,C),h=C+Y;while((C=i.indexOf(j,h))!==-1);F[l++]=i.slice(h)}else F=[i],l=1;else F=i,l=i.length;if(l>1){for(C=0;C+1<l;C++)if(F[C]==="**"&&F[C+1]==="**")return}var I=this.listenerTree,c;for(C=0;C<l;C++)if(c=F[C],I=I[c]||(I[c]={}),C===l-1)return I._listeners?(typeof I._listeners=="function"&&(I._listeners=[I._listeners]),S?I._listeners.unshift(m):I._listeners.push(m),!I._listeners.warned&&this._maxListeners>0&&I._listeners.length>this._maxListeners&&(I._listeners.warned=!0,Ye.call(this,I._listeners.length,c))):I._listeners=m,!0;return!0}function $(i,m,S,l){for(var h=ce(i),C=h.length,j,Y,F,I=i._listeners,c;C-- >0;)Y=h[C],j=i[Y],Y==="_listeners"?F=S:F=S?S.concat(Y):[Y],c=l||typeof Y=="symbol",I&&m.push(c?F:F.join(this.delimiter)),typeof j=="object"&&$.call(this,j,m,F,c);return m}function X(i){for(var m=ce(i),S=m.length,l,h,C;S-- >0;)h=m[S],l=i[h],l&&(C=!0,h!=="_listeners"&&!X(l)&&delete i[h]);return C}function se(i,m,S){this.emitter=i,this.event=m,this.listener=S}se.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function te(i,m,S){if(S===!0)h=!0;else if(S===!1)l=!0;else{if(!S||typeof S!="object")throw TypeError("options should be an object or true");var l=S.async,h=S.promisify,C=S.nextTick,j=S.objectify}if(l||C||h){var Y=m,F=m._origin||m;if(C&&!H)throw Error("process.nextTick is not supported");h===L&&(h=m.constructor.name==="AsyncFunction"),m=function(){var I=arguments,c=this,r=this.event;return h?C?Promise.resolve():new Promise(function(le){Ae(le)}).then(function(){return c.event=r,Y.apply(c,I)}):(C?process.nextTick:Ae)(function(){c.event=r,Y.apply(c,I)})},m._async=!0,m._origin=F}return[m,j?new se(this,i,m):this]}function Z(i){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,he.call(this,i)}Z.EventEmitter2=Z,Z.prototype.listenTo=function(i,m,S){if(typeof i!="object")throw TypeError("target musts be an object");var l=this;S=Ee(S,{on:L,off:L,reducers:L},{on:Xe,off:Xe,reducers:It});function h(C){if(typeof C!="object")throw TypeError("events must be an object");var j=S.reducers,Y=M.call(l,i),F;Y===-1?F=new qe(l,i,S):F=l._observers[Y];for(var I=ce(C),c=I.length,r,le=typeof j=="function",ie=0;ie<c;ie++)r=I[ie],F.subscribe(r,C[r]||r,le?j:j&&j[r])}return v(m)?h(Nt(m)):h(typeof m=="string"?Nt(m.split(/\s+/)):m),this},Z.prototype.stopListeningTo=function(i,m){var S=this._observers;if(!S)return!1;var l=S.length,h,C=!1;if(i&&typeof i!="object")throw TypeError("target should be an object");for(;l-- >0;)h=S[l],(!i||h._target===i)&&(h.unsubscribe(m),C=!0);return C},Z.prototype.delimiter=".",Z.prototype.setMaxListeners=function(i){i!==L&&(this._maxListeners=i,this._conf||(this._conf={}),this._conf.maxListeners=i)},Z.prototype.getMaxListeners=function(){return this._maxListeners},Z.prototype.event="",Z.prototype.once=function(i,m,S){return this._once(i,m,!1,S)},Z.prototype.prependOnceListener=function(i,m,S){return this._once(i,m,!0,S)},Z.prototype._once=function(i,m,S,l){return this._many(i,1,m,S,l)},Z.prototype.many=function(i,m,S,l){return this._many(i,m,S,!1,l)},Z.prototype.prependMany=function(i,m,S,l){return this._many(i,m,S,!0,l)},Z.prototype._many=function(i,m,S,l,h){var C=this;if(typeof S!="function")throw new Error("many only accepts instances of Function");function j(){return--m===0&&C.off(i,j),S.apply(this,arguments)}return j._origin=S,this._on(i,j,l,h)},Z.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var i=arguments[0],m,S=this.wildcard,l,h,C,j,Y;if(i==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(S&&(m=i,i!=="newListener"&&i!=="removeListener"&&typeof i=="object")){if(h=i.length,x){for(C=0;C<h;C++)if(typeof i[C]=="symbol"){Y=!0;break}}Y||(i=i.join(this.delimiter))}var F=arguments.length,I;if(this._all&&this._all.length)for(I=this._all.slice(),C=0,h=I.length;C<h;C++)switch(this.event=i,F){case 1:I[C].call(this,i);break;case 2:I[C].call(this,i,arguments[1]);break;case 3:I[C].call(this,i,arguments[1],arguments[2]);break;default:I[C].apply(this,arguments)}if(S)I=[],U.call(this,I,m,this.listenerTree,0,h);else if(I=this._events[i],typeof I=="function"){switch(this.event=i,F){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(l=new Array(F-1),j=1;j<F;j++)l[j-1]=arguments[j];I.apply(this,l)}return!0}else I&&(I=I.slice());if(I&&I.length){if(F>3)for(l=new Array(F-1),j=1;j<F;j++)l[j-1]=arguments[j];for(C=0,h=I.length;C<h;C++)switch(this.event=i,F){case 1:I[C].call(this);break;case 2:I[C].call(this,arguments[1]);break;case 3:I[C].call(this,arguments[1],arguments[2]);break;default:I[C].apply(this,l)}return!0}else if(!this.ignoreErrors&&!this._all&&i==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},Z.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var i=arguments[0],m=this.wildcard,S,l,h,C,j,Y;if(i==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(m&&(S=i,i!=="newListener"&&i!=="removeListener"&&typeof i=="object")){if(C=i.length,x){for(j=0;j<C;j++)if(typeof i[j]=="symbol"){l=!0;break}}l||(i=i.join(this.delimiter))}var F=[],I=arguments.length,c;if(this._all)for(j=0,C=this._all.length;j<C;j++)switch(this.event=i,I){case 1:F.push(this._all[j].call(this,i));break;case 2:F.push(this._all[j].call(this,i,arguments[1]));break;case 3:F.push(this._all[j].call(this,i,arguments[1],arguments[2]));break;default:F.push(this._all[j].apply(this,arguments))}if(m?(c=[],U.call(this,c,S,this.listenerTree,0)):c=this._events[i],typeof c=="function")switch(this.event=i,I){case 1:F.push(c.call(this));break;case 2:F.push(c.call(this,arguments[1]));break;case 3:F.push(c.call(this,arguments[1],arguments[2]));break;default:for(h=new Array(I-1),Y=1;Y<I;Y++)h[Y-1]=arguments[Y];F.push(c.apply(this,h))}else if(c&&c.length){if(c=c.slice(),I>3)for(h=new Array(I-1),Y=1;Y<I;Y++)h[Y-1]=arguments[Y];for(j=0,C=c.length;j<C;j++)switch(this.event=i,I){case 1:F.push(c[j].call(this));break;case 2:F.push(c[j].call(this,arguments[1]));break;case 3:F.push(c[j].call(this,arguments[1],arguments[2]));break;default:F.push(c[j].apply(this,h))}}else if(!this.ignoreErrors&&!this._all&&i==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(F)},Z.prototype.on=function(i,m,S){return this._on(i,m,!1,S)},Z.prototype.prependListener=function(i,m,S){return this._on(i,m,!0,S)},Z.prototype.onAny=function(i){return this._onAny(i,!1)},Z.prototype.prependAny=function(i){return this._onAny(i,!0)},Z.prototype.addListener=Z.prototype.on,Z.prototype._onAny=function(i,m){if(typeof i!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),m?this._all.unshift(i):this._all.push(i),this},Z.prototype._on=function(i,m,S,l){if(typeof i=="function")return this._onAny(i,m),this;if(typeof m!="function")throw new Error("on only accepts instances of Function");this._events||fe.call(this);var h=this,C;return l!==L&&(C=te.call(this,i,m,l),m=C[0],h=C[1]),this._newListener&&this.emit("newListener",i,m),this.wildcard?(B.call(this,i,m,S),h):(this._events[i]?(typeof this._events[i]=="function"&&(this._events[i]=[this._events[i]]),S?this._events[i].unshift(m):this._events[i].push(m),!this._events[i].warned&&this._maxListeners>0&&this._events[i].length>this._maxListeners&&(this._events[i].warned=!0,Ye.call(this,this._events[i].length,i))):this._events[i]=m,h)},Z.prototype.off=function(i,m){if(typeof m!="function")throw new Error("removeListener only takes instances of Function");var S,l=[];if(this.wildcard){var h=typeof i=="string"?i.split(this.delimiter):i.slice();if(l=U.call(this,null,h,this.listenerTree,0),!l)return this}else{if(!this._events[i])return this;S=this._events[i],l.push({_listeners:S})}for(var C=0;C<l.length;C++){var j=l[C];if(S=j._listeners,v(S)){for(var Y=-1,F=0,I=S.length;F<I;F++)if(S[F]===m||S[F].listener&&S[F].listener===m||S[F]._origin&&S[F]._origin===m){Y=F;break}if(Y<0)continue;return this.wildcard?j._listeners.splice(Y,1):this._events[i].splice(Y,1),S.length===0&&(this.wildcard?delete j._listeners:delete this._events[i]),this._removeListener&&this.emit("removeListener",i,m),this}else(S===m||S.listener&&S.listener===m||S._origin&&S._origin===m)&&(this.wildcard?delete j._listeners:delete this._events[i],this._removeListener&&this.emit("removeListener",i,m))}return this.listenerTree&&X(this.listenerTree),this},Z.prototype.offAny=function(i){var m=0,S=0,l;if(i&&this._all&&this._all.length>0){for(l=this._all,m=0,S=l.length;m<S;m++)if(i===l[m])return l.splice(m,1),this._removeListener&&this.emit("removeListenerAny",i),this}else{if(l=this._all,this._removeListener)for(m=0,S=l.length;m<S;m++)this.emit("removeListenerAny",l[m]);this._all=[]}return this},Z.prototype.removeListener=Z.prototype.off,Z.prototype.removeAllListeners=function(i){if(i===L)return!this._events||fe.call(this),this;if(this.wildcard){var m=U.call(this,null,i,this.listenerTree,0),S,l;if(!m)return this;for(l=0;l<m.length;l++)S=m[l],S._listeners=null;this.listenerTree&&X(this.listenerTree)}else this._events&&(this._events[i]=null);return this},Z.prototype.listeners=function(i){var m=this._events,S,l,h,C,j;if(i===L){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!m)return[];for(S=ce(m),C=S.length,h=[];C-- >0;)l=m[S[C]],typeof l=="function"?h.push(l):h.push.apply(h,l);return h}else{if(this.wildcard){if(j=this.listenerTree,!j)return[];var Y=[],F=typeof i=="string"?i.split(this.delimiter):i.slice();return U.call(this,Y,F,j,0),Y}return m?(l=m[i],l?typeof l=="function"?[l]:l:[]):[]}},Z.prototype.eventNames=function(i){var m=this._events;return this.wildcard?$.call(this,this.listenerTree,[],null,i):m?ce(m):[]},Z.prototype.listenerCount=function(i){return this.listeners(i).length},Z.prototype.hasListeners=function(i){if(this.wildcard){var m=[],S=typeof i=="string"?i.split(this.delimiter):i.slice();return U.call(this,m,S,this.listenerTree,0),m.length>0}var l=this._events,h=this._all;return!!(h&&h.length||l&&(i===L?ce(l).length:l[i]))},Z.prototype.listenersAny=function(){return this._all?this._all:[]},Z.prototype.waitFor=function(i,m){var S=this,l=typeof m;return l==="number"?m={timeout:m}:l==="function"&&(m={filter:m}),m=Ee(m,{timeout:0,filter:L,handleError:!1,Promise,overload:!1},{filter:Xe,Promise:Te}),at(m.Promise,function(h,C,j){function Y(){var F=m.filter;if(!(F&&!F.apply(S,arguments)))if(S.off(i,Y),m.handleError){var I=arguments[0];I?C(I):h(De.apply(null,arguments).slice(1))}else h(De.apply(null,arguments))}j(function(){S.off(i,Y)}),S._on(i,Y,!1)},{timeout:m.timeout,overload:m.overload})};function Le(i,m,S){S=Ee(S,{Promise,timeout:0,overload:!1},{Promise:Te});var l=S.Promise;return at(l,function(h,C,j){var Y;if(typeof i.addEventListener=="function"){Y=function(){h(De.apply(null,arguments))},j(function(){i.removeEventListener(m,Y)}),i.addEventListener(m,Y,{once:!0});return}var F=function(){I&&i.removeListener("error",I),h(De.apply(null,arguments))},I;m!=="error"&&(I=function(c){i.removeListener(m,F),C(c)},i.once("error",I)),j(function(){I&&i.removeListener("error",I),i.removeListener(m,F)}),i.once(m,F)},{timeout:S.timeout,overload:S.overload})}var Je=Z.prototype;if(Object.defineProperties(Z,{defaultMaxListeners:{get:function(){return Je._maxListeners},set:function(i){if(typeof i!="number"||i<0||Number.isNaN(i))throw TypeError("n must be a non-negative number");Je._maxListeners=i},enumerable:!0},once:{value:Le,writable:!0,configurable:!0}}),Object.defineProperties(Je,{_maxListeners:{value:K,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return Z});else if(typeof ao=="object")uo.exports=Z;else{var pe=new Function("","return this")();pe.EventEmitter2=Z}})()});var fo=ys((RE,io)=>{io.exports=lo()});var _o=ys((js,Eo)=>{(function(L,k){var v=k(L);if(typeof define=="function"&&define.amd)define("DeepDiff",function(){return v});else if(typeof js=="object"||typeof navigator=="object"&&navigator.product.match(/ReactNative/i))Eo.exports=v;else{var K=L.DeepDiff;v.noConflict=function(){return L.DeepDiff===v&&(L.DeepDiff=K),v},L.DeepDiff=v}})(js,function(L){var k=["N","E","A","D"];function v(M,U){M.super_=U,M.prototype=Object.create(U.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}})}function K(M,U){Object.defineProperty(this,"kind",{value:M,enumerable:!0}),U&&U.length&&Object.defineProperty(this,"path",{value:U,enumerable:!0})}function H(M,U,B){H.super_.call(this,"E",M),Object.defineProperty(this,"lhs",{value:U,enumerable:!0}),Object.defineProperty(this,"rhs",{value:B,enumerable:!0})}v(H,K);function x(M,U){x.super_.call(this,"N",M),Object.defineProperty(this,"rhs",{value:U,enumerable:!0})}v(x,K);function oe(M,U){oe.super_.call(this,"D",M),Object.defineProperty(this,"lhs",{value:U,enumerable:!0})}v(oe,K);function re(M,U,B){re.super_.call(this,"A",M),Object.defineProperty(this,"index",{value:U,enumerable:!0}),Object.defineProperty(this,"item",{value:B,enumerable:!0})}v(re,K);function Ae(M,U,B){var $=M.slice((B||U)+1||M.length);return M.length=U<0?M.length+U:U,M.push.apply(M,$),M}function ce(M){var U=typeof M;return U!=="object"?U:M===Math?"math":M===null?"null":Array.isArray(M)?"array":Object.prototype.toString.call(M)==="[object Date]"?"date":typeof M.toString=="function"&&/^\/.*\//.test(M.toString())?"regexp":"object"}function fe(M){var U=0;if(M.length===0)return U;for(var B=0;B<M.length;B++){var $=M.charCodeAt(B);U=(U<<5)-U+$,U=U&U}return U}function he(M){var U=0,B=ce(M);if(B==="array"){M.forEach(function(Z){U+=he(Z)});var $="[type: array, hash: "+U+"]";return U+fe($)}if(B==="object"){for(var X in M)if(M.hasOwnProperty(X)){var se="[ type: object, key: "+X+", value hash: "+he(M[X])+"]";U+=fe(se)}return U}var te="[ type: "+B+" ; value: "+M+"]";return U+fe(te)}function Ye(M,U,B,$,X,se,te,Z){B=B||[],X=X||[],te=te||[];var Le=X.slice(0);if(typeof se<"u"&&se!==null){if($){if(typeof $=="function"&&$(Le,se))return;if(typeof $=="object"){if($.prefilter&&$.prefilter(Le,se))return;if($.normalize){var Je=$.normalize(Le,se,M,U);Je&&(M=Je[0],U=Je[1])}}}Le.push(se)}ce(M)==="regexp"&&ce(U)==="regexp"&&(M=M.toString(),U=U.toString());var pe=typeof M,i=typeof U,m,S,l,h,C=pe!=="undefined"||te&&te.length>0&&te[te.length-1].lhs&&Object.getOwnPropertyDescriptor(te[te.length-1].lhs,se),j=i!=="undefined"||te&&te.length>0&&te[te.length-1].rhs&&Object.getOwnPropertyDescriptor(te[te.length-1].rhs,se);if(!C&&j)B.push(new x(Le,U));else if(!j&&C)B.push(new oe(Le,M));else if(ce(M)!==ce(U))B.push(new H(Le,M,U));else if(ce(M)==="date"&&M-U!==0)B.push(new H(Le,M,U));else if(pe==="object"&&M!==null&&U!==null){for(m=te.length-1;m>-1;--m)if(te[m].lhs===M){h=!0;break}if(h)M!==U&&B.push(new H(Le,M,U));else{if(te.push({lhs:M,rhs:U}),Array.isArray(M)){for(Z&&(M.sort(function(I,c){return he(I)-he(c)}),U.sort(function(I,c){return he(I)-he(c)})),m=U.length-1,S=M.length-1;m>S;)B.push(new re(Le,m,new x(void 0,U[m--])));for(;S>m;)B.push(new re(Le,S,new oe(void 0,M[S--])));for(;m>=0;--m)Ye(M[m],U[m],B,$,Le,m,te,Z)}else{var Y=Object.keys(M),F=Object.keys(U);for(m=0;m<Y.length;++m)l=Y[m],h=F.indexOf(l),h>=0?(Ye(M[l],U[l],B,$,Le,l,te,Z),F[h]=null):Ye(M[l],void 0,B,$,Le,l,te,Z);for(m=0;m<F.length;++m)l=F[m],l&&Ye(void 0,U[l],B,$,Le,l,te,Z)}te.length=te.length-1}}else M!==U&&(pe==="number"&&isNaN(M)&&isNaN(U)||B.push(new H(Le,M,U)))}function De(M,U,B,$,X){var se=[];if(Ye(M,U,se,$,null,null,null,X),B)for(var te=0;te<se.length;++te)B(se[te]);return se}function Nt(M,U,B,$,X,se,te){return Ye(M,U,B,$,X,se,te,!0)}function qe(M,U,B,$){var X=$?function(te){te&&$.push(te)}:void 0,se=De(M,U,X,B);return $||(se.length?se:void 0)}function Ee(M,U,B,$){var X=$?function(te){te&&$.push(te)}:void 0,se=De(M,U,X,B,!0);return $||(se.length?se:void 0)}function Te(M,U,B){if(B.path&&B.path.length){var $=M[U],X,se=B.path.length-1;for(X=0;X<se;X++)$=$[B.path[X]];switch(B.kind){case"A":Te($[B.path[X]],B.index,B.item);break;case"D":delete $[B.path[X]];break;case"E":case"N":$[B.path[X]]=B.rhs;break}}else switch(B.kind){case"A":Te(M[U],B.index,B.item);break;case"D":M=Ae(M,U);break;case"E":case"N":M[U]=B.rhs;break}return M}function rt(M,U,B){if(typeof B>"u"&&U&&~k.indexOf(U.kind)&&(B=U),M&&B&&B.kind){for(var $=M,X=-1,se=B.path?B.path.length-1:0;++X<se;)typeof $[B.path[X]]>"u"&&($[B.path[X]]=typeof B.path[X+1]<"u"&&typeof B.path[X+1]=="number"?[]:{}),$=$[B.path[X]];switch(B.kind){case"A":B.path&&typeof $[B.path[X]]>"u"&&($[B.path[X]]=[]),Te(B.path?$[B.path[X]]:$,B.index,B.item);break;case"D":delete $[B.path[X]];break;case"E":case"N":$[B.path[X]]=B.rhs;break}}}function Xe(M,U,B){if(B.path&&B.path.length){var $=M[U],X,se=B.path.length-1;for(X=0;X<se;X++)$=$[B.path[X]];switch(B.kind){case"A":Xe($[B.path[X]],B.index,B.item);break;case"D":$[B.path[X]]=B.lhs;break;case"E":$[B.path[X]]=B.lhs;break;case"N":delete $[B.path[X]];break}}else switch(B.kind){case"A":Xe(M[U],B.index,B.item);break;case"D":M[U]=B.lhs;break;case"E":M[U]=B.lhs;break;case"N":M=Ae(M,U);break}return M}function It(M,U,B){if(M&&U&&B&&B.kind){var $=M,X,se;for(se=B.path.length-1,X=0;X<se;X++)typeof $[B.path[X]]>"u"&&($[B.path[X]]={}),$=$[B.path[X]];switch(B.kind){case"A":Xe($[B.path[X]],B.index,B.item);break;case"D":$[B.path[X]]=B.lhs;break;case"E":$[B.path[X]]=B.lhs;break;case"N":delete $[B.path[X]];break}}}function at(M,U,B){if(M&&U){var $=function(X){(!B||B(M,U,X))&&rt(M,U,X)};De(M,U,$)}}return Object.defineProperties(qe,{diff:{value:qe,enumerable:!0},orderIndependentDiff:{value:Ee,enumerable:!0},observableDiff:{value:De,enumerable:!0},orderIndependentObservableDiff:{value:Nt,enumerable:!0},orderIndepHash:{value:he,enumerable:!0},applyDiff:{value:at,enumerable:!0},applyChange:{value:rt,enumerable:!0},revertChange:{value:It,enumerable:!0},isConflict:{value:function(){return typeof $conflict<"u"},enumerable:!0}}),qe.DeepDiff=qe,L&&(L.DeepDiff=qe),qe})});var Pu=ro(fo(),1),ku=ro(_o(),1);var Sl="as",hl="=",Pl="break",kl="else",Ll="enum",Rl="export",Cl="if",vl="import",Ul="->",Bl="is",Dl="loop",Ml="mut",yl="native",jl="object",Fl="fn",wl="return",Yl="self",Gl="template",Vl=Object.freeze({ALIAS:Sl,ASSIGN:hl,BREAK:Pl,ELSE:kl,ENUMERATION:Ll,EXPORT:Rl,IF:Cl,IMPORT:vl,INTO:Ul,IS:Bl,LOOP:Dl,MUTABLE:Ml,NATIVE:yl,OBJECT:jl,PROCEDURE:Fl,RETURN:wl,SELF:Yl,TEMPLATE:Gl}),mo=Vl;var gl="assign",Kl="array_assignment",Hl="branch-match",$l="branch-default",zl="condition",Xl="loop",Jl="data",Wl="generics",Zl="enumeration",Ql="expression",ql="instance",xl="Link",ei="local",ti="object",si="procedure",ni="return",oi="select",ci="member",ri="store",ai="break",ui="literal",li="array_access",ii="valueLink",fi="linkValue",Ei="self",_i="procedure-call",mi="Maybe",pi="native",bi="move",Oi="String",Ai="Array",Ti="import",Ni="library",Ii="constructor",di="destructor",Si="free",hi="block-end",Pi="default-block",ki="continue",Li="branch",Ri="statement",Ci="draw",vi="size",Ui="concatenation",Bi="foreach",Di="while",Mi="while-condition",yi="foreach-condition",ji="foreach-end",Fi=Object.freeze({TYPES_ASSIGN:gl,TYPES_ARRAY:Ai,TYPES_ARRAY_ASSIGNMENT:Kl,TYPES_BRANCH_MATCH:Hl,TYPES_BRANCH_DEFAULT:$l,TYPES_CONDITION:zl,TYPES_LOOP:Xl,TYPES_FOREACH_END:ji,TYPES_WHILE_CONDITION:Mi,TYPES_FOREACH_CONDITION:yi,TYPES_DATA:Jl,TYPES_GENERICS:Wl,TYPES_ENUMERATION:Zl,TYPES_EXPRESSION:Ql,TYPES_INSTANCE:ql,TYPES_LINK:xl,TYPES_IMPORT:Ti,TYPES_LOCAL:ei,TYPES_OBJECT:ti,TYPES_PROCEDURE:si,TYPES_RETURN:ni,TYPES_SELECT:oi,TYPES_MEMBER:ci,TYPES_STORE:ri,TYPES_BREAK:ai,TYPES_LITERAL:ui,TYPES_ARRAY_ACCESS:li,TYPES_LINK_TO:ii,TYPES_VALUE_AT:fi,TYPES_SELF:Ei,TYPES_LIBRARY:Ni,TYPES_DROP:_i,TYPES_MAYBE:mi,TYPES_NATIVE:pi,TYPES_MOVE:bi,TYPES_STRING:Oi,TYPES_CONSTRUCTOR:Ii,TYPES_FREE:Si,TYPES_DEFAULT_BLOCK:Pi,TYPES_BLOCK_END:hi,TYPES_CONTINUE:ki,TYPES_BRANCH:Li,TYPES_STATEMENT:Ri,TYPES_DESTRUCTOR:di,TYPES_DRAW:Ci,TYPES_SIZE:vi,TYPES_CONCAT:Ui,TYPES_FOREACH:Bi,TYPES_WHILE:Di}),Fs=Fi;var wi=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),po=wi;var Yi=Object.freeze([]),Gi=Object.freeze({}),et="",Vi="	",gi=`
`,Ki="UTF-8",bo=Fs,Hi=Object.freeze({EMPTY_ARRAY:Yi,EMPTY_OBJECT:Gi,EMPTY_STRING:et,HORIZONTAL_TAB:Vi,LINE_BREAK:gi,UNICODE_TEXT:Ki,Codes:po,Keys:mo,Types:Fs}),Oo=Hi;function O(L,k=[],v=""){let K=k.map((x,oe)=>({name:`operand${oe+1}`,data:{type:"data",name:x,path:"Flogram"}})),H={type:"native",name:L,path:"Flogram",description:{inputs:K,outputs:v&&k.length<=0?null:[{name:"result",data:{type:"data",name:v||(k.length>0?k[0]:""),path:"Flogram"}}]}};return Object.freeze(H)}var $i=Object.freeze({"+":[O("+",["FP64","FP64"]),O("+",["U64","U64"]),O("+",["I64","I64"]),O("+",["FP32","FP32"]),O("+",["U32","U32"]),O("+",["I32","I32"]),O("+",["U16","U16"]),O("+",["I16","I16"]),O("+",["U8","U8"]),O("+",["I8","I8"]),O("+",["any","any"])],"-":[O("-",["FP64","FP64"]),O("-",["U64","U64"]),O("-",["I64","I64"]),O("-",["FP32","FP32"]),O("-",["U32","U32"]),O("-",["I32","I32"]),O("-",["U16","U16"]),O("-",["I16","I16"]),O("-",["U8","U8"]),O("-",["I8","I8"]),O("-",["any","any"]),O("-",["FP64"]),O("-",["I64"]),O("-",["FP32"]),O("-",["I32"]),O("-",["I16"]),O("-",["I8"]),O("-",["any"])],"*":[O("*",["FP64","FP64"]),O("*",["U64","U64"]),O("*",["I64","I64"]),O("*",["FP32","FP32"]),O("*",["U32","U32"]),O("*",["I32","I32"]),O("*",["U16","U16"]),O("*",["I16","I16"]),O("*",["U8","U8"]),O("*",["I8","I8"]),O("*",["any","any"])],"/":[O("/",["FP64","FP64"]),O("/",["U64","U64"]),O("/",["I64","I64"]),O("/",["FP32","FP32"]),O("/",["U32","U32"]),O("/",["I32","I32"]),O("/",["U16","U16"]),O("/",["I16","I16"]),O("/",["U8","U8"]),O("/",["I8","I8"]),O("/",["any","any"])],"%":[O("%",["I64","I64"]),O("%",["U64","U64"]),O("%",["I32","I32"]),O("%",["U32","U32"]),O("%",["I16","I16"]),O("%",["U16","U16"]),O("%",["I8","I8"]),O("%",["U8","U8"]),O("%",["any","any"])],"!=":[O("!=",["FP64","FP64"],"Bool"),O("!=",["U64","U64"],"Bool"),O("!=",["I64","I64"],"Bool"),O("!=",["FP32","FP32"],"Bool"),O("!=",["U32","U32"],"Bool"),O("!=",["I32","I32"],"Bool"),O("!=",["U16","U16"],"Bool"),O("!=",["I16","I16"],"Bool"),O("!=",["U8","U8"],"Bool"),O("!=",["I8","I8"],"Bool"),O("!=",["any","any"],"any")],"==":[O("==",["FP64","FP64"],"Bool"),O("==",["U64","U64"],"Bool"),O("==",["I64","I64"],"Bool"),O("==",["FP32","FP32"],"Bool"),O("==",["U32","U32"],"Bool"),O("==",["I32","I32"],"Bool"),O("==",["U16","U16"],"Bool"),O("==",["I16","I16"],"Bool"),O("==",["U8","U8"],"Bool"),O("==",["I8","I8"],"Bool"),O("==",["any","any"],"any")],">":[O(">",["FP64","FP64"],"Bool"),O(">",["U64","U64"],"Bool"),O(">",["I64","I64"],"Bool"),O(">",["FP32","FP32"],"Bool"),O(">",["U32","U32"],"Bool"),O(">",["I32","I32"],"Bool"),O(">",["U16","U16"],"Bool"),O(">",["I16","I16"],"Bool"),O(">",["U8","U8"],"Bool"),O(">",["I8","I8"],"Bool"),O(">",["any","any"],"any")],"<":[O("<",["FP64","FP64"],"Bool"),O("<",["U64","U64"],"Bool"),O("<",["I64","I64"],"Bool"),O("<",["FP32","FP32"],"Bool"),O("<",["U32","U32"],"Bool"),O("<",["I32","I32"],"Bool"),O("<",["U16","U16"],"Bool"),O("<",["I16","I16"],"Bool"),O("<",["U8","U8"],"Bool"),O("<",["I8","I8"],"Bool"),O("<",["any","any"],"any")],">=":[O(">=",["FP64","FP64"],"Bool"),O(">=",["U64","U64"],"Bool"),O(">=",["I64","I64"],"Bool"),O(">=",["FP32","FP32"],"Bool"),O(">=",["U32","U32"],"Bool"),O(">=",["I32","I32"],"Bool"),O(">=",["U16","U16"],"Bool"),O(">=",["I16","I16"],"Bool"),O(">=",["U8","U8"],"Bool"),O(">=",["I8","I8"],"Bool"),O(">=",["any","any"],"any")],"<=":[O("<=",["FP64","FP64"],"Bool"),O("<=",["U64","U64"],"Bool"),O("<=",["I64","I64"],"Bool"),O("<=",["FP32","FP32"],"Bool"),O("<=",["U32","U32"],"Bool"),O("<=",["I32","I32"],"Bool"),O("<=",["U16","U16"],"Bool"),O("<=",["I16","I16"],"Bool"),O("<=",["U8","U8"],"Bool"),O("<=",["I8","I8"],"Bool"),O("<=",["any","any"],"any")],"&":[O("&",["Bool","Bool"],"Bool"),O("&",["any","any"],"any")],"^":[O("^",["Bool","Bool"],"Bool"),O("^",["any","any"],"any")],"|":[O("|",["Bool","Bool"],"Bool"),O("|",["any","any"],"any")],not:[O("not",["Bool"],"Bool"),O("not",["any"],"any")],I32:[O("I32",["FP64"],"I32"),O("I32",["U64"],"I32"),O("I32",["I64"],"I32"),O("I32",["FP32"],"I32"),O("I32",["U32"],"I32"),O("I32",["I32"],"I32"),O("I32",["U16"],"I32"),O("I32",["I16"],"I32"),O("I32",["U8"],"I32"),O("I32",["I8"],"I32"),O("I32",["any"],"any")],U32:[O("U32",["FP64"],"U32"),O("U32",["U64"],"U32"),O("U32",["I64"],"U32"),O("U32",["FP32"],"U32"),O("U32",["U32"],"U32"),O("U32",["I32"],"U32"),O("U32",["U16"],"U32"),O("U32",["I16"],"U32"),O("U32",["U8"],"U32"),O("U32",["I8"],"U32"),O("U32",["any"],"any")],I64:[O("I64",["FP64"],"I64"),O("I64",["U64"],"I64"),O("I64",["I64"],"I64"),O("I64",["FP32"],"I64"),O("I64",["U32"],"I64"),O("I64",["I32"],"I64"),O("I64",["U16"],"I64"),O("I64",["I16"],"I64"),O("I64",["U8"],"I64"),O("I64",["I8"],"I64"),O("I64",["any"],"any")],U64:[O("U64",["FP64"],"U64"),O("U64",["U64"],"U64"),O("U64",["I64"],"U64"),O("U64",["FP32"],"U64"),O("U64",["U32"],"U64"),O("U64",["I32"],"U64"),O("U64",["U16"],"U64"),O("U64",["I16"],"U64"),O("U64",["U8"],"U64"),O("U64",["I8"],"U64"),O("U64",["any"],"any")],FP32:[O("FP32",["FP64"],"FP32"),O("FP32",["U64"],"FP32"),O("FP32",["I64"],"FP32"),O("FP32",["FP32"],"FP32"),O("FP32",["U32"],"FP32"),O("FP32",["I32"],"FP32"),O("FP32",["U16"],"FP32"),O("FP32",["I16"],"FP32"),O("FP32",["U8"],"FP32"),O("FP32",["I8"],"FP32"),O("FP32",["any"],"any")],FP64:[O("FP64",["FP64"],"FP64"),O("FP64",["U64"],"FP64"),O("FP64",["I64"],"FP64"),O("FP64",["FP32"],"FP64"),O("FP64",["U32"],"FP64"),O("FP64",["I32"],"FP64"),O("FP64",["U16"],"FP64"),O("FP64",["I16"],"FP64"),O("FP64",["U8"],"FP64"),O("FP64",["I8"],"FP64"),O("FP64",["any"],"any")]}),ts=$i;var Ao=Object.freeze(["+","-","*","/","%",">",">=","<","<=","!=","&","|","^","not","I32","U32","I64","U64","FP64","FP32"]);var zi=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),bt=zi;var{EMPTY_STRING:Xi,UNICODE_TEXT:Vs}=Oo,Ji=44,Wi=48,Zi=57,Qi=46,qi=45,xi=43,ef=65,tf=90,sf=-1,nf=1,of=new TextDecoder(Vs),cf=new TextEncoder,rf=(L,k,v=0,K=L.length|0,H=0,x=k.length|0)=>{for(H=H|0,v=v|0,x=x|0,K=K|0;;){let oe=v>=K,re=H>=x;if(oe||re)break;let ce=L[v],fe=k[H];if(v=v+1|0,H=H+1|0,ce<fe)return sf;if(ce>fe)return nf}return 0},gs=(L,k,v=0,K=L.length|0,H=0,x=k.length|0)=>{for(H=H|0,v=v|0,x=x|0,K=K|0;;){let oe=H>=x,re=v>=K;if(oe||re)break;k[H]=L[v],H=H+1|0,v=v+1|0}},Ks=(L,k,v=0,K=L.length|0,H=0,x=k.length|0)=>{v=v|0,H=H|0,K=K|0,x=x|0;let oe=K-v|0,re=x-H|0;if(oe!==re)return!1;for(;;){let Ae=v>=K,ce=H>=x;if(Ae||ce)break;let he=L[v],Ye=k[H];if(v=v+1|0,H=H+1|0,he!==Ye)return!1}return!0},af=L=>{L=L>>>0;let k=0,v=0;for(;v=(v<<1|1)>>>0,!(v>L);)k=k+1|0;return k},Io=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),Gs=(L,k,v,K)=>{for(L=L>>>0,K=K??k.length|0,v=v|0,K=K|0;L>0&&K>v;)K=K-1|0,k[K]=Io[L&15],L=L>>>4},Hs=(L,k,v,K)=>{let H=v|0,x=v+K|0;if(K===0)return!1;let oe=k[H];for((oe===xi||oe===qi)&&(H=H+1|0);H<x;){let re=k[H];if(H=H+1|0,!(Wi<=re&&re<=Zi||(Qi===re||Ji===re)))return!1}return!0},$s=L=>{let k=L>=ef,v=L<=tf;return k&&v},ns=128,os=127,So=-1,vt=64,zs=L=>{L=L|0;let k=[];for(;;){let v=L&os;L=L>>7;let K=L===0,H=(v&vt)===0,x=K&&H,oe=L===-1,re=(v&vt)!==0;if(x||oe&&re){k.push(v);break}v=v|ns,k.push(v)}return k},uf=L=>{let k=[],v=!0;for(;v;){let K=L&os;L>>=7,L===0&&!(K&vt)||L===-1&&K&vt?v=!1:K|=ns,k.push(K)}return k},ho=(L,k)=>{k=k|0;let v=0,K=0;for(;;){let H=L[k]|0;k=k+1|0;let x=(H&os)<<K;if(K=K+7|0,v=v|x,(H&ns)===0){let re=(H&vt)!==0,Ae=K<32;if(re&&Ae){let fe=So<<K;v=v|fe}break}}return v},lf=(L,k)=>{k=k|0;let v=0,K=0;for(;;){let H=L[k]|0;k=k+1|0;let x=(H&os)<<K;if(K=K+7|0,v=v|x,!(H&ns)){if(H&vt){let oe=So<<K;v=v|oe}break}}return v},d=L=>of.decode(L),ne=L=>cf.encode(L),ff=(L=Xi)=>{let k=L.length|0,v=zs(k),K=Buffer.from(L,Vs);return Object.freeze([...v,...K])},Ef=(L,k)=>{k=k|0;let v=ho(L,k),K=zs(v).length;return k=k+K|0,L.subarray(k,k+v|0).toString(Vs)},_f=58,mf=46,$t=32,ws=48,pf=67,Ot=new Uint8Array(pf),To=Ot.subarray(0,8),ss=Ot.subarray(10,49),No=Ot.subarray(51,68),Ys=16,bf=2;Ot[8]=_f;Ot[9]=$t;Ot[49]=$t;Ot[50]=$t;var Of=(L,k)=>{k=k??console.log;let v=32,K=126,H=L.length|0,x=0;for(;H>0;){To.fill(ws),Gs(x,To),ss.fill($t),No.fill($t);let oe=H>=Ys?Ys:H;H=H-Ys|0;let re=0,Ae=0;for(let fe=1;fe<=oe;fe=fe+1|0){let he=L[x]&255;ss[re+0|0]=ws,ss[re+1|0]=ws,Gs(he,ss,re,re+2|0);let Ye=mf;v<=he&&he<=K&&(Ye=he),No[Ae]=Ye,x=x+1|0,re=re+2|0,Ae=Ae+1|0,fe%bf===0&&(re=re+1|0)}let ce=String.fromCodePoint(...Ot);k(ce)}},Af=function*(L,k){let v=L.length|0,K=k.length|0,H=0;for(;H<v&&H<K;){let x=L[H],oe=k[H];yield[x,oe],H=H+1|0}},Tf=function*(L,k,v){let K=L.length|0,H=k.length|0,x=v.length|0,oe=0;for(;oe<K&&oe<H&&oe<x;){let re=L[oe],Ae=k[oe],ce=v[oe];yield[re,Ae,ce],oe=oe+1|0}},GE=Object.freeze({ARRAY_COMPARE:rf,ARRAY_COPY:gs,ARRAY_EQUAL:Ks,BIT_DEPTH:af,HEX_DIGITS:Io,HEX_ENCODE:Gs,IS_NUMBER:Hs,IS_UPPERCASE:$s,LEB128_DECODE:ho,LEB128_DECODE_SIGNED:lf,LEB128_ENCODE:zs,LEB128_ENCODE_SIGNED:uf,UTF8_DECODE:d,UTF8_ENCODE:ne,WASM_STRING_ENCODE:ff,WASM_STRING_DECODE:Ef,XXD_DUMP_HEX:Of,ZIP2:Af,ZIP3:Tf});var{TYPES_ASSIGN:cs,TYPES_ARRAY:Qe,TYPES_ARRAY_ASSIGNMENT:Nf,TYPES_BRANCH_MATCH:Po,TYPES_BRANCH_DEFAULT:ko,TYPES_CONDITION:If,TYPES_LOOP:df,TYPES_DATA:Me,TYPES_GENERICS:rs,TYPES_ENUMERATION:Ut,TYPES_EXPRESSION:Bt,TYPES_IMPORT:Sf,TYPES_INSTANCE:KE,TYPES_LIBRARY:hf,TYPES_LINK:Lo,TYPES_LOCAL:st,TYPES_OBJECT:Ke,TYPES_PROCEDURE:nt,TYPES_RETURN:Pf,TYPES_SELECT:Xs,TYPES_MEMBER:Js,TYPES_NATIVE:kf,TYPES_STORE:Ro,TYPES_BREAK:Lf,TYPES_LITERAL:ye,TYPES_ARRAY_ACCESS:Ws,TYPES_LINK_TO:dt,TYPES_VALUE_AT:it,TYPES_SELF:ot,TYPES_DROP:Co,TYPES_MAYBE:vo,TYPES_MOVE:Zs,TYPES_STRING:St,TYPES_CONSTRUCTOR:Qs,TYPES_DESTRUCTOR:Uo,TYPES_FREE:Rf,TYPES_BLOCK_END:HE,TYPES_STATEMENT:$E,TYPES_DRAW:Cf,TYPES_SIZE:qs,TYPES_CONCAT:Dt,TYPES_FOREACH:vf,TYPES_WHILE:Uf}=bo,z=Ks,xs=ne("="),Bf=ne("enum"),Df=ne("loop"),Mf=ne("break"),yf=ne("if"),jf=ne("else"),Bo=ne("is"),Do=ne("->"),Mt=ne(`
`),Mo=ne("object"),yt=ne("pass"),yo=ne("fn"),Ff=ne("return"),jo=ne("size"),Fo=ne("at"),as=ne(Qe),At=ne("Link!!"),ht=ne("Link"),us=ne("LinkSmart"),wo=ne("mut"),Yo=ne("self"),Go=ne("nocopy"),wf=ne("move"),Yf=ne("size"),Gf=ne("import"),Vf=ne("export"),ls=ne("Maybe"),gf=ne("NONE"),Kf=ne("SOME"),Vo=ne("free"),Hf=ne("free!!"),$f=ne("foreach"),ZE=ne("for"),zf=ne("while"),Xf=ne("in"),Jf=ne("at"),Fe=58,en=61,Ge=44,xe=46,He=123,Ie=40,be=10,Wf=35,tt=125,de=41,ft=91,is=93,Zf=39,zt=34,Qf=64,tn=47,sn=1,go=2,nn=3,gt="done",Ce="fail",qf={EVENT_DONE:gt,EVENT_FAIL:Ce},Lu=1,Ru=2,Cu=3,vu=4,Uu=5,Bu=6,Du=7,Mu=8,yu=9,ju=10,Fu=11,wu=12,xf=13,eE=14,tE=15,Yu=16,sE=99,$e={FAIL_UNRESOLVED_NAME:L=>`Unresolved name '${L}'. The name '${L}' does not exist in the current context. Please check the spelling and scope of your identifiers.`,FAIL_UNEXPECTED_TOKEN:(L,k)=>`Unexpected token '${L}' at position ${k}. Please check the syntax.`,FAIL_INDENTATION_MISMATCH:L=>`Indentation mismatch on line ${L}. The code on this line does not align with the expected indentation. Check your indentation for inconsistencies.`,FAIL_INDENTATION_NO_INCREASE:L=>`Indentation error on line ${L}. Expected an increase in indentation but found none. Check your indentation.`,FAIL_DUPLICATE_DATA:L=>`Duplicate data '${L}' found. Ensure each piece of data is unique.`,FAIL_DUPLICATE_OBJECT_MEMBER:(L,k)=>`Duplicate member '${L}' in object '${k}'. Each member in an object must have a unique name.`,FAIL_INVALID_IDENTIFIER:L=>`Invalid identifier '${L}'. The name '${L}' is not a valid identifier. Ensure your identifiers adhere to the language's naming rules.`,FAIL_RETURN_LENGTH_MISMATCH:(L,k)=>`Return length mismatch. Expected '${L}' value(s) but received '${k}'. Ensure the number of return values matches the expected count.`,FAIL_UNRESOLVED_OBJECT_MEMBER:(L,k)=>`Unresolved member '${L}' of object '${k}'. The member '${L}' does not exist on the object '${k}'`,FAIL_UNKNOWN_PROCEDURE_NAME:L=>`Call to undefined procedure '${L}'. Please ensure that the procedure is defined before calling it.`,FAIL_IMMUTABLE_ASSIGNMENT:L=>`Assignment to an immutable variable '${L}'. You are attempting to assign a new value to a variable which was declared as immutable and cannot be changed.`,FAIL_RESERVED_KEYWORD_USAGE:L=>`Reserved keyword '${L}' used as an identifier. The keyword '${L}' is reserved by the language and cannot be used as an identifier. Please choose a different name.`,FAIL_INPUT_TYPE_MISMATCH:(L,k)=>`Type Mismatch at line ${L}. Nature procedures expect all parameters to be of same type. Provided: ${k}.`,FAIL_UNSUPPORTED_TYPE:L=>`Unsupported type found. Type '${L}' was not defined in this context and isn't a native to Flogram. Please check your code and language supported types.`,FAIL_UNALLOWED_COPY:L=>`Copy operation not allowed. The object '${L}' has been defined as uncopyable in your code, and therefore, the copy operation you're attempting is not allowed.`,FAIL_ASSIGNMENT_TYPE_MISMATCH:(L,k)=>`Assignment type mismatch. Type '${k}' assigned to '${L}'.`},nE=Object.freeze({FAIL_UNRESOLVED_NAME:Lu,FAIL_UNEXPECTED_TOKEN:Ru,FAIL_INDENTATION_MISMATCH:Cu,FAIL_INDENTATION_NO_INCREASE:vu,FAIL_DUPLICATE_DATA:Uu,FAIL_DUPLICATE_OBJECT_MEMBER:Bu,FAIL_INVALID_IDENTIFIER:Du,FAIL_RETURN_LENGTH_MISMATCH:Mu,FAIL_UNRESOLVED_OBJECT_MEMBER:yu,FAIL_UNKNOWN_PROCEDURE_NAME:ju,FAIL_IMMUTABLE_ASSIGNMENT:Fu,FAIL_RESERVED_KEYWORD_USAGE:wu,FAIL_ASSIGNMENT_TYPE_MISMATCH:Yu}),oE=new Set(["fn","object","pass","enum"]),Ko=new Set(["==","!=",">",">=","<","<=","!","&","|"]),we=(L,k,v,K)=>{if(K===1){let Te=k[v],rt=Te&191,Xe=Te&223,It=Xe^93,at=Xe^91,M=Te&254,B=Te&254^40,X=Te&253^44,te=Te&254^58;return rt===0||(It===0||at===0)||B===0||X===0||te===0||Te===be}let qe=k.subarray(v,v+K|0),Ee=d(qe);return!1},cE=(L,k,v,K)=>{let H=k.subarray(v,v+K|0),x=d(H);return oE.has(x)||bt.includes(x)},rE=512,xn=1,Gu=2,Us=3,eo=4,Vu=5,gu=6,Ku=7,Hu=8,$u=9,aE=10,uE=11,lE=12,iE=13,fE=14,EE=15,_E=16,mE=17,pE=18,ct=Object.freeze([xn]),jt=Object.freeze([Gu]),Pt=Object.freeze([Us]),on=Object.freeze([Us,eo]),Ho=Object.freeze([Vu]),bE=Object.freeze([xn,gu]),OE=Object.freeze([Ku]),ze=Object.freeze([eo,Hu]),Ve=Object.freeze([$u]),AE=Object.freeze([aE]),Ft=Object.freeze([uE]),TE=Object.freeze([Us,$u]),Xt=Object.freeze([lE]),wt=Object.freeze([iE]),cn=Object.freeze([fE]),$o=Object.freeze([EE]),zo=Object.freeze([_E]),fs=Object.freeze([mE]),rn=Object.freeze([pE]),NE=Object.freeze({REASON_COLON_OPENS_SCOPE:xn,REASON_LINE_BREAK_BEFORE_OPEN_SCOPE:Gu,REASON_CLOSING_LINE_BREAK:Us,REASON_SEQUENCE_SEPARATOR_COMMA:eo,REASON_INTO_BETWEEN_INPUTS_OUTPUTS:Vu,REASON_IS_OPENS_CONDITION_BRANCH_MATCH:gu,REASON_OPEN_STATEMENT_WITH_KEYWORD:Ku,REASON_RIGHT_PARENTHESIS_CLOSES_LIST:Hu}),ke=1,Xo=2,Jt=3,Jo=4,an=5,Wo=6,je=7,kt=8,Ue=9,Wt=10,Yt=11,Zo=12,Qo=13,Zt=1,qo=2,Be=3,un=4,xo=5,ec=6,tc=7,sc=1,nc=2,oc=3,cc=4,rc=5,ln=6,ac=7,uc=8,lc=9,ic=10,fc=11,Ec=12,_c=13,fn=14,Qt=1,mc=2,Es=3,pc=4,En=5,bc=6,Oc=7,qt=1,Ac=2,_s=3,Tc=4,Nc=6,Ic=1,dc=2,Sc=3,hc=4,_n=5,Pc=6,kc=7,ms=8,Lc=9,Rc=10,Cc=11,vc=12,Uc=13,Bc=14,Dc=1,Mc=2,yc=1,jc=2,IE=3;var Fc=7,mn=8,wc=9,ps=1,bs=2,Os=3,As=4,Gt=5,Ts=6,Ns=7,Vt=8,Is=9,ds=10,Ss=11,Tt=1,Yc=2,Gc=3,pn=4,Vc=5,gc=6,Kc=7,bn=8,Hc=9,$c=10,zc=11,Xc=12,Jc=13,Wc=14,On=15;var Zc=17,An=18,Tn=19,Qc=20,qc=21,Nn=22,xc=23,er=24,Lt=25,hs=26,tr=27,sr=28,nr=29,or=30,cr=31,rr=32,ar=33,ur=34,lr=35,ir=36,fr=37,Er=38,_r=39,In=40,dn=41,mr=42,pr=43,br=44,Sn=45,Or=46,Ar=47,Tr=48,Nr=49,hn=50,Ir=51,dr=52,Pn=53,kn=54,Sr=55,hr=56,Pr=57,kr=58,Ln=59,Lr=60,Rr=61,Cr=62,vr=63,Ur=64,Br=65,Dr=66,Mr=67,yr=68,jr=69,Rn=70,Fr=71,wr=72,Yr=73,Cn=74,Gr=75,Vr=76,gr=77,Kr=78,mt=1,Hr=2,$r=3,zr=4,vn=5,Xr=6,Ps=1,Jr=2,Wr=3,Zr=4,Qr=5,Rt=6,qr=7,Un=8,ks=9,Bn=10,Ls=11,xr=12,ea=13,Dn=14,Mn=15,yn=16,ta=17,sa=18,na=19,jn=20,Fn=21,oa=22,ca=23,ra=24,aa=25,ua=26,wn=27,la=28,ia=29,Yn=30,fa=31,Gn=32,Ea=33,_a=34,ma=35,pa=36,ba=37,Vn=38,gn=39,Oa=40,Aa=41,Ta=42,Na=43,Ia=44,Kn=45,Hn=46,da=47,Rs=48,Sa=49,ha=50,Pa=51,ka=52,La=53,Ra=54,Ca=55,va=56,Ua=57,Ba=58,Da=59,Ma=60,ya=61,ja=62,Fa=63,$n=64,wa=65,zn=66,Ya=67,Cs=68,Ga=69,Xn=70,Va=71,ga=72,Ka=73,Ha=74,$a=75,za=76,Xa=77,Ja=78,Wa=79,Za=80,Qa=81,qa=82,xa=83,eu=84,Jn=85,tu=86,su=87,nu=88,Wn=1,ou=2,cu=3,ru=4,au=5,uu=6,lu=7,iu=8,fu=9,Eu=10,Zn=11,_u=12,mu=13,pu=14,bu=15,Qn=16,Ou=17,Au=18,Tu=19,Nu=20,Se="Flogram",Iu="0",du="any",qn="data",Su="code",hu=L=>["TRUE","FALSE"].includes(L),vs=!1,zu=L=>{let k=[],v=[],K=[],H={name:"draw",type:"procedure",description:{inputs:[{name:"a",data:{type:"data",name:"I32",path:"Flogram"}}],locals:[],outputs:[]}},x=Object.freeze({data:k,code:v,exports:K}),oe=new Uint8Array(rE),re=[],Ae=0,ce=(a,n,e,f)=>{let t=Object.freeze({position:a,length:f});gs(n,oe,e,e+f|0,Ae,Ae+f|0),re.push(t),Ae=Ae+f|0},fe=()=>{Ae=0;let a=oe,n=re,e=0;for(;n.length>0;){let f=n.shift(),{length:t,position:s}=f;Ht(s,a,e,t),e=e+t|0}},he=(a,n,e,f)=>{let{description:t}=a,{members:s}=t,o=s.find(E=>E.name===n[e]),u=k.find(E=>E.name===o.data.name);return u.type===Ke&&e<n.length-1?he(u,n,e+1,f):o},Ye=a=>{let n=Number(a);if(isNaN(n))return"";if(Number.isInteger(n)){if(n>=-Math.pow(2,31)&&n<Math.pow(2,31))return"I32";if(n>=-Math.pow(2,63)&&n<Math.pow(2,63))return"I64"}else if(typeof n=="number")return a.replace(".","").length<=7?"FP32":"FP64"},De=a=>{switch(a.type){case"select":return a.value.name;case"store":case"linkValue":return De(a.link);case"valueLink":return De(a.value)}return a.name},Nt=(a,n)=>{let e=ts[a];if(e){let f=e.find(t=>t.description&&Array.isArray(t.description.inputs)?t.description.inputs.length!==n.length?!1:t.description.inputs.every((s,o)=>s.data.name===n[o].data.name):!1);if(f)return f;b=A|0,p=position-N|0,Kt(a);return}else{b=A|0,p=position-N|0,no(a);return}},qe=a=>{let n=r.procedure.description.inputs.find(e=>e.name===a)||r.procedure.description.locals.find(e=>e.name===a);if(n){let e=k.find(f=>f.type===rs&&f.name===n.data.name);if(e)return{data:e}}return n},Ee=(a,n=!1)=>{let e;switch(a.type){case Xs:{let f=r.stack.get(a.value.name||a.value.link,a.value.value);if(f){let t=k.find(T=>T.name===f.name),{description:s}=t,{members:o}=s,u=0,E=o.find(T=>T.name===a.trail[u]),_=k.find(T=>T.name===E.data.name);if(_.type===Ke&&u<a.trail.length-1)e={data:he(_,a.trail,u+1,n)?.data};else{if(E.data.freed){b=A|0,p=position-N|0,ue(`Attempted to use '${a.trail.join(".")}', which has been freed. Ensure links are valid before use.`);return}if(n){let T=k.indexOf(t),P=JSON.parse(JSON.stringify(t)),R=t.description.members.indexOf(E);R>=0&&(P.description.members[R].data.freed=!0,k.splice(T,1,P))}e=E}}break}case it:{e=Ee(a.link);break}case Zs:case dt:{e=Ee(a.value);break}case Dt:{e={data:{type:Me,name:St,path:Se}};break}case qs:{e={data:{type:Me,name:"I32",path:Se}};break}case Ws:{e={data:r.stack.get(a.array.name)};break}case Js:{if(a.trail.length>0){let f=k.find(t=>{if(t.description&&t.description.members)return t.description.members.find(s=>s.name===a.trail[0])});if(f){let{description:t}=f,{members:s}=t,o=0,u=s.find(_=>_.name===a.trail[o]),E=k.find(_=>_.name===u.data.name);E.type===Ke&&o<a.trail.length-1?e={data:he(E,a.trail,o+1,n).data}:e={data:u.data}}else b=A|0,p=0,Et(a.trail[0],`${ot}(current object in definition)`)}else e=r.stack.get(a.trail[0]);break}case Bt:{let f=s=>v.find(o=>o.type===nt&&o.name===s.name)?.description.outputs[0],t=(s,o)=>{let u;for(let E=0;o&&E<=s.name.length-2;E++)o=r.stack.get(s.name[E]),o&&(u=k.find(_=>_.type===Ke&&_.name===o.name));return u?.description.members?.find(E=>E.name===s.name[s.name.length-1])?.description.outputs[0]};if(a.path!==Se){if(e=f(a),typeof a.name=="object"){let s=r.stack.get(a.name[0]);e=t(a,s)}}else if(Ko.has(a.name))e={data:{type:Me,name:"Bool",path:Se}},ge(e.data.name);else{let s=a.inputs.map(u=>Ee(u)),o=v.find(u=>u.description&&Array.isArray(u.description.inputs)?u.description.inputs.length!==s.length||u.name!==a.name||u.path!==a.path?!1:u.description.inputs.every((E,_)=>E.data.name===s[_].data.name):!1);if(o){let{description:u}=o,{outputs:E}=u;e=E[0]}else{b=A|0,p=position-N|0,ue(`Unable to find expression matching: ${s.map(u=>u.data.name)}`);return}}break}default:{e=qe(a.name);break}}if(!e)if(Ao.includes(a.name)&&a.type===Bt){let f=a.inputs.map(s=>Ee(s)),t=Nt(a.name,f);e={data:{name:t.description.outputs[0].data.name,path:t.description.outputs[0].data.path}}}else a.type===ye&&(e={data:{type:ye,name:a.name,literal:a.literal,path:a.path}});return e},Te=a=>{let n=Ee(a);return n&&n.data.path===Se&&n.data.type!==Qe&&n.data.mutable?Object.seal({type:it,link:a}):a},rt=(a,n)=>{let e=JSON.parse(JSON.stringify(a)),f=a.description.generics.map(s=>s.name);function t(s){for(let o in s)if(s[o]&&typeof s[o]=="object")t(s[o]);else if(o==="name"&&f.includes(s[o])){let u=f.indexOf(s[o]);s[o]=n[u].name,s.path=n[u].path}else if(o==="path"&&s[o].split(".").includes(e.name)){let u=s[o].split("."),E=u.indexOf(e.name),_=Xe(e.name,n);u[E]=_,s[o]=u.join(".")}}t(e);for(let s of v){let{description:o}=s,{inputs:u,outputs:E}=o,_=[...u,...E];if(s.type==="native"&&_.some(T=>f.includes(T.data.name))){let T=JSON.parse(JSON.stringify(s));t(T),v.push(T)}}return e},Xe=(a,n)=>{let f=n.map(t=>`${t.name}${t.segment?`_${t.segment}`:""}`).join("__");return`${a}___${f}`},It=a=>a.type===dt&&a.value!==ot||a.type===it&&a.link!==ot,{path:at,imports:M,files:U,Tokenizer:B}=L,$=new Map,X=new Map,se=new Map,te=new Map,Z=(a,n="")=>{let{name:e,path:f}=a,t=n||e,s=`${f}.${t}`;se.set(s,a);let o=te.get(t)||[];o.push(a),te.set(t,o)},{data:Le}=M;for(let a of Le)Z(a);let Je=[at],pe=new Pu.default,i=[],m=[],S=[],l=!1,h=!1,C=!1,j=!0,Y=!1,F=!1,I=ke,c=Zt,r=null,le=null,ie=[],ae=0,A=1,N=0,_e=1,ut=null,b=0,p=0,Oe=(a,n,e,f)=>{let t=n.subarray(e,e+f|0),s=d(t);return cE(a,n,e,f)?(b=A|0,p=a-N|0,Zu(s),!0):we(a,n,e,f)?(b=A|0,p=a-N|0,Re(s),!0):!1};pe.on(gt,a=>{for(let n of m)n(a)}),pe.on(Ce,a=>{for(let n of S)n(a)});let xt=a=>{let n=Object.freeze({type:Uu,message:$e.FAIL_DUPLICATE_DATA(a),failureRow:b,failureColumn:p,name:a});h=!0,C=!0,pe.emit(Ce,n)},to=a=>{let n=Object.freeze({type:Bu,message:$e.FAIL_DUPLICATE_OBJECT_MEMBER(a),failureRow:b,failureColumn:p,name:a});h=!0,C=!0,pe.emit(Ce,n)},Xu=a=>{let n=_e,e=pt(a),f=Object.freeze({type:Cu,message:$e.FAIL_INDENTATION_MISMATCH(b),failureRow:b,failureColumn:p,expected:n,actual:e});h=!0,C=!0,pe.emit(Ce,f)},so=a=>{let n=Object.freeze({type:vu,message:$e.FAIL_INDENTATION_NO_INCREASE(b),failureRow:b,failureColumn:p,indentation:_e});h=!0,C=!0,pe.emit(Ce,n)},Re=a=>{let n=Object.freeze({type:Du,message:$e.FAIL_INVALID_IDENTIFIER(a),failureRow:b,failureColumn:p,identifier:a});h=!0,C=!0,pe.emit(Ce,n)},Ju=(a,n)=>{let e=Object.freeze({type:Mu,message:$e.FAIL_RETURN_LENGTH_MISMATCH(a,n),failureRow:b,failureColumn:p});C=!0,pe.emit(Ce,e)},Wu=a=>{let n=Object.freeze({type:Fu,message:$e.FAIL_IMMUTABLE_ASSIGNMENT(a),failureRow:b,failureColumn:p,variable:a});h=!0,C=!0,pe.emit(Ce,n)},Zu=a=>{let n=Object.freeze({type:wu,message:$e.FAIL_RESERVED_KEYWORD_USAGE(a),failureRow:b,failureColumn:p,keyword:a});h=!0,C=!0,pe.emit(Ce,n)},w=(a,n)=>{let e=Object.freeze({type:Ru,message:$e.FAIL_UNEXPECTED_TOKEN(a,p),failureRow:b,failureColumn:p,reasons:n,token:a});h=!0,C=!0,pe.emit(Ce,e)},es=a=>{let n=Object.freeze({type:Lu,message:$e.FAIL_UNRESOLVED_NAME(a),failureRow:b,failureColumn:p,name:a});h=!0,C=!0,pe.emit(Ce,n)},Et=(a,n)=>{let e=Object.freeze({type:yu,message:$e.FAIL_UNRESOLVED_OBJECT_MEMBER(a,n),failureRow:b,failureColumn:p,name:a});h=!0,C=!0,pe.emit(Ce,e)},no=a=>{let n=Object.freeze({type:ju,message:$e.FAIL_UNKNOWN_PROCEDURE_NAME(a),failureRow:b,failureColumn:p,name:a});h=!0,C=!0,pe.emit(Ce,n)},Qu=a=>{let n=Object.freeze({type:tE,message:$e.FAIL_UNALLOWED_COPY(a),failureRow:b,failureColumn:p,name:a});h=!0,C=!0,pe.emit(Ce,n)},qu=(a,n)=>{let e=Object.freeze({type:Yu,message:$e.FAIL_ASSIGNMENT_TYPE_MISMATCH(a,n),failureRow:b,failureColumn:p});h=!0,C=!0,pe.emit(Ce,e)},ue=a=>{let n=Object.freeze({type:sE,message:a,failureRow:b,failureColumn:p});h=!0,C=!0,pe.emit(Ce,n)},xu=a=>{let n=Object.freeze({type:xf,message:$e.FAIL_INPUT_TYPE_MISMATCH(b,a),failureRow:b,failureColumn:p,inputs:a});h=!0,C=!0,pe.emit(Ce,n)},Kt=a=>{let n=Object.freeze({type:eE,message:$e.FAIL_UNSUPPORTED_TYPE(a),failureRow:b,failureColumn:p,inputs});h=!0,C=!0,pe.emit(Ce,n)},pt=a=>a-N|0,Bs=a=>{let n=_e|0;return pt(a)<n},Ds=(a,n)=>{let e=_e|0,f=pt(a);switch(n){case sn:return f<=e;case go:return f!==e}throw nn},SE=a=>{v.push(a)},Ms=(a,n=!0)=>{let{name:e,path:f}=a,t=`${f}.${e}`;if(!$.has(t)){n?k.unshift(a):k.push(a),$.set(t,a),se.has(t)||Z(a);return}},ge=a=>{let n=te.get(a);if(!n)return null;if(n.length===1){let[e]=n;return Ms(e),e}throw nn},hE=(a,n)=>{let{description:e}=a,{inputs:f,locals:t}=e,{name:s}=n;for(let o of f)if(o.name===s)return o.data;for(let o of t)if(o.name===s)return o.data;return null},el=(a,n,e,f)=>{switch(c){case Zt:{let t=n.subarray(e,e+f|0);if(r&&r.export&&(_e=pt(a),ut&&ut!==_e&&(y(),r=null,D(),ut=null,_e=1),ut=_e),z(t,Gf)){D(),I=Qo,c=yc,l=!0;return}if(z(t,Vf)){D(),_e=pt(a),r=Object.freeze({export:!0,indentation:_e}),c=ec;return}if(z(t,Bf)){D(),I=Xo,c=sc,l=!0;return}if(z(t,Mo)||z(t,Go)){D(),I=Jo,c=Ic,l=!0;return}if(z(t,yt)){D(),I=an,c=Dc,l=!0;return}if(z(t,yo)){D(),I=Wo,c=ps,l=!0;return}break}case ec:{if(n[e]===Fe){c=Zt,D(),c=tc;return}l=!0,c=Zt;break}case tc:{if(n[e]===be){c=Zt;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,jt);break}case qo:{F=!1;let t=n.subarray(e,e+f|0);if(z(t,yf)){I=je,c=Gc,l=!0;return}if(z(t,jf)){I=je,c=br,l=!0;return}if(z(t,Df)){I=je,c=cr,l=!0;return}if(z(t,$f)){I=je,c=Dr,l=!0;return}if(z(t,zf)){I=je,c=Gr,l=!0;return}if(z(t,Mf)){I=je,c=lr;return}if(z(t,Fo)){I=je,c=Qc,l=!0;return}if(z(t,ht)||z(t,At)||z(t,us)){b=A|0,p=a-N|0;let u=d(t);w(u,rn);return}if(z(t,yt)){I=je,c=Xc,l=!0;return}if(z(t,Ff)){I=je,c=Wc,l=!0;return}if(z(t,Vo)||z(t,Hf)){I=je,c=Rr,l=!0;return}if(!Oe(a,n,e,f)){I=je,c=Tr,l=!0;return}b=A|0,p=a-N|0;let s=d(t);w(s,OE);break}case Be:{let t=n[e],s=n.subarray(e,e+f|0),o=d(s);if(k.find(E=>E.type===Ut&&E.description.labels.find(_=>_.name===o))){I=Ue,c=Gn,l=!0;return}if($s(t)&&!hu(d(s))){if(k.find(T=>T.name===o&&T.type===Ke)){I=Ue,c=ea,l=!0;return}if(k.find(T=>T.type===Ut&&T.name===o)){I=Ue,c=Gn,l=!0;return}}if(z(s,ls)){I=Ue,c=ma,l=!0;return}if(z(s,Yo)){I=Ue,c=ua,l=!0;return}if(z(s,Fo)){I=Ue,c=Wr,l=!0;return}if(z(s,ht)){I=Ue,c=Ps,l=!0;return}if(z(s,At)){I=Ue,c=Ps,l=!0;return}if(z(s,us)){I=Ue,c=Ps,l=!0;return}if(z(s,as)){I=Ue,c=Xn,l=!0;return}if(z(s,wf)){I=Ue,c=Ra,l=!0;return}if(z(s,Yf)){I=Ue,c=Wa,l=!0;return}if(t===ft){I=Ue,c=Fn,l=!0;return}c=un,l=!0;break}case un:{ce(a,n,e,f),c=xo;break}case xo:{ce(a,n,e,f);let t=n[e];if(t===Ie){I=Ue,c=ks,fe();return}if(t===ft){I=Ue,c=oa,fe();return}if(t===He){I=Ue,c=ks,fe();return}if(t===xe){c=un;return}I=Ue,c=Qr,fe();break}}},tl=(a,n,e,f)=>{switch(c){case sc:{let t=Je.join("."),s=Object.seal({labels:[],generics:[]}),o=Object.seal({type:Ut,name:et,path:t,description:s});r=Object.seal({enumeration:o}),c=nc;break}case nc:{let{enumeration:t}=r,s=n.subarray(e,e+f|0),o=d(s);if(Oe(a,n,e,f))return;t.name=o,c=oc;break}case oc:{let t=n[e];if(t===Fe){c=cc;return}if(t===He){let{enumeration:E}=r,{description:_}=E,{generics:T}=_;D(),r=T,I=Wt,c=qt,l=!0;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case cc:{if(n[e]===be){c=rc;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,jt);break}case rc:{_e=pt(a),c=ln,l=!0;break}case ln:{let{enumeration:t}=r;if(Bs(a)){if(Ms(t),y(),r&&r.export){let s=Object.freeze({name:t.name,type:t.type,path:qn});K.push(s);let o=_e;y(),_e===o&&y(),_e<o&&D()}l=!0;return}c=ac,l=!0;break}case ac:{let{enumeration:t}=r,{description:s}=t,{labels:o}=s,u=n.subarray(e,e+f|0),E=d(u);if(Oe(a,n,e,f))return;let _={name:E};o.push(_),c=ln,D(),c=uc;break}case uc:{let t=n[e];if(l=!0,t===Ie){c=lc;return}let{enumeration:s}=r,{description:o}=s,{labels:u}=o,E=u.length-1;r=Object.seal({label:u[E]}),c=fn;break}case lc:{if(n[e]===Ie){c=ic;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case ic:{let{enumeration:t}=r,{description:s}=t,{labels:o}=s;if(we(a,n,e,f)){b=A|0,p=a-N|0,Re(E);return}let u=n.subarray(e,e+f|0),E=d(u),_=o.pop();_.data={name:E,path:at},o.push(_),c=fc;break}case fc:{if(n[e]===Fe){c=Ec;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case Ec:{let{enumeration:t}=r,{description:s}=t,{labels:o}=s,u=n.subarray(e,e+f|0),E=d(u);if(Oe(a,n,e,f))return;let _=o.pop();_.data.type=E,o.push(_),r=Object.seal({label:_}),c=_c;break}case _c:{if(n[e]===de){c=fn;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ze);break}case fn:{if(n[e]===be){y();return}break}}},sl=(a,n,e,f)=>{switch(c){case qt:{c=Ac,l=!0;break}case Ac:{if(n[e]===He){c=_s;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case _s:{let t=n[e];if(t===be)return;if(t===tt){y();return}c=Tc,l=!0;break}case Tc:{let t=n.subarray(e,e+f|0),s=d(t);if(Oe(a,n,e,f))return;D();let o=Object.seal({type:rs,name:s,path:at});r=Object.seal({name:s,data:o}),Z(r.data,r.name),c=Nc;break}case Nc:{let t=r;y(),r.push(t);let o=n[e];if(o===tt){c=_s,l=!0;return}if(o===Ge){c=_s;return}b=A|0,p=a-N|0;let u=n.subarray(e,e+f|0),E=d(u);w(E,ze);break}}},nl=(a,n,e,f)=>{switch(c){case Qt:{c=mc,l=!0;break}case mc:{if(n[e]===Ie){c=Es;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case Es:{let t=n[e];if(t===be)return;if(t===de){y();return}c=pc,l=!0;break}case pc:{let t=n.subarray(e,e+f|0);if(D(),z(wo,t)){r=Object.seal({name:null,mutable:!0,data:null}),c=En;return}r=Object.seal({name:null,data:null}),c=En,l=!0;break}case En:{let t=n.subarray(e,e+f|0),s=d(t);if(Oe(a,n,e,f))return;r.name=s,c=bc;break}case bc:{if(n[e]===Fe){c=Oc,D(),I=kt,c=mt;return}break}case Oc:{let t=r;y();let s=r,{mutable:o,...u}=t;s.push(u);let E=n[e];if(E===de){c=Es,l=!0;return}if(E===Ge){c=Es;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,ze);break}}},ol=(a,n,e,f)=>{switch(c){case Ic:{let t=Je.join("."),s=Object.seal({members:[],generics:[]}),o=Object.seal({type:Ke,name:et,copy:!0,path:t,description:s});r=Object.seal({mapNameMember:new Map,object:o}),c=dc,l=!0;break}case dc:{let t=n.subarray(e,e+f|0);if(c=Sc,z(t,Go)){r.object.copy=!1;return}l=!0;break}case Sc:{let t=n.subarray(e,e+f|0);if(z(t,Mo)){c=hc;return}b=A|0,p=a-N|0;let s=d(t);w(s,ct);break}case hc:{let{object:t}=r,s=n.subarray(e,e+f|0),o=d(s);if(Oe(a,n,e,f))return;let u=ge(o);u&&Je.join(".")===u.path&&(b=A|0,p=a-N|0,xt(o)),t.name=o,Ms(t,!1),c=Uc;break}case Uc:{if(n[e]===He)c=Bc,l=!0;else if(n[e]===Fe)c=_n,l=!0;else{let t=n.subarray(e,e+f|0),s=d(t);b=A|0,p=a-N|0,Re(s);return}break}case Bc:{let{object:t}=r,{description:s}=t,{generics:o}=s;c=_n,D(),r=o,I=Wt,c=qt,l=!0;break}case _n:{if(n[e]===Fe){c=Pc;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case Pc:{if(n[e]===be){c=kc;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,jt);break}case kc:{if(Ds(a,sn)){let t=i.length;if(i.length<1||i[t-1].item.indentation>=_e){b=A|0,p=a-N|0,so(a);return}}_e=pt(a),c=ms,l=!0;break}case ms:{let{object:t}=r;if(Bs(a)){if(y(),r&&r.export){let s=Object.freeze({name:t.name,type:t.type,path:qn});K.push(s);let o=_e;y(),_e===o&&y(),_e<o&&D()}l=!0;return}if(Ds(a,go)){b=A|0,p=a-N|0,Xu(a);return}c=Lc,l=!0;break}case Lc:{let{object:t,mapNameMember:s}=r,{description:o}=t,{members:u}=o,E=n.subarray(e,e+f|0),_=d(E);if(z(yo,E)){c=ms,D(),I=Zo,c=ps,l=!0;return}if(Oe(a,n,e,f))return;s.has(_)&&(b=A|0,p=a-N|0,to(_));let T=Object.seal({name:_,data:null});u.push(T),s.set(_,T),c=ms,D(),r=Object.seal({member:T}),c=Rc;break}case Rc:{if(n[e]===Fe){c=Cc;return}break}case Cc:{c=vc,D(),r=Object.seal({data:null}),D(),I=kt,c=mt,l=!0;break}case vc:{if(n[e]===be){let{data:E}=r;y();let{member:_}=r;_.data=E,y();return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Pt);break}}},cl=(a,n,e,f)=>{switch(c){case ps:{let{mapNameMember:t,object:s}=r,{name:o}=s,u=new Map(t),E=`${Je.join(".")}.${o}`,_=Object.seal({generics:[],inputs:[],locals:[],outputs:[],statements:[]}),T=Object.seal({type:nt,name:et,path:E,description:_});r=Object.seal({procedure:T,stack:u}),c=bs;break}case bs:{let{procedure:t}=r,s=n.subarray(e,e+f|0),o=d(s);if(Oe(a,n,e,f))return;t.name=o,c=Os;break}case Os:{if(n[e]===He)c=As,l=!0;else if(n[e]===Ie)c=Gt,l=!0;else{let t=n.subarray(e,e+f|0),s=d(t);b=A|0,p=a-N|0,Re(s);return}break}case As:{let{procedure:t}=r,{description:s}=t,{generics:o}=s;c=Gt,D(),r=o,I=Wt,c=qt,l=!0;break}case Gt:{let{procedure:t}=r,{description:s}=t,{inputs:o}=s;c=Ts,D(),r=o,I=Jt,c=Qt,l=!0;break}case Ts:{let{procedure:t,stack:s}=r,{description:o}=t,{inputs:u}=o;for(let R of u){let{name:g,data:G}=R;s.set(g,G)}u.length>0&&r.procedure.name===Uo&&(b=A|0,p=a-N|0,ue("Destructors should not return any values. Your destructor appears to return a number. Please adhere to Flogram's conventions and correct your code."));let E=n.subarray(e,e+f|0),_=n[e];if(z(E,Do)){c=Ns;return}if(_===Fe){c=Vt,l=!0;return}b=A|0,p=a-N|0;let T=d(E);w(T,Ho);break}case Ns:{let{procedure:t}=r,{description:s}=t,{outputs:o}=s;c=Vt,D(),r=o,I=Jt,c=Qt,l=!0;break}case Vt:{let t=n[e],{outputs:s}=r.procedure.description;if(s.length>0&&r.procedure.name===Qs&&(b=A|0,p=a-N|0,ue(`Constructors in Flogram should not return any values. Your constructor seems to return ${s.length} outputs. Please correct your code according to Flogram rules.`)),s.length>0&&r.procedure.name===Uo&&(b=A|0,p=a-N|0,ue(`Destructors in Flogram should not return any values. Your destructor seems to return ${s.length} outputs. Please correct your code according to Flogram rules.`)),t===Fe){c=Is;return}b=A|0,p=a-N|0;let o=n.subarray(e,e+f|0),u=d(o);w(u,ct);break}case Is:{if(n[e]===be){c=ds;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,jt);break}case ds:{let{procedure:t,stack:s}=r,{description:o}=t,{statements:u}=o;c=Ss,D(),r=Object.seal({procedure:t,stack:s,statements:u}),I=je,c=Tt,l=!0;break}case Ss:{let{procedure:t}=r,{name:s}=t;y();let{object:o,mapNameMember:u}=r,{description:E}=o,{members:_}=E;u.has(s)&&(b=A|0,p=a-N|0,to(s));let T=Object.seal({name:t.name,data:{name:t.name,type:t.type,path:t.path}});_.push(t),u.set(s,T),l=!0;break}}},rl=(a,n,e,f)=>{switch(c){case Dc:{let t=n.subarray(e,e+f|0);if(z(t,yt)){D(),I=an,c=Mc,l=!0;return}break}case Mc:{if(n[e]===be){y();return}break}}},al=(a,n,e,f)=>{switch(c){case ps:{let t=new Map,s=Je.join("."),o=Object.seal({generics:[],inputs:[],locals:[],outputs:[],statements:[]}),u=Object.seal({type:nt,name:et,path:s,description:o});r=Object.seal({procedure:u,stack:t}),c=bs;break}case bs:{let{procedure:t}=r,s=n.subarray(e,e+f|0),o=d(s);if(Oe(a,n,e,f))return;t.name=o,c=Os;break}case Os:{if(n[e]===He)c=As,l=!0;else if(n[e]===Ie)c=Gt,l=!0;else{let t=n.subarray(e,e+f|0),s=d(t);b=A|0,p=a-N|0,Re(s);return}break}case As:{let{procedure:t}=r,{description:s}=t,{generics:o}=s;c=Gt,D(),r=o,I=Wt,c=qt,l=!0;break}case Gt:{let{procedure:t}=r,{description:s}=t,{inputs:o}=s;c=Ts,D(),r=o,I=Jt,c=Qt,l=!0;break}case Ts:{let{procedure:t,stack:s}=r,{description:o}=t,{inputs:u}=o;for(let R of u){let{name:g,data:G}=R;s.set(g,G)}let E=n.subarray(e,e+f|0),_=n[e];if(z(E,Do)){c=Ns;return}if(_===Fe){c=Vt,l=!0;return}b=A|0,p=a-N|0;let T=d(E);w(T,Ho);break}case Ns:{let{procedure:t}=r,{description:s}=t,{outputs:o}=s;c=Vt,D(),r=o,I=Jt,c=Qt,l=!0;break}case Vt:{if(n[e]===Fe){c=Is;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case Is:{if(n[e]===be){c=ds;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,jt);break}case ds:{let{procedure:t,stack:s}=r,{description:o}=t,{statements:u}=o;c=Ss,D(),r=Object.seal({procedure:t,stack:s,statements:u}),I=je,c=Tt,l=!0;break}case Ss:{let{procedure:t}=r;if(v.push(t),y(),r&&r.export){let s=Object.freeze({name:t.name,type:t.type,path:Su});K.push(s);let o=_e;y(),_e===o&&y(),_e<o&&D()}l=!0;break}}},ul=(a,n,e,f)=>{switch(c){case Tt:{if(Ds(a,sn)){b=A|0,p=a-N|0,so(a);return}_e=pt(a),c=Yc,l=!0;break}case Yc:{let t=n.subarray(e,e+f|0);if(Bs(a)){y(),l=!0;return}D(),I=ke,c=qo,l=!0;break}case lr:{let{statements:t}=r,s={type:Lf};t.push(s),y();break}case Gr:{let{procedure:t,stack:s,statements:o}=r,u=Object.seal({type:Uf,condition:null,statements:[]});o.push(u),D(),r=Object.seal({blockWhile:u,procedure:t,stack:s}),c=Vr;break}case Vr:{let{stack:t,procedure:s}=r;c=gr,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case gr:{if(n[e]===Fe){let{value:E}=r;y();let{blockWhile:_}=r;_.condition=E,c=Kr;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case Kr:{let{blockWhile:t,procedure:s,stack:o}=r,{statements:u}=t;if(n[e]===be){c=Cn,D(),r=Object.seal({procedure:s,stack:o,statements:u}),I=je,c=Tt;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Pt);break}case Dr:{let{procedure:t,stack:s,statements:o}=r,u=Object.seal({type:vf,iterator:null,index:null,collection:null,statements:[]});o.push(u),D(),r=Object.seal({blockForeach:u,procedure:t,stack:new Map(JSON.parse(JSON.stringify(Array.from(s))))}),c=Mr;break}case Mr:{let t=n.subarray(e,e+f|0),{blockForeach:s,stack:o}=r,u=d(t);if(o.has(u)){xt(u),b=A|0,p=a-N|0;return}s.iterator=u,c=yr;break}case yr:{let t=n.subarray(e,e+f|0);if(z(Jf,t)){c=jr;return}l=!0,c=Rn;break}case jr:{let{blockForeach:t,stack:s,procedure:o}=r,{description:u}=o,{locals:E}=u,_=n.subarray(e,e+f|0),T=d(_);if(s.has(T)){xt(T),b=A|0,p=a-N|0;return}let P={name:T,data:{type:Me,name:"I32",path:Se}};s.set(T,P.data),E.push(P),t.index=T,c=Rn;break}case Rn:{let t=n.subarray(e,e+f|0);if(z(Xf,t)){c=Fr;return}b=A|0,p=a-N|0;let s=d(t);w(s,ct);break}case Fr:{let{stack:t,procedure:s}=r;c=wr,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case wr:{if(n[e]===Fe){let{value:E,stack:_,procedure:T}=r,{description:P}=T,{locals:R}=P;y();let{blockForeach:g}=r;g.collection=E;let{data:G}=Ee(E),V={name:g.iterator,data:{type:Me,name:G?.name,path:G?.path}};_.set(V.name,V.data),R.push(V),c=Yr;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case Yr:{let{blockForeach:t,procedure:s,stack:o}=r,{statements:u}=t;if(n[e]===be){c=Cn,D(),r=Object.seal({procedure:s,stack:o,statements:u}),I=je,c=Tt;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Pt);break}case Cn:{y(),y(),l=!0;break}case cr:{let{procedure:t,stack:s,statements:o}=r,u=Object.freeze({type:df,statements:[]});o.push(u),D(),r=Object.seal({blockLoop:u,procedure:t,stack:new Map(JSON.parse(JSON.stringify(Array.from(s)))),value:0}),c=rr;break}case rr:{if(n[e]===Fe){c=ar;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case ar:{let{blockLoop:t,procedure:s,stack:o}=r,{statements:u}=t;if(n[e]===be){c=ur,D(),r=Object.seal({procedure:s,stack:o,statements:u}),I=je,c=Tt;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Pt);break}case ur:{y(),y(),l=!0;break}case Gc:{let{procedure:t,stack:s,statements:o}=r,u=Object.freeze({type:If,branches:[],values:[]});o.push(u),D(),r=Object.seal({blockCondition:u,procedure:t,stack:new Map(JSON.parse(JSON.stringify(Array.from(s)))),value:0}),c=ir;break}case ir:{ce(a,n,e,f),c=fr;break}case fr:{ce(a,n,e,f);let t=n[e],s=n.subarray(e,e+f|0);if(t===Ie){c=Er,fe();return}if(z(s,Bo)){c=pn,fe();return}break}case br:{let{stack:t,branches:s,procedure:o}=r,u={type:ko,statements:[],values:[]};s.push(u),r=Object.seal({branch:u,stack:t,procedure:o}),c=dn;break}case Er:{let t=n.subarray(e,e+f|0),{blockCondition:s,stack:o,procedure:u}=r,{branches:E}=s,_={type:Po,statements:[],values:[]};E.push(_);let T=d(t),P={type:Bt,name:T,path:Se,inputs:[]},R=v.find(g=>g.type===nt&&g.name===T);R&&(P.path,R.path),r=Object.seal({blockCondition:s,branch:_,stack:o,value:P,procedure:u}),c=_r;break}case _r:{if(n[e]===Ie){c=Ln;return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,Ve);break}case Ln:{let{stack:t,procedure:s}=r;if(n[e]===de){c=In,l=!0;return}c=Lr,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case Lr:{let{value:t}=r;y();let{value:s,stack:o,procedure:u}=r,{inputs:E}=s;E.push(Te(t));let _=n[e];if(_===de){c=In,l=!0;return}if(_===Ge){c=Ln;return}b=A|0,p=a-N|0;let T=n.subarray(e,e+f|0),P=d(T);w(P,on);break}case In:{let{value:t,branch:s,stack:o}=r,{values:u}=s,{name:E}=t,_=ts[E];if(_){let g=t.inputs.map(V=>Ee(V))||[],G=_.find(V=>V.description&&Array.isArray(V.description.inputs)?V.description.inputs.length!==g.length?!1:V.description.inputs.every((J,q)=>J.data.name===g[q].data.name):!1);G&&v.push(G)}if(u.push(t),ge("Bool"),n[e]===de){c=dn;return}b=A|0,p=a-N|0;let T=n.subarray(e,e+f|0),P=d(T);w(P,ze);break}case dn:{let t=n.subarray(e,e+f|0);if(n[e]===Fe){c=mr;return}b=A|0,p=a-N|0;let s=d(t);w(s,Ft);break}case mr:{let{branch:t,procedure:s,stack:o}=r,{statements:u}=t;if(n[e]===be){c=pr,D(),r=Object.seal({procedure:s,stack:o,statements:u}),I=je,c=Tt;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Pt);break}case pr:{let{branch:t}=r;if(t.type===ko){y(),y();let{branches:s,...o}=r;r=Object.seal(o)}else{let{blockCondition:s}=r,{branches:o}=s;y(),y(),r=Object.seal({...r,branches:o})}l=!0;break}case pn:{let{blockCondition:t,stack:s}=r,{values:o}=t,u=n.subarray(e,e+f|0),E=d(u);if(Oe(a,n,e,f))return;if(s.has(E)){let _=Object.freeze({type:st,name:E});o.push(_)}c=Vc;break}case Vc:{if(n[e]===Ge){c=pn;return}let s=n.subarray(e,e+f|0);if(z(s,Bo)){c=gc,D(),c=Kc,l=!0;return}b=A|0,p=a-N|0;let o=d(s);w(o,bE);break}case gc:{y(),y(),l=!0;break}case Kc:{let{blockCondition:t,procedure:s,stack:o}=r,{branches:u}=t,E=Object.seal({type:Po,statements:[],values:[]});u.push(E),r=Object.seal({blockCondition:t,branchMatch:E,procedure:s,stack:o}),c=bn;break}case bn:{let{blockCondition:t,branchMatch:s,stack:o}=r,{values:u}=t,{values:E}=s,_=n.subarray(e,e+f|0),T=d(_);if(Oe(a,n,e,f))return;if(o.has(T)){let P=Object.freeze({type:st,name:T});E.push(P)}else{let{procedure:P}=r,{description:R}=P,{outputs:g}=R,G=T,{name:V,path:J}=g[0].data,q=Object.freeze({type:ye,literal:G,name:V,path:J});E.push(q)}c=Hc;break}case Hc:{let t=n[e];if(t===Ge){c=bn;return}if(t===Fe){c=$c;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ct);break}case $c:{let{branchMatch:t,procedure:s,stack:o}=r,{statements:u}=t;if(n[e]===be){c=zc,D(),r=Object.seal({procedure:s,stack:o,statements:u}),I=je,c=Tt;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Pt);break}case zc:{y();let t=n.subarray(e,e+f|0),s=d(t);l=!0;break}case Xc:{c=Jc;break}case Jc:{if(n[e]===be){y();return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Pt);break}case Wc:{let{procedure:t,stack:s,statements:o}=r,u=Object.seal({type:Pf,values:[]});o.push(u),D();let E=A|0,_=a-N|0,T=Object.freeze({row:E,column:_});r=Object.seal({commandReturn:u,coordinates:T,procedure:t,stack:s}),c=On;break}case On:{let{stack:t,procedure:s}=r;if(n[e]===be){c=An,l=!0;return}c=Zc,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case Zc:{let{value:t}=r;y();let{commandReturn:s,stack:o,procedure:u}=r,{values:E}=s;E.push(Te(t));let _=n[e];if(_===be){c=An,l=!0;return}if(_===Ge){c=On;return}b=A|0,p=a-N|0;let T=n.subarray(e,e+f|0),P=d(T);w(P,on);break}case An:{let{commandReturn:t,coordinates:s,procedure:o}=r,{values:u}=t,{description:E}=o,{outputs:_}=E;u.length!==_.length&&(b=s.row|0,p=s.column|0,Ju(_.length,u.length));for(let T of _){let P=_.indexOf(T),R=Ee(u[P]);R&&R.data.name!=T.data.name&&(b=s.row|0,p=s.column|0,ue(`Mismatching types provided on procedure's return. Procedure expected ${T.data.name} at index ${P} but was provided with a rather ${R.data.name}. Please review to provide matching types.`))}y(),y();break}case Tr:{let t=n.subarray(e,e+f|0),{procedure:s,stack:o,statements:u}=r,E={type:st,name:null},_=Object.seal({type:cs,target:E,source:null});r=Object.freeze({declarationValue:_,procedure:s,stack:o,statements:u,target:E}),z(wo,t)?(E.mutable=!0,c=Tn):(l=!0,c=kn);break}case kn:{ce(a,n,e,f),c=Sr;break}case Sr:{if(ce(a,n,e,f),n[e]===Ie){let{procedure:t,stack:s,statements:o}=r;c=hr;let u=Object.seal({type:Co,expression:null});r=Object.seal({stack:s,procedure:t,drop:u,value:null,statements:o}),D(),I=Ue,c=ks,fe();return}if(n[e]===xe){c=kn;return}c=Tn,fe();break}case hr:{let{statements:t,drop:s,value:o}=r;s.expression=o,t.push(s),y();break}case Tn:{let{stack:t}=r,s=n.subarray(e,e+f|0),o=d(s),u=t.get(o);if(t.has(o)&&!u.mutable&&(F=!0),z(Yo,s)){l=!0,c=Nr;return}let{target:E}=r;E.name=o,c=Nn;break}case Nn:{let t=n[e],{procedure:s,stack:o,statements:u,target:E}=r;if(t===ft){let R=r.declarationValue,g={type:cs,target:{type:Nf,array:{type:st,name:R.target.name},index:null},source:null};r=Object.seal({declarationValue:g,procedure:s,stack:o,statements:u}),l=!0,c=sr;return}if(t===xe){let R=r.declarationValue,g=[],G=R.target;r=Object.seal({declarationValue:{type:cs,target:{type:Xs,value:G,trail:g},source:null},procedure:s,stack:o,statements:u}),D(),r=Object.seal({stack:o,trail:g,value:G}),c=Sn;return}if(t===Fe){l=!0,c=xc;return}if(t===de){let{declarationValue:R}=r;y(),r.declarationValue.target=R.target,l=!0;return}if(t===en){let R=r.declarationValue?.target&&De(r.declarationValue?.target);if(R&&R!==ot&&!o.get(R)){b=A|0,p=a-N|0,es(R);return}c=hs;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Ft);break}case Nr:{r.target.type=Js,r.target.trail=[],delete r.target.name,c=hn;break}case hn:{if(n[e]===xe){c=Ir;return}c=Pn,l=!0;break}case Ir:{let t=n.subarray(e,e+f|0),s=d(t);r.target.trail.push(s),c=dr;break}case dr:{if(n[e]===xe){c=hn,l=!0;return}c=Pn,l=!0;break}case Pn:{c=Lt,l=!0;break}case sr:{if(n[e]===ft){c=nr;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,cn);break}case nr:{let{stack:t,procedure:s}=r;c=or,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case or:{if(n[e]===is){let{value:E}=r;y();let _=Ee(E);if(_.data.mutable?r.declarationValue.target.index=Object.seal({type:it,link:E}):r.declarationValue.target.index=E,!_||!["I32","U32","I16","U16","U8","I8"].includes(_.data.name)){b=A|0,p=a-N|0,ue("Invalid index. Array index should be a valid I32 variable");return}c=Lt;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,$o);break}case Qc:{let{procedure:t,stack:s,statements:o}=r,u=Object.seal({type:Ro,link:null}),E=Object.seal({type:cs,target:u,source:null});r=Object.freeze({declarationValue:E,procedure:t,stack:s,statements:o}),c=Pr;break}case Pr:{if(n[e]===Ie){c=qc;return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,Ve);break}case qc:{let{stack:t,procedure:s}=r;c=kr,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case kr:{if(n[e]===de){let{value:u}=r;y(),r.declarationValue.target.link=u,c=Nn;return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,ze);break}case Or:{if(n[e]!==xe){y(),l=!0;return}c=Sn;break}case Sn:{let{stack:t,value:s,trail:o}=r,u=n.subarray(e,e+f|0),E=d(u),_,T,P=!1;if(s.type===st){let{name:R}=s;_=t.get(R)}if(_){let{name:R,path:g}=_,G=`${g}.${R}`,V=se.get(G);V.type===Ke&&(T=V)}if(T){let{description:R}=T,{members:g}=R;for(let G of g)if(G.name===E){P=!0;break}if(!P){b=A|0,p=a-N|0,Et(E,s.name);return}}if(s.value===ot||s.link===ot){if(!t.get(E)){b=A|0,p=a-N|0,Et(E,`${ot}(current object in definition)`);return}P=!0}if(!P){b=A|0,p=a-N|0,Et(E,s.name);return}o.push(E),c=Or;break}case xc:{let t=n.subarray(e,e+f|0),s=d(t);if(n[e]===Fe){let{target:E,stack:_}=r,{name:T}=E;if(_.has(T)){b=A|0,p=a-N|0,xt(T);return}if(n[e+1]===en&&f>1){c=Ar,l=!0;return}c=er;return}b=A|0,p=a-N|0,w(s,AE);break}case er:{let{declarationValue:t,procedure:s,stack:o}=r,{target:u}=t,{description:E}=s,{locals:_}=E,T=n.subarray(e,e+f|0),P=d(T);if(we(a,n,e,f)){b=A|0,p=a-N|0,Re(P);return}if(z(as,T)){c=Lt,D(),I=Yt,c=Wn,l=!0;return}if(z(T,At)||z(T,ht)){c=Lt,D(),I=Yt,c=Zn,l=!0;return}if(z(T,ls)){c=Lt,D(),I=Yt,c=Ou,l=!0;return}let R=ge(P);if(R){let g=Object.seal({type:Me,name:R.name,path:R.path}),G;u.mutable?G=Object.freeze({name:u.name,data:{...g,mutable:u.mutable}}):G=Object.freeze({name:u.name,data:g}),o.set(u.name,G.data),_.push(G)}c=Lt;break}case Ar:{let{declarationValue:t,procedure:s,stack:o,statements:u}=r,{target:E}=t,{description:_}=s,{locals:T}=_,P;E.mutable?(P={name:E.name,mutable:E.mutable,data:null},delete E.mutable):P=Object.seal({name:E.name,data:null}),o.set(E.name,P.data),T.push(P),r=Object.seal({declarationValue:t,procedure:s,stack:o,statements:u,inferenceValue:P}),c=hs;break}case Lt:{let t=n.subarray(e,e+f|0);if(z(t,xs)){c=hs;return}b=A|0,p=a-N|0;let s=d(t);w(s,Ft);break}case hs:{let{procedure:t,stack:s,target:o}=r,u=n[e];if(we(a,n,e,f)&&u!==ft){let E=n.subarray(e,e+f|0),_=d(E);b=A|0,p=a-N|0,Re(_);return}c=tr,D(),r=Object.seal({procedure:t,stack:s,value:null}),D(),I=ke,c=Be,l=!0;break}case tr:{if(n[e]===be){let{value:E}=r;y();let{declarationValue:_,statements:T,stack:P}=r;if(r.inferenceValue){let W=function(ee){let me;switch(ee.type){case st:{let Ne=P.get(ee.name);Ne.type===Me?me=Ne:Ne.type===ye?(me={type:Me,name:Ne.name,path:Ne.path},ee.mutable&&(me.mutable=ee.mutable)):(Ne.type===Qe||Ne.type==="Link")&&(me=Ne);let{moved:oo,...We}=me;me=We;break}case Dt:{me={type:Me,name:St,path:Se};break}case ye:{me={type:Me,name:ee.name,path:ee.path},ee.layout===Qe&&(me.type=Qe,me.length=ee.literal.length);break}case qs:{me={type:Me,name:"I32",path:Se};break}case vo:{me={type:ee.type,name:ee.data.name,path:ee.data.path};break}case Zs:{me=W(ee.value);break}case Bt:{let Ne=We=>v.find(lt=>lt.type===nt&&lt.name===We.name)?.description.outputs[0]?.data,oo=(We,lt)=>{let Ze;for(let _t=0;lt&&_t<=We.name.length-2;_t++)lt=P.get(We.name[_t]),lt&&(Ze=k.find(Ct=>Ct.type===Ke&&Ct.name===lt.name));return Ze?.description.members?.find(_t=>_t.name===We.name[We.name.length-1])?.description.outputs[0]?.data};if(ee.path!==Se){if(me=Ne(ee),typeof ee.name=="object"){let We=P.get(ee.name[0]);me=oo(ee,We)}}else if(Ko.has(ee.name))me={type:Me,name:"Bool",path:Se},ge(me.name);else{let We=ee.inputs.map(Ze=>Ee(Ze)),lt=v.find(Ze=>Ze.description&&Array.isArray(Ze.description.inputs)?Ze.description.inputs.length!==We.length||Ze.name!=ee.name?!1:Ze.description.inputs.every((_t,Ct)=>_t.data.name===We[Ct].data.name):!1);if(lt){let{description:Ze}=lt,{outputs:_t}=Ze,Ct=_t[0],{data:ml}=Ct,{name:pl,path:bl}=ml;me={type:Me,name:pl,path:bl}}else{b=A|0,p=a-N|0,ue(`Unable to find expression matching: ${We.map(Ze=>Ze.data.name)}`);return}}break}case dt:{me={...W(ee.value),type:Lo},ee.unsafe&&(me.unsafe=ee.unsafe),ee.smart&&(me.smart=ee.smart);break}case it:{let Ne=P.get(ee.link);me={type:Me,name:Ne.name,path:Ne.path};break}case Ws:{let Ne=P.get(ee.array.name);me={type:Me,name:Ne.name,path:Ne.path};break}default:{console.log("Unhandled: ",ee.type);break}}return me},{inferenceValue:Q}=r;Q.data=W(E),Q.mutable&&(Q.data.mutable=Q.mutable,delete Q.mutable),P.set(Q.name,Q.data)}let{target:R}=_,g=De(R),G=De(E);if(P.has(G)){let Q=k.find(W=>W.name===P.get(G).name&&W.type===Ke);Q&&!Q.copy&&(b=A|0,p=a-N|0,Qu(G))}g&&g!==ot&&(Q=>{if(!P.get(Q)?.mutable&&F){b=A|0,p=a-N|0,Wu(Q);return}})(g),_.source=E;let J=Ee(R),q=Ee(E),Pe=(Q,W)=>{if(Q===W)return!0;if(typeof Q!="object"||Q===null||typeof W!="object"||W===null)return!1;if(Q.type==="local"&&W.type==="local")return Q.name===W.name;let ee=Object.keys(Q).filter(Ne=>Ne!=="mutable"),me=Object.keys(W).filter(Ne=>Ne!=="mutable");if(ee.length!==me.length)return!1;for(let Ne of ee)if(!me.includes(Ne)||!Pe(Q[Ne],W[Ne]))return!1;return!0},ve=(Q,W)=>Q.some(ee=>Pe(ee,W));if(J&&q){J.data?.mutable&&J.data.path===Se&&J.data.type!==Qe&&(ve(ie,R)||r.procedure.description.inputs.some(W=>W.name===J.name||W.name===De(R))?_.target=Object.seal({type:Ro,link:R}):q.data.path===Se&&q.data.type!==Qe&&(_.source=Object.seal({type:dt,value:E}),ie.push(R))),q.data?.mutable&&q.data.path===Se&&q.data.type!==Qe&&(_.source=Object.seal({type:it,link:E}));let Q=(W,ee)=>W.slice(1)===W.slice(1)||W.charAt(0)===W.charAt(0)||(W==="FP64"||W==="FP32"||W==="I64"||W==="U64"||W==="I32"||W==="U32"||W==="I16"||W==="U16"||W==="I8"||W==="U8")&&ee==="I32"||W==="FP64"&&ee=="FP32";if(J.data.name!==q.data.name&&!(J.data.type===q.data.name||J.data.name===q.data.type)&&!(q.data.type===ye&&Q(J.data.name,q.data.name))){b=A|0,p=a-N|0,qu(J.data.name,q.data.name);return}}T.push(_),y();return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,TE);break}case Rr:{let{stack:t,procedure:s}=r,o=Object.seal({type:Rf,unsafe:!0,value:null}),u=n.subarray(e,e+f|0);z(u,Vo)&&(o.unsafe=!1),D(),r=Object.seal({free:o,stack:t,procedure:s}),c=Cr;break}case Cr:{if(n[e]===Ie){let{stack:E,procedure:_}=r;c=vr,D(),r={stack:E,procedure:_,value:null},D(),c=Be,I=ke;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case vr:{let{value:t,stack:s}=r;y();let{free:o}=r;o.value=Te(t);let u=!0,{name:E,data:_}=Ee(t,u);if(b=A|0,p=a-N|0,_.type!==Lo){ue(`Variable '${E}' is not a link and cannot be freed. Only 'unsafe' links are freeable.`);return}if(_.unsafe!==o.unsafe){ue(`Improper free method used for link '${E}'. Unsafe links are unsafely freed with 'free!!' while safe ones are freed with 'free'. Your link(${E}) is ${_.unsafe?"un":""}safe.`);return}let T=s.get(E);T&&s.set(E,{...T,freed:!0}),c=Ur,l=!0;break}case Ur:{if(n[e]===de){let{free:E}=r;y();let{statements:_}=r;_.push(E),c=Br;break}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ze);break}case Br:{y();break}}},ll=(a,n,e,f)=>{switch(c){case mt:{let t=n.subarray(e,e+f|0),s=d(t);if(we(a,n,e,f)&&!bt.includes(s)){b=A|0,p=a-N|0,Re(s);return}if(c=Hr,z(At,t)){r.data=Object.seal({type:s,unsafe:!0});return}if(z(ht,t)){r.data=Object.seal({type:s});return}if(z(ls,t)){r.data=Object.seal({type:s});return}if(z(as,t)){r.data={type:s};let u=i.length;if(i[u-1].situationGeneral===4){D();let{data:_}=r;r={isEnum:!0,type:_},l=!0,c=Wn,I=Yt;return}return}let o=ge(s);if(o){o.type===rs?r.data=Object.seal({type:Me,name:s,path:o.path}):r.data=Object.seal({type:Me,name:o.name,path:o.path}),r.mutable&&(r.data=Object.seal({...r.data,type:d(ht),unsafe:!0,mutable:r.mutable}));return}console.log("Failed to find type",s),b=A|0,p=a-N|0,es(s),y();break}case Hr:{let t=n.subarray(e,e+f|0);if(n[e]===He){l=!0,c=$r;return}y(),l=!0;break}case $r:{if(n[e]===He){c=zr;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Xt);break}case zr:{let t=n.subarray(e,e+f|0),s=d(t),o=ge(s);if(o){let{data:E}=r,{unsafe:_,type:T,smart:P}=E,R=ne(T);if(z(R,At))r.data=Object.seal({type:T.replace(/!!$/,""),name:o.name,path:o.path,segment:et,unsafe:_});else if(z(R,ht))r.data=Object.seal({type:T,name:o.name,path:o.path,segment:et});else if(z(R,us))r.data=Object.seal({type:T,name:o.name,path:o.path,segment:et,smart:P});else{if(k.find(G=>G.type===Ke&&G.name===E.name)){c=Xr,D(),r=[],D(),r={data:null},D(),l=!0,c=mt;return}r.data=Object.seal({type:T,name:o.name,path:o.path})}r.mutable&&(r.data=Object.seal({...r.data,mutable:r.mutable}));return}let u=n[e];if(u===Ge)return;if(u===tt){l=!0,c=vn;return}r.data.segment!==void 0&&(r.data.segment=s),c=vn;break}case Xr:{let t=n[e],{data:s}=r;if(y(),r.push(s),t===Ge){D(),r={data:null},D(),c=mt;return}if(t===tt){let _=r;y();let T=k.find(R=>R.type===Ke&&R.name===r.data.name);if(!(T.description?.generics?.length===_.length)){b=A|0,p=a-N|0,ue(`Generic object '${name}' was provided with fewer or more than expect number of types. Expected: ${T.description.generics.length}. Got: ${_.length}`);return}r.data.name=Xe(r.data.name,_),y();return}b=A|0,p=a-N|0;let o=n.subarray(e,e+f|0),u=d(o);w(u,wt);break}case vn:{if(n[e]===tt){y();return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,wt);break}}},il=(a,n,e,f)=>{switch(c){case Wn:{let t=n.subarray(e,e+f|0),s=d(t),o=Object.seal({type:s,name:null,length:null,path:Se});r=Object.seal({...r,type:o}),c=ou;break}case ou:{let t=n.subarray(e,e+f|0);if(n[e]===He){c=cu;return}b=A|0,p=a-N|0;let s=d(t);w(s,Xt);break}case cu:{let t=n.subarray(e,e+f|0),s=d(t);if(we(a,n,e,f)&&!bt.includes(s)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}ge(s),r.type.name=s,c=ru;break}case ru:{let t=n.subarray(e,e+f|0);if(n[e]===tt){c=au;return}b=A|0,p=a-N|0;let s=d(t);w(s,wt);break}case au:{let t=n.subarray(e,e+f|0);if(n[e]===Ie){c=uu;return}b=A|0,p=a-N|0;let s=d(t);w(s,Ve);break}case uu:{let t=n.subarray(e,e+f|0);if(z(jo,t)){c=lu;return}b=A|0,p=a-N|0;let s=d(t);w(s,fs);break}case lu:{let t=n.subarray(e,e+f|0);if(z(xs,t)){c=iu;return}b=A|0,p=a-N|0;let s=d(t);w(s,Ft);break}case iu:{if(we(a,n,e,f)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}let t=n.subarray(e,e+f|0),s=d(t);r.type.length=s,c=fu;break}case fu:{let t=n.subarray(e,e+f|0);if(n[e]===de){c=Eu,l=!0;return}b=A|0,p=a-N|0;let s=d(t);w(s,ze);break}case Eu:{if(r.isEnum){let{type:P}=r;y(),r.data=P;return}let{declarationValue:t,procedure:s,stack:o}=r,{target:u}=t,{description:E}=s,{locals:_}=E,T;u.mutable?T=Object.freeze({name:u.name,data:{...r.type,mutable:u.mutable}}):T=Object.freeze({name:u.name,data:r.type}),o.set(u.name,T.data),_.push(T),y();break}case Zn:{let t=n.subarray(e,e+f|0),o={type:d(t).replace(/!!$/,""),path:Se};z(t,At)&&(o.unsafe=!0),o=Object.seal({...o,name:null,segment:null});let{declarationValue:u,stack:E,procedure:_}=r;r=Object.seal({declarationValue:u,stack:E,procedure:_,type:o}),c=_u;break}case _u:{let t=n.subarray(e,e+f|0);if(n[e]===He){c=mu;return}b=A|0,p=a-N|0;let s=d(t);w(s,Xt);break}case mu:{let t=n.subarray(e,e+f|0),s=d(t);if(we(a,n,e,f)&&!bt.includes(s)){b=A|0,p=a-N|0,Re(s);return}ge(s),r.type.name=s,c=pu;break}case pu:{let t=n.subarray(e,e+f|0);if(n[e]===Ge){c=bu;return}if(n[e]===tt){c=Qn,l=!0;return}b=A|0,p=a-N|0;let s=d(t);w(s,ze);break}case bu:{if(we(a,n,e,f)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}let t=n.subarray(e,e+f|0),s=d(t);r.type.segment=s,c=Qn;break}case Qn:{let t=n.subarray(e,e+f|0);if(n[e]===tt){if(r.declarationValue){let{declarationValue:u,procedure:E,stack:_}=r,{target:T}=u,{description:P}=E,{locals:R}=P,g;T.mutable?g=Object.freeze({name:T.name,data:{...r.type,mutable:T.mutable}}):g=Object.freeze({name:T.name,data:r.type}),_.set(T.name,g.data),R.push(g),y()}else{let{type:u}=r;y(),r.data=u}return}b=A|0,p=a-N|0;let s=d(t);w(s,wt);break}case Ou:{let t=n.subarray(e,e+f|0),s=d(t),o=Object.seal({type:s,path:null,name:null}),{declarationValue:u,stack:E,procedure:_}=r;r=Object.seal({declarationValue:u,stack:E,procedure:_,type:o}),c=Au;break}case Au:{let t=n.subarray(e,e+f|0);if(n[e]===He){c=Tu;return}b=A|0,p=a-N|0;let s=d(t);w(s,Xt);break}case Tu:{let t=n.subarray(e,e+f|0),s=d(t);if(we(a,n,e,f)){b=A|0,p=a-N|0,Re(s);return}let o=ge(s);r.type.name=s,r.type.path=o.path,c=Nu;break}case Nu:{let t=n.subarray(e,e+f|0);if(n[e]===tt){let{declarationValue:u,procedure:E,stack:_}=r,{target:T}=u,{description:P}=E,{locals:R}=P,g;T.mutable?g=Object.freeze({name:T.name,data:{...r.type,mutable:T.mutable}}):g=Object.freeze({name:T.name,data:r.type}),_.set(T.name,g.data),R.push(g),y();return}b=A|0,p=a-N|0;let s=d(t);w(s,wt);break}}},fl=(a,n,e,f)=>{switch(c){case Ps:{let t=Object.seal({type:dt,unsafe:null,smart:null,value:null}),s=n.subarray(e,e+f|0);z(s,At)&&(t.unsafe=!0),z(s,us)&&(t.smart=!0),r.value=t,c=Da;break}case Da:{if(n[e]===Ie){c=Jr;return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,Ve);break}case Jr:{let{stack:t,procedure:s}=r,o=n.subarray(e,e+f|0),u=d(o),E=t.get(u);E&&E.moved&&(b=A|0,p=a-N|0,ue(`Moved variable used as value. Variable '${u}' was used while having been moved before.`)),c=Ma,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case Ma:{if(n[e]===de){let{value:u}=r;y(),r.value.value=Te(u),y();return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,Ve);break}case Wr:{let t=Object.seal({type:it,link:null});r.value=t,c=ya;break}case ya:{if(n[e]===Ie){c=Zr;return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,Ve);break}case Zr:{let{stack:t,procedure:s}=r,o=n.subarray(e,e+f|0),u=d(o),E=t.get(u);E&&E.moved&&(b=A|0,p=a-N|0,ue(`Moved variable used as value. Variable '${u}' was used while having been moved before.`)),c=ja,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case ja:{if(n[e]===de){let{value:u}=r;y(),r.value.link=Te(u),y();return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,ze);break}case ua:{let t=Object.seal({type:Js,trail:[]});r.value=t,c=wn;break}case wn:{if(n[e]===xe){c=la;return}c=Yn,l=!0;break}case la:{let t=n.subarray(e,e+f|0),s=d(t);r.value.trail.push(s),c=ia;break}case ia:{if(n[e]===xe){c=wn,l=!0;return}c=Yn,l=!0;break}case Yn:{y(),l=!0;break}case ea:{let t=n.subarray(e,e+f|0),s=d(t),o=k.find(P=>P.name===s);if(!o){b=A|0,p=a-N|0,es(s);return}let{description:u}=o,{members:E}=u,_=E.some(P=>P.name==="constructor"&&P.type===nt),T=Object.seal({type:ye,explicitConstructor:_,name:s,literal:[],path:o.path});r.value=T,c=ha;break}case ha:{let t=n[e];if(t===Ie){c=Dn,l=!0;return}if(t===He){c=Pa;return}break}case Pa:{D(),r=[],c=ka,l=!0;break}case ka:{c=La,D(),r={data:null},D(),I=kt,c=mt,l=!0;break}case La:{let t=n[e],{data:s}=r;if(y(),r.push(s),t===Ge){c=Rs;return}if(t===tt){let o=r;y();let{value:u}=r,{name:E}=u,_=k.find(T=>T.type===Ke&&T.name===E);if(_){if(!(_.description.generics.length===o.length)){b=A|0,p=a-N|0,ue(`Generic procedure '${E}' was provided with fewer or more than expect number of types. Expected: ${genericProcedure.description.generics.length}. Got: ${o.length}`);return}let P=Xe(_.name,o);if(!k.some(R=>R.name===P)){let R=rt(_,o);R.name=P,R.description.generics=[],k.push(R)}u.name=P}c=Dn;break}}case Dn:{let{value:t}=r,{explicitConstructor:s,...o}=t;if(t=Object.seal(o),n[e]===Ie){if(s){c=Fa;return}c=Mn;return}b=A|0,p=a-N|0;let E=n.subarray(e,e+f|0),_=d(E);w(_,Ve);break}case Mn:{if(n[e]===be)return;if(n[e]===Ge){c=yn;return}c=yn,l=!0;break}case yn:{let t=n.subarray(e,e+f|0),s=d(t),{stack:o,procedure:u}=r;D();let E=Object.seal({name:s,value:null});r={procedure:u,stack:o,prop:E},c=ta;break}case ta:{let{stack:t,procedure:s}=r;if(n[e]===en){c=sa,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke;return}b=A|0,p=a-N|0;let u=n.subarray(e,e+f|0),E=d(u);w(E,Ft);break}case sa:{let{value:t}=r;y();let{prop:s}=r;if(s.value=Te(t),y(),r.value.literal.push(s),n[e]===Ge){c=Mn;return}l=!0,c=na;break}case na:{if(n[e]===be){c=jn;return}l=!0,c=jn;break}case jn:{let t=n[e];if(b=A|0,p=a-N|0,t===de){let{value:E}=r,{literal:_}=E,T=k.find(R=>R.name===E.name&&R.type===Ke),P=T.description.members.filter(R=>R.type!==nt);if(_.length!==P.length){let R=n.subarray(e,e+f|0),g=d(R);ue(`Incorrect number of parameters for Object ${T.name}. Expected ${P.length} parameters but received ${_.length}. Please ensure you provide the correct number of parameters.`);return}for(let R of _){let g=Ee(R.value),G=_.indexOf(R),V=P.find(J=>J.name===R.name);V||ue(`Invalid member name. Name ${R.name} does not exist on object ${T.name}`),g.data.type!==ye&&g.data.name!==V.data.name&&ue(`Type mismatch in input for Object ${T.name}. At index ${G}, expected ${V.data.name} but received ${g.data.name}.`)}y();return}let s=n.subarray(e,e+f|0),o=d(s);w(o,ze);break}case Fa:{let u=function(_){let T=_.data.name,P=k.find(R=>R.name===T);if(P.type===Ke){let R=[],{members:g}=P.description;for(let G of g)G.data&&R.push({name:G.name,value:u(G)});return{type:ye,name:T,literal:R,path:_.data.path}}else if(_.data.type===Qe){let R=parseInt(_.data.length,10);return{type:ye,literal:Array(R).fill(Iu),name:T,layout:Qe,path:_.data.path}}else if(_.data.type===St){let R=parseInt(_.data.length,10);return{type:ye,literal:Array(R).fill(et),name:T,path:_.data.path}}else return{type:ye,literal:Iu,name:T,path:_.data.path}},{value:t}=r,{literal:s,name:o}=t,E=k.find(_=>_.name===o);if(E){let{description:_}=E,{members:T}=_;for(let ve of T)ve.data&&s.push({name:ve.name,value:u(ve)});y(),y();let{stack:P,procedure:R,statements:g,declarationValue:G,inferenceValue:V}=r,{target:J}=G;V&&(V.data={type:Me,name:o,path:E.path},V.mutable&&(V.data.mutable=V.mutable),r.stack.set(J.name,V.data)),G.source=t,g.push(G),D();let q=Object.seal({type:Bt,name:[J.name,Qs],path:E.path,inputs:[]}),Pe=Object.seal({type:Co,expression:q});r={stack:P,procedure:R,drop:Pe,value:q},c=$n,I=Ue,l=!0;return}break}case $n:{let{stack:t,procedure:s}=r;if(n[e]===de){c=zn,l=!0;return}c=wa,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case wa:{let{value:t}=r;y();let{value:s,stack:o,procedure:u}=r,{inputs:E}=s;E.push(Te(t));let _=n[e];if(_===de){c=zn,l=!0;return}if(_===Ge){c=$n;return}b=A|0,p=a-N|0;let T=n.subarray(e,e+f|0),P=d(T);w(P,on);break}case zn:{let{value:t,stack:s,drop:o}=r,u=s.get(t.name[0]);if(u){let P=k.find(V=>V.name===u.name),R=P.description.members.find(V=>V.name===Qs),g=t.inputs.filter(V=>V.type===ye);for(let V of g){let J=t.inputs.indexOf(V);J>=0&&t.inputs[J]&&(t.inputs[J]={...t.inputs[J],name:R.description.inputs[J]?.data?.name||V.name,path:R.description.inputs[J]?.data?.path||V.path})}let G=t.inputs.map(V=>Ee(V))||[];if(R.description.inputs.length!==G.length){b=A|0,p=a-N|0,ue(`Mismatching number of parameters passed to constructor of object '${P.name}'. Expected: ${R.description.inputs.length}, Got: ${G.length}`);return}for(let V of R.description.inputs){let J=R.description.inputs.indexOf(V);if(V.data.name!==G[J].data.name){b=A|0,p=a-N|0,ue(`Input type mismatch on index '${J+1}'. '${P.name}' expected ${V.data.name}, but was provided with a rather ${G[J].data.name}`);return}}}if(n[e]===de){c=Ya;return}b=A|0,p=a-N|0;let E=n.subarray(e,e+f|0),_=d(E);w(_,ze);break}case Ya:{if(n[e]===be){let{drop:E}=r;y();let{statements:_}=r;_.push(E),y();return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,jt);break}case Qr:{let{stack:t}=r,s=n.subarray(e,e+f|0),o=d(s);if(t.has(o)){let P=t.get(o);if(P&&(P.moved&&(b=A|0,p=a-N|0,ue(`Moved variable used as value. Variable '${o}' was used while having been moved before.`)),P.freed)){b=A|0,p=a-N|0,ue(`Attempted to use '${o}', which has been freed. Ensure links are valid before use.`);return}let R=Object.freeze({type:st,name:o});r.value=R,c=Rt;return}let u=P=>{let R=i[P];if(R.item.target){let g=R.item.target,G=_.item.stack.get(g.name);if(G)return G.name}else return R.item.value?.type==="expression"?u(P-1):null},E=i.length,_=i[E-2],T;if(_.item.target){let P=_.item.target;if(P.name||P.trail?.length===1){let R=_.item.stack.get(P.name||P.trail[0]);R&&(T=P.name?R.name:R.data?.name)}if(P.trail?.length>1){let R=JSON.parse(JSON.stringify(P.trail)),g=_.item.stack.get(P.trail[0]),G=k.find(J=>J.name===g.data.name&&J.path===g.data.path),V=1;for(let J=1;J<R.length;J++)g=G.description.members.find(q=>q.name===R[J]),J<R.length-1&&(G=k.find(q=>q.name===g.data.name&&q.path===g.data.path));T=g.data.name}}else _.item.value?.type==="expression"&&(T=u(E-4));if(Hs(a,n,e,f)){let P=o,R=Ye(P),g=Object.freeze({type:ye,literal:P,name:T||R,path:Se});if(!R){b=A|0,p=a-N|0;let G=n.subarray(e,e+f|0),V=d(G);w(V,rn)}ge(g.name),r.value=g,c=Rt;return}if(hu(o)){let P=Object.freeze({type:ye,literal:o,name:"Bool",path:Se});r.value=P,ge(P.name),c=Rt;return}if(n[e]===zt){c=eu,l=!0;return}if(n[e]===Zf){if(vs){if(vs=!1,c=Rt,r.value.literal.length>1){b=A|0,p=a-N|0,ue("Type Mismatch: Use single quotes for a Char (one character) in Flogram. For Strings, use double quotes or ensure there's only one character within single quotes.");return}}else vs=!0;return}if(vs){let P=Object.freeze({type:ye,literal:o,name:T||"Char",path:Se});ge(P.name),r.value=P;return}if(n[e]===ft){c=Fn,l=!0;return}b=A|0,p=a-N|0,es(o),y();break}case eu:{if(n[e]==zt){c=Jn;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case Jn:{let t=n.subarray(e,e+f|0),s=d(t);if(c=su,n[e]===zt){l=!0;return}else if(n[e]===He){l=!0;return}let o=Object.freeze({type:ye,literal:s,name:St,path:Se});r.value&&r.value.type===Dt?r.value.values.push(o):r.value=o,ge(o.name);break}case su:{let{stack:t,procedure:s}=r;if(n[e]===zt){if(r.value.type===Dt&&n[e+1]===zt){c=tu;return}y();return}else if(n[e]===He){c=nu,D(),r=Object.seal({procedure:s,stack:t,value:null}),D(),I=ke,c=Be;return}b=A|0,p=a-N|0;let o=n.subarray(e,e+f|0),u=d(o);w(u,Ve);break}case nu:{let{value:t}=r;if(y(),r.value.type!==Dt){let s=Object.seal({type:Dt,values:[]});s.values.push(r.value),r.value=s}r.value.values.push(t),c=Jn;break}case tu:{y();break}case Xn:{D(),c=Va,r={data:null},D(),I=kt,c=mt,l=!0;break}case Va:{let t=n[e],{data:s}=r;y();let{stack:o,procedure:u}=r,E=Object.seal({type:ye,literal:[],name:s.name,length:null,layout:s.type,path:s.path});if(D(),r={stack:o,procedure:u,value:E},t===Ie){c=ga;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,Ve);break}case ga:{let t=n.subarray(e,e+f|0);if(z(jo,t)){c=Ka;return}b=A|0,p=a-N|0;let s=d(t);w(s,fs);break}case Ka:{let t=n.subarray(e,e+f|0);if(z(xs,t)){c=Ha;return}b=A|0,p=a-N|0;let s=d(t);w(s,Ft);break}case Ha:{if(we(a,n,e,f)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}let t=n.subarray(e,e+f|0),s=d(t);r.value.length=s,c=za;break}case za:{let t=n[e];if(t===Ge){let{stack:E,procedure:_}=r,T=[];D(),r={stack:E,procedure:_,value:T},c=Xa;return}if(t===de){let{value:E}=r;y(),r.value=E,c=Rt;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,ze);break}case Xa:{if(n[e]===ft){c=Ja;return}b=A|0,p=a-N|0;let t=n.subarray(e,e+f|0),s=d(t);w(s,cn);break}case Ja:{if(c=$a,n[e]===is)return;l=!0;break}case $a:{let t=n.subarray(e,e+f|0);if(n[e]===de){let{value:s}=r;y();let{value:o}=r;y(),o.literal=s,r.value=o,y();return}D(),c=Cs,l=!0;break}case Fn:{let t=n.subarray(e,e+f|0),s=d(t);if(n[e]===ft){r.value=[],c=Rt,D(),c=Cs;return}break}case Cs:{let{stack:t,procedure:s}=r;c=Ga,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case Ga:{let t=n[e],{value:s}=r;if(y(),r.value.push(s),t===Ge){c=Cs;return}if(t===is){let o=i.length,u=i[o-3],E=u.item.declarationValue?.target,_=u.item.stack.get(E?.name);if(u.situationSection!==Xn){let T;if(!_){if(r.value?.length>=1)if(T=Ee(r.value[0]),T)for(let R=1;R<r.value.length;R++){let g=Ee(r.value[R]);if(g.data.name!==T.data.name||g.data.path!==T.data.path){b=A|0,p=a-N|0,ue(`Type mismatch in array initialization. Expected all items to be of type ${T.data.name} from ${T.data.path}, but found type ${g.data.name} from ${g.data.path} at position ${R}. Ensure all items in the array have the same type.`);return}}else{b=A|0,p=a-N|0;let R=n.subarray(e,e+f|0),g=d(R);w(g,rn);return}else T={data:{name:"FP32",path:"Flogram"}};ge(T.data.name)}let P=Object.freeze({type:ye,literal:r.value,name:_?.name||T.data.name,layout:Qe,path:_?.name?Se:T.data.path});r.value=P}y();return}break}case Rt:{if(n[e]===xe){let{stack:s,value:o}=r,u=[],E=Object.freeze({type:Xs,value:o,trail:u});r.value=E,D(),r=Object.seal({stack:s,trail:u,value:o}),c=Un;return}y(),l=!0;break}case qr:{if(n[e]!==xe){let s=n.subarray(e,e+f|0),o=d(s);y(),y(),l=!0;return}c=Un;break}case Un:{let{stack:t,value:s,trail:o}=r,u=n.subarray(e,e+f|0),E=d(u),_,T,P=!1;if(s.type===st||s.type===it||s.type===dt||It(s)){let R=De(s);if(o.length===0)_=t.get(R);else{let g=o.length-1,G=t.get(R),V=k.find(Q=>Q.name===G.name),{description:J}=V,{members:q}=J,Pe=q.find(Q=>Q.name===o[g]),{data:ve}=Pe;if(_=ve,ve.freed){b=A|0,p=a-N|0,ue(`Attempted to use '${o.join(".")}', which has been freed. Ensure links are valid before use.`);return}}}if(_){let{name:R,path:g}=_,G=`${g}.${R}`,V=se.get(G);V.type===Ke&&(T=V)}if(T){let{description:R}=T,{members:g}=R;for(let G of g)if(G.name===E){P=!0;break}if(!P){b=A|0,p=a-N|0,Et(E,s.name);return}}if(s.value===ot||s.link===ot){if(!t.get(E)){b=A|0,p=a-N|0,Et(E,`${ot}(current object in definition)`);return}P=!0}if(!P){b=A|0,p=a-N|0,Et(E,s.name);return}o.push(E),c=qr;break}case oa:{let{stack:t}=r,s=n.subarray(e,e+f|0),o=d(s);if(t.has(o)){let u=Object.seal({type:Ws,array:{type:st,name:o},index:null});r.value=u}c=ca;break}case ca:{if(n[e]===ft){c=ra;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,cn);break}case ra:{let{stack:t,procedure:s}=r;c=aa,D(),r={stack:t,procedure:s,value:null},D(),c=Be,I=ke,l=!0;break}case aa:{if(n[e]===is){let{value:E}=r;y();let _=Ee(E);if(_.data.mutable?r.value.index=Object.seal({type:it,link:E}):r.value.index=E,!_||!["I32","U32","I16","U16","U8","I8"].includes(_.data.name)){b=A|0,p=a-N|0,ue("Invalid index. Array index should be a valid I32 variable");return}y();return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,$o);break}case ks:{let{stack:t}=r,s=n.subarray(e,e+f|0),o=d(s),u=v.find(_=>_.type===nt&&_.name===o),E=Object.seal({type:Bt,name:o,path:u?.path||Se,inputs:[]});if(r.value=E,t.has(o)){r.value.name=[o],c=fa;return}c=Hn;break}case fa:{let t=n.subarray(e,e+f|0),s=d(t),o=n[e];if(o===xe)return;if(o===Ie){c=Hn,l=!0;return}if(we(a,n,e,f)){b=A|0,p=a-N|0,Re(s);return}r.value.name.push(s);break}case Hn:{let t=n[e];if(t===Ie){c=Bn,l=!0;return}if(t===He){c=da;return}break}case Bn:{if(n[e]===Ie){c=Ls;return}break}case da:{D(),r=[],c=Rs,l=!0;break}case Rs:{c=Sa,D(),r={data:null},D(),I=kt,c=mt,l=!0;break}case Sa:{let t=n[e],{data:s}=r;if(y(),r.push(s),t===Ge){c=Rs;return}if(t===tt){let o=r;y();let{value:u}=r,{name:E}=u,_=v.find(T=>T.type===nt&&T.name===E);if(_){if(!(_.description.generics.length===o.length)){b=A|0,p=a-N|0,ue(`Generic procedure '${E}' was provided with fewer or more than expect number of types. Expected: ${_.description.generics.length}. Got: ${o.length}`);return}let P=Xe(_.name,o);if(!v.some(R=>R.name===P)){let R=rt(_,o);R.name=P,R.description.generics=[],v.push(R)}u.name=P}c=Bn;break}}case Ls:{let t=n[e];if(t===be)return;if(t===de){let u=r.value?.inputs?.map(G=>Ee(G))||[],[E,..._]=u,{value:T}=r,{name:P}=T,R=ts[P],g=(G,V,J,q)=>{for(let Pe in G.description?.members){let ve=[G.description.members[Pe].data.name,...V.map(Q=>Q.description.members[Pe].data.name)];if(ve.some(Q=>!bt.includes(Q))){let Q=ve.map(W=>k.find(ee=>ee.name===W));Q.every(Boolean)&&g(G,Q,J,q)}else{let Q=J.find(W=>W.description&&Array.isArray(W.description.inputs)?W.description.inputs.length!==ve.length?!1:W.description.inputs.every((ee,me)=>ee.data.name===ve[me]):!1);if(Q)v.push(Q),X.set(q,Q);else{b=A|0,p=a-N|0,Kt(`${ve.join(", ")} in ${q}`);return}}}};if(R){let G=R.find(V=>V.description&&Array.isArray(V.description.inputs)?V.description.inputs.length!==u.length?!1:V.description.inputs.every((J,q)=>J.data.name===u[q].data.name):!1);if(G)v.push(G),X.set(P,G);else if(u.length>=1){if(u.some(V=>V.data.name!==E.data.name)){b=A|0,p=a-N|0,xu(u.map(V=>V.data?.name)?.join(", "));return}if(u[0]?.data.type===rs){let V=R.find(q=>q.description.inputs.length===u.length&&u.length>0?q.description.inputs[0].data.name===du:!0),J=JSON.parse(JSON.stringify(V).replace(new RegExp(du,"g"),u[0].data.name));v.push(J),X.set(P,J)}else if(!bt.includes(E.data.name)||_.some(V=>!bt.includes(V.data.name))){let V=k.find(q=>q.name===E.data.name),J=_.map(q=>k.find(Pe=>Pe.name===q.data.name));V&&J.every(Boolean)&&g(V,J,R,P)}else{b=A|0,p=a-N|0,Kt(`${E.data.name,_.map(V=>V.data.name)?.join(", ")} in ${P}`);return}}else{b=A|0,p=a-N|0,Kt(`${u.map(V=>V.data.name)?.join(", ")} in ${P}`);return}}else if(P!==Cf){let G,V=v.find(q=>q.type===nt&&q.name===P);if(typeof P=="object"&&r.stack.has(P[0])){let q=P[P.length-2]||P[0],Pe=r.stack.get(q);if(Pe){let ve=k.find(Q=>Q.type===Ke&&Q.name===Pe.name);ve&&(r.value.path=ve.path,G=ve.description.members.find(Q=>Q.type===nt&&Q.name===P[P.length-1]))}}let J=G||V;if(J){let{description:q}=J,{inputs:Pe}=q,{value:ve}=r,{inputs:Q}=ve;if(Pe.length!==Q.length){b=A|0,p=a-N|0,ue(`Procedure '${P}' was provided with fewer or more than expect number of inputs. Please make sure you are passing the right number of inputs to the procedure.`);return}for(let W=0;W<Pe.length;W++){let ee=Ee(Q[W]);if(ee){if(Pe[W].data.name!==ee.data.name){b=A|0,p=a-N|0,ue(`The procedure '${typeof P=="object"?P.join("."):P}' received an input of incorrect type at position ${W+1}. Expected: '${Pe[W].data.name}', but received: '${ee.data.name}'.`);return}if(Pe[W].data.mutable&&!ee.data.mutable){b=A|0,p=a-N|0,ue(`The procedure '${typeof P=="object"?P.join("."):P}' received an immutable input at position ${W+1} while it expects a mutable input. Expected: mutable '${Pe[W].data.name}', received: immutable '${ee.data.name}'.`);return}Pe[W].data.mutable&&ee.data.mutable}else{b=A|0,p=a-N|0,Kt(Q[W]);return}}}else{b=A|0,p=a-N|0,no(P);return}}y();return}if(we(a,n,e,f)&&n[e]!=ft){let u=n.subarray(e,e+f|0),E=d(u);b=A|0,p=a-N|0,Re(E);return}let{procedure:s,stack:o}=r;c=xr,D(),r=Object.seal({procedure:s,stack:o,value:null}),D(),I=ke,c=Be,l=!0;break}case xr:{let{value:t}=r;y();let{value:s}=r,{inputs:o}=s;s.path!==Se?o.push(t):o.push(Te(t));let u=n[e];if(u===Ge){c=Ls;return}if(u===de){c=Ls,l=!0;return}b=A|0,p=a-N|0;let E=n.subarray(e,e+f|0),_=d(E);w(_,ze);break}case Gn:{let t=n.subarray(e,e+f|0),s=d(t),o=k.find(E=>E.type===Ut&&E.name===s);if(o){let E=Object.seal({type:"literal",literal:null,name:o.name,path:o.path});r.value=E,c=Ea;return}let u=k.find(E=>E.type===Ut&&E.description.labels.find(_=>_.name===s));if(u){let E=Object.freeze({type:"literal",literal:s,name:u.name,path:u.path});r.value=E,y();return}b=A|0,p=a-N|0,Et(s);break}case Ea:{if(n[e]===xe){c=_a;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,zo);break}case _a:{let t=n.subarray(e,e+f|0),s=d(t);if(k.find(u=>u.type===Ut&&u.name===r.value.name&&u.description.labels.find(E=>E.name===s))){r.value.literal=s,y();return}b=A|0,p=a-N|0,Et(s);break}case ma:{let t=Object.seal({type:vo,layout:null,data:null,value:null});r.value=t,c=pa;break}case pa:{if(n[e]===He){c=ba;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Xt);break}case ba:{let t=n.subarray(e,e+f|0),s=d(t);if(we(a,n,e,f)){b=A|0,p=a-N|0,Re(s);return}if(z(as,t)){c=gn,D(),r={...r,data:null},D(),I=kt,c=mt,l=!0;return}if(z(t,At)||z(t,ht)){c=gn,D(),r={...r,data:null},D(),I=Yt,c=Zn,l=!0;return}if(z(t,ls)){b=A|0,p=a-N|0;let u=n.subarray(e,e+f|0),E=d(u);w(E,fs);return}let o=ge(s);o&&(r.value.data=o),c=Vn;break}case gn:{let{data:t}=r;y(),r.value.data=t,l=!0,c=Vn;break}case Vn:{if(n[e]===tt){c=Oa;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,wt);break}case Oa:{if(n[e]===xe){c=Aa;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,zo);break}case Aa:{let t=n.subarray(e,e+f|0),s=d(t);if(r.value.layout=s,z(t,gf)){c=Kn;return}if(z(t,Kf)){c=Ta;return}b=A|0,p=a-N|0;let o=d(t);w(o,fs);break}case Ta:{if(n[e]===Ie){c=Na;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case Na:{let{procedure:t,stack:s}=r;if(we(a,n,e,f)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}c=Ia,D(),r=Object.seal({procedure:t,stack:s,value:null}),D(),I=ke,c=Be,l=!0;break}case Ia:{let{value:t}=r;if(y(),r.value.value=Te(t),n[e]===de){c=Kn;return}b=A|0,p=a-N|0;let o=n.subarray(e,e+f|0),u=d(o);w(u,ze);break}case Kn:{y(),l=!0;break}case Ra:{let t=Object.seal({type:Zs,value:null});r.value=t,c=Ca;break}case Ca:{if(n[e]===Ie){c=va;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case va:{let{procedure:t,stack:s}=r;if(we(a,n,e,f)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}c=Ua,D(),r=Object.seal({procedure:t,stack:s,value:null}),D(),I=ke,c=Be,l=!0;break}case Ua:{let{stack:t,value:s}=r;y();let o;if(s.type===st)o=s.name;else if(s.type===it)o=s.link;else if(s.type===dt)o=s.value;else{b=A|0,p=a-N|0,ue("Non-movable type passed to move procedure. Please check types that can be moved and make sure your parameter's type is one of them.");return}let u=t.get(o);if(u&&t.set(o,{...u,moved:!0}),r.value.value=Te(s),n[e]===de){c=Ba;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,ze);break}case Ba:{y(),l=!0;break}case Wa:{let t=Object.seal({type:qs,value:null});r.value=t,c=Za;break}case Za:{if(n[e]===Ie){c=Qa;return}b=A|0,p=a-N|0;let s=n.subarray(e,e+f|0),o=d(s);w(o,Ve);break}case Qa:{let{procedure:t,stack:s}=r;if(we(a,n,e,f)){let o=n.subarray(e,e+f|0),u=d(o);b=A|0,p=a-N|0,Re(u);return}c=qa,D(),r=Object.seal({procedure:t,stack:s,value:null}),D(),I=ke,c=Be,l=!0;break}case qa:{let{stack:t,value:s}=r;y();let o,u=Ee(s);if(u.data.name===St||u.data.name===Qe||u.data.layout===St||u.data.layout===Qe||u.data.type===St||u.data.type===Qe||(b=A|0,p=a-N|0,ue(`Provided type '${u.data.name}' cannot be used here as it's neither a string nor an array.`)),r.value.value=s,n[e]===de){c=xa;return}b=A|0,p=a-N|0;let _=n.subarray(e,e+f|0),T=d(_);w(T,ze);break}case xa:{y(),l=!0;break}}},El=(a,n,e,f)=>{switch(c){case yc:{let t=Object.seal({type:et,path:[]}),s=Object.seal({type:Sf,source:t,alias:et});r=Object.seal({import:s,source:t}),c=jc;break}case jc:{let t=n[e],{source:s}=r;if(t===Qf&&n[e+1]===tn){s.type=st,c=Fc,D(),r=[],D(),c=mn;return}if(we(a,n,e,f)){b=A|0,p=a-N|0,Re(name);return}s.type=hf,c=IE,l=!0;break}case Fc:{let t=n[e],s=r;y();let{source:o}=r;o.path.push(s.join("")),t===tn&&(D(),r=[],D(),c=mn),t===be&&(c=wc,l=!0);break}case mn:{let t=n[e];if(t===tn){y(),l=!0;return}if(t===be){y(),l=!0;return}let s=n.subarray(e,e+f|0),o=d(s);r.push(o);return}case wc:{let t=s=>{let o=!0,u=null,E=null,_=zu(L);_.on(gt,G=>{u=G}),_.on(Ce,G=>{E=G});let T=new B({tabSize:4});if(T.on("token",(G,V,J,q)=>{_.feed(G,V,J,q)}),T.on("error",()=>{o=!1}),T.feed(s),T.done(),T.close(),_.done(),!o||E){console.error("Tokenizer or Parser error occurred.",E);return}if(!u){console.error("Invalid representation after parsing.");return}let{exports:P,data:R}=u;for(let G of P){let V=u[G.path]?.find(J=>J.name===G.name);V&&(G.path===qn&&(k.push(V),Z({name:V.name,path:V.path,type:Me})),G.path===Su&&v.push(V))}let g=R.filter(G=>G.type===kf);k.unshift(...g)};if(U&&U.length>0){let s=U.find(o=>o.path===r.source.path.join("/"));if(s){let o=ne(s.data);t(o)}else b=A|0,p=a-N|0,ue("NO FILES WERE FOUND: ",r.source.path)}else b=A|0,p=a-N|0,ue("NO FILES WERE FOUND: ",r.source.path);y();break}}},_l=(a,n)=>{switch(a){case gt:{m.push(n);break}case Ce:{S.push(n);break}}},D=()=>{let a=Object.freeze({item:r,indentation:_e,situationGeneral:I,situationSection:c});i.push(a)},y=()=>{let a=i.pop();return r=a.item,_e=a.indentation,I=a.situationGeneral,c=a.situationSection,a},Ht=(a,n,e,f)=>{if(h)return;let t=()=>{j=!0,N=a|0,A=A+1};ae=a+f|0;let s=n[e];if(s!==Wf){if(s===be&&j){t();return}for(j=!1,l=!0;l;)switch(l=!1,I){case ke:{el(a,n,e,f);break}case Xo:{tl(a,n,e,f);break}case Jt:{nl(a,n,e,f);break}case Wt:{sl(a,n,e,f);break}case Jo:{ol(a,n,e,f);break}case an:{rl(a,n,e,f);break}case Wo:{al(a,n,e,f);break}case Zo:{cl(a,n,e,f);break}case je:{ul(a,n,e,f);break}case kt:{ll(a,n,e,f);break}case Ue:{fl(a,n,e,f);break}case Yt:{il(a,n,e,f);break}case Qo:{El(a,n,e,f);break}default:throw nn}s===be&&(ku.default.diff(r,le)&&t(),le=JSON.parse(JSON.stringify(r)))}};return Object.freeze({done:()=>{if(Ht(ae,Mt,0,Mt.length),ae=ae+Mt.length|0,Ht(ae,yt,0,yt.length),ae=ae+yt.length|0,Ht(ae,Mt,0,Mt.length),ae=ae+Mt.length|0,C){pe.emit(gt,null);return}pe.emit(gt,x)},feed:Ht,on:_l})},dE=Object.freeze({create:zu,...qf,...nE,...NE}),QE=dE;export{QE as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
