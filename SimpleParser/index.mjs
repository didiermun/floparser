var $u=Object.create;var Wn=Object.defineProperty;var zu=Object.getOwnPropertyDescriptor;var Xu=Object.getOwnPropertyNames;var Ju=Object.getPrototypeOf,Wu=Object.prototype.hasOwnProperty;var Us=(k,L)=>()=>(L||k((L={exports:{}}).exports,L),L.exports);var Qu=(k,L,v,K)=>{if(L&&typeof L=="object"||typeof L=="function")for(let H of Xu(L))!Wu.call(k,H)&&H!==v&&Wn(k,H,{get:()=>L[H],enumerable:!(K=zu(L,H))||K.enumerable});return k};var Qn=(k,L,v)=>(v=k!=null?$u(Ju(k)):{},Qu(L||!k||!k.__esModule?Wn(v,"default",{value:k,enumerable:!0}):v,k));var xn=Us((qn,Zn)=>{(function(k){var L=Object.hasOwnProperty,v=Array.isArray?Array.isArray:function(_){return Object.prototype.toString.call(_)==="[object Array]"},K=10,H=typeof process=="object"&&typeof process.nextTick=="function",x=typeof Symbol=="function",ne=typeof Reflect=="object",re=typeof setImmediate=="function",Ae=re?setImmediate:setTimeout,oe=x?ne&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(l){var _=Object.getOwnPropertyNames(l);return _.push.apply(_,Object.getOwnPropertySymbols(l)),_}:Object.keys;function fe(){this._events={},this._conf&&Ne.call(this,this._conf)}function Ne(l){l&&(this._conf=l,l.delimiter&&(this.delimiter=l.delimiter),l.maxListeners!==k&&(this._maxListeners=l.maxListeners),l.wildcard&&(this.wildcard=l.wildcard),l.newListener&&(this._newListener=l.newListener),l.removeListener&&(this._removeListener=l.removeListener),l.verboseMemoryLeak&&(this.verboseMemoryLeak=l.verboseMemoryLeak),l.ignoreErrors&&(this.ignoreErrors=l.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function Be(l,_){var d="(node) warning: possible EventEmitter memory leak detected. "+l+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(d+=" Event name: "+_+"."),typeof process<"u"&&process.emitWarning){var u=new Error(d);u.name="MaxListenersExceededWarning",u.emitter=this,u.count=l,process.emitWarning(u)}else console.error(d),console.trace&&console.trace()}var Re=function(l,_,d){var u=arguments.length;switch(u){case 0:return[];case 1:return[l];case 2:return[l,_];case 3:return[l,_,d];default:for(var h=new Array(u);u--;)h[u]=arguments[u];return h}};function Nt(l,_){for(var d={},u,h=l.length,R=_?_.length:0,y=0;y<h;y++)u=l[y],d[u]=y<R?_[y]:k;return d}function xe(l,_,d){this._emitter=l,this._target=_,this._listeners={},this._listenersCount=0;var u,h;if((d.on||d.off)&&(u=d.on,h=d.off),_.addEventListener?(u=_.addEventListener,h=_.removeEventListener):_.addListener?(u=_.addListener,h=_.removeListener):_.on&&(u=_.on,h=_.off),!u&&!h)throw Error("target does not implement any known event API");if(typeof u!="function")throw TypeError("on method must be a function");if(typeof h!="function")throw TypeError("off method must be a function");this._on=u,this._off=h;var R=l._observers;R?R.push(this):l._observers=[this]}Object.assign(xe.prototype,{subscribe:function(l,_,d){var u=this,h=this._target,R=this._emitter,y=this._listeners,Y=function(){var j=Re.apply(null,arguments),I={data:j,name:_,original:l};if(d){var r=d.call(h,I);r!==!1&&R.emit.apply(R,[I.name].concat(j));return}R.emit.apply(R,[_].concat(j))};if(y[l])throw Error("Event '"+l+"' is already listening");this._listenersCount++,R._newListener&&R._removeListener&&!u._onNewListener?(this._onNewListener=function(j){j===_&&y[l]===null&&(y[l]=Y,u._on.call(h,l,Y))},R.on("newListener",this._onNewListener),this._onRemoveListener=function(j){j===_&&!R.hasListeners(j)&&y[l]&&(y[l]=null,u._off.call(h,l,Y))},y[l]=null,R.on("removeListener",this._onRemoveListener)):(y[l]=Y,u._on.call(h,l,Y))},unsubscribe:function(l){var _=this,d=this._listeners,u=this._emitter,h,R,y=this._off,Y=this._target,j;if(l&&typeof l!="string")throw TypeError("event must be a string");function I(){_._onNewListener&&(u.off("newListener",_._onNewListener),u.off("removeListener",_._onRemoveListener),_._onNewListener=null,_._onRemoveListener=null);var r=B.call(u,_);u._observers.splice(r,1)}if(l){if(h=d[l],!h)return;y.call(Y,l,h),delete d[l],--this._listenersCount||I()}else{for(R=oe(d),j=R.length;j-- >0;)l=R[j],y.call(Y,l,d[l]);this._listeners={},this._listenersCount=0,I()}}});function _e(l,_,d,u){var h=Object.assign({},_);if(!l)return h;if(typeof l!="object")throw TypeError("options must be an object");var R=Object.keys(l),y=R.length,Y,j,I;function r(ue){throw Error('Invalid "'+Y+'" option value'+(ue?". Reason: "+ue:""))}for(var a=0;a<y;a++){if(Y=R[a],!u&&!L.call(_,Y))throw Error('Unknown "'+Y+'" option');j=l[Y],j!==k&&(I=d[Y],h[Y]=I?I(j,r):j)}return h}function Ce(l,_){return(typeof l!="function"||!l.hasOwnProperty("prototype"))&&_("value must be a constructor"),l}function we(l){var _="value must be type of "+l.join("|"),d=l.length,u=l[0],h=l[1];return d===1?function(R,y){if(typeof R===u)return R;y(_)}:d===2?function(R,y){var Y=typeof R;if(Y===u||Y===h)return R;y(_)}:function(R,y){for(var Y=typeof R,j=d;j-- >0;)if(Y===l[j])return R;y(_)}}var $e=we(["function"]),_t=we(["object","function"]);function ct(l,_,d){var u,h,R=0,y,Y=new l(function(j,I,r){d=_e(d,{timeout:0,overload:!1},{timeout:function(ae,O){return ae*=1,(typeof ae!="number"||ae<0||!Number.isFinite(ae))&&O("timeout must be a positive number"),ae}}),u=!d.overload&&typeof l.prototype.cancel=="function"&&typeof r=="function";function a(){h&&(h=null),R&&(clearTimeout(R),R=0)}var ue=function(ae){a(),j(ae)},ie=function(ae){a(),I(ae)};u?_(ue,ie,r):(h=[function(ae){ie(ae||Error("canceled"))}],_(ue,ie,function(ae){if(y)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ae!="function")throw TypeError("onCancel callback must be a function");h.push(ae)}),y=!0),d.timeout>0&&(R=setTimeout(function(){var ae=Error("timeout");ae.code="ETIMEDOUT",R=0,Y.cancel(ae),I(ae)},d.timeout))});return u||(Y.cancel=function(j){if(h){for(var I=h.length,r=1;r<I;r++)h[r](j);h[0](j),h=null}}),Y}function B(l){var _=this._observers;if(!_)return-1;for(var d=_.length,u=0;u<d;u++)if(_[u]._target===l)return u;return-1}function U(l,_,d,u,h){if(!d)return null;if(u===0){var R=typeof _;if(R==="string"){var y,Y,j=0,I=0,r=this.delimiter,a=r.length;if((Y=_.indexOf(r))!==-1){y=new Array(5);do y[j++]=_.slice(I,Y),I=Y+a;while((Y=_.indexOf(r,I))!==-1);y[j++]=_.slice(I),_=y,h=j}else _=[_],h=1}else R==="object"?h=_.length:(_=[_],h=1)}var ue=null,ie,ae,O,N,Ee,at=_[u],A=_[u+1],b,pe;if(u===h)d._listeners&&(typeof d._listeners=="function"?(l&&l.push(d._listeners),ue=[d]):(l&&l.push.apply(l,d._listeners),ue=[d]));else if(at==="*"){for(b=oe(d),Y=b.length;Y-- >0;)ie=b[Y],ie!=="_listeners"&&(pe=U(l,_,d[ie],u+1,h),pe&&(ue?ue.push.apply(ue,pe):ue=pe));return ue}else if(at==="**"){for(Ee=u+1===h||u+2===h&&A==="*",Ee&&d._listeners&&(ue=U(l,_,d,h,h)),b=oe(d),Y=b.length;Y-- >0;)ie=b[Y],ie!=="_listeners"&&(ie==="*"||ie==="**"?(d[ie]._listeners&&!Ee&&(pe=U(l,_,d[ie],h,h),pe&&(ue?ue.push.apply(ue,pe):ue=pe)),pe=U(l,_,d[ie],u,h)):ie===A?pe=U(l,_,d[ie],u+2,h):pe=U(l,_,d[ie],u,h),pe&&(ue?ue.push.apply(ue,pe):ue=pe));return ue}else d[at]&&(ue=U(l,_,d[at],u+1,h));if(ae=d["*"],ae&&U(l,_,ae,u+1,h),O=d["**"],O)if(u<h)for(O._listeners&&U(l,_,O,h,h),b=oe(O),Y=b.length;Y-- >0;)ie=b[Y],ie!=="_listeners"&&(ie===A?U(l,_,O[ie],u+2,h):ie===at?U(l,_,O[ie],u+1,h):(N={},N[ie]=O[ie],U(l,_,{"**":N},u+1,h)));else O._listeners?U(l,_,O,h,h):O["*"]&&O["*"]._listeners&&U(l,_,O["*"],h,h);return ue}function D(l,_,d){var u=0,h=0,R,y=this.delimiter,Y=y.length,j;if(typeof l=="string")if((R=l.indexOf(y))!==-1){j=new Array(5);do j[u++]=l.slice(h,R),h=R+Y;while((R=l.indexOf(y,h))!==-1);j[u++]=l.slice(h)}else j=[l],u=1;else j=l,u=l.length;if(u>1){for(R=0;R+1<u;R++)if(j[R]==="**"&&j[R+1]==="**")return}var I=this.listenerTree,r;for(R=0;R<u;R++)if(r=j[R],I=I[r]||(I[r]={}),R===u-1)return I._listeners?(typeof I._listeners=="function"&&(I._listeners=[I._listeners]),d?I._listeners.unshift(_):I._listeners.push(_),!I._listeners.warned&&this._maxListeners>0&&I._listeners.length>this._maxListeners&&(I._listeners.warned=!0,Be.call(this,I._listeners.length,r))):I._listeners=_,!0;return!0}function $(l,_,d,u){for(var h=oe(l),R=h.length,y,Y,j,I=l._listeners,r;R-- >0;)Y=h[R],y=l[Y],Y==="_listeners"?j=d:j=d?d.concat(Y):[Y],r=u||typeof Y=="symbol",I&&_.push(r?j:j.join(this.delimiter)),typeof y=="object"&&$.call(this,y,_,j,r);return _}function z(l){for(var _=oe(l),d=_.length,u,h,R;d-- >0;)h=_[d],u=l[h],u&&(R=!0,h!=="_listeners"&&!z(u)&&delete l[h]);return R}function se(l,_,d){this.emitter=l,this.event=_,this.listener=d}se.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function te(l,_,d){if(d===!0)h=!0;else if(d===!1)u=!0;else{if(!d||typeof d!="object")throw TypeError("options should be an object or true");var u=d.async,h=d.promisify,R=d.nextTick,y=d.objectify}if(u||R||h){var Y=_,j=_._origin||_;if(R&&!H)throw Error("process.nextTick is not supported");h===k&&(h=_.constructor.name==="AsyncFunction"),_=function(){var I=arguments,r=this,a=this.event;return h?R?Promise.resolve():new Promise(function(ue){Ae(ue)}).then(function(){return r.event=a,Y.apply(r,I)}):(R?process.nextTick:Ae)(function(){r.event=a,Y.apply(r,I)})},_._async=!0,_._origin=j}return[_,y?new se(this,l,_):this]}function Q(l){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,Ne.call(this,l)}Q.EventEmitter2=Q,Q.prototype.listenTo=function(l,_,d){if(typeof l!="object")throw TypeError("target musts be an object");var u=this;d=_e(d,{on:k,off:k,reducers:k},{on:$e,off:$e,reducers:_t});function h(R){if(typeof R!="object")throw TypeError("events must be an object");var y=d.reducers,Y=B.call(u,l),j;Y===-1?j=new xe(u,l,d):j=u._observers[Y];for(var I=oe(R),r=I.length,a,ue=typeof y=="function",ie=0;ie<r;ie++)a=I[ie],j.subscribe(a,R[a]||a,ue?y:y&&y[a])}return v(_)?h(Nt(_)):h(typeof _=="string"?Nt(_.split(/\s+/)):_),this},Q.prototype.stopListeningTo=function(l,_){var d=this._observers;if(!d)return!1;var u=d.length,h,R=!1;if(l&&typeof l!="object")throw TypeError("target should be an object");for(;u-- >0;)h=d[u],(!l||h._target===l)&&(h.unsubscribe(_),R=!0);return R},Q.prototype.delimiter=".",Q.prototype.setMaxListeners=function(l){l!==k&&(this._maxListeners=l,this._conf||(this._conf={}),this._conf.maxListeners=l)},Q.prototype.getMaxListeners=function(){return this._maxListeners},Q.prototype.event="",Q.prototype.once=function(l,_,d){return this._once(l,_,!1,d)},Q.prototype.prependOnceListener=function(l,_,d){return this._once(l,_,!0,d)},Q.prototype._once=function(l,_,d,u){return this._many(l,1,_,d,u)},Q.prototype.many=function(l,_,d,u){return this._many(l,_,d,!1,u)},Q.prototype.prependMany=function(l,_,d,u){return this._many(l,_,d,!0,u)},Q.prototype._many=function(l,_,d,u,h){var R=this;if(typeof d!="function")throw new Error("many only accepts instances of Function");function y(){return--_===0&&R.off(l,y),d.apply(this,arguments)}return y._origin=d,this._on(l,y,u,h)},Q.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var l=arguments[0],_,d=this.wildcard,u,h,R,y,Y;if(l==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(d&&(_=l,l!=="newListener"&&l!=="removeListener"&&typeof l=="object")){if(h=l.length,x){for(R=0;R<h;R++)if(typeof l[R]=="symbol"){Y=!0;break}}Y||(l=l.join(this.delimiter))}var j=arguments.length,I;if(this._all&&this._all.length)for(I=this._all.slice(),R=0,h=I.length;R<h;R++)switch(this.event=l,j){case 1:I[R].call(this,l);break;case 2:I[R].call(this,l,arguments[1]);break;case 3:I[R].call(this,l,arguments[1],arguments[2]);break;default:I[R].apply(this,arguments)}if(d)I=[],U.call(this,I,_,this.listenerTree,0,h);else if(I=this._events[l],typeof I=="function"){switch(this.event=l,j){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(u=new Array(j-1),y=1;y<j;y++)u[y-1]=arguments[y];I.apply(this,u)}return!0}else I&&(I=I.slice());if(I&&I.length){if(j>3)for(u=new Array(j-1),y=1;y<j;y++)u[y-1]=arguments[y];for(R=0,h=I.length;R<h;R++)switch(this.event=l,j){case 1:I[R].call(this);break;case 2:I[R].call(this,arguments[1]);break;case 3:I[R].call(this,arguments[1],arguments[2]);break;default:I[R].apply(this,u)}return!0}else if(!this.ignoreErrors&&!this._all&&l==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},Q.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var l=arguments[0],_=this.wildcard,d,u,h,R,y,Y;if(l==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(_&&(d=l,l!=="newListener"&&l!=="removeListener"&&typeof l=="object")){if(R=l.length,x){for(y=0;y<R;y++)if(typeof l[y]=="symbol"){u=!0;break}}u||(l=l.join(this.delimiter))}var j=[],I=arguments.length,r;if(this._all)for(y=0,R=this._all.length;y<R;y++)switch(this.event=l,I){case 1:j.push(this._all[y].call(this,l));break;case 2:j.push(this._all[y].call(this,l,arguments[1]));break;case 3:j.push(this._all[y].call(this,l,arguments[1],arguments[2]));break;default:j.push(this._all[y].apply(this,arguments))}if(_?(r=[],U.call(this,r,d,this.listenerTree,0)):r=this._events[l],typeof r=="function")switch(this.event=l,I){case 1:j.push(r.call(this));break;case 2:j.push(r.call(this,arguments[1]));break;case 3:j.push(r.call(this,arguments[1],arguments[2]));break;default:for(h=new Array(I-1),Y=1;Y<I;Y++)h[Y-1]=arguments[Y];j.push(r.apply(this,h))}else if(r&&r.length){if(r=r.slice(),I>3)for(h=new Array(I-1),Y=1;Y<I;Y++)h[Y-1]=arguments[Y];for(y=0,R=r.length;y<R;y++)switch(this.event=l,I){case 1:j.push(r[y].call(this));break;case 2:j.push(r[y].call(this,arguments[1]));break;case 3:j.push(r[y].call(this,arguments[1],arguments[2]));break;default:j.push(r[y].apply(this,h))}}else if(!this.ignoreErrors&&!this._all&&l==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(j)},Q.prototype.on=function(l,_,d){return this._on(l,_,!1,d)},Q.prototype.prependListener=function(l,_,d){return this._on(l,_,!0,d)},Q.prototype.onAny=function(l){return this._onAny(l,!1)},Q.prototype.prependAny=function(l){return this._onAny(l,!0)},Q.prototype.addListener=Q.prototype.on,Q.prototype._onAny=function(l,_){if(typeof l!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),_?this._all.unshift(l):this._all.push(l),this},Q.prototype._on=function(l,_,d,u){if(typeof l=="function")return this._onAny(l,_),this;if(typeof _!="function")throw new Error("on only accepts instances of Function");this._events||fe.call(this);var h=this,R;return u!==k&&(R=te.call(this,l,_,u),_=R[0],h=R[1]),this._newListener&&this.emit("newListener",l,_),this.wildcard?(D.call(this,l,_,d),h):(this._events[l]?(typeof this._events[l]=="function"&&(this._events[l]=[this._events[l]]),d?this._events[l].unshift(_):this._events[l].push(_),!this._events[l].warned&&this._maxListeners>0&&this._events[l].length>this._maxListeners&&(this._events[l].warned=!0,Be.call(this,this._events[l].length,l))):this._events[l]=_,h)},Q.prototype.off=function(l,_){if(typeof _!="function")throw new Error("removeListener only takes instances of Function");var d,u=[];if(this.wildcard){var h=typeof l=="string"?l.split(this.delimiter):l.slice();if(u=U.call(this,null,h,this.listenerTree,0),!u)return this}else{if(!this._events[l])return this;d=this._events[l],u.push({_listeners:d})}for(var R=0;R<u.length;R++){var y=u[R];if(d=y._listeners,v(d)){for(var Y=-1,j=0,I=d.length;j<I;j++)if(d[j]===_||d[j].listener&&d[j].listener===_||d[j]._origin&&d[j]._origin===_){Y=j;break}if(Y<0)continue;return this.wildcard?y._listeners.splice(Y,1):this._events[l].splice(Y,1),d.length===0&&(this.wildcard?delete y._listeners:delete this._events[l]),this._removeListener&&this.emit("removeListener",l,_),this}else(d===_||d.listener&&d.listener===_||d._origin&&d._origin===_)&&(this.wildcard?delete y._listeners:delete this._events[l],this._removeListener&&this.emit("removeListener",l,_))}return this.listenerTree&&z(this.listenerTree),this},Q.prototype.offAny=function(l){var _=0,d=0,u;if(l&&this._all&&this._all.length>0){for(u=this._all,_=0,d=u.length;_<d;_++)if(l===u[_])return u.splice(_,1),this._removeListener&&this.emit("removeListenerAny",l),this}else{if(u=this._all,this._removeListener)for(_=0,d=u.length;_<d;_++)this.emit("removeListenerAny",u[_]);this._all=[]}return this},Q.prototype.removeListener=Q.prototype.off,Q.prototype.removeAllListeners=function(l){if(l===k)return!this._events||fe.call(this),this;if(this.wildcard){var _=U.call(this,null,l,this.listenerTree,0),d,u;if(!_)return this;for(u=0;u<_.length;u++)d=_[u],d._listeners=null;this.listenerTree&&z(this.listenerTree)}else this._events&&(this._events[l]=null);return this},Q.prototype.listeners=function(l){var _=this._events,d,u,h,R,y;if(l===k){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!_)return[];for(d=oe(_),R=d.length,h=[];R-- >0;)u=_[d[R]],typeof u=="function"?h.push(u):h.push.apply(h,u);return h}else{if(this.wildcard){if(y=this.listenerTree,!y)return[];var Y=[],j=typeof l=="string"?l.split(this.delimiter):l.slice();return U.call(this,Y,j,y,0),Y}return _?(u=_[l],u?typeof u=="function"?[u]:u:[]):[]}},Q.prototype.eventNames=function(l){var _=this._events;return this.wildcard?$.call(this,this.listenerTree,[],null,l):_?oe(_):[]},Q.prototype.listenerCount=function(l){return this.listeners(l).length},Q.prototype.hasListeners=function(l){if(this.wildcard){var _=[],d=typeof l=="string"?l.split(this.delimiter):l.slice();return U.call(this,_,d,this.listenerTree,0),_.length>0}var u=this._events,h=this._all;return!!(h&&h.length||u&&(l===k?oe(u).length:u[l]))},Q.prototype.listenersAny=function(){return this._all?this._all:[]},Q.prototype.waitFor=function(l,_){var d=this,u=typeof _;return u==="number"?_={timeout:_}:u==="function"&&(_={filter:_}),_=_e(_,{timeout:0,filter:k,handleError:!1,Promise,overload:!1},{filter:$e,Promise:Ce}),ct(_.Promise,function(h,R,y){function Y(){var j=_.filter;if(!(j&&!j.apply(d,arguments)))if(d.off(l,Y),_.handleError){var I=arguments[0];I?R(I):h(Re.apply(null,arguments).slice(1))}else h(Re.apply(null,arguments))}y(function(){d.off(l,Y)}),d._on(l,Y,!1)},{timeout:_.timeout,overload:_.overload})};function Ie(l,_,d){d=_e(d,{Promise,timeout:0,overload:!1},{Promise:Ce});var u=d.Promise;return ct(u,function(h,R,y){var Y;if(typeof l.addEventListener=="function"){Y=function(){h(Re.apply(null,arguments))},y(function(){l.removeEventListener(_,Y)}),l.addEventListener(_,Y,{once:!0});return}var j=function(){I&&l.removeListener("error",I),h(Re.apply(null,arguments))},I;_!=="error"&&(I=function(r){l.removeListener(_,j),R(r)},l.once("error",I)),y(function(){I&&l.removeListener("error",I),l.removeListener(_,j)}),l.once(_,j)},{timeout:d.timeout,overload:d.overload})}var ze=Q.prototype;if(Object.defineProperties(Q,{defaultMaxListeners:{get:function(){return ze._maxListeners},set:function(l){if(typeof l!="number"||l<0||Number.isNaN(l))throw TypeError("n must be a non-negative number");ze._maxListeners=l},enumerable:!0},once:{value:Ie,writable:!0,configurable:!0}}),Object.defineProperties(ze,{_maxListeners:{value:K,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return Q});else if(typeof qn=="object")Zn.exports=Q;else{var me=new Function("","return this")();me.EventEmitter2=Q}})()});var to=Us((Kf,eo)=>{eo.exports=xn()});var no=Us((Ds,so)=>{(function(k,L){var v=L(k);if(typeof define=="function"&&define.amd)define("DeepDiff",function(){return v});else if(typeof Ds=="object"||typeof navigator=="object"&&navigator.product.match(/ReactNative/i))so.exports=v;else{var K=k.DeepDiff;v.noConflict=function(){return k.DeepDiff===v&&(k.DeepDiff=K),v},k.DeepDiff=v}})(Ds,function(k){var L=["N","E","A","D"];function v(B,U){B.super_=U,B.prototype=Object.create(U.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}})}function K(B,U){Object.defineProperty(this,"kind",{value:B,enumerable:!0}),U&&U.length&&Object.defineProperty(this,"path",{value:U,enumerable:!0})}function H(B,U,D){H.super_.call(this,"E",B),Object.defineProperty(this,"lhs",{value:U,enumerable:!0}),Object.defineProperty(this,"rhs",{value:D,enumerable:!0})}v(H,K);function x(B,U){x.super_.call(this,"N",B),Object.defineProperty(this,"rhs",{value:U,enumerable:!0})}v(x,K);function ne(B,U){ne.super_.call(this,"D",B),Object.defineProperty(this,"lhs",{value:U,enumerable:!0})}v(ne,K);function re(B,U,D){re.super_.call(this,"A",B),Object.defineProperty(this,"index",{value:U,enumerable:!0}),Object.defineProperty(this,"item",{value:D,enumerable:!0})}v(re,K);function Ae(B,U,D){var $=B.slice((D||U)+1||B.length);return B.length=U<0?B.length+U:U,B.push.apply(B,$),B}function oe(B){var U=typeof B;return U!=="object"?U:B===Math?"math":B===null?"null":Array.isArray(B)?"array":Object.prototype.toString.call(B)==="[object Date]"?"date":typeof B.toString=="function"&&/^\/.*\//.test(B.toString())?"regexp":"object"}function fe(B){var U=0;if(B.length===0)return U;for(var D=0;D<B.length;D++){var $=B.charCodeAt(D);U=(U<<5)-U+$,U=U&U}return U}function Ne(B){var U=0,D=oe(B);if(D==="array"){B.forEach(function(Q){U+=Ne(Q)});var $="[type: array, hash: "+U+"]";return U+fe($)}if(D==="object"){for(var z in B)if(B.hasOwnProperty(z)){var se="[ type: object, key: "+z+", value hash: "+Ne(B[z])+"]";U+=fe(se)}return U}var te="[ type: "+D+" ; value: "+B+"]";return U+fe(te)}function Be(B,U,D,$,z,se,te,Q){D=D||[],z=z||[],te=te||[];var Ie=z.slice(0);if(typeof se<"u"&&se!==null){if($){if(typeof $=="function"&&$(Ie,se))return;if(typeof $=="object"){if($.prefilter&&$.prefilter(Ie,se))return;if($.normalize){var ze=$.normalize(Ie,se,B,U);ze&&(B=ze[0],U=ze[1])}}}Ie.push(se)}oe(B)==="regexp"&&oe(U)==="regexp"&&(B=B.toString(),U=U.toString());var me=typeof B,l=typeof U,_,d,u,h,R=me!=="undefined"||te&&te.length>0&&te[te.length-1].lhs&&Object.getOwnPropertyDescriptor(te[te.length-1].lhs,se),y=l!=="undefined"||te&&te.length>0&&te[te.length-1].rhs&&Object.getOwnPropertyDescriptor(te[te.length-1].rhs,se);if(!R&&y)D.push(new x(Ie,U));else if(!y&&R)D.push(new ne(Ie,B));else if(oe(B)!==oe(U))D.push(new H(Ie,B,U));else if(oe(B)==="date"&&B-U!==0)D.push(new H(Ie,B,U));else if(me==="object"&&B!==null&&U!==null){for(_=te.length-1;_>-1;--_)if(te[_].lhs===B){h=!0;break}if(h)B!==U&&D.push(new H(Ie,B,U));else{if(te.push({lhs:B,rhs:U}),Array.isArray(B)){for(Q&&(B.sort(function(I,r){return Ne(I)-Ne(r)}),U.sort(function(I,r){return Ne(I)-Ne(r)})),_=U.length-1,d=B.length-1;_>d;)D.push(new re(Ie,_,new x(void 0,U[_--])));for(;d>_;)D.push(new re(Ie,d,new ne(void 0,B[d--])));for(;_>=0;--_)Be(B[_],U[_],D,$,Ie,_,te,Q)}else{var Y=Object.keys(B),j=Object.keys(U);for(_=0;_<Y.length;++_)u=Y[_],h=j.indexOf(u),h>=0?(Be(B[u],U[u],D,$,Ie,u,te,Q),j[h]=null):Be(B[u],void 0,D,$,Ie,u,te,Q);for(_=0;_<j.length;++_)u=j[_],u&&Be(void 0,U[u],D,$,Ie,u,te,Q)}te.length=te.length-1}}else B!==U&&(me==="number"&&isNaN(B)&&isNaN(U)||D.push(new H(Ie,B,U)))}function Re(B,U,D,$,z){var se=[];if(Be(B,U,se,$,null,null,null,z),D)for(var te=0;te<se.length;++te)D(se[te]);return se}function Nt(B,U,D,$,z,se,te){return Be(B,U,D,$,z,se,te,!0)}function xe(B,U,D,$){var z=$?function(te){te&&$.push(te)}:void 0,se=Re(B,U,z,D);return $||(se.length?se:void 0)}function _e(B,U,D,$){var z=$?function(te){te&&$.push(te)}:void 0,se=Re(B,U,z,D,!0);return $||(se.length?se:void 0)}function Ce(B,U,D){if(D.path&&D.path.length){var $=B[U],z,se=D.path.length-1;for(z=0;z<se;z++)$=$[D.path[z]];switch(D.kind){case"A":Ce($[D.path[z]],D.index,D.item);break;case"D":delete $[D.path[z]];break;case"E":case"N":$[D.path[z]]=D.rhs;break}}else switch(D.kind){case"A":Ce(B[U],D.index,D.item);break;case"D":B=Ae(B,U);break;case"E":case"N":B[U]=D.rhs;break}return B}function we(B,U,D){if(typeof D>"u"&&U&&~L.indexOf(U.kind)&&(D=U),B&&D&&D.kind){for(var $=B,z=-1,se=D.path?D.path.length-1:0;++z<se;)typeof $[D.path[z]]>"u"&&($[D.path[z]]=typeof D.path[z+1]<"u"&&typeof D.path[z+1]=="number"?[]:{}),$=$[D.path[z]];switch(D.kind){case"A":D.path&&typeof $[D.path[z]]>"u"&&($[D.path[z]]=[]),Ce(D.path?$[D.path[z]]:$,D.index,D.item);break;case"D":delete $[D.path[z]];break;case"E":case"N":$[D.path[z]]=D.rhs;break}}}function $e(B,U,D){if(D.path&&D.path.length){var $=B[U],z,se=D.path.length-1;for(z=0;z<se;z++)$=$[D.path[z]];switch(D.kind){case"A":$e($[D.path[z]],D.index,D.item);break;case"D":$[D.path[z]]=D.lhs;break;case"E":$[D.path[z]]=D.lhs;break;case"N":delete $[D.path[z]];break}}else switch(D.kind){case"A":$e(B[U],D.index,D.item);break;case"D":B[U]=D.lhs;break;case"E":B[U]=D.lhs;break;case"N":B=Ae(B,U);break}return B}function _t(B,U,D){if(B&&U&&D&&D.kind){var $=B,z,se;for(se=D.path.length-1,z=0;z<se;z++)typeof $[D.path[z]]>"u"&&($[D.path[z]]={}),$=$[D.path[z]];switch(D.kind){case"A":$e($[D.path[z]],D.index,D.item);break;case"D":$[D.path[z]]=D.lhs;break;case"E":$[D.path[z]]=D.lhs;break;case"N":delete $[D.path[z]];break}}}function ct(B,U,D){if(B&&U){var $=function(z){(!D||D(B,U,z))&&we(B,U,z)};Re(B,U,$)}}return Object.defineProperties(xe,{diff:{value:xe,enumerable:!0},orderIndependentDiff:{value:_e,enumerable:!0},observableDiff:{value:Re,enumerable:!0},orderIndependentObservableDiff:{value:Nt,enumerable:!0},orderIndepHash:{value:Ne,enumerable:!0},applyDiff:{value:ct,enumerable:!0},applyChange:{value:we,enumerable:!0},revertChange:{value:_t,enumerable:!0},isConflict:{value:function(){return typeof $conflict<"u"},enumerable:!0}}),xe.DeepDiff=xe,k&&(k.DeepDiff=xe),xe})});var xa=Qn(to(),1),eu=Qn(no(),1);var qu="as",Zu="=",xu="break",ei="else",ti="enum",si="export",ni="if",oi="import",ri="->",ci="is",ai="loop",ui="mut",ii="native",li="object",fi="fn",Ei="return",_i="self",mi="template",pi=Object.freeze({ALIAS:qu,ASSIGN:Zu,BREAK:xu,ELSE:ei,ENUMERATION:ti,EXPORT:si,IF:ni,IMPORT:oi,INTO:ri,IS:ci,LOOP:ai,MUTABLE:ui,NATIVE:ii,OBJECT:li,PROCEDURE:fi,RETURN:Ei,SELF:_i,TEMPLATE:mi}),oo=pi;var bi="assign",Ai="array_assignment",Oi="branch-match",Ti="branch-default",Ni="condition",Ii="loop",di="data",hi="generics",Si="enumeration",Pi="expression",Li="instance",ki="Link",Ri="local",Ci="object",vi="procedure",Ui="return",Di="select",Bi="member",Mi="store",yi="break",ji="literal",wi="array_access",Yi="valueLink",Fi="linkValue",Gi="self",gi="procedure-call",Vi="Maybe",Ki="native",Hi="move",$i="String",zi="Array",Xi="import",Ji="library",Wi="constructor",Qi="destructor",qi="free",Zi="block-end",xi="default-block",el="continue",tl="branch",sl="statement",nl="draw",ol=Object.freeze({TYPES_ASSIGN:bi,TYPES_ARRAY:zi,TYPES_ARRAY_ASSIGNMENT:Ai,TYPES_BRANCH_MATCH:Oi,TYPES_BRANCH_DEFAULT:Ti,TYPES_CONDITION:Ni,TYPES_LOOP:Ii,TYPES_DATA:di,TYPES_GENERICS:hi,TYPES_ENUMERATION:Si,TYPES_EXPRESSION:Pi,TYPES_INSTANCE:Li,TYPES_LINK:ki,TYPES_IMPORT:Xi,TYPES_LOCAL:Ri,TYPES_OBJECT:Ci,TYPES_PROCEDURE:vi,TYPES_RETURN:Ui,TYPES_SELECT:Di,TYPES_MEMBER:Bi,TYPES_STORE:Mi,TYPES_BREAK:yi,TYPES_LITERAL:ji,TYPES_ARRAY_ACCESS:wi,TYPES_LINK_TO:Yi,TYPES_VALUE_AT:Fi,TYPES_SELF:Gi,TYPES_LIBRARY:Ji,TYPES_DROP:gi,TYPES_MAYBE:Vi,TYPES_NATIVE:Ki,TYPES_MOVE:Hi,TYPES_STRING:$i,TYPES_CONSTRUCTOR:Wi,TYPES_FREE:qi,TYPES_DEFAULT_BLOCK:xi,TYPES_BLOCK_END:Zi,TYPES_CONTINUE:el,TYPES_BRANCH:tl,TYPES_STATEMENT:sl,TYPES_DESTRUCTOR:Qi,TYPES_DRAW:nl}),Bs=ol;var rl=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),ro=rl;var cl=Object.freeze([]),al=Object.freeze({}),et="",ul="	",il=`
`,ll="UTF-8",co=Bs,fl=Object.freeze({EMPTY_ARRAY:cl,EMPTY_OBJECT:al,EMPTY_STRING:et,HORIZONTAL_TAB:ul,LINE_BREAK:il,UNICODE_TEXT:ll,Codes:ro,Keys:oo,Types:Bs}),ao=fl;function p(k,L=[],v=""){let K=L.map((x,ne)=>({name:`operand${ne+1}`,data:{type:"data",name:x,path:"Flogram"}})),H={type:"native",name:k,path:"Flogram",description:{inputs:K,outputs:v&&L.length<=0?null:[{name:"result",data:{type:"data",name:v||(L.length>0?L[0]:""),path:"Flogram"}}]}};return Object.freeze(H)}var El=Object.freeze({"+":[p("+",["FP64","FP64"]),p("+",["U64","U64"]),p("+",["I64","I64"]),p("+",["FP32","FP32"]),p("+",["U32","U32"]),p("+",["I32","I32"]),p("+",["U16","U16"]),p("+",["I16","I16"]),p("+",["U8","U8"]),p("+",["I8","I8"]),p("+",["any","any"])],"-":[p("-",["FP64","FP64"]),p("-",["U64","U64"]),p("-",["I64","I64"]),p("-",["FP32","FP32"]),p("-",["U32","U32"]),p("-",["I32","I32"]),p("-",["U16","U16"]),p("-",["I16","I16"]),p("-",["U8","U8"]),p("-",["I8","I8"]),p("-",["any","any"]),p("-",["FP64"]),p("-",["I64"]),p("-",["FP32"]),p("-",["I32"]),p("-",["I16"]),p("-",["I8"]),p("-",["any"])],"*":[p("*",["FP64","FP64"]),p("*",["U64","U64"]),p("*",["I64","I64"]),p("*",["FP32","FP32"]),p("*",["U32","U32"]),p("*",["I32","I32"]),p("*",["U16","U16"]),p("*",["I16","I16"]),p("*",["U8","U8"]),p("*",["I8","I8"]),p("*",["any","any"])],"/":[p("/",["FP64","FP64"]),p("/",["U64","U64"]),p("/",["I64","I64"]),p("/",["FP32","FP32"]),p("/",["U32","U32"]),p("/",["I32","I32"]),p("/",["U16","U16"]),p("/",["I16","I16"]),p("/",["U8","U8"]),p("/",["I8","I8"]),p("/",["any","any"])],"%":[p("%",["I64","I64"]),p("%",["U64","U64"]),p("%",["I32","I32"]),p("%",["U32","U32"]),p("%",["I16","I16"]),p("%",["U16","U16"]),p("%",["I8","I8"]),p("%",["U8","U8"]),p("%",["any","any"])],"!=":[p("!=",["FP64","FP64"],"Bool"),p("!=",["U64","U64"],"Bool"),p("!=",["I64","I64"],"Bool"),p("!=",["FP32","FP32"],"Bool"),p("!=",["U32","U32"],"Bool"),p("!=",["I32","I32"],"Bool"),p("!=",["U16","U16"],"Bool"),p("!=",["I16","I16"],"Bool"),p("!=",["U8","U8"],"Bool"),p("!=",["I8","I8"],"Bool"),p("!=",["any","any"],"any")],"==":[p("==",["FP64","FP64"],"Bool"),p("==",["U64","U64"],"Bool"),p("==",["I64","I64"],"Bool"),p("==",["FP32","FP32"],"Bool"),p("==",["U32","U32"],"Bool"),p("==",["I32","I32"],"Bool"),p("==",["U16","U16"],"Bool"),p("==",["I16","I16"],"Bool"),p("==",["U8","U8"],"Bool"),p("==",["I8","I8"],"Bool"),p("==",["any","any"],"any")],">":[p(">",["FP64","FP64"],"Bool"),p(">",["U64","U64"],"Bool"),p(">",["I64","I64"],"Bool"),p(">",["FP32","FP32"],"Bool"),p(">",["U32","U32"],"Bool"),p(">",["I32","I32"],"Bool"),p(">",["U16","U16"],"Bool"),p(">",["I16","I16"],"Bool"),p(">",["U8","U8"],"Bool"),p(">",["I8","I8"],"Bool"),p(">",["any","any"],"any")],"<":[p("<",["FP64","FP64"],"Bool"),p("<",["U64","U64"],"Bool"),p("<",["I64","I64"],"Bool"),p("<",["FP32","FP32"],"Bool"),p("<",["U32","U32"],"Bool"),p("<",["I32","I32"],"Bool"),p("<",["U16","U16"],"Bool"),p("<",["I16","I16"],"Bool"),p("<",["U8","U8"],"Bool"),p("<",["I8","I8"],"Bool"),p("<",["any","any"],"any")],">=":[p(">=",["FP64","FP64"],"Bool"),p(">=",["U64","U64"],"Bool"),p(">=",["I64","I64"],"Bool"),p(">=",["FP32","FP32"],"Bool"),p(">=",["U32","U32"],"Bool"),p(">=",["I32","I32"],"Bool"),p(">=",["U16","U16"],"Bool"),p(">=",["I16","I16"],"Bool"),p(">=",["U8","U8"],"Bool"),p(">=",["I8","I8"],"Bool"),p(">=",["any","any"],"any")],"<=":[p("<=",["FP64","FP64"],"Bool"),p("<=",["U64","U64"],"Bool"),p("<=",["I64","I64"],"Bool"),p("<=",["FP32","FP32"],"Bool"),p("<=",["U32","U32"],"Bool"),p("<=",["I32","I32"],"Bool"),p("<=",["U16","U16"],"Bool"),p("<=",["I16","I16"],"Bool"),p("<=",["U8","U8"],"Bool"),p("<=",["I8","I8"],"Bool"),p("<=",["any","any"],"any")],"&":[p("&",["Bool","Bool"],"Bool"),p("&",["any","any"],"any")],"^":[p("^",["Bool","Bool"],"Bool"),p("^",["any","any"],"any")],"|":[p("|",["Bool","Bool"],"Bool"),p("|",["any","any"],"any")],not:[p("not",["Bool"],"Bool"),p("not",["any"],"any")],i32:[p("i32",["FP64"],"I32"),p("i32",["U64"],"I32"),p("i32",["I64"],"I32"),p("i32",["FP32"],"I32"),p("i32",["U32"],"I32"),p("i32",["I32"],"I32"),p("i32",["U16"],"I32"),p("i32",["I16"],"I32"),p("i32",["U8"],"I32"),p("i32",["I8"],"I32"),p("i32",["any"],"any")],u32:[p("u32",["FP64"],"U32"),p("u32",["U64"],"U32"),p("u32",["I64"],"U32"),p("u32",["FP32"],"U32"),p("u32",["U32"],"U32"),p("u32",["I32"],"U32"),p("u32",["U16"],"U32"),p("u32",["I16"],"U32"),p("u32",["U8"],"U32"),p("u32",["I8"],"U32"),p("u32",["any"],"any")],i64:[p("i64",["FP64"],"I64"),p("i64",["U64"],"I64"),p("i64",["I64"],"I64"),p("i64",["FP32"],"I64"),p("i64",["U32"],"I64"),p("i64",["I32"],"I64"),p("i64",["U16"],"I64"),p("i64",["I16"],"I64"),p("i64",["U8"],"I64"),p("i64",["I8"],"I64"),p("i64",["any"],"any")],u64:[p("u64",["FP64"],"U64"),p("u64",["U64"],"U64"),p("u64",["I64"],"U64"),p("u64",["FP32"],"U64"),p("u64",["U32"],"U64"),p("u64",["I32"],"U64"),p("u64",["U16"],"U64"),p("u64",["I16"],"U64"),p("u64",["U8"],"U64"),p("u64",["I8"],"U64"),p("u64",["any"],"any")],fp32:[p("fp32",["FP64"],"FP32"),p("fp32",["U64"],"FP32"),p("fp32",["I64"],"FP32"),p("fp32",["FP32"],"FP32"),p("fp32",["U32"],"FP32"),p("fp32",["I32"],"FP32"),p("fp32",["U16"],"FP32"),p("fp32",["I16"],"FP32"),p("fp32",["U8"],"FP32"),p("fp32",["I8"],"FP32"),p("fp32",["any"],"any")],fp64:[p("fp64",["FP64"],"FP64"),p("fp64",["U64"],"FP64"),p("fp64",["I64"],"FP64"),p("fp64",["FP32"],"FP64"),p("fp64",["U32"],"FP64"),p("fp64",["I32"],"FP64"),p("fp64",["U16"],"FP64"),p("fp64",["I16"],"FP64"),p("fp64",["U8"],"FP64"),p("fp64",["I8"],"FP64"),p("fp64",["any"],"any")]}),qt=El;var uo=Object.freeze(["+","-","*","/","%",">",">=","<","<=","!=","&","|","^","not","i32","u32","i64","u64","fp64","fp32"]);var _l=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),pt=_l;var{EMPTY_STRING:ml,UNICODE_TEXT:ws}=ao,pl=44,bl=48,Al=57,Ol=46,Tl=45,Nl=43,Il=65,dl=90,hl=-1,Sl=1,Pl=new TextDecoder(ws),Ll=new TextEncoder,kl=(k,L,v=0,K=k.length|0,H=0,x=L.length|0)=>{for(H=H|0,v=v|0,x=x|0,K=K|0;;){let ne=v>=K,re=H>=x;if(ne||re)break;let oe=k[v],fe=L[H];if(v=v+1|0,H=H+1|0,oe<fe)return hl;if(oe>fe)return Sl}return 0},Ys=(k,L,v=0,K=k.length|0,H=0,x=L.length|0)=>{for(H=H|0,v=v|0,x=x|0,K=K|0;;){let ne=H>=x,re=v>=K;if(ne||re)break;L[H]=k[v],H=H+1|0,v=v+1|0}},Fs=(k,L,v=0,K=k.length|0,H=0,x=L.length|0)=>{v=v|0,H=H|0,K=K|0,x=x|0;let ne=K-v|0,re=x-H|0;if(ne!==re)return!1;for(;;){let Ae=v>=K,oe=H>=x;if(Ae||oe)break;let Ne=k[v],Be=L[H];if(v=v+1|0,H=H+1|0,Ne!==Be)return!1}return!0},Rl=k=>{k=k>>>0;let L=0,v=0;for(;v=(v<<1|1)>>>0,!(v>k);)L=L+1|0;return L},fo=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),js=(k,L,v,K)=>{for(k=k>>>0,K=K??L.length|0,v=v|0,K=K|0;k>0&&K>v;)K=K-1|0,L[K]=fo[k&15],k=k>>>4},Gs=(k,L,v,K)=>{let H=v|0,x=v+K|0;if(K===0)return!1;let ne=L[H];for((ne===Nl||ne===Tl)&&(H=H+1|0);H<x;){let re=L[H];if(H=H+1|0,!(bl<=re&&re<=Al||(Ol===re||pl===re)))return!1}return!0},gs=k=>{let L=k>=Il,v=k<=dl;return L&&v},xt=128,es=127,Eo=-1,kt=64,Vs=k=>{k=k|0;let L=[];for(;;){let v=k&es;k=k>>7;let K=k===0,H=(v&kt)===0,x=K&&H,ne=k===-1,re=(v&kt)!==0;if(x||ne&&re){L.push(v);break}v=v|xt,L.push(v)}return L},Cl=k=>{let L=[],v=!0;for(;v;){let K=k&es;k>>=7,k===0&&!(K&kt)||k===-1&&K&kt?v=!1:K|=xt,L.push(K)}return L},_o=(k,L)=>{L=L|0;let v=0,K=0;for(;;){let H=k[L]|0;L=L+1|0;let x=(H&es)<<K;if(K=K+7|0,v=v|x,(H&xt)===0){let re=(H&kt)!==0,Ae=K<32;if(re&&Ae){let fe=Eo<<K;v=v|fe}break}}return v},vl=(k,L)=>{L=L|0;let v=0,K=0;for(;;){let H=k[L]|0;L=L+1|0;let x=(H&es)<<K;if(K=K+7|0,v=v|x,!(H&xt)){if(H&kt){let ne=Eo<<K;v=v|ne}break}}return v},S=k=>Pl.decode(k),ce=k=>Ll.encode(k),Ul=(k=ml)=>{let L=k.length|0,v=Vs(L),K=Buffer.from(k,ws);return Object.freeze([...v,...K])},Dl=(k,L)=>{L=L|0;let v=_o(k,L),K=Vs(v).length;return L=L+K|0,k.subarray(L,L+v|0).toString(ws)},Bl=58,Ml=46,gt=32,Ms=48,yl=67,bt=new Uint8Array(yl),io=bt.subarray(0,8),Zt=bt.subarray(10,49),lo=bt.subarray(51,68),ys=16,jl=2;bt[8]=Bl;bt[9]=gt;bt[49]=gt;bt[50]=gt;var wl=(k,L)=>{L=L??console.log;let v=32,K=126,H=k.length|0,x=0;for(;H>0;){io.fill(Ms),js(x,io),Zt.fill(gt),lo.fill(gt);let ne=H>=ys?ys:H;H=H-ys|0;let re=0,Ae=0;for(let fe=1;fe<=ne;fe=fe+1|0){let Ne=k[x]&255;Zt[re+0|0]=Ms,Zt[re+1|0]=Ms,js(Ne,Zt,re,re+2|0);let Be=Ml;v<=Ne&&Ne<=K&&(Be=Ne),lo[Ae]=Be,x=x+1|0,re=re+2|0,Ae=Ae+1|0,fe%jl===0&&(re=re+1|0)}let oe=String.fromCodePoint(...bt);L(oe)}},Yl=function*(k,L){let v=k.length|0,K=L.length|0,H=0;for(;H<v&&H<K;){let x=k[H],ne=L[H];yield[x,ne],H=H+1|0}},Fl=function*(k,L,v){let K=k.length|0,H=L.length|0,x=v.length|0,ne=0;for(;ne<K&&ne<H&&ne<x;){let re=k[ne],Ae=L[ne],oe=v[ne];yield[re,Ae,oe],ne=ne+1|0}},tE=Object.freeze({ARRAY_COMPARE:kl,ARRAY_COPY:Ys,ARRAY_EQUAL:Fs,BIT_DEPTH:Rl,HEX_DIGITS:fo,HEX_ENCODE:js,IS_NUMBER:Gs,IS_UPPERCASE:gs,LEB128_DECODE:_o,LEB128_DECODE_SIGNED:vl,LEB128_ENCODE:Vs,LEB128_ENCODE_SIGNED:Cl,UTF8_DECODE:S,UTF8_ENCODE:ce,WASM_STRING_ENCODE:Ul,WASM_STRING_DECODE:Dl,XXD_DUMP_HEX:wl,ZIP2:Yl,ZIP3:Fl});var{TYPES_ASSIGN:ts,TYPES_ARRAY:rt,TYPES_ARRAY_ASSIGNMENT:Gl,TYPES_BRANCH_MATCH:mo,TYPES_BRANCH_DEFAULT:po,TYPES_CONDITION:gl,TYPES_LOOP:Vl,TYPES_DATA:qe,TYPES_GENERICS:ss,TYPES_ENUMERATION:Rt,TYPES_EXPRESSION:Vt,TYPES_IMPORT:Kl,TYPES_INSTANCE:oE,TYPES_LIBRARY:Hl,TYPES_LINK:bo,TYPES_LOCAL:tt,TYPES_OBJECT:Ye,TYPES_PROCEDURE:st,TYPES_RETURN:$l,TYPES_SELECT:Ks,TYPES_MEMBER:Hs,TYPES_NATIVE:zl,TYPES_STORE:Ao,TYPES_BREAK:Xl,TYPES_LITERAL:ve,TYPES_ARRAY_ACCESS:$s,TYPES_LINK_TO:It,TYPES_VALUE_AT:it,TYPES_SELF:nt,TYPES_DROP:Oo,TYPES_MAYBE:To,TYPES_MOVE:No,TYPES_STRING:Io,TYPES_CONSTRUCTOR:zs,TYPES_DESTRUCTOR:ho,TYPES_FREE:Jl,TYPES_BLOCK_END:rE,TYPES_STATEMENT:cE,TYPES_DRAW:Wl}=co,X=Fs,Xs=ce("="),Ql=ce("enum"),ql=ce("loop"),Zl=ce("break"),xl=ce("if"),ef=ce("else"),So=ce("is"),Po=ce("->"),Ct=ce(`
`),Lo=ce("object"),vt=ce("pass"),ko=ce("fn"),tf=ce("return"),Ro=ce("size"),Co=ce("at"),ns=ce(rt),At=ce("Link!!"),dt=ce("Link"),os=ce("LinkSmart"),vo=ce("mut"),Uo=ce("self"),Do=ce("nocopy"),sf=ce("move"),nf=ce("import"),of=ce("export"),rs=ce("Maybe"),rf=ce("NONE"),cf=ce("SOME"),Bo=ce("free"),af=ce("free!!"),Fe=58,Js=61,Me=44,Ze=46,We=123,he=40,Oe=10,uf=35,ot=125,Se=41,Ot=91,cs=93,lf=39,ff=34,Ef=64,Ws=47,Qs=1,Mo=2,qs=3,Yt="done",Pe="fail",_f={EVENT_DONE:Yt,EVENT_FAIL:Pe},tu=1,su=2,nu=3,ou=4,ru=5,cu=6,au=7,uu=8,iu=9,lu=10,fu=11,Eu=12,mf=13,pf=14,bf=15,_u=16,Af=99,Ge={FAIL_UNRESOLVED_NAME:k=>`Unresolved name '${k}'. The name '${k}' does not exist in the current context. Please check the spelling and scope of your identifiers.`,FAIL_UNEXPECTED_TOKEN:(k,L)=>`Unexpected token '${k}' at position ${L}. Please check the syntax.`,FAIL_INDENTATION_MISMATCH:k=>`Indentation mismatch on line ${k}. The code on this line does not align with the expected indentation. Check your indentation for inconsistencies.`,FAIL_INDENTATION_NO_INCREASE:k=>`Indentation error on line ${k}. Expected an increase in indentation but found none. Check your indentation.`,FAIL_DUPLICATE_DATA:k=>`Duplicate data '${k}' found. Ensure each piece of data is unique.`,FAIL_DUPLICATE_OBJECT_MEMBER:(k,L)=>`Duplicate member '${k}' in object '${L}'. Each member in an object must have a unique name.`,FAIL_INVALID_IDENTIFIER:k=>`Invalid identifier '${k}'. The name '${k}' is not a valid identifier. Ensure your identifiers adhere to the language's naming rules.`,FAIL_RETURN_LENGTH_MISMATCH:(k,L)=>`Return length mismatch. Expected '${k}' value(s) but received '${L}'. Ensure the number of return values matches the expected count.`,FAIL_UNRESOLVED_OBJECT_MEMBER:(k,L)=>`Unresolved member '${k}' of object '${L}'. The member '${k}' does not exist on the object '${L}'`,FAIL_UNKNOWN_PROCEDURE_NAME:k=>`Call to undefined procedure '${k}'. Please ensure that the procedure is defined before calling it.`,FAIL_IMMUTABLE_ASSIGNMENT:k=>`Assignment to an immutable variable '${k}'. You are attempting to assign a new value to a variable which was declared as immutable and cannot be changed.`,FAIL_RESERVED_KEYWORD_USAGE:k=>`Reserved keyword '${k}' used as an identifier. The keyword '${k}' is reserved by the language and cannot be used as an identifier. Please choose a different name.`,FAIL_INPUT_TYPE_MISMATCH:(k,L)=>`Type Mismatch at line ${k}. Nature procedures expect all parameters to be of same type. Provided: ${L}.`,FAIL_UNSUPPORTED_TYPE:k=>`Unsupported type found. Type '${k}' was not defined in this context and isn't a native to Flogram. Please check your code and language supported types.`,FAIL_UNALLOWED_COPY:k=>`Copy operation not allowed. The object '${k}' has been defined as uncopyable in your code, and therefore, the copy operation you're attempting is not allowed.`,FAIL_ASSIGNMENT_TYPE_MISMATCH:(k,L)=>`Assignment type mismatch. Type '${L}' assigned to '${k}'.`},Of=Object.freeze({FAIL_UNRESOLVED_NAME:tu,FAIL_UNEXPECTED_TOKEN:su,FAIL_INDENTATION_MISMATCH:nu,FAIL_INDENTATION_NO_INCREASE:ou,FAIL_DUPLICATE_DATA:ru,FAIL_DUPLICATE_OBJECT_MEMBER:cu,FAIL_INVALID_IDENTIFIER:au,FAIL_RETURN_LENGTH_MISMATCH:uu,FAIL_UNRESOLVED_OBJECT_MEMBER:iu,FAIL_UNKNOWN_PROCEDURE_NAME:lu,FAIL_IMMUTABLE_ASSIGNMENT:fu,FAIL_RESERVED_KEYWORD_USAGE:Eu,FAIL_ASSIGNMENT_TYPE_MISMATCH:_u}),Tf=new Set(["fn","object","pass","enum"]),yo=new Set(["==","!=",">",">=","<","<=","!","&","|"]),ye=(k,L,v,K)=>{if(K===1){let we=L[v],$e=we&191,_t=we&223,ct=_t^93,B=_t^91,D=we&254^34,z=we&254^40,te=we&253^44,Ie=we&254^58;return $e===0||(ct===0||B===0)||D===0||z===0||te===0||Ie===0||we===Oe}let _e=L.subarray(v,v+K|0),Ce=S(_e);return!1},Nf=(k,L,v,K)=>{let H=L.subarray(v,v+K|0),x=S(H);return Tf.has(x)||pt.includes(x)},If=512,Vn=1,mu=2,ks=3,Kn=4,pu=5,bu=6,Au=7,Ou=8,Tu=9,df=10,hf=11,Sf=12,Pf=13,Lf=14,kf=15,Rf=16,Cf=17,vf=18,Tt=Object.freeze([Vn]),Ut=Object.freeze([mu]),Kt=Object.freeze([ks]),Zs=Object.freeze([ks,Kn]),jo=Object.freeze([pu]),Uf=Object.freeze([Vn,bu]),Df=Object.freeze([Au]),Ke=Object.freeze([Kn,Ou]),Qe=Object.freeze([Tu]),Bf=Object.freeze([df]),Dt=Object.freeze([hf]),Mf=Object.freeze([ks,Tu]),Ht=Object.freeze([Sf]),Bt=Object.freeze([Pf]),xs=Object.freeze([Lf]),wo=Object.freeze([kf]),Yo=Object.freeze([Rf]),as=Object.freeze([Cf]),en=Object.freeze([vf]),yf=Object.freeze({REASON_COLON_OPENS_SCOPE:Vn,REASON_LINE_BREAK_BEFORE_OPEN_SCOPE:mu,REASON_CLOSING_LINE_BREAK:ks,REASON_SEQUENCE_SEPARATOR_COMMA:Kn,REASON_INTO_BETWEEN_INPUTS_OUTPUTS:pu,REASON_IS_OPENS_CONDITION_BRANCH_MATCH:bu,REASON_OPEN_STATEMENT_WITH_KEYWORD:Au,REASON_RIGHT_PARENTHESIS_CLOSES_LIST:Ou}),Ue=1,Fo=2,$t=3,Go=4,tn=5,go=6,He=7,ht=8,De=9,zt=10,Mt=11,Vo=12,Ko=13,Xt=1,Ho=2,ge=3,sn=4,$o=5,zo=6,Xo=7,Jo=1,Wo=2,Qo=3,qo=4,Zo=5,nn=6,xo=7,er=8,tr=9,sr=10,nr=11,or=12,rr=13,on=14,Jt=1,cr=2,us=3,ar=4,rn=5,ur=6,ir=7,Wt=1,lr=2,is=3,fr=4,Er=6,_r=1,mr=2,pr=3,br=4,cn=5,Ar=6,Or=7,ls=8,Tr=9,Nr=10,Ir=11,dr=12,hr=13,Sr=14,Pr=1,Lr=2,kr=1,Rr=2,jf=3;var Cr=7,an=8,vr=9,fs=1,Es=2,_s=3,ms=4,yt=5,ps=6,bs=7,jt=8,As=9,Os=10,Ts=11,wt=1,Ur=2,Dr=3,un=4,Br=5,Mr=6,yr=7,ln=8,jr=9,wr=10,Yr=11,Fr=12,Gr=13,gr=14,fn=15;var Vr=17,En=18,_n=19,Kr=20,Hr=21,mn=22,$r=23,zr=24,St=25,Ns=26,Xr=27,Jr=28,Wr=29,Qr=30,qr=31,Zr=32,xr=33,ec=34,tc=35,sc=36,nc=37,oc=38,rc=39,pn=40,bn=41,cc=42,ac=43,uc=44,An=45,ic=46,lc=47,fc=48,Ec=49,On=50,_c=51,mc=52,Tn=53,Nn=54,pc=55,bc=56,Ac=57,Oc=58,In=59,Tc=60,Nc=61,Ic=62,dc=63,hc=64,Sc=65,Et=1,Pc=2,Lc=3,kc=4,dn=5,Rc=6,Is=1,Cc=2,vc=3,Uc=4,Dc=5,Pt=6,Bc=7,hn=8,ds=9,Sn=10,hs=11,Mc=12,yc=13,Pn=14,Ln=15,kn=16,jc=17,wc=18,Yc=19,Rn=20,Fc=21,Gc=22,gc=23,Vc=24,Kc=25,Hc=26,Cn=27,$c=28,zc=29,vn=30,Xc=31,Un=32,Jc=33,Wc=34,Qc=35,qc=36,Zc=37,Dn=38,Bn=39,xc=40,ea=41,ta=42,sa=43,na=44,Mn=45,yn=46,oa=47,Ss=48,ra=49,ca=50,aa=51,ua=52,ia=53,la=54,fa=55,Ea=56,_a=57,ma=58,pa=59,ba=60,Aa=61,Oa=62,Ta=63,jn=64,Na=65,wn=66,Ia=67,Ps=68,da=69,Yn=70,ha=71,Sa=72,Pa=73,La=74,ka=75,Ra=76,Ca=77,va=78,Fn=1,Ua=2,Da=3,Ba=4,Ma=5,ya=6,ja=7,wa=8,Ya=9,Fa=10,Gn=11,Ga=12,ga=13,Va=14,Ka=15,Ha=16,$a=17,za=18,Xa=19,Ja=20,je="Flogram",Wa="0",Qa="any",gn="data",qa="code",Za=k=>["TRUE","FALSE"].includes(k),Ls=!1,Nu=k=>{let L=[],v=[],K=[],H={name:"draw",type:"procedure",description:{inputs:[{name:"a",data:{type:"data",name:"I32",path:"Flogram"}}],locals:[],outputs:[]}},x=Object.freeze({data:L,code:v,exports:K}),ne=new Uint8Array(If),re=[],Ae=0,oe=(c,n,e,f)=>{let t=Object.freeze({position:c,length:f});Ys(n,ne,e,e+f|0,Ae,Ae+f|0),re.push(t),Ae=Ae+f|0},fe=()=>{Ae=0;let c=ne,n=re,e=0;for(;n.length>0;){let f=n.shift(),{length:t,position:s}=f;Gt(s,c,e,t),e=e+t|0}},Ne=(c,n,e,f)=>{let{description:t}=c,{members:s}=t,o=s.find(E=>E.name===n[e]),i=L.find(E=>E.name===o.data.name);return i.type===Ye&&e<n.length-1?Ne(i,n,e+1,f):o},Be=c=>{let n=Number(c);if(isNaN(n))return"";if(Number.isInteger(n)){if(n>=-Math.pow(2,31)&&n<Math.pow(2,31))return"I32";if(n>=-Math.pow(2,63)&&n<Math.pow(2,63))return"I64"}else if(typeof n=="number")return c.replace(".","").length<=7?"FP32":"FP64"},Re=c=>{switch(c.type){case"select":return c.value.name;case"store":case"linkValue":return Re(c.link);case"valueLink":return Re(c.value)}return c.name},Nt=(c,n)=>{let e=qt[c];if(e){let f=e.find(t=>t.description&&Array.isArray(t.description.inputs)?t.description.inputs.length!==n.length?!1:t.description.inputs.every((s,o)=>s.data.name===n[o].data.name):!1);if(f)return f;A=O|0,b=position-N|0,Ft(c);return}else{A=O|0,b=position-N|0,Xn(c);return}},xe=c=>{let n=a.procedure.description.inputs.find(e=>e.name===c)||a.procedure.description.locals.find(e=>e.name===c);if(n){let e=L.find(f=>f.type===ss&&f.name===n.data.name);if(e)return{data:e}}return n},_e=(c,n=!1)=>{let e;switch(c.type){case Ks:{let f=a.stack.get(c.value.name||c.value.link,c.value.value);if(f){let t=L.find(T=>T.name===f.name),{description:s}=t,{members:o}=s,i=0,E=o.find(T=>T.name===c.trail[i]),m=L.find(T=>T.name===E.data.name);if(m.type===Ye&&i<c.trail.length-1)e={data:Ne(m,c.trail,i+1,n)?.data};else{if(E.data.freed){A=O|0,b=position-N|0,le(`Attempted to use '${c.trail.join(".")}', which has been freed. Ensure links are valid before use.`);return}if(n){let T=L.indexOf(t),P=JSON.parse(JSON.stringify(t)),C=t.description.members.indexOf(E);C>=0&&(P.description.members[C].data.freed=!0,L.splice(T,1,P))}e=E}}break}case it:{e=_e(c.link);break}case It:{e=_e(c.value);break}case $s:{e={data:a.stack.get(c.array.name)};break}case Hs:{if(c.trail.length>0){let f=L.find(t=>{if(t.description&&t.description.members)return t.description.members.find(s=>s.name===c.trail[0])});if(f){let{description:t}=f,{members:s}=t,o=0,i=s.find(m=>m.name===c.trail[o]),E=L.find(m=>m.name===i.data.name);E.type===Ye&&o<c.trail.length-1?e={data:Ne(E,c.trail,o+1,n).data}:e={data:i.data}}else A=O|0,b=0,lt(c.trail[0],`${nt}(current object in definition)`)}else e=a.stack.get(c.trail[0]);break}case Vt:{let f=s=>v.find(o=>o.type===st&&o.name===s.name)?.description.outputs[0],t=(s,o)=>{let i;for(let E=0;o&&E<=s.name.length-2;E++)o=a.stack.get(s.name[E]),o&&(i=L.find(m=>m.type===Ye&&m.name===o.name));return i?.description.members?.find(E=>E.name===s.name[s.name.length-1])?.description.outputs[0]};if(c.path!==je){if(e=f(c),typeof c.name=="object"){let s=a.stack.get(c.name[0]);e=t(c,s)}}else if(yo.has(c.name))e={data:{type:qe,name:"Bool",path:je}},Ve(e.data.name);else{let s=c.inputs.map(i=>_e(i)),o=v.find(i=>i.description&&Array.isArray(i.description.inputs)?i.description.inputs.length!==s.length||i.name!==c.name||i.path!==c.path?!1:i.description.inputs.every((E,m)=>E.data.name===s[m].data.name):!1);if(o){let{description:i}=o,{outputs:E}=i;e=E[0]}else{A=O|0,b=position-N|0,le(`Unable to find expression matching: ${s.map(i=>i.data.name)}`);return}}break}default:{e=xe(c.name);break}}if(!e)if(uo.includes(c.name)){let f=c.inputs.map(s=>_e(s)),t=Nt(c.name,f);e={data:{name:t.description.outputs[0].data.name,path:t.description.outputs[0].data.path}}}else c.type===ve&&(e={data:{type:ve,name:c.name,literal:c.literal,path:c.path}});return e},Ce=c=>{let n=_e(c);return n&&n.data.path===je&&n.data.type!==rt&&n.data.mutable?Object.seal({type:it,link:c}):c},we=(c,n)=>{let e=JSON.parse(JSON.stringify(c)),f=c.description.generics.map(s=>s.name);function t(s){for(let o in s)if(s[o]&&typeof s[o]=="object")t(s[o]);else if(o==="name"&&f.includes(s[o])){let i=f.indexOf(s[o]);s[o]=n[i].name,s.path=n[i].path}else if(o==="path"&&s[o].split(".").includes(e.name)){let i=s[o].split("."),E=i.indexOf(e.name),m=$e(e.name,n);i[E]=m,s[o]=i.join(".")}}t(e);for(let s of v){let{description:o}=s,{inputs:i,outputs:E}=o,m=[...i,...E];if(s.type==="native"&&m.some(T=>f.includes(T.data.name))){let T=JSON.parse(JSON.stringify(s));t(T),v.push(T)}}return e},$e=(c,n)=>{let f=n.map(t=>`${t.name}${t.segment?`_${t.segment}`:""}`).join("__");return`${c}___${f}`},_t=c=>c.type===It&&c.value!==nt||c.type===it&&c.link!==nt,{path:ct,imports:B,files:U,Tokenizer:D}=k,$=new Map,z=new Map,se=new Map,te=new Map,Q=(c,n="")=>{let{name:e,path:f}=c,t=n||e,s=`${f}.${t}`;se.set(s,c);let o=te.get(t)||[];o.push(c),te.set(t,o)},{data:Ie}=B;for(let c of Ie)Q(c);let ze=[ct],me=new xa.default,l=[],_=[],d=[],u=!1,h=!1,R=!1,y=!0,Y=!1,j=!1,I=Ue,r=Xt,a=null,ue=null,ie=[],ae=0,O=1,N=0,Ee=1,at=null,A=0,b=0,pe=(c,n,e,f)=>{let t=n.subarray(e,e+f|0),s=S(t);return Nf(c,n,e,f)?(A=O|0,b=c-N|0,Su(s),!0):ye(c,n,e,f)?(A=O|0,b=c-N|0,Le(s),!0):!1};me.on(Yt,c=>{for(let n of _)n(c)}),me.on(Pe,c=>{for(let n of d)n(c)});let Hn=c=>{let n=Object.freeze({type:ru,message:Ge.FAIL_DUPLICATE_DATA(c),failureRow:A,failureColumn:b,name:c});h=!0,R=!0,me.emit(Pe,n)},$n=c=>{let n=Object.freeze({type:cu,message:Ge.FAIL_DUPLICATE_OBJECT_MEMBER(c),failureRow:A,failureColumn:b,name:c});h=!0,R=!0,me.emit(Pe,n)},Iu=c=>{let n=Ee,e=mt(c),f=Object.freeze({type:nu,message:Ge.FAIL_INDENTATION_MISMATCH(A),failureRow:A,failureColumn:b,expected:n,actual:e});h=!0,R=!0,me.emit(Pe,f)},zn=c=>{let n=Object.freeze({type:ou,message:Ge.FAIL_INDENTATION_NO_INCREASE(A),failureRow:A,failureColumn:b,indentation:Ee});h=!0,R=!0,me.emit(Pe,n)},Le=c=>{let n=Object.freeze({type:au,message:Ge.FAIL_INVALID_IDENTIFIER(c),failureRow:A,failureColumn:b,identifier:c});h=!0,R=!0,me.emit(Pe,n)},du=(c,n)=>{let e=Object.freeze({type:uu,message:Ge.FAIL_RETURN_LENGTH_MISMATCH(c,n),failureRow:A,failureColumn:b});R=!0,me.emit(Pe,e)},hu=c=>{let n=Object.freeze({type:fu,message:Ge.FAIL_IMMUTABLE_ASSIGNMENT(c),failureRow:A,failureColumn:b,variable:c});h=!0,R=!0,me.emit(Pe,n)},Su=c=>{let n=Object.freeze({type:Eu,message:Ge.FAIL_RESERVED_KEYWORD_USAGE(c),failureRow:A,failureColumn:b,keyword:c});h=!0,R=!0,me.emit(Pe,n)},F=(c,n)=>{let e=Object.freeze({type:su,message:Ge.FAIL_UNEXPECTED_TOKEN(c,b),failureRow:A,failureColumn:b,reasons:n,token:c});h=!0,R=!0,me.emit(Pe,e)},Qt=c=>{let n=Object.freeze({type:tu,message:Ge.FAIL_UNRESOLVED_NAME(c),failureRow:A,failureColumn:b,name:c});h=!0,R=!0,me.emit(Pe,n)},lt=(c,n)=>{let e=Object.freeze({type:iu,message:Ge.FAIL_UNRESOLVED_OBJECT_MEMBER(c,n),failureRow:A,failureColumn:b,name:c});h=!0,R=!0,me.emit(Pe,e)},Xn=c=>{let n=Object.freeze({type:lu,message:Ge.FAIL_UNKNOWN_PROCEDURE_NAME(c),failureRow:A,failureColumn:b,name:c});h=!0,R=!0,me.emit(Pe,n)},Pu=c=>{let n=Object.freeze({type:bf,message:Ge.FAIL_UNALLOWED_COPY(c),failureRow:A,failureColumn:b,name:c});h=!0,R=!0,me.emit(Pe,n)},Lu=(c,n)=>{let e=Object.freeze({type:_u,message:Ge.FAIL_ASSIGNMENT_TYPE_MISMATCH(c,n),failureRow:A,failureColumn:b});h=!0,R=!0,me.emit(Pe,e)},le=c=>{let n=Object.freeze({type:Af,message:c,failureRow:A,failureColumn:b});h=!0,R=!0,me.emit(Pe,n)},ku=c=>{let n=Object.freeze({type:mf,message:Ge.FAIL_INPUT_TYPE_MISMATCH(A,c),failureRow:A,failureColumn:b,inputs:c});h=!0,R=!0,me.emit(Pe,n)},Ft=c=>{let n=Object.freeze({type:pf,message:Ge.FAIL_UNSUPPORTED_TYPE(c),failureRow:A,failureColumn:b,inputs});h=!0,R=!0,me.emit(Pe,n)},mt=c=>c-N|0,Rs=c=>{let n=Ee|0;return mt(c)<n},Cs=(c,n)=>{let e=Ee|0,f=mt(c);switch(n){case Qs:return f<=e;case Mo:return f!==e}throw qs},Yf=c=>{v.push(c)},vs=(c,n=!0)=>{let{name:e,path:f}=c,t=`${f}.${e}`;if(!$.has(t)){n?L.unshift(c):L.push(c),$.set(t,c),se.has(t)||Q(c);return}},Ve=c=>{let n=te.get(c);if(!n)return null;if(n.length===1){let[e]=n;return vs(e),e}throw qs},Ff=(c,n)=>{let{description:e}=c,{inputs:f,locals:t}=e,{name:s}=n;for(let o of f)if(o.name===s)return o.data;for(let o of t)if(o.name===s)return o.data;return null},Ru=(c,n,e,f)=>{switch(r){case Xt:{let t=n.subarray(e,e+f|0);if(a&&a.export&&(Ee=mt(c),at&&at!==Ee&&(w(),a=null,M(),at=null,Ee=1),at=Ee),X(t,nf)){M(),I=Ko,r=kr,u=!0;return}if(X(t,of)){M(),Ee=mt(c),a=Object.freeze({export:!0,indentation:Ee}),r=zo;return}if(X(t,Ql)){M(),I=Fo,r=Jo,u=!0;return}if(X(t,Lo)||X(t,Do)){M(),I=Go,r=_r,u=!0;return}if(X(t,vt)){M(),I=tn,r=Pr,u=!0;return}if(X(t,ko)){M(),I=go,r=fs,u=!0;return}break}case zo:{if(n[e]===Fe){r=Xt,M(),r=Xo;return}u=!0,r=Xt;break}case Xo:{if(n[e]===Oe){r=Xt;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ut);break}case Ho:{j=!1;let t=n.subarray(e,e+f|0);if(X(t,xl)){I=He,r=Dr,u=!0;return}if(X(t,ef)){I=He,r=uc,u=!0;return}if(X(t,ql)){I=He,r=qr,u=!0;return}if(X(t,Zl)){I=He,r=tc;return}if(X(t,Co)){I=He,r=Kr,u=!0;return}if(X(t,dt)||X(t,At)||X(t,os)){A=O|0,b=c-N|0;let i=S(t);F(i,en);return}if(X(t,vt)){I=He,r=Fr,u=!0;return}if(X(t,tf)){I=He,r=gr,u=!0;return}if(X(t,Bo)||X(t,af)){I=He,r=Nc,u=!0;return}if(!pe(c,n,e,f)){I=He,r=fc,u=!0;return}A=O|0,b=c-N|0;let s=S(t);F(s,Df);break}case ge:{let t=n[e],s=n.subarray(e,e+f|0),o=S(s);if(L.find(E=>E.type===Rt&&E.description.labels.find(m=>m.name===o))){I=De,r=Un,u=!0;return}if(gs(t)&&!Za(S(s))){if(L.find(T=>T.name===o&&T.type===Ye)){I=De,r=yc,u=!0;return}if(L.find(T=>T.type===Rt&&T.name===o)){I=De,r=Un,u=!0;return}}if(X(s,rs)){I=De,r=Qc,u=!0;return}if(X(s,Uo)){I=De,r=Hc,u=!0;return}if(X(s,Co)){I=De,r=vc,u=!0;return}if(X(s,dt)){I=De,r=Is,u=!0;return}if(X(s,At)){I=De,r=Is,u=!0;return}if(X(s,os)){I=De,r=Is,u=!0;return}if(X(s,ns)){I=De,r=Yn,u=!0;return}if(X(s,sf)){I=De,r=la,u=!0;return}r=sn,u=!0;break}case sn:{oe(c,n,e,f),r=$o;break}case $o:{oe(c,n,e,f);let t=n[e];if(t===he){I=De,r=ds,fe();return}if(t===Ot){I=De,r=Gc,fe();return}if(t===We){I=De,r=ds,fe();return}if(t===Ze){r=sn;return}I=De,r=Dc,fe();break}}},Cu=(c,n,e,f)=>{switch(r){case Jo:{let t=ze.join("."),s=Object.seal({labels:[],generics:[]}),o=Object.seal({type:Rt,name:et,path:t,description:s});a=Object.seal({enumeration:o}),r=Wo;break}case Wo:{let{enumeration:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(pe(c,n,e,f))return;t.name=o,r=Qo;break}case Qo:{let t=n[e];if(t===Fe){r=qo;return}if(t===We){let{enumeration:E}=a,{description:m}=E,{generics:T}=m;M(),a=T,I=zt,r=Wt,u=!0;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Tt);break}case qo:{if(n[e]===Oe){r=Zo;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ut);break}case Zo:{Ee=mt(c),r=nn,u=!0;break}case nn:{let{enumeration:t}=a;if(Rs(c)){if(vs(t),w(),a&&a.export){let s=Object.freeze({name:t.name,type:t.type,path:gn});K.push(s);let o=Ee;w(),Ee===o&&w(),Ee<o&&M()}u=!0;return}r=xo,u=!0;break}case xo:{let{enumeration:t}=a,{description:s}=t,{labels:o}=s,i=n.subarray(e,e+f|0),E=S(i);if(pe(c,n,e,f))return;let m={name:E};o.push(m),r=nn,M(),r=er;break}case er:{let t=n[e];if(u=!0,t===he){r=tr;return}let{enumeration:s}=a,{description:o}=s,{labels:i}=o,E=i.length-1;a=Object.seal({label:i[E]}),r=on;break}case tr:{if(n[e]===he){r=sr;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Qe);break}case sr:{let{enumeration:t}=a,{description:s}=t,{labels:o}=s;if(ye(c,n,e,f)){A=O|0,b=c-N|0,Le(E);return}let i=n.subarray(e,e+f|0),E=S(i),m=o.pop();m.data={name:E,path:ct},o.push(m),r=nr;break}case nr:{if(n[e]===Fe){r=or;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Tt);break}case or:{let{enumeration:t}=a,{description:s}=t,{labels:o}=s,i=n.subarray(e,e+f|0),E=S(i);if(pe(c,n,e,f))return;let m=o.pop();m.data.type=E,o.push(m),a=Object.seal({label:m}),r=rr;break}case rr:{if(n[e]===Se){r=on;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case on:{if(n[e]===Oe){w();return}break}}},vu=(c,n,e,f)=>{switch(r){case Wt:{r=lr,u=!0;break}case lr:{if(n[e]===We){r=is;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Qe);break}case is:{let t=n[e];if(t===Oe)return;if(t===ot){w();return}r=fr,u=!0;break}case fr:{let t=n.subarray(e,e+f|0),s=S(t);if(pe(c,n,e,f))return;M();let o=Object.seal({type:ss,name:s,path:ct});a=Object.seal({name:s,data:o}),Q(a.data,a.name),r=Er;break}case Er:{let t=a;w(),a.push(t);let o=n[e];if(o===ot){r=is,u=!0;return}if(o===Me){r=is;return}A=O|0,b=c-N|0;let i=n.subarray(e,e+f|0),E=S(i);F(E,Ke);break}}},Uu=(c,n,e,f)=>{switch(r){case Jt:{r=cr,u=!0;break}case cr:{if(n[e]===he){r=us;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Qe);break}case us:{let t=n[e];if(t===Oe)return;if(t===Se){w();return}r=ar,u=!0;break}case ar:{let t=n.subarray(e,e+f|0);if(M(),X(vo,t)){a=Object.seal({name:null,mutable:!0,data:null}),r=rn;return}a=Object.seal({name:null,data:null}),r=rn,u=!0;break}case rn:{let t=n.subarray(e,e+f|0),s=S(t);if(pe(c,n,e,f))return;a.name=s,r=ur;break}case ur:{if(n[e]===Fe){r=ir,M(),I=ht,r=Et;return}break}case ir:{let t=a;w();let s=a,{mutable:o,...i}=t;s.push(i);let E=n[e];if(E===Se){r=us,u=!0;return}if(E===Me){r=us;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Ke);break}}},Du=(c,n,e,f)=>{switch(r){case _r:{let t=ze.join("."),s=Object.seal({members:[],generics:[]}),o=Object.seal({type:Ye,name:et,copy:!0,path:t,description:s});a=Object.seal({mapNameMember:new Map,object:o}),r=mr,u=!0;break}case mr:{let t=n.subarray(e,e+f|0);if(r=pr,X(t,Do)){a.object.copy=!1;return}u=!0;break}case pr:{let t=n.subarray(e,e+f|0);if(X(t,Lo)){r=br;return}A=O|0,b=c-N|0;let s=S(t);F(s,Tt);break}case br:{let{object:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(pe(c,n,e,f))return;let i=Ve(o);i&&ze.join(".")===i.path&&(A=O|0,b=c-N|0,Hn(o)),t.name=o,vs(t,!1),r=hr;break}case hr:{if(n[e]===We)r=Sr,u=!0;else if(n[e]===Fe)r=cn,u=!0;else{let t=n.subarray(e,e+f|0),s=S(t);A=O|0,b=c-N|0,Le(s);return}break}case Sr:{let{object:t}=a,{description:s}=t,{generics:o}=s;r=cn,M(),a=o,I=zt,r=Wt,u=!0;break}case cn:{if(n[e]===Fe){r=Ar;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Tt);break}case Ar:{if(n[e]===Oe){r=Or;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ut);break}case Or:{if(Cs(c,Qs)){let t=l.length;if(l.length<1||l[t-1].item.indentation>=Ee){A=O|0,b=c-N|0,zn(c);return}}Ee=mt(c),r=ls,u=!0;break}case ls:{let{object:t}=a;if(Rs(c)){if(w(),a&&a.export){let s=Object.freeze({name:t.name,type:t.type,path:gn});K.push(s);let o=Ee;w(),Ee===o&&w(),Ee<o&&M()}u=!0;return}if(Cs(c,Mo)){A=O|0,b=c-N|0,Iu(c);return}r=Tr,u=!0;break}case Tr:{let{object:t,mapNameMember:s}=a,{description:o}=t,{members:i}=o,E=n.subarray(e,e+f|0),m=S(E);if(X(ko,E)){r=ls,M(),I=Vo,r=fs,u=!0;return}if(pe(c,n,e,f))return;s.has(m)&&(A=O|0,b=c-N|0,$n(m));let T=Object.seal({name:m,data:null});i.push(T),s.set(m,T),r=ls,M(),a=Object.seal({member:T}),r=Nr;break}case Nr:{if(n[e]===Fe){r=Ir;return}break}case Ir:{r=dr,M(),a=Object.seal({data:null}),M(),I=ht,r=Et,u=!0;break}case dr:{if(n[e]===Oe){let{data:E}=a;w();let{member:m}=a;m.data=E,w();return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Kt);break}}},Bu=(c,n,e,f)=>{switch(r){case fs:{let{mapNameMember:t,object:s}=a,{name:o}=s,i=new Map(t),E=`${ze.join(".")}.${o}`,m=Object.seal({generics:[],inputs:[],locals:[],outputs:[],statements:[]}),T=Object.seal({type:st,name:et,path:E,description:m});a=Object.seal({procedure:T,stack:i}),r=Es;break}case Es:{let{procedure:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(pe(c,n,e,f))return;t.name=o,r=_s;break}case _s:{if(n[e]===We)r=ms,u=!0;else if(n[e]===he)r=yt,u=!0;else{let t=n.subarray(e,e+f|0),s=S(t);A=O|0,b=c-N|0,Le(s);return}break}case ms:{let{procedure:t}=a,{description:s}=t,{generics:o}=s;r=yt,M(),a=o,I=zt,r=Wt,u=!0;break}case yt:{let{procedure:t}=a,{description:s}=t,{inputs:o}=s;r=ps,M(),a=o,I=$t,r=Jt,u=!0;break}case ps:{let{procedure:t,stack:s}=a,{description:o}=t,{inputs:i}=o;for(let C of i){let{name:V,data:G}=C;s.set(V,G)}i.length>0&&a.procedure.name===ho&&(A=O|0,b=c-N|0,le("Destructors should not return any values. Your destructor appears to return a number. Please adhere to Flogram's conventions and correct your code."));let E=n.subarray(e,e+f|0),m=n[e];if(X(E,Po)){r=bs;return}if(m===Fe){r=jt,u=!0;return}A=O|0,b=c-N|0;let T=S(E);F(T,jo);break}case bs:{let{procedure:t}=a,{description:s}=t,{outputs:o}=s;r=jt,M(),a=o,I=$t,r=Jt,u=!0;break}case jt:{let t=n[e],{outputs:s}=a.procedure.description;if(s.length>0&&a.procedure.name===zs&&(A=O|0,b=c-N|0,le(`Constructors in Flogram should not return any values. Your constructor seems to return ${s.length} outputs. Please correct your code according to Flogram rules.`)),s.length>0&&a.procedure.name===ho&&(A=O|0,b=c-N|0,le(`Destructors in Flogram should not return any values. Your destructor seems to return ${s.length} outputs. Please correct your code according to Flogram rules.`)),t===Fe){r=As;return}A=O|0,b=c-N|0;let o=n.subarray(e,e+f|0),i=S(o);F(i,Tt);break}case As:{if(n[e]===Oe){r=Os;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ut);break}case Os:{let{procedure:t,stack:s}=a,{description:o}=t,{statements:i}=o;r=Ts,M(),a=Object.seal({procedure:t,stack:s,statements:i}),I=He,r=wt,u=!0;break}case Ts:{let{procedure:t}=a,{name:s}=t;w();let{object:o,mapNameMember:i}=a,{description:E}=o,{members:m}=E;i.has(s)&&(A=O|0,b=c-N|0,$n(s));let T=Object.seal({name:t.name,data:{name:t.name,type:t.type,path:t.path}});m.push(t),i.set(s,T),u=!0;break}}},Mu=(c,n,e,f)=>{switch(r){case Pr:{let t=n.subarray(e,e+f|0);if(X(t,vt)){M(),I=tn,r=Lr,u=!0;return}break}case Lr:{if(n[e]===Oe){w();return}break}}},yu=(c,n,e,f)=>{switch(r){case fs:{let t=new Map,s=ze.join("."),o=Object.seal({generics:[],inputs:[],locals:[],outputs:[],statements:[]}),i=Object.seal({type:st,name:et,path:s,description:o});a=Object.seal({procedure:i,stack:t}),r=Es;break}case Es:{let{procedure:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(pe(c,n,e,f))return;t.name=o,r=_s;break}case _s:{if(n[e]===We)r=ms,u=!0;else if(n[e]===he)r=yt,u=!0;else{let t=n.subarray(e,e+f|0),s=S(t);A=O|0,b=c-N|0,Le(s);return}break}case ms:{let{procedure:t}=a,{description:s}=t,{generics:o}=s;r=yt,M(),a=o,I=zt,r=Wt,u=!0;break}case yt:{let{procedure:t}=a,{description:s}=t,{inputs:o}=s;r=ps,M(),a=o,I=$t,r=Jt,u=!0;break}case ps:{let{procedure:t,stack:s}=a,{description:o}=t,{inputs:i}=o;for(let C of i){let{name:V,data:G}=C;s.set(V,G)}let E=n.subarray(e,e+f|0),m=n[e];if(X(E,Po)){r=bs;return}if(m===Fe){r=jt,u=!0;return}A=O|0,b=c-N|0;let T=S(E);F(T,jo);break}case bs:{let{procedure:t}=a,{description:s}=t,{outputs:o}=s;r=jt,M(),a=o,I=$t,r=Jt,u=!0;break}case jt:{if(n[e]===Fe){r=As;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Tt);break}case As:{if(n[e]===Oe){r=Os;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ut);break}case Os:{let{procedure:t,stack:s}=a,{description:o}=t,{statements:i}=o;r=Ts,M(),a=Object.seal({procedure:t,stack:s,statements:i}),I=He,r=wt,u=!0;break}case Ts:{let{procedure:t}=a;if(v.push(t),w(),a&&a.export){let s=Object.freeze({name:t.name,type:t.type,path:qa});K.push(s);let o=Ee;w(),Ee===o&&w(),Ee<o&&M()}u=!0;break}}},ju=(c,n,e,f)=>{switch(r){case wt:{if(Cs(c,Qs)){A=O|0,b=c-N|0,zn(c);return}Ee=mt(c),r=Ur,u=!0;break}case Ur:{let t=n.subarray(e,e+f|0);if(Rs(c)){w(),u=!0;return}M(),I=Ue,r=Ho,u=!0;break}case tc:{let{statements:t}=a,s={type:Xl};t.push(s),w();break}case qr:{let{procedure:t,stack:s,statements:o}=a,i=Object.freeze({type:Vl,statements:[]});o.push(i),M(),a=Object.seal({blockLoop:i,procedure:t,stack:s,value:0}),r=Zr;break}case Zr:{if(n[e]===Fe){r=xr;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Tt);break}case xr:{let{blockLoop:t,procedure:s,stack:o}=a,{statements:i}=t;if(n[e]===Oe){r=ec,M(),a=Object.seal({procedure:s,stack:o,statements:i}),I=He,r=wt;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Kt);break}case ec:{w(),w(),u=!0;break}case Dr:{let{procedure:t,stack:s,statements:o}=a,i=Object.freeze({type:gl,branches:[],values:[]});o.push(i),M(),a=Object.seal({blockCondition:i,procedure:t,stack:s,value:0}),r=sc;break}case sc:{oe(c,n,e,f),r=nc;break}case nc:{oe(c,n,e,f);let t=n[e],s=n.subarray(e,e+f|0);if(t===he){r=oc,fe();return}if(X(s,So)){r=un,fe();return}break}case uc:{let{stack:t,branches:s,procedure:o}=a,i={type:po,statements:[],values:[]};s.push(i),a=Object.seal({branch:i,stack:t,procedure:o}),r=bn;break}case oc:{let t=n.subarray(e,e+f|0),{blockCondition:s,stack:o,procedure:i}=a,{branches:E}=s,m={type:mo,statements:[],values:[]};E.push(m);let T=S(t),P={type:Vt,name:T,path:je,inputs:[]},C=v.find(V=>V.type===st&&V.name===T);C&&(P.path,C.path),a=Object.seal({blockCondition:s,branch:m,stack:o,value:P,procedure:i}),r=rc;break}case rc:{if(n[e]===he){r=In;return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Qe);break}case In:{let{stack:t,procedure:s}=a;if(n[e]===Se){r=pn,u=!0;return}r=Tc,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Tc:{let{value:t}=a;w();let{value:s,stack:o,procedure:i}=a,{inputs:E}=s;E.push(Ce(t));let m=n[e];if(m===Se){r=pn,u=!0;return}if(m===Me){r=In;return}A=O|0,b=c-N|0;let T=n.subarray(e,e+f|0),P=S(T);F(P,Zs);break}case pn:{let{value:t,branch:s,stack:o}=a,{values:i}=s,{name:E}=t,m=qt[E];if(m){let V=t.inputs.map(g=>_e(g))||[],G=m.find(g=>g.description&&Array.isArray(g.description.inputs)?g.description.inputs.length!==V.length?!1:g.description.inputs.every((J,Z)=>J.data.name===V[Z].data.name):!1);G&&v.push(G)}if(i.push(t),Ve("Bool"),n[e]===Se){r=bn;return}A=O|0,b=c-N|0;let T=n.subarray(e,e+f|0),P=S(T);F(P,Ke);break}case bn:{let t=n.subarray(e,e+f|0);if(n[e]===Fe){r=cc;return}A=O|0,b=c-N|0;let s=S(t);F(s,Dt);break}case cc:{let{branch:t,procedure:s,stack:o}=a,{statements:i}=t;if(n[e]===Oe){r=ac,M(),a=Object.seal({procedure:s,stack:o,statements:i}),I=He,r=wt;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Kt);break}case ac:{let{branch:t}=a;if(t.type===po){w(),w();let{branches:s,...o}=a;a=Object.seal(o)}else{let{blockCondition:s}=a,{branches:o}=s;w(),w(),a=Object.seal({...a,branches:o})}u=!0;break}case un:{let{blockCondition:t,stack:s}=a,{values:o}=t,i=n.subarray(e,e+f|0),E=S(i);if(pe(c,n,e,f))return;if(s.has(E)){let m=Object.freeze({type:tt,name:E});o.push(m)}r=Br;break}case Br:{if(n[e]===Me){r=un;return}let s=n.subarray(e,e+f|0);if(X(s,So)){r=Mr,M(),r=yr,u=!0;return}A=O|0,b=c-N|0;let o=S(s);F(o,Uf);break}case Mr:{w(),w(),u=!0;break}case yr:{let{blockCondition:t,procedure:s,stack:o}=a,{branches:i}=t,E=Object.seal({type:mo,statements:[],values:[]});i.push(E),a=Object.seal({blockCondition:t,branchMatch:E,procedure:s,stack:o}),r=ln;break}case ln:{let{blockCondition:t,branchMatch:s,stack:o}=a,{values:i}=t,{values:E}=s,m=n.subarray(e,e+f|0),T=S(m);if(pe(c,n,e,f))return;if(o.has(T)){let P=Object.freeze({type:tt,name:T});E.push(P)}else{let{procedure:P}=a,{description:C}=P,{outputs:V}=C,G=T,{name:g,path:J}=V[0].data,Z=Object.freeze({type:ve,literal:G,name:g,path:J});E.push(Z)}r=jr;break}case jr:{let t=n[e];if(t===Me){r=ln;return}if(t===Fe){r=wr;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Tt);break}case wr:{let{branchMatch:t,procedure:s,stack:o}=a,{statements:i}=t;if(n[e]===Oe){r=Yr,M(),a=Object.seal({procedure:s,stack:o,statements:i}),I=He,r=wt;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Kt);break}case Yr:{w();let t=n.subarray(e,e+f|0),s=S(t);u=!0;break}case Fr:{r=Gr;break}case Gr:{if(n[e]===Oe){w();return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Kt);break}case gr:{let{procedure:t,stack:s,statements:o}=a,i=Object.seal({type:$l,values:[]});o.push(i),M();let E=O|0,m=c-N|0,T=Object.freeze({row:E,column:m});a=Object.seal({commandReturn:i,coordinates:T,procedure:t,stack:s}),r=fn;break}case fn:{let{stack:t,procedure:s}=a;if(n[e]===Oe){r=En,u=!0;return}r=Vr,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Vr:{let{value:t}=a;w();let{commandReturn:s,stack:o,procedure:i}=a,{values:E}=s;E.push(Ce(t));let m=n[e];if(m===Oe){r=En,u=!0;return}if(m===Me){r=fn;return}A=O|0,b=c-N|0;let T=n.subarray(e,e+f|0),P=S(T);F(P,Zs);break}case En:{let{commandReturn:t,coordinates:s,procedure:o}=a,{values:i}=t,{description:E}=o,{outputs:m}=E;i.length!==m.length&&(A=s.row|0,b=s.column|0,du(m.length,i.length));for(let T of m){let P=m.indexOf(T),C=_e(i[P]);C&&C.data.name!=T.data.name&&(A=s.row|0,b=s.column|0,le(`Mismatching types provided on procedure's return. Procedure expected ${T.data.name} at index ${P} but was provided with a rather ${C.data.name}. Please review to provide matching types.`))}w(),w();break}case fc:{let t=n.subarray(e,e+f|0),{procedure:s,stack:o,statements:i}=a,E={type:tt,name:null},m=Object.seal({type:ts,target:E,source:null});a=Object.freeze({declarationValue:m,procedure:s,stack:o,statements:i,target:E}),X(vo,t)?(E.mutable=!0,r=_n):(u=!0,r=Nn);break}case Nn:{oe(c,n,e,f),r=pc;break}case pc:{if(oe(c,n,e,f),n[e]===he){let{procedure:t,stack:s,statements:o}=a;r=bc;let i=Object.seal({type:Oo,expression:null});a=Object.seal({stack:s,procedure:t,drop:i,value:null,statements:o}),M(),I=De,r=ds,fe();return}if(n[e]===Ze){r=Nn;return}r=_n,fe();break}case bc:{let{statements:t,drop:s,value:o}=a;s.expression=o,t.push(s),w();break}case _n:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s),i=t.get(o);if(t.has(o)&&!i.mutable&&(j=!0),X(Uo,s)){u=!0,r=Ec;return}let{target:E}=a;E.name=o,r=mn;break}case mn:{let t=n[e],{procedure:s,stack:o,statements:i,target:E}=a;if(t===Ot){let C=a.declarationValue,V={type:ts,target:{type:Gl,array:{type:tt,name:C.target.name},index:null},source:null};a=Object.seal({declarationValue:V,procedure:s,stack:o,statements:i}),u=!0,r=Jr;return}if(t===Ze){let C=a.declarationValue,V=[],G=C.target;a=Object.seal({declarationValue:{type:ts,target:{type:Ks,value:G,trail:V},source:null},procedure:s,stack:o,statements:i}),M(),a=Object.seal({stack:o,trail:V,value:G}),r=An;return}if(t===Fe){u=!0,r=$r;return}if(t===Se){let{declarationValue:C}=a;w(),a.declarationValue.target=C.target,u=!0;return}if(t===Js){let C=a.declarationValue?.target&&Re(a.declarationValue?.target);if(C&&C!==nt&&!o.get(C)){A=O|0,b=c-N|0,Qt(C);return}r=Ns;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Dt);break}case Ec:{a.target.type=Hs,a.target.trail=[],delete a.target.name,r=On;break}case On:{if(n[e]===Ze){r=_c;return}r=Tn,u=!0;break}case _c:{let t=n.subarray(e,e+f|0),s=S(t);a.target.trail.push(s),r=mc;break}case mc:{if(n[e]===Ze){r=On,u=!0;return}r=Tn,u=!0;break}case Tn:{r=St,u=!0;break}case Jr:{if(n[e]===Ot){r=Wr;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,xs);break}case Wr:{let{stack:t,procedure:s}=a;r=Qr,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Qr:{if(n[e]===cs){let{value:E}=a;w();let m=_e(E);if(m.data.mutable?a.declarationValue.target.index=Object.seal({type:it,link:E}):a.declarationValue.target.index=E,!m||!["I32","U32","I16","U16","U8","I8"].includes(m.data.name)){A=O|0,b=c-N|0,le("Invalid index. Array index should be a valid I32 variable");return}r=St;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,wo);break}case Kr:{let{procedure:t,stack:s,statements:o}=a,i=Object.seal({type:Ao,link:null}),E=Object.seal({type:ts,target:i,source:null});a=Object.freeze({declarationValue:E,procedure:t,stack:s,statements:o}),r=Ac;break}case Ac:{if(n[e]===he){r=Hr;return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Qe);break}case Hr:{let{stack:t,procedure:s}=a;r=Oc,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Oc:{if(n[e]===Se){let{value:i}=a;w(),a.declarationValue.target.link=i,r=mn;return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Ke);break}case ic:{if(n[e]!==Ze){w(),u=!0;return}r=An;break}case An:{let{stack:t,value:s,trail:o}=a,i=n.subarray(e,e+f|0),E=S(i),m,T,P=!1;if(s.type===tt){let{name:C}=s;m=t.get(C)}if(m){let{name:C,path:V}=m,G=`${V}.${C}`,g=se.get(G);g.type===Ye&&(T=g)}if(T){let{description:C}=T,{members:V}=C;for(let G of V)if(G.name===E){P=!0;break}if(!P){A=O|0,b=c-N|0,lt(E,s.name);return}}if(s.value===nt||s.link===nt){if(!t.get(E)){A=O|0,b=c-N|0,lt(E,`${nt}(current object in definition)`);return}P=!0}if(!P){A=O|0,b=c-N|0,lt(E,s.name);return}o.push(E),r=ic;break}case $r:{let t=n.subarray(e,e+f|0),s=S(t);if(n[e]===Fe){let{target:E,stack:m}=a,{name:T}=E;if(m.has(T)){A=O|0,b=c-N|0,Hn(T);return}if(n[e+1]===Js&&f>1){r=lc,u=!0;return}r=zr;return}A=O|0,b=c-N|0,F(s,Bf);break}case zr:{let{declarationValue:t,procedure:s,stack:o}=a,{target:i}=t,{description:E}=s,{locals:m}=E,T=n.subarray(e,e+f|0),P=S(T);if(ye(c,n,e,f)){A=O|0,b=c-N|0,Le(P);return}if(X(ns,T)){r=St,M(),I=Mt,r=Fn,u=!0;return}if(X(T,At)||X(T,dt)){r=St,M(),I=Mt,r=Gn,u=!0;return}if(X(T,rs)){r=St,M(),I=Mt,r=$a,u=!0;return}let C=Ve(P);if(C){let V=Object.seal({type:qe,name:C.name,path:C.path}),G;i.mutable?G=Object.freeze({name:i.name,data:{...V,mutable:i.mutable}}):G=Object.freeze({name:i.name,data:V}),o.set(i.name,G.data),m.push(G)}r=St;break}case lc:{let{declarationValue:t,procedure:s,stack:o,statements:i}=a,{target:E}=t,{description:m}=s,{locals:T}=m,P;E.mutable?(P={name:E.name,mutable:E.mutable,data:null},delete E.mutable):P=Object.seal({name:E.name,data:null}),o.set(E.name,P.data),T.push(P),a=Object.seal({declarationValue:t,procedure:s,stack:o,statements:i,inferenceValue:P}),r=Ns;break}case St:{let t=n.subarray(e,e+f|0);if(X(t,Xs)){r=Ns;return}A=O|0,b=c-N|0;let s=S(t);F(s,Dt);break}case Ns:{let{procedure:t,stack:s,target:o}=a,i=n[e];if(ye(c,n,e,f)&&i!==Ot){let E=n.subarray(e,e+f|0),m=S(E);A=O|0,b=c-N|0,Le(m);return}r=Xr,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ue,r=ge,u=!0;break}case Xr:{if(n[e]===Oe){let{value:E}=a;w();let{declarationValue:m,statements:T,stack:P}=a;if(a.inferenceValue){let W=function(ee){let be;switch(ee.type){case tt:{let Te=P.get(ee.name);Te.type===qe?be=Te:Te.type===ve?(be={type:qe,name:Te.name,path:Te.path},ee.mutable&&(be.mutable=ee.mutable)):(Te.type===rt||Te.type==="Link")&&(be=Te);let{moved:Jn,...Xe}=be;be=Xe;break}case ve:{be={type:qe,name:ee.name,path:ee.path},ee.layout===rt&&(be.type=rt,be.length=ee.literal.length);break}case To:{be={type:ee.type,name:ee.data.name,path:ee.data.path};break}case No:{be=W(ee.value);break}case Vt:{let Te=Xe=>v.find(ut=>ut.type===st&&ut.name===Xe.name)?.description.outputs[0]?.data,Jn=(Xe,ut)=>{let Je;for(let ft=0;ut&&ft<=Xe.name.length-2;ft++)ut=P.get(Xe.name[ft]),ut&&(Je=L.find(Lt=>Lt.type===Ye&&Lt.name===ut.name));return Je?.description.members?.find(ft=>ft.name===Xe.name[Xe.name.length-1])?.description.outputs[0]?.data};if(ee.path!==je){if(be=Te(ee),typeof ee.name=="object"){let Xe=P.get(ee.name[0]);be=Jn(ee,Xe)}}else if(yo.has(ee.name))be={type:qe,name:"Bool",path:je},Ve(be.name);else{let Xe=ee.inputs.map(Je=>_e(Je)),ut=v.find(Je=>Je.description&&Array.isArray(Je.description.inputs)?Je.description.inputs.length!==Xe.length||Je.name!=ee.name?!1:Je.description.inputs.every((ft,Lt)=>ft.data.name===Xe[Lt].data.name):!1);if(ut){let{description:Je}=ut,{outputs:ft}=Je,Lt=ft[0],{data:Vu}=Lt,{name:Ku,path:Hu}=Vu;be={type:qe,name:Ku,path:Hu}}else{A=O|0,b=c-N|0,le(`Unable to find expression matching: ${Xe.map(Je=>Je.data.name)}`);return}}break}case It:{be={...W(ee.value),type:bo},ee.unsafe&&(be.unsafe=ee.unsafe),ee.smart&&(be.smart=ee.smart);break}case it:{let Te=P.get(ee.link);be={type:qe,name:Te.name,path:Te.path};break}case $s:{let Te=P.get(ee.array.name);be={type:qe,name:Te.name,path:Te.path};break}default:{console.log("Unhandled: ",ee.type);break}}return be},{inferenceValue:q}=a;q.data=W(E),q.mutable&&(q.data.mutable=q.mutable,delete q.mutable),P.set(q.name,q.data)}let{target:C}=m,V=Re(C),G=Re(E);if(P.has(G)){let q=L.find(W=>W.name===P.get(G).name&&W.type===Ye);q&&!q.copy&&(A=O|0,b=c-N|0,Pu(G))}V&&V!==nt&&(q=>{if(!P.get(q)?.mutable&&j){A=O|0,b=c-N|0,hu(q);return}})(V),m.source=E;let J=_e(C),Z=_e(E),de=(q,W)=>{if(q===W)return!0;if(typeof q!="object"||q===null||typeof W!="object"||W===null)return!1;if(q.type==="local"&&W.type==="local")return q.name===W.name;let ee=Object.keys(q).filter(Te=>Te!=="mutable"),be=Object.keys(W).filter(Te=>Te!=="mutable");if(ee.length!==be.length)return!1;for(let Te of ee)if(!be.includes(Te)||!de(q[Te],W[Te]))return!1;return!0},ke=(q,W)=>q.some(ee=>de(ee,W));if(J&&Z){J.data?.mutable&&J.data.path===je&&J.data.type!==rt&&(ke(ie,C)||a.procedure.description.inputs.some(W=>W.name===J.name||W.name===Re(C))?m.target=Object.seal({type:Ao,link:C}):Z.data.path===je&&Z.data.type!==rt&&(m.source=Object.seal({type:It,value:E}),ie.push(C))),Z.data?.mutable&&Z.data.path===je&&Z.data.type!==rt&&(m.source=Object.seal({type:it,link:E}));let q=(W,ee)=>W.slice(1)===W.slice(1)||W.charAt(0)===W.charAt(0)||(W==="FP64"||W==="FP32"||W==="I64"||W==="U64"||W==="I32"||W==="U32"||W==="I16"||W==="U16"||W==="I8"||W==="U8")&&ee==="I32"||W==="FP64"&&ee=="FP32";if(J.data.name!==Z.data.name&&!(J.data.type===Z.data.name||J.data.name===Z.data.type)&&!(Z.data.type===ve&&q(J.data.name,Z.data.name))){A=O|0,b=c-N|0,Lu(J.data.name,Z.data.name);return}}T.push(m),w();return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Mf);break}case Nc:{let{stack:t,procedure:s}=a,o=Object.seal({type:Jl,unsafe:!0,value:null}),i=n.subarray(e,e+f|0);X(i,Bo)&&(o.unsafe=!1),M(),a=Object.seal({free:o,stack:t,procedure:s}),r=Ic;break}case Ic:{if(n[e]===he){let{stack:E,procedure:m}=a;r=dc,M(),a={stack:E,procedure:m,value:null},M(),r=ge,I=Ue;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Qe);break}case dc:{let{value:t,stack:s}=a;w();let{free:o}=a;o.value=Ce(t);let i=!0,{name:E,data:m}=_e(t,i);if(A=O|0,b=c-N|0,m.type!==bo){le(`Variable '${E}' is not a link and cannot be freed. Only 'unsafe' links are freeable.`);return}if(m.unsafe!==o.unsafe){le(`Improper free method used for link '${E}'. Unsafe links are unsafely freed with 'free!!' while safe ones are freed with 'free'. Your link(${E}) is ${m.unsafe?"un":""}safe.`);return}let T=s.get(E);T&&s.set(E,{...T,freed:!0}),r=hc,u=!0;break}case hc:{if(n[e]===Se){let{free:E}=a;w();let{statements:m}=a;m.push(E),r=Sc;break}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case Sc:{w();break}}},wu=(c,n,e,f)=>{switch(r){case Et:{let t=n.subarray(e,e+f|0),s=S(t);if(ye(c,n,e,f)&&!pt.includes(s)){A=O|0,b=c-N|0,Le(s);return}if(r=Pc,X(At,t)){a.data=Object.seal({type:s,unsafe:!0});return}if(X(dt,t)){a.data=Object.seal({type:s});return}if(X(rs,t)){a.data=Object.seal({type:s});return}if(X(ns,t)){a.data={type:s};let i=l.length;if(l[i-1].situationGeneral===4){M();let{data:m}=a;a={isEnum:!0,type:m},u=!0,r=Fn,I=Mt;return}return}let o=Ve(s);if(o){o.type===ss?a.data=Object.seal({type:qe,name:s,path:o.path}):a.data=Object.seal({type:qe,name:o.name,path:o.path}),a.mutable&&(a.data=Object.seal({...a.data,type:S(dt),unsafe:!0,mutable:a.mutable}));return}console.log("Failed to find type",s),A=O|0,b=c-N|0,Qt(s),w();break}case Pc:{let t=n.subarray(e,e+f|0);if(n[e]===We){u=!0,r=Lc;return}w(),u=!0;break}case Lc:{if(n[e]===We){r=kc;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ht);break}case kc:{let t=n.subarray(e,e+f|0),s=S(t),o=Ve(s);if(o){let{data:E}=a,{unsafe:m,type:T,smart:P}=E,C=ce(T);if(X(C,At))a.data=Object.seal({type:T.replace(/!!$/,""),name:o.name,path:o.path,segment:et,unsafe:m});else if(X(C,dt))a.data=Object.seal({type:T,name:o.name,path:o.path,segment:et});else if(X(C,os))a.data=Object.seal({type:T,name:o.name,path:o.path,segment:et,smart:P});else{if(L.find(G=>G.type===Ye&&G.name===E.name)){r=Rc,M(),a=[],M(),a={data:null},M(),u=!0,r=Et;return}a.data=Object.seal({type:T,name:o.name,path:o.path})}a.mutable&&(a.data=Object.seal({...a.data,mutable:a.mutable}));return}let i=n[e];if(i===Me)return;if(i===ot){u=!0,r=dn;return}a.data.segment!==void 0&&(a.data.segment=s),r=dn;break}case Rc:{let t=n[e],{data:s}=a;if(w(),a.push(s),t===Me){M(),a={data:null},M(),r=Et;return}if(t===ot){let m=a;w();let T=L.find(C=>C.type===Ye&&C.name===a.data.name);if(!(T.description?.generics?.length===m.length)){A=O|0,b=c-N|0,le(`Generic object '${name}' was provided with fewer or more than expect number of types. Expected: ${T.description.generics.length}. Got: ${m.length}`);return}a.data.name=$e(a.data.name,m),w();return}A=O|0,b=c-N|0;let o=n.subarray(e,e+f|0),i=S(o);F(i,Bt);break}case dn:{if(n[e]===ot){w();return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Bt);break}}},Yu=(c,n,e,f)=>{switch(r){case Fn:{let t=n.subarray(e,e+f|0),s=S(t),o=Object.seal({type:s,name:null,length:null,path:je});a=Object.seal({...a,type:o}),r=Ua;break}case Ua:{let t=n.subarray(e,e+f|0);if(n[e]===We){r=Da;return}A=O|0,b=c-N|0;let s=S(t);F(s,Ht);break}case Da:{let t=n.subarray(e,e+f|0),s=S(t);if(ye(c,n,e,f)&&!pt.includes(s)){let o=n.subarray(e,e+f|0),i=S(o);A=O|0,b=c-N|0,Le(i);return}Ve(s),a.type.name=s,r=Ba;break}case Ba:{let t=n.subarray(e,e+f|0);if(n[e]===ot){r=Ma;return}A=O|0,b=c-N|0;let s=S(t);F(s,Bt);break}case Ma:{let t=n.subarray(e,e+f|0);if(n[e]===he){r=ya;return}A=O|0,b=c-N|0;let s=S(t);F(s,Qe);break}case ya:{let t=n.subarray(e,e+f|0);if(X(Ro,t)){r=ja;return}A=O|0,b=c-N|0;let s=S(t);F(s,as);break}case ja:{let t=n.subarray(e,e+f|0);if(X(Xs,t)){r=wa;return}A=O|0,b=c-N|0;let s=S(t);F(s,Dt);break}case wa:{if(ye(c,n,e,f)){let o=n.subarray(e,e+f|0),i=S(o);A=O|0,b=c-N|0,Le(i);return}let t=n.subarray(e,e+f|0),s=S(t);a.type.length=s,r=Ya;break}case Ya:{let t=n.subarray(e,e+f|0);if(n[e]===Se){r=Fa,u=!0;return}A=O|0,b=c-N|0;let s=S(t);F(s,Ke);break}case Fa:{if(a.isEnum){let{type:P}=a;w(),a.data=P;return}let{declarationValue:t,procedure:s,stack:o}=a,{target:i}=t,{description:E}=s,{locals:m}=E,T;i.mutable?T=Object.freeze({name:i.name,data:{...a.type,mutable:i.mutable}}):T=Object.freeze({name:i.name,data:a.type}),o.set(i.name,T.data),m.push(T),w();break}case Gn:{let t=n.subarray(e,e+f|0),o={type:S(t).replace(/!!$/,""),path:je};X(t,At)&&(o.unsafe=!0),o=Object.seal({...o,name:null,segment:null});let{declarationValue:i,stack:E,procedure:m}=a;a=Object.seal({declarationValue:i,stack:E,procedure:m,type:o}),r=Ga;break}case Ga:{let t=n.subarray(e,e+f|0);if(n[e]===We){r=ga;return}A=O|0,b=c-N|0;let s=S(t);F(s,Ht);break}case ga:{let t=n.subarray(e,e+f|0),s=S(t);if(ye(c,n,e,f)&&!pt.includes(s)){A=O|0,b=c-N|0,Le(s);return}Ve(s),a.type.name=s,r=Va;break}case Va:{let t=n.subarray(e,e+f|0);if(n[e]===Me){r=Ka;return}A=O|0,b=c-N|0;let s=S(t);F(s,Ke);break}case Ka:{if(ye(c,n,e,f)){let o=n.subarray(e,e+f|0),i=S(o);A=O|0,b=c-N|0,Le(i);return}let t=n.subarray(e,e+f|0),s=S(t);a.type.segment=s,r=Ha;break}case Ha:{let t=n.subarray(e,e+f|0);if(n[e]===ot){if(a.declarationValue){let{declarationValue:i,procedure:E,stack:m}=a,{target:T}=i,{description:P}=E,{locals:C}=P,V;T.mutable?V=Object.freeze({name:T.name,data:{...a.type,mutable:T.mutable}}):V=Object.freeze({name:T.name,data:a.type}),m.set(T.name,V.data),C.push(V),w()}else{let{type:i}=a;w(),a.data=i}return}A=O|0,b=c-N|0;let s=S(t);F(s,Bt);break}case $a:{let t=n.subarray(e,e+f|0),s=S(t),o=Object.seal({type:s,path:null,name:null}),{declarationValue:i,stack:E,procedure:m}=a;a=Object.seal({declarationValue:i,stack:E,procedure:m,type:o}),r=za;break}case za:{let t=n.subarray(e,e+f|0);if(n[e]===We){r=Xa;return}A=O|0,b=c-N|0;let s=S(t);F(s,Ht);break}case Xa:{let t=n.subarray(e,e+f|0),s=S(t);if(ye(c,n,e,f)){A=O|0,b=c-N|0,Le(s);return}let o=Ve(s);a.type.name=s,a.type.path=o.path,r=Ja;break}case Ja:{let t=n.subarray(e,e+f|0);if(n[e]===ot){let{declarationValue:i,procedure:E,stack:m}=a,{target:T}=i,{description:P}=E,{locals:C}=P,V;T.mutable?V=Object.freeze({name:T.name,data:{...a.type,mutable:T.mutable}}):V=Object.freeze({name:T.name,data:a.type}),m.set(T.name,V.data),C.push(V),w();return}A=O|0,b=c-N|0;let s=S(t);F(s,Bt);break}}},Fu=(c,n,e,f)=>{switch(r){case Is:{let t=Object.seal({type:It,unsafe:null,smart:null,value:null}),s=n.subarray(e,e+f|0);X(s,At)&&(t.unsafe=!0),X(s,os)&&(t.smart=!0),a.value=t,r=pa;break}case pa:{if(n[e]===he){r=Cc;return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Qe);break}case Cc:{let{stack:t,procedure:s}=a,o=n.subarray(e,e+f|0),i=S(o),E=t.get(i);E&&E.moved&&(A=O|0,b=c-N|0,le(`Moved variable used as value. Variable '${i}' was used while having been moved before.`)),r=ba,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case ba:{if(n[e]===Se){let{value:i}=a;w(),a.value.value=Ce(i),w();return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Qe);break}case vc:{let t=Object.seal({type:it,link:null});a.value=t,r=Aa;break}case Aa:{if(n[e]===he){r=Uc;return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Qe);break}case Uc:{let{stack:t,procedure:s}=a,o=n.subarray(e,e+f|0),i=S(o),E=t.get(i);E&&E.moved&&(A=O|0,b=c-N|0,le(`Moved variable used as value. Variable '${i}' was used while having been moved before.`)),r=Oa,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Oa:{if(n[e]===Se){let{value:i}=a;w(),a.value.link=Ce(i),w();return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Ke);break}case Hc:{let t=Object.seal({type:Hs,trail:[]});a.value=t,r=Cn;break}case Cn:{if(n[e]===Ze){r=$c;return}r=vn,u=!0;break}case $c:{let t=n.subarray(e,e+f|0),s=S(t);a.value.trail.push(s),r=zc;break}case zc:{if(n[e]===Ze){r=Cn,u=!0;return}r=vn,u=!0;break}case vn:{w(),u=!0;break}case yc:{let t=n.subarray(e,e+f|0),s=S(t),o=L.find(P=>P.name===s);if(!o){A=O|0,b=c-N|0,Qt(s);return}let{description:i}=o,{members:E}=i,m=E.some(P=>P.name==="constructor"&&P.type===st),T=Object.seal({type:ve,explicitConstructor:m,name:s,literal:[],path:o.path});a.value=T,r=ca;break}case ca:{let t=n[e];if(t===he){r=Pn,u=!0;return}if(t===We){r=aa;return}break}case aa:{M(),a=[],r=ua,u=!0;break}case ua:{r=ia,M(),a={data:null},M(),I=ht,r=Et,u=!0;break}case ia:{let t=n[e],{data:s}=a;if(w(),a.push(s),t===Me){r=Ss;return}if(t===ot){let o=a;w();let{value:i}=a,{name:E}=i,m=L.find(T=>T.type===Ye&&T.name===E);if(m){if(!(m.description.generics.length===o.length)){A=O|0,b=c-N|0,le(`Generic procedure '${E}' was provided with fewer or more than expect number of types. Expected: ${genericProcedure.description.generics.length}. Got: ${o.length}`);return}let P=$e(m.name,o);if(!L.some(C=>C.name===P)){let C=we(m,o);C.name=P,C.description.generics=[],L.push(C)}i.name=P}r=Pn;break}}case Pn:{let{value:t}=a,{explicitConstructor:s,...o}=t;if(t=Object.seal(o),n[e]===he){if(s){r=Ta;return}r=Ln;return}A=O|0,b=c-N|0;let E=n.subarray(e,e+f|0),m=S(E);F(m,Qe);break}case Ln:{if(n[e]===Oe)return;if(n[e]===Me){r=kn;return}r=kn,u=!0;break}case kn:{let t=n.subarray(e,e+f|0),s=S(t),{stack:o,procedure:i}=a;M();let E=Object.seal({name:s,value:null});a={procedure:i,stack:o,prop:E},r=jc;break}case jc:{let{stack:t,procedure:s}=a;if(n[e]===Js){r=wc,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue;return}A=O|0,b=c-N|0;let i=n.subarray(e,e+f|0),E=S(i);F(E,Dt);break}case wc:{let{value:t}=a;w();let{prop:s}=a;if(s.value=Ce(t),w(),a.value.literal.push(s),n[e]===Me){r=Ln;return}u=!0,r=Yc;break}case Yc:{if(n[e]===Oe){r=Rn;return}u=!0,r=Rn;break}case Rn:{let t=n[e];if(A=O|0,b=c-N|0,t===Se){let{value:E}=a,{literal:m}=E,T=L.find(C=>C.name===E.name&&C.type===Ye),P=T.description.members.filter(C=>C.type!==st);if(m.length!==P.length){let C=n.subarray(e,e+f|0),V=S(C);le(`Incorrect number of parameters for Object ${T.name}. Expected ${P.length} parameters but received ${m.length}. Please ensure you provide the correct number of parameters.`);return}for(let C of m){let V=_e(C.value),G=m.indexOf(C),g=P.find(J=>J.name===C.name);g||le(`Invalid member name. Name ${C.name} does not exist on object ${T.name}`),V.data.type!==ve&&V.data.name!==g.data.name&&le(`Type mismatch in input for Object ${T.name}. At index ${G}, expected ${g.data.name} but received ${V.data.name}.`)}w();return}let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case Ta:{let i=function(m){let T=m.data.name,P=L.find(C=>C.name===T);if(P.type===Ye){let C=[],{members:V}=P.description;for(let G of V)G.data&&C.push({name:G.name,value:i(G)});return{type:ve,name:T,literal:C,path:m.data.path}}else if(m.data.type===rt){let C=parseInt(m.data.length,10);return{type:ve,literal:Array(C).fill(Wa),name:T,layout:rt,path:m.data.path}}else if(m.data.type===Io){let C=parseInt(m.data.length,10);return{type:ve,literal:Array(C).fill(et),name:T,path:m.data.path}}else return{type:ve,literal:Wa,name:T,path:m.data.path}},{value:t}=a,{literal:s,name:o}=t,E=L.find(m=>m.name===o);if(E){let{description:m}=E,{members:T}=m;for(let ke of T)ke.data&&s.push({name:ke.name,value:i(ke)});w(),w();let{stack:P,procedure:C,statements:V,declarationValue:G,inferenceValue:g}=a,{target:J}=G;g&&(g.data={type:qe,name:o,path:E.path},g.mutable&&(g.data.mutable=g.mutable),a.stack.set(J.name,g.data)),G.source=t,V.push(G),M();let Z=Object.seal({type:Vt,name:[J.name,zs],path:E.path,inputs:[]}),de=Object.seal({type:Oo,expression:Z});a={stack:P,procedure:C,drop:de,value:Z},r=jn,I=De,u=!0;return}break}case jn:{let{stack:t,procedure:s}=a;if(n[e]===Se){r=wn,u=!0;return}r=Na,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Na:{let{value:t}=a;w();let{value:s,stack:o,procedure:i}=a,{inputs:E}=s;E.push(Ce(t));let m=n[e];if(m===Se){r=wn,u=!0;return}if(m===Me){r=jn;return}A=O|0,b=c-N|0;let T=n.subarray(e,e+f|0),P=S(T);F(P,Zs);break}case wn:{let{value:t,stack:s,drop:o}=a,i=s.get(t.name[0]);if(i){let P=L.find(g=>g.name===i.name),C=P.description.members.find(g=>g.name===zs),V=t.inputs.filter(g=>g.type===ve);for(let g of V){let J=t.inputs.indexOf(g);J>=0&&t.inputs[J]&&(t.inputs[J]={...t.inputs[J],name:C.description.inputs[J]?.data?.name||g.name,path:C.description.inputs[J]?.data?.path||g.path})}let G=t.inputs.map(g=>_e(g))||[];if(C.description.inputs.length!==G.length){A=O|0,b=c-N|0,le(`Mismatching number of parameters passed to constructor of object '${P.name}'. Expected: ${C.description.inputs.length}, Got: ${G.length}`);return}for(let g of C.description.inputs){let J=C.description.inputs.indexOf(g);if(g.data.name!==G[J].data.name){A=O|0,b=c-N|0,le(`Input type mismatch on index '${J+1}'. '${P.name}' expected ${g.data.name}, but was provided with a rather ${G[J].data.name}`);return}}}if(n[e]===Se){r=Ia;return}A=O|0,b=c-N|0;let E=n.subarray(e,e+f|0),m=S(E);F(m,Ke);break}case Ia:{if(n[e]===Oe){let{drop:E}=a;w();let{statements:m}=a;m.push(E),w();return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ut);break}case Dc:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(t.has(o)){let P=t.get(o);if(P&&(P.moved&&(A=O|0,b=c-N|0,le(`Moved variable used as value. Variable '${o}' was used while having been moved before.`)),P.freed)){A=O|0,b=c-N|0,le(`Attempted to use '${o}', which has been freed. Ensure links are valid before use.`);return}let C=Object.freeze({type:tt,name:o});a.value=C,r=Pt;return}let i=P=>{let C=l[P];if(C.item.target){let V=C.item.target,G=m.item.stack.get(V.name);if(G)return G.name}else return C.item.value?.type==="expression"?i(P-1):null},E=l.length,m=l[E-2],T;if(m.item.target){let P=m.item.target;if(P.name||P.trail?.length===1){let C=m.item.stack.get(P.name||P.trail[0]);C&&(T=P.name?C.name:C.data?.name)}if(P.trail?.length>1){let C=JSON.parse(JSON.stringify(P.trail)),V=m.item.stack.get(P.trail[0]),G=L.find(J=>J.name===V.data.name&&J.path===V.data.path),g=1;for(let J=1;J<C.length;J++)V=G.description.members.find(Z=>Z.name===C[J]),J<C.length-1&&(G=L.find(Z=>Z.name===V.data.name&&Z.path===V.data.path));T=V.data.name}}else m.item.value?.type==="expression"&&(T=i(E-4));if(Gs(c,n,e,f)){let P=o,C=Be(P),V=Object.freeze({type:ve,literal:P,name:T||C,path:je});if(!C){A=O|0,b=c-N|0;let G=n.subarray(e,e+f|0),g=S(G);F(g,en)}Ve(V.name),a.value=V,r=Pt;return}if(Za(o)){let P=Object.freeze({type:ve,literal:o,name:"Bool",path:je});a.value=P,Ve(P.name),r=Pt;return}if(n[e]===lf){Ls?(Ls=!1,r=Pt):Ls=!0;return}if(Ls){let P=Object.freeze({type:ve,literal:o,name:T||(o.length==1?"Char":Io),path:je});Ve(P.name),a.value=P;return}if(n[e]===Ot){r=Fc,u=!0;return}A=O|0,b=c-N|0,Qt(o),w();break}case Yn:{M(),r=ha,a={data:null},M(),I=ht,r=Et,u=!0;break}case ha:{let t=n[e],{data:s}=a;w();let{stack:o,procedure:i}=a,E=Object.seal({type:ve,literal:[],name:s.name,length:null,layout:s.type,path:s.path});if(M(),a={stack:o,procedure:i,value:E},t===he){r=Sa;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Qe);break}case Sa:{let t=n.subarray(e,e+f|0);if(X(Ro,t)){r=Pa;return}A=O|0,b=c-N|0;let s=S(t);F(s,as);break}case Pa:{let t=n.subarray(e,e+f|0);if(X(Xs,t)){r=La;return}A=O|0,b=c-N|0;let s=S(t);F(s,Dt);break}case La:{if(ye(c,n,e,f)){let o=n.subarray(e,e+f|0),i=S(o);A=O|0,b=c-N|0,Le(i);return}let t=n.subarray(e,e+f|0),s=S(t);a.value.length=s,r=Ra;break}case Ra:{let t=n[e];if(t===Me){let{stack:E,procedure:m}=a,T=[];M(),a={stack:E,procedure:m,value:T},r=Ca;return}if(t===Se){let{value:E}=a;w(),a.value=E,r=Pt;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case Ca:{if(n[e]===Ot){r=va;return}A=O|0,b=c-N|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,xs);break}case va:{if(r=ka,n[e]===cs)return;u=!0;break}case ka:{let t=n.subarray(e,e+f|0);if(n[e]===Se){let{value:s}=a;w();let{value:o}=a;w(),o.literal=s,a.value=o,w();return}M(),r=Ps,u=!0;break}case Fc:{let t=n.subarray(e,e+f|0),s=S(t);if(n[e]===Ot){a.value=[],r=Pt,M(),r=Ps;return}break}case Ps:{let{stack:t,procedure:s}=a;r=da,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case da:{let t=n[e],{value:s}=a;if(w(),a.value.push(s),t===Me){r=Ps;return}if(t===cs){let o=l.length,i=l[o-3],E=i.item.declarationValue?.target,m=i.item.stack.get(E?.name);if(i.situationSection!==Yn){let T;if(!m){if(a.value?.length>=1)if(T=_e(a.value[0]),T)for(let C=1;C<a.value.length;C++){let V=_e(a.value[C]);if(V.data.name!==T.data.name||V.data.path!==T.data.path){A=O|0,b=c-N|0,le(`Type mismatch in array initialization. Expected all items to be of type ${T.data.name} from ${T.data.path}, but found type ${V.data.name} from ${V.data.path} at position ${C}. Ensure all items in the array have the same type.`);return}}else{A=O|0,b=c-N|0;let C=n.subarray(e,e+f|0),V=S(C);F(V,en);return}else T={data:{name:"FP32",path:"Flogram"}};Ve(T.data.name)}let P=Object.freeze({type:ve,literal:a.value,name:m?.name||T.data.name,layout:rt,path:m?.name?je:T.data.path});a.value=P}w();return}break}case Pt:{if(n[e]===Ze){let{stack:s,value:o}=a,i=[],E=Object.freeze({type:Ks,value:o,trail:i});a.value=E,M(),a=Object.seal({stack:s,trail:i,value:o}),r=hn;return}w(),u=!0;break}case Bc:{if(n[e]!==Ze){let s=n.subarray(e,e+f|0),o=S(s);w(),w(),u=!0;return}r=hn;break}case hn:{let{stack:t,value:s,trail:o}=a,i=n.subarray(e,e+f|0),E=S(i),m,T,P=!1;if(s.type===tt||s.type===it||s.type===It||_t(s)){let C=Re(s);if(o.length===0)m=t.get(C);else{let V=o.length-1,G=t.get(C),g=L.find(q=>q.name===G.name),{description:J}=g,{members:Z}=J,de=Z.find(q=>q.name===o[V]),{data:ke}=de;if(m=ke,ke.freed){A=O|0,b=c-N|0,le(`Attempted to use '${o.join(".")}', which has been freed. Ensure links are valid before use.`);return}}}if(m){let{name:C,path:V}=m,G=`${V}.${C}`,g=se.get(G);g.type===Ye&&(T=g)}if(T){let{description:C}=T,{members:V}=C;for(let G of V)if(G.name===E){P=!0;break}if(!P){A=O|0,b=c-N|0,lt(E,s.name);return}}if(s.value===nt||s.link===nt){if(!t.get(E)){A=O|0,b=c-N|0,lt(E,`${nt}(current object in definition)`);return}P=!0}if(!P){A=O|0,b=c-N|0,lt(E,s.name);return}o.push(E),r=Bc;break}case Gc:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(t.has(o)){let i=Object.seal({type:$s,array:{type:tt,name:o},index:null});a.value=i}r=gc;break}case gc:{if(n[e]===Ot){r=Vc;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,xs);break}case Vc:{let{stack:t,procedure:s}=a;r=Kc,M(),a={stack:t,procedure:s,value:null},M(),r=ge,I=Ue,u=!0;break}case Kc:{if(n[e]===cs){let{value:E}=a;w();let m=_e(E);if(m.data.mutable?a.value.index=Object.seal({type:it,link:E}):a.value.index=E,!m||!["I32","U32","I16","U16","U8","I8"].includes(m.data.name)){A=O|0,b=c-N|0,le("Invalid index. Array index should be a valid I32 variable");return}w();return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,wo);break}case ds:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s),i=v.find(m=>m.type===st&&m.name===o),E=Object.seal({type:Vt,name:o,path:i?.path||je,inputs:[]});if(a.value=E,t.has(o)){a.value.name=[o],r=Xc;return}r=yn;break}case Xc:{let t=n.subarray(e,e+f|0),s=S(t),o=n[e];if(o===Ze)return;if(o===he){r=yn,u=!0;return}if(ye(c,n,e,f)){A=O|0,b=c-N|0,Le(s);return}a.value.name.push(s);break}case yn:{let t=n[e];if(t===he){r=Sn,u=!0;return}if(t===We){r=oa;return}break}case Sn:{if(n[e]===he){r=hs;return}break}case oa:{M(),a=[],r=Ss,u=!0;break}case Ss:{r=ra,M(),a={data:null},M(),I=ht,r=Et,u=!0;break}case ra:{let t=n[e],{data:s}=a;if(w(),a.push(s),t===Me){r=Ss;return}if(t===ot){let o=a;w();let{value:i}=a,{name:E}=i,m=v.find(T=>T.type===st&&T.name===E);if(m){if(!(m.description.generics.length===o.length)){A=O|0,b=c-N|0,le(`Generic procedure '${E}' was provided with fewer or more than expect number of types. Expected: ${m.description.generics.length}. Got: ${o.length}`);return}let P=$e(m.name,o);if(!v.some(C=>C.name===P)){let C=we(m,o);C.name=P,C.description.generics=[],v.push(C)}i.name=P}r=Sn;break}}case hs:{let t=n[e];if(t===Oe)return;if(t===Se){let i=a.value?.inputs?.map(G=>_e(G))||[],[E,...m]=i,{value:T}=a,{name:P}=T,C=qt[P],V=(G,g,J,Z)=>{for(let de in G.description?.members){let ke=[G.description.members[de].data.name,...g.map(q=>q.description.members[de].data.name)];if(ke.some(q=>!pt.includes(q))){let q=ke.map(W=>L.find(ee=>ee.name===W));q.every(Boolean)&&V(G,q,J,Z)}else{let q=J.find(W=>W.description&&Array.isArray(W.description.inputs)?W.description.inputs.length!==ke.length?!1:W.description.inputs.every((ee,be)=>ee.data.name===ke[be]):!1);if(q)v.push(q),z.set(Z,q);else{A=O|0,b=c-N|0,Ft(`${ke.join(", ")} in ${Z}`);return}}}};if(C){let G=C.find(g=>g.description&&Array.isArray(g.description.inputs)?g.description.inputs.length!==i.length?!1:g.description.inputs.every((J,Z)=>J.data.name===i[Z].data.name):!1);if(G)v.push(G),z.set(P,G);else if(i.length>=1){if(i.some(g=>g.data.name!==E.data.name)){A=O|0,b=c-N|0,ku(i.map(g=>g.data?.name)?.join(", "));return}if(i[0]?.data.type===ss){let g=C.find(Z=>Z.description.inputs.length===i.length&&i.length>0?Z.description.inputs[0].data.name===Qa:!0),J=JSON.parse(JSON.stringify(g).replace(new RegExp(Qa,"g"),i[0].data.name));v.push(J),z.set(P,J)}else if(!pt.includes(E.data.name)||m.some(g=>!pt.includes(g.data.name))){let g=L.find(Z=>Z.name===E.data.name),J=m.map(Z=>L.find(de=>de.name===Z.data.name));g&&J.every(Boolean)&&V(g,J,C,P)}else{A=O|0,b=c-N|0,Ft(`${E.data.name,m.map(g=>g.data.name)?.join(", ")} in ${P}`);return}}else{A=O|0,b=c-N|0,Ft(`${i.map(g=>g.data.name)?.join(", ")} in ${P}`);return}}else if(P!==Wl){let G,g=v.find(Z=>Z.type===st&&Z.name===P);if(typeof P=="object"&&a.stack.has(P[0])){let Z=P[P.length-2]||P[0],de=a.stack.get(Z);if(de){let ke=L.find(q=>q.type===Ye&&q.name===de.name);ke&&(a.value.path=ke.path,G=ke.description.members.find(q=>q.type===st&&q.name===P[P.length-1]))}}let J=G||g;if(J){let{description:Z}=J,{inputs:de}=Z,{value:ke}=a,{inputs:q}=ke;if(de.length!==q.length){A=O|0,b=c-N|0,le(`Procedure '${P}' was provided with fewer or more than expect number of inputs. Please make sure you are passing the right number of inputs to the procedure.`);return}for(let W=0;W<de.length;W++){let ee=_e(q[W]);if(ee){if(de[W].data.name!==ee.data.name){A=O|0,b=c-N|0,le(`The procedure '${typeof P=="object"?P.join("."):P}' received an input of incorrect type at position ${W+1}. Expected: '${de[W].data.name}', but received: '${ee.data.name}'.`);return}if(de[W].data.mutable&&!ee.data.mutable){A=O|0,b=c-N|0,le(`The procedure '${typeof P=="object"?P.join("."):P}' received an immutable input at position ${W+1} while it expects a mutable input. Expected: mutable '${de[W].data.name}', received: immutable '${ee.data.name}'.`);return}de[W].data.mutable&&ee.data.mutable}else{A=O|0,b=c-N|0,Ft(q[W]);return}}}else{A=O|0,b=c-N|0,Xn(P);return}}w();return}if(ye(c,n,e,f)){let i=n.subarray(e,e+f|0),E=S(i);A=O|0,b=c-N|0,Le(E);return}let{procedure:s,stack:o}=a;r=Mc,M(),a=Object.seal({procedure:s,stack:o,value:null}),M(),I=Ue,r=ge,u=!0;break}case Mc:{let{value:t}=a;w();let{value:s}=a,{inputs:o}=s;s.path!==je?o.push(t):o.push(Ce(t));let i=n[e];if(i===Me){r=hs;return}if(i===Se){r=hs,u=!0;return}A=O|0,b=c-N|0;let E=n.subarray(e,e+f|0),m=S(E);F(m,Ke);break}case Un:{let t=n.subarray(e,e+f|0),s=S(t),o=L.find(E=>E.type===Rt&&E.name===s);if(o){let E=Object.seal({type:"literal",literal:null,name:o.name,path:o.path});a.value=E,r=Jc;return}let i=L.find(E=>E.type===Rt&&E.description.labels.find(m=>m.name===s));if(i){let E=Object.freeze({type:"literal",literal:s,name:i.name,path:i.path});a.value=E,w();return}A=O|0,b=c-N|0,lt(s);break}case Jc:{if(n[e]===Ze){r=Wc;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Yo);break}case Wc:{let t=n.subarray(e,e+f|0),s=S(t);if(L.find(i=>i.type===Rt&&i.name===a.value.name&&i.description.labels.find(E=>E.name===s))){a.value.literal=s,w();return}A=O|0,b=c-N|0,lt(s);break}case Qc:{let t=Object.seal({type:To,layout:null,data:null,value:null});a.value=t,r=qc;break}case qc:{if(n[e]===We){r=Zc;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ht);break}case Zc:{let t=n.subarray(e,e+f|0),s=S(t);if(ye(c,n,e,f)){A=O|0,b=c-N|0,Le(s);return}if(X(ns,t)){r=Bn,M(),a={...a,data:null},M(),I=ht,r=Et,u=!0;return}if(X(t,At)||X(t,dt)){r=Bn,M(),a={...a,data:null},M(),I=Mt,r=Gn,u=!0;return}if(X(t,rs)){A=O|0,b=c-N|0;let i=n.subarray(e,e+f|0),E=S(i);F(E,as);return}let o=Ve(s);o&&(a.value.data=o),r=Dn;break}case Bn:{let{data:t}=a;w(),a.value.data=t,u=!0,r=Dn;break}case Dn:{if(n[e]===ot){r=xc;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Bt);break}case xc:{if(n[e]===Ze){r=ea;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Yo);break}case ea:{let t=n.subarray(e,e+f|0),s=S(t);if(a.value.layout=s,X(t,rf)){r=Mn;return}if(X(t,cf)){r=ta;return}A=O|0,b=c-N|0;let o=S(t);F(o,as);break}case ta:{if(n[e]===he){r=sa;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Qe);break}case sa:{let{procedure:t,stack:s}=a;if(ye(c,n,e,f)){let o=n.subarray(e,e+f|0),i=S(o);A=O|0,b=c-N|0,Le(i);return}r=na,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ue,r=ge,u=!0;break}case na:{let{value:t}=a;if(w(),a.value.value=Ce(t),n[e]===Se){r=Mn;return}A=O|0,b=c-N|0;let o=n.subarray(e,e+f|0),i=S(o);F(i,Ke);break}case Mn:{w(),u=!0;break}case la:{let t=Object.seal({type:No,value:null});a.value=t,r=fa;break}case fa:{if(n[e]===he){r=Ea;return}A=O|0,b=c-N|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Qe);break}case Ea:{let{procedure:t,stack:s}=a;if(ye(c,n,e,f)){let o=n.subarray(e,e+f|0),i=S(o);A=O|0,b=c-N|0,Le(i);return}r=_a,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ue,r=ge,u=!0;break}case _a:{let{stack:t,value:s}=a;w();let o;if(s.type===tt)o=s.name;else if(s.type===it)o=s.link;else if(s.type===It)o=s.value;else{A=O|0,b=c-N|0,le("Non-movable type passed to move procedure. Please check types that can be moved and make sure your parameter's type is one of them.");return}let i=t.get(o);if(i&&t.set(o,{...i,moved:!0}),a.value.value=Ce(s),n[e]===Se){r=ma;return}A=O|0,b=c-N|0;let m=n.subarray(e,e+f|0),T=S(m);F(T,Ke);break}case ma:{w(),u=!0;break}}},Gu=(c,n,e,f)=>{switch(r){case kr:{let t=Object.seal({type:et,path:[]}),s=Object.seal({type:Kl,source:t,alias:et});a=Object.seal({import:s,source:t}),r=Rr;break}case Rr:{let t=n[e],{source:s}=a;if(t===Ef&&n[e+1]===Ws){s.type=tt,r=Cr,M(),a=[],M(),r=an;return}if(ye(c,n,e,f)){A=O|0,b=c-N|0,Le(name);return}s.type=Hl,r=jf,u=!0;break}case Cr:{let t=n[e],s=a;w();let{source:o}=a;o.path.push(s.join("")),t===Ws&&(M(),a=[],M(),r=an),t===Oe&&(r=vr,u=!0);break}case an:{let t=n[e];if(t===Ws){w(),u=!0;return}if(t===Oe){w(),u=!0;return}let s=n.subarray(e,e+f|0),o=S(s);a.push(o);return}case vr:{let t=s=>{let o=!0,i=null,E=null,m=Nu(k);m.on(Yt,G=>{i=G}),m.on(Pe,G=>{E=G});let T=new D({tabSize:4});if(T.on("token",(G,g,J,Z)=>{m.feed(G,g,J,Z)}),T.on("error",()=>{o=!1}),T.feed(s),T.done(),T.close(),m.done(),!o||E){console.error("Tokenizer or Parser error occurred.",E);return}if(!i){console.error("Invalid representation after parsing.");return}let{exports:P,data:C}=i;for(let G of P){let g=i[G.path]?.find(J=>J.name===G.name);g&&(G.path===gn&&(L.push(g),Q({name:g.name,path:g.path,type:qe})),G.path===qa&&v.push(g))}let V=C.filter(G=>G.type===zl);L.unshift(...V)};if(U&&U.length>0){let s=U.find(o=>o.path===a.source.path.join("/"));if(s){let o=ce(s.data);t(o)}else A=O|0,b=c-N|0,le("NO FILES WERE FOUND: ",a.source.path)}else A=O|0,b=c-N|0,le("NO FILES WERE FOUND: ",a.source.path);w();break}}},gu=(c,n)=>{switch(c){case Yt:{_.push(n);break}case Pe:{d.push(n);break}}},M=()=>{let c=Object.freeze({item:a,indentation:Ee,situationGeneral:I,situationSection:r});l.push(c)},w=()=>{let c=l.pop();return a=c.item,Ee=c.indentation,I=c.situationGeneral,r=c.situationSection,c},Gt=(c,n,e,f)=>{if(h)return;let t=()=>{y=!0,N=c|0,O=O+1};ae=c+f|0;let s=n[e];if(s!==uf){if(s===ff){Y=!Y;return}if(s===Oe&&y){t();return}for(y=!1,u=!0;u;)switch(u=!1,I){case Ue:{Ru(c,n,e,f);break}case Fo:{Cu(c,n,e,f);break}case $t:{Uu(c,n,e,f);break}case zt:{vu(c,n,e,f);break}case Go:{Du(c,n,e,f);break}case tn:{Mu(c,n,e,f);break}case go:{yu(c,n,e,f);break}case Vo:{Bu(c,n,e,f);break}case He:{ju(c,n,e,f);break}case ht:{wu(c,n,e,f);break}case De:{Fu(c,n,e,f);break}case Mt:{Yu(c,n,e,f);break}case Ko:{Gu(c,n,e,f);break}default:throw qs}s===Oe&&(eu.default.diff(a,ue)&&t(),ue=JSON.parse(JSON.stringify(a)))}};return Object.freeze({done:()=>{if(Gt(ae,Ct,0,Ct.length),ae=ae+Ct.length|0,Gt(ae,vt,0,vt.length),ae=ae+vt.length|0,Gt(ae,Ct,0,Ct.length),ae=ae+Ct.length|0,R){me.emit(Yt,null);return}me.emit(Yt,x)},feed:Gt,on:gu})},wf=Object.freeze({create:Nu,..._f,...Of,...yf}),fE=wf;export{fE as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
