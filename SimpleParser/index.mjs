var nl=Object.create;var so=Object.defineProperty;var ol=Object.getOwnPropertyDescriptor;var cl=Object.getOwnPropertyNames;var rl=Object.getPrototypeOf,al=Object.prototype.hasOwnProperty;var Ds=(R,L)=>()=>(L||R((L={exports:{}}).exports,L),L.exports);var ul=(R,L,U,K)=>{if(L&&typeof L=="object"||typeof L=="function")for(let H of cl(L))!al.call(R,H)&&H!==U&&so(R,H,{get:()=>L[H],enumerable:!(K=ol(L,H))||K.enumerable});return R};var no=(R,L,U)=>(U=R!=null?nl(rl(R)):{},ul(L||!R||!R.__esModule?so(U,"default",{value:R,enumerable:!0}):U,R));var ro=Ds((oo,co)=>{(function(R){var L=Object.hasOwnProperty,U=Array.isArray?Array.isArray:function(_){return Object.prototype.toString.call(_)==="[object Array]"},K=10,H=typeof process=="object"&&typeof process.nextTick=="function",x=typeof Symbol=="function",ne=typeof Reflect=="object",ce=typeof setImmediate=="function",Ae=ce?setImmediate:setTimeout,oe=x?ne&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(i){var _=Object.getOwnPropertyNames(i);return _.push.apply(_,Object.getOwnPropertySymbols(i)),_}:Object.keys;function fe(){this._events={},this._conf&&Se.call(this,this._conf)}function Se(i){i&&(this._conf=i,i.delimiter&&(this.delimiter=i.delimiter),i.maxListeners!==R&&(this._maxListeners=i.maxListeners),i.wildcard&&(this.wildcard=i.wildcard),i.newListener&&(this._newListener=i.newListener),i.removeListener&&(this._removeListener=i.removeListener),i.verboseMemoryLeak&&(this.verboseMemoryLeak=i.verboseMemoryLeak),i.ignoreErrors&&(this.ignoreErrors=i.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function je(i,_){var d="(node) warning: possible EventEmitter memory leak detected. "+i+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(d+=" Event name: "+_+"."),typeof process<"u"&&process.emitWarning){var u=new Error(d);u.name="MaxListenersExceededWarning",u.emitter=this,u.count=i,process.emitWarning(u)}else console.error(d),console.trace&&console.trace()}var De=function(i,_,d){var u=arguments.length;switch(u){case 0:return[];case 1:return[i];case 2:return[i,_];case 3:return[i,_,d];default:for(var h=new Array(u);u--;)h[u]=arguments[u];return h}};function Tt(i,_){for(var d={},u,h=i.length,C=_?_.length:0,j=0;j<h;j++)u=i[j],d[u]=j<C?_[j]:R;return d}function qe(i,_,d){this._emitter=i,this._target=_,this._listeners={},this._listenersCount=0;var u,h;if((d.on||d.off)&&(u=d.on,h=d.off),_.addEventListener?(u=_.addEventListener,h=_.removeEventListener):_.addListener?(u=_.addListener,h=_.removeListener):_.on&&(u=_.on,h=_.off),!u&&!h)throw Error("target does not implement any known event API");if(typeof u!="function")throw TypeError("on method must be a function");if(typeof h!="function")throw TypeError("off method must be a function");this._on=u,this._off=h;var C=i._observers;C?C.push(this):i._observers=[this]}Object.assign(qe.prototype,{subscribe:function(i,_,d){var u=this,h=this._target,C=this._emitter,j=this._listeners,Y=function(){var w=De.apply(null,arguments),I={data:w,name:_,original:i};if(d){var c=d.call(h,I);c!==!1&&C.emit.apply(C,[I.name].concat(w));return}C.emit.apply(C,[_].concat(w))};if(j[i])throw Error("Event '"+i+"' is already listening");this._listenersCount++,C._newListener&&C._removeListener&&!u._onNewListener?(this._onNewListener=function(w){w===_&&j[i]===null&&(j[i]=Y,u._on.call(h,i,Y))},C.on("newListener",this._onNewListener),this._onRemoveListener=function(w){w===_&&!C.hasListeners(w)&&j[i]&&(j[i]=null,u._off.call(h,i,Y))},j[i]=null,C.on("removeListener",this._onRemoveListener)):(j[i]=Y,u._on.call(h,i,Y))},unsubscribe:function(i){var _=this,d=this._listeners,u=this._emitter,h,C,j=this._off,Y=this._target,w;if(i&&typeof i!="string")throw TypeError("event must be a string");function I(){_._onNewListener&&(u.off("newListener",_._onNewListener),u.off("removeListener",_._onRemoveListener),_._onNewListener=null,_._onRemoveListener=null);var c=B.call(u,_);u._observers.splice(c,1)}if(i){if(h=d[i],!h)return;j.call(Y,i,h),delete d[i],--this._listenersCount||I()}else{for(C=oe(d),w=C.length;w-- >0;)i=C[w],j.call(Y,i,d[i]);this._listeners={},this._listenersCount=0,I()}}});function _e(i,_,d,u){var h=Object.assign({},_);if(!i)return h;if(typeof i!="object")throw TypeError("options must be an object");var C=Object.keys(i),j=C.length,Y,w,I;function c(le){throw Error('Invalid "'+Y+'" option value'+(le?". Reason: "+le:""))}for(var a=0;a<j;a++){if(Y=C[a],!u&&!L.call(_,Y))throw Error('Unknown "'+Y+'" option');w=i[Y],w!==R&&(I=d[Y],h[Y]=I?I(w,c):w)}return h}function Te(i,_){return(typeof i!="function"||!i.hasOwnProperty("prototype"))&&_("value must be a constructor"),i}function ct(i){var _="value must be type of "+i.join("|"),d=i.length,u=i[0],h=i[1];return d===1?function(C,j){if(typeof C===u)return C;j(_)}:d===2?function(C,j){var Y=typeof C;if(Y===u||Y===h)return C;j(_)}:function(C,j){for(var Y=typeof C,w=d;w-- >0;)if(Y===i[w])return C;j(_)}}var He=ct(["function"]),Nt=ct(["object","function"]);function rt(i,_,d){var u,h,C=0,j,Y=new i(function(w,I,c){d=_e(d,{timeout:0,overload:!1},{timeout:function(ae,O){return ae*=1,(typeof ae!="number"||ae<0||!Number.isFinite(ae))&&O("timeout must be a positive number"),ae}}),u=!d.overload&&typeof i.prototype.cancel=="function"&&typeof c=="function";function a(){h&&(h=null),C&&(clearTimeout(C),C=0)}var le=function(ae){a(),w(ae)},ie=function(ae){a(),I(ae)};u?_(le,ie,c):(h=[function(ae){ie(ae||Error("canceled"))}],_(le,ie,function(ae){if(j)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ae!="function")throw TypeError("onCancel callback must be a function");h.push(ae)}),j=!0),d.timeout>0&&(C=setTimeout(function(){var ae=Error("timeout");ae.code="ETIMEDOUT",C=0,Y.cancel(ae),I(ae)},d.timeout))});return u||(Y.cancel=function(w){if(h){for(var I=h.length,c=1;c<I;c++)h[c](w);h[0](w),h=null}}),Y}function B(i){var _=this._observers;if(!_)return-1;for(var d=_.length,u=0;u<d;u++)if(_[u]._target===i)return u;return-1}function D(i,_,d,u,h){if(!d)return null;if(u===0){var C=typeof _;if(C==="string"){var j,Y,w=0,I=0,c=this.delimiter,a=c.length;if((Y=_.indexOf(c))!==-1){j=new Array(5);do j[w++]=_.slice(I,Y),I=Y+a;while((Y=_.indexOf(c,I))!==-1);j[w++]=_.slice(I),_=j,h=w}else _=[_],h=1}else C==="object"?h=_.length:(_=[_],h=1)}var le=null,ie,ae,O,T,Ee,at=_[u],A=_[u+1],p,be;if(u===h)d._listeners&&(typeof d._listeners=="function"?(i&&i.push(d._listeners),le=[d]):(i&&i.push.apply(i,d._listeners),le=[d]));else if(at==="*"){for(p=oe(d),Y=p.length;Y-- >0;)ie=p[Y],ie!=="_listeners"&&(be=D(i,_,d[ie],u+1,h),be&&(le?le.push.apply(le,be):le=be));return le}else if(at==="**"){for(Ee=u+1===h||u+2===h&&A==="*",Ee&&d._listeners&&(le=D(i,_,d,h,h)),p=oe(d),Y=p.length;Y-- >0;)ie=p[Y],ie!=="_listeners"&&(ie==="*"||ie==="**"?(d[ie]._listeners&&!Ee&&(be=D(i,_,d[ie],h,h),be&&(le?le.push.apply(le,be):le=be)),be=D(i,_,d[ie],u,h)):ie===A?be=D(i,_,d[ie],u+2,h):be=D(i,_,d[ie],u,h),be&&(le?le.push.apply(le,be):le=be));return le}else d[at]&&(le=D(i,_,d[at],u+1,h));if(ae=d["*"],ae&&D(i,_,ae,u+1,h),O=d["**"],O)if(u<h)for(O._listeners&&D(i,_,O,h,h),p=oe(O),Y=p.length;Y-- >0;)ie=p[Y],ie!=="_listeners"&&(ie===A?D(i,_,O[ie],u+2,h):ie===at?D(i,_,O[ie],u+1,h):(T={},T[ie]=O[ie],D(i,_,{"**":T},u+1,h)));else O._listeners?D(i,_,O,h,h):O["*"]&&O["*"]._listeners&&D(i,_,O["*"],h,h);return le}function v(i,_,d){var u=0,h=0,C,j=this.delimiter,Y=j.length,w;if(typeof i=="string")if((C=i.indexOf(j))!==-1){w=new Array(5);do w[u++]=i.slice(h,C),h=C+Y;while((C=i.indexOf(j,h))!==-1);w[u++]=i.slice(h)}else w=[i],u=1;else w=i,u=i.length;if(u>1){for(C=0;C+1<u;C++)if(w[C]==="**"&&w[C+1]==="**")return}var I=this.listenerTree,c;for(C=0;C<u;C++)if(c=w[C],I=I[c]||(I[c]={}),C===u-1)return I._listeners?(typeof I._listeners=="function"&&(I._listeners=[I._listeners]),d?I._listeners.unshift(_):I._listeners.push(_),!I._listeners.warned&&this._maxListeners>0&&I._listeners.length>this._maxListeners&&(I._listeners.warned=!0,je.call(this,I._listeners.length,c))):I._listeners=_,!0;return!0}function $(i,_,d,u){for(var h=oe(i),C=h.length,j,Y,w,I=i._listeners,c;C-- >0;)Y=h[C],j=i[Y],Y==="_listeners"?w=d:w=d?d.concat(Y):[Y],c=u||typeof Y=="symbol",I&&_.push(c?w:w.join(this.delimiter)),typeof j=="object"&&$.call(this,j,_,w,c);return _}function z(i){for(var _=oe(i),d=_.length,u,h,C;d-- >0;)h=_[d],u=i[h],u&&(C=!0,h!=="_listeners"&&!z(u)&&delete i[h]);return C}function se(i,_,d){this.emitter=i,this.event=_,this.listener=d}se.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function te(i,_,d){if(d===!0)h=!0;else if(d===!1)u=!0;else{if(!d||typeof d!="object")throw TypeError("options should be an object or true");var u=d.async,h=d.promisify,C=d.nextTick,j=d.objectify}if(u||C||h){var Y=_,w=_._origin||_;if(C&&!H)throw Error("process.nextTick is not supported");h===R&&(h=_.constructor.name==="AsyncFunction"),_=function(){var I=arguments,c=this,a=this.event;return h?C?Promise.resolve():new Promise(function(le){Ae(le)}).then(function(){return c.event=a,Y.apply(c,I)}):(C?process.nextTick:Ae)(function(){c.event=a,Y.apply(c,I)})},_._async=!0,_._origin=w}return[_,j?new se(this,i,_):this]}function Z(i){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,Se.call(this,i)}Z.EventEmitter2=Z,Z.prototype.listenTo=function(i,_,d){if(typeof i!="object")throw TypeError("target musts be an object");var u=this;d=_e(d,{on:R,off:R,reducers:R},{on:He,off:He,reducers:Nt});function h(C){if(typeof C!="object")throw TypeError("events must be an object");var j=d.reducers,Y=B.call(u,i),w;Y===-1?w=new qe(u,i,d):w=u._observers[Y];for(var I=oe(C),c=I.length,a,le=typeof j=="function",ie=0;ie<c;ie++)a=I[ie],w.subscribe(a,C[a]||a,le?j:j&&j[a])}return U(_)?h(Tt(_)):h(typeof _=="string"?Tt(_.split(/\s+/)):_),this},Z.prototype.stopListeningTo=function(i,_){var d=this._observers;if(!d)return!1;var u=d.length,h,C=!1;if(i&&typeof i!="object")throw TypeError("target should be an object");for(;u-- >0;)h=d[u],(!i||h._target===i)&&(h.unsubscribe(_),C=!0);return C},Z.prototype.delimiter=".",Z.prototype.setMaxListeners=function(i){i!==R&&(this._maxListeners=i,this._conf||(this._conf={}),this._conf.maxListeners=i)},Z.prototype.getMaxListeners=function(){return this._maxListeners},Z.prototype.event="",Z.prototype.once=function(i,_,d){return this._once(i,_,!1,d)},Z.prototype.prependOnceListener=function(i,_,d){return this._once(i,_,!0,d)},Z.prototype._once=function(i,_,d,u){return this._many(i,1,_,d,u)},Z.prototype.many=function(i,_,d,u){return this._many(i,_,d,!1,u)},Z.prototype.prependMany=function(i,_,d,u){return this._many(i,_,d,!0,u)},Z.prototype._many=function(i,_,d,u,h){var C=this;if(typeof d!="function")throw new Error("many only accepts instances of Function");function j(){return--_===0&&C.off(i,j),d.apply(this,arguments)}return j._origin=d,this._on(i,j,u,h)},Z.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var i=arguments[0],_,d=this.wildcard,u,h,C,j,Y;if(i==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(d&&(_=i,i!=="newListener"&&i!=="removeListener"&&typeof i=="object")){if(h=i.length,x){for(C=0;C<h;C++)if(typeof i[C]=="symbol"){Y=!0;break}}Y||(i=i.join(this.delimiter))}var w=arguments.length,I;if(this._all&&this._all.length)for(I=this._all.slice(),C=0,h=I.length;C<h;C++)switch(this.event=i,w){case 1:I[C].call(this,i);break;case 2:I[C].call(this,i,arguments[1]);break;case 3:I[C].call(this,i,arguments[1],arguments[2]);break;default:I[C].apply(this,arguments)}if(d)I=[],D.call(this,I,_,this.listenerTree,0,h);else if(I=this._events[i],typeof I=="function"){switch(this.event=i,w){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(u=new Array(w-1),j=1;j<w;j++)u[j-1]=arguments[j];I.apply(this,u)}return!0}else I&&(I=I.slice());if(I&&I.length){if(w>3)for(u=new Array(w-1),j=1;j<w;j++)u[j-1]=arguments[j];for(C=0,h=I.length;C<h;C++)switch(this.event=i,w){case 1:I[C].call(this);break;case 2:I[C].call(this,arguments[1]);break;case 3:I[C].call(this,arguments[1],arguments[2]);break;default:I[C].apply(this,u)}return!0}else if(!this.ignoreErrors&&!this._all&&i==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},Z.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var i=arguments[0],_=this.wildcard,d,u,h,C,j,Y;if(i==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(_&&(d=i,i!=="newListener"&&i!=="removeListener"&&typeof i=="object")){if(C=i.length,x){for(j=0;j<C;j++)if(typeof i[j]=="symbol"){u=!0;break}}u||(i=i.join(this.delimiter))}var w=[],I=arguments.length,c;if(this._all)for(j=0,C=this._all.length;j<C;j++)switch(this.event=i,I){case 1:w.push(this._all[j].call(this,i));break;case 2:w.push(this._all[j].call(this,i,arguments[1]));break;case 3:w.push(this._all[j].call(this,i,arguments[1],arguments[2]));break;default:w.push(this._all[j].apply(this,arguments))}if(_?(c=[],D.call(this,c,d,this.listenerTree,0)):c=this._events[i],typeof c=="function")switch(this.event=i,I){case 1:w.push(c.call(this));break;case 2:w.push(c.call(this,arguments[1]));break;case 3:w.push(c.call(this,arguments[1],arguments[2]));break;default:for(h=new Array(I-1),Y=1;Y<I;Y++)h[Y-1]=arguments[Y];w.push(c.apply(this,h))}else if(c&&c.length){if(c=c.slice(),I>3)for(h=new Array(I-1),Y=1;Y<I;Y++)h[Y-1]=arguments[Y];for(j=0,C=c.length;j<C;j++)switch(this.event=i,I){case 1:w.push(c[j].call(this));break;case 2:w.push(c[j].call(this,arguments[1]));break;case 3:w.push(c[j].call(this,arguments[1],arguments[2]));break;default:w.push(c[j].apply(this,h))}}else if(!this.ignoreErrors&&!this._all&&i==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(w)},Z.prototype.on=function(i,_,d){return this._on(i,_,!1,d)},Z.prototype.prependListener=function(i,_,d){return this._on(i,_,!0,d)},Z.prototype.onAny=function(i){return this._onAny(i,!1)},Z.prototype.prependAny=function(i){return this._onAny(i,!0)},Z.prototype.addListener=Z.prototype.on,Z.prototype._onAny=function(i,_){if(typeof i!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),_?this._all.unshift(i):this._all.push(i),this},Z.prototype._on=function(i,_,d,u){if(typeof i=="function")return this._onAny(i,_),this;if(typeof _!="function")throw new Error("on only accepts instances of Function");this._events||fe.call(this);var h=this,C;return u!==R&&(C=te.call(this,i,_,u),_=C[0],h=C[1]),this._newListener&&this.emit("newListener",i,_),this.wildcard?(v.call(this,i,_,d),h):(this._events[i]?(typeof this._events[i]=="function"&&(this._events[i]=[this._events[i]]),d?this._events[i].unshift(_):this._events[i].push(_),!this._events[i].warned&&this._maxListeners>0&&this._events[i].length>this._maxListeners&&(this._events[i].warned=!0,je.call(this,this._events[i].length,i))):this._events[i]=_,h)},Z.prototype.off=function(i,_){if(typeof _!="function")throw new Error("removeListener only takes instances of Function");var d,u=[];if(this.wildcard){var h=typeof i=="string"?i.split(this.delimiter):i.slice();if(u=D.call(this,null,h,this.listenerTree,0),!u)return this}else{if(!this._events[i])return this;d=this._events[i],u.push({_listeners:d})}for(var C=0;C<u.length;C++){var j=u[C];if(d=j._listeners,U(d)){for(var Y=-1,w=0,I=d.length;w<I;w++)if(d[w]===_||d[w].listener&&d[w].listener===_||d[w]._origin&&d[w]._origin===_){Y=w;break}if(Y<0)continue;return this.wildcard?j._listeners.splice(Y,1):this._events[i].splice(Y,1),d.length===0&&(this.wildcard?delete j._listeners:delete this._events[i]),this._removeListener&&this.emit("removeListener",i,_),this}else(d===_||d.listener&&d.listener===_||d._origin&&d._origin===_)&&(this.wildcard?delete j._listeners:delete this._events[i],this._removeListener&&this.emit("removeListener",i,_))}return this.listenerTree&&z(this.listenerTree),this},Z.prototype.offAny=function(i){var _=0,d=0,u;if(i&&this._all&&this._all.length>0){for(u=this._all,_=0,d=u.length;_<d;_++)if(i===u[_])return u.splice(_,1),this._removeListener&&this.emit("removeListenerAny",i),this}else{if(u=this._all,this._removeListener)for(_=0,d=u.length;_<d;_++)this.emit("removeListenerAny",u[_]);this._all=[]}return this},Z.prototype.removeListener=Z.prototype.off,Z.prototype.removeAllListeners=function(i){if(i===R)return!this._events||fe.call(this),this;if(this.wildcard){var _=D.call(this,null,i,this.listenerTree,0),d,u;if(!_)return this;for(u=0;u<_.length;u++)d=_[u],d._listeners=null;this.listenerTree&&z(this.listenerTree)}else this._events&&(this._events[i]=null);return this},Z.prototype.listeners=function(i){var _=this._events,d,u,h,C,j;if(i===R){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!_)return[];for(d=oe(_),C=d.length,h=[];C-- >0;)u=_[d[C]],typeof u=="function"?h.push(u):h.push.apply(h,u);return h}else{if(this.wildcard){if(j=this.listenerTree,!j)return[];var Y=[],w=typeof i=="string"?i.split(this.delimiter):i.slice();return D.call(this,Y,w,j,0),Y}return _?(u=_[i],u?typeof u=="function"?[u]:u:[]):[]}},Z.prototype.eventNames=function(i){var _=this._events;return this.wildcard?$.call(this,this.listenerTree,[],null,i):_?oe(_):[]},Z.prototype.listenerCount=function(i){return this.listeners(i).length},Z.prototype.hasListeners=function(i){if(this.wildcard){var _=[],d=typeof i=="string"?i.split(this.delimiter):i.slice();return D.call(this,_,d,this.listenerTree,0),_.length>0}var u=this._events,h=this._all;return!!(h&&h.length||u&&(i===R?oe(u).length:u[i]))},Z.prototype.listenersAny=function(){return this._all?this._all:[]},Z.prototype.waitFor=function(i,_){var d=this,u=typeof _;return u==="number"?_={timeout:_}:u==="function"&&(_={filter:_}),_=_e(_,{timeout:0,filter:R,handleError:!1,Promise,overload:!1},{filter:He,Promise:Te}),rt(_.Promise,function(h,C,j){function Y(){var w=_.filter;if(!(w&&!w.apply(d,arguments)))if(d.off(i,Y),_.handleError){var I=arguments[0];I?C(I):h(De.apply(null,arguments).slice(1))}else h(De.apply(null,arguments))}j(function(){d.off(i,Y)}),d._on(i,Y,!1)},{timeout:_.timeout,overload:_.overload})};function Pe(i,_,d){d=_e(d,{Promise,timeout:0,overload:!1},{Promise:Te});var u=d.Promise;return rt(u,function(h,C,j){var Y;if(typeof i.addEventListener=="function"){Y=function(){h(De.apply(null,arguments))},j(function(){i.removeEventListener(_,Y)}),i.addEventListener(_,Y,{once:!0});return}var w=function(){I&&i.removeListener("error",I),h(De.apply(null,arguments))},I;_!=="error"&&(I=function(c){i.removeListener(_,w),C(c)},i.once("error",I)),j(function(){I&&i.removeListener("error",I),i.removeListener(_,w)}),i.once(_,w)},{timeout:d.timeout,overload:d.overload})}var Xe=Z.prototype;if(Object.defineProperties(Z,{defaultMaxListeners:{get:function(){return Xe._maxListeners},set:function(i){if(typeof i!="number"||i<0||Number.isNaN(i))throw TypeError("n must be a non-negative number");Xe._maxListeners=i},enumerable:!0},once:{value:Pe,writable:!0,configurable:!0}}),Object.defineProperties(Xe,{_maxListeners:{value:K,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return Z});else if(typeof oo=="object")co.exports=Z;else{var me=new Function("","return this")();me.EventEmitter2=Z}})()});var uo=Ds((nE,ao)=>{ao.exports=ro()});var io=Ds((Bs,lo)=>{(function(R,L){var U=L(R);if(typeof define=="function"&&define.amd)define("DeepDiff",function(){return U});else if(typeof Bs=="object"||typeof navigator=="object"&&navigator.product.match(/ReactNative/i))lo.exports=U;else{var K=R.DeepDiff;U.noConflict=function(){return R.DeepDiff===U&&(R.DeepDiff=K),U},R.DeepDiff=U}})(Bs,function(R){var L=["N","E","A","D"];function U(B,D){B.super_=D,B.prototype=Object.create(D.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}})}function K(B,D){Object.defineProperty(this,"kind",{value:B,enumerable:!0}),D&&D.length&&Object.defineProperty(this,"path",{value:D,enumerable:!0})}function H(B,D,v){H.super_.call(this,"E",B),Object.defineProperty(this,"lhs",{value:D,enumerable:!0}),Object.defineProperty(this,"rhs",{value:v,enumerable:!0})}U(H,K);function x(B,D){x.super_.call(this,"N",B),Object.defineProperty(this,"rhs",{value:D,enumerable:!0})}U(x,K);function ne(B,D){ne.super_.call(this,"D",B),Object.defineProperty(this,"lhs",{value:D,enumerable:!0})}U(ne,K);function ce(B,D,v){ce.super_.call(this,"A",B),Object.defineProperty(this,"index",{value:D,enumerable:!0}),Object.defineProperty(this,"item",{value:v,enumerable:!0})}U(ce,K);function Ae(B,D,v){var $=B.slice((v||D)+1||B.length);return B.length=D<0?B.length+D:D,B.push.apply(B,$),B}function oe(B){var D=typeof B;return D!=="object"?D:B===Math?"math":B===null?"null":Array.isArray(B)?"array":Object.prototype.toString.call(B)==="[object Date]"?"date":typeof B.toString=="function"&&/^\/.*\//.test(B.toString())?"regexp":"object"}function fe(B){var D=0;if(B.length===0)return D;for(var v=0;v<B.length;v++){var $=B.charCodeAt(v);D=(D<<5)-D+$,D=D&D}return D}function Se(B){var D=0,v=oe(B);if(v==="array"){B.forEach(function(Z){D+=Se(Z)});var $="[type: array, hash: "+D+"]";return D+fe($)}if(v==="object"){for(var z in B)if(B.hasOwnProperty(z)){var se="[ type: object, key: "+z+", value hash: "+Se(B[z])+"]";D+=fe(se)}return D}var te="[ type: "+v+" ; value: "+B+"]";return D+fe(te)}function je(B,D,v,$,z,se,te,Z){v=v||[],z=z||[],te=te||[];var Pe=z.slice(0);if(typeof se<"u"&&se!==null){if($){if(typeof $=="function"&&$(Pe,se))return;if(typeof $=="object"){if($.prefilter&&$.prefilter(Pe,se))return;if($.normalize){var Xe=$.normalize(Pe,se,B,D);Xe&&(B=Xe[0],D=Xe[1])}}}Pe.push(se)}oe(B)==="regexp"&&oe(D)==="regexp"&&(B=B.toString(),D=D.toString());var me=typeof B,i=typeof D,_,d,u,h,C=me!=="undefined"||te&&te.length>0&&te[te.length-1].lhs&&Object.getOwnPropertyDescriptor(te[te.length-1].lhs,se),j=i!=="undefined"||te&&te.length>0&&te[te.length-1].rhs&&Object.getOwnPropertyDescriptor(te[te.length-1].rhs,se);if(!C&&j)v.push(new x(Pe,D));else if(!j&&C)v.push(new ne(Pe,B));else if(oe(B)!==oe(D))v.push(new H(Pe,B,D));else if(oe(B)==="date"&&B-D!==0)v.push(new H(Pe,B,D));else if(me==="object"&&B!==null&&D!==null){for(_=te.length-1;_>-1;--_)if(te[_].lhs===B){h=!0;break}if(h)B!==D&&v.push(new H(Pe,B,D));else{if(te.push({lhs:B,rhs:D}),Array.isArray(B)){for(Z&&(B.sort(function(I,c){return Se(I)-Se(c)}),D.sort(function(I,c){return Se(I)-Se(c)})),_=D.length-1,d=B.length-1;_>d;)v.push(new ce(Pe,_,new x(void 0,D[_--])));for(;d>_;)v.push(new ce(Pe,d,new ne(void 0,B[d--])));for(;_>=0;--_)je(B[_],D[_],v,$,Pe,_,te,Z)}else{var Y=Object.keys(B),w=Object.keys(D);for(_=0;_<Y.length;++_)u=Y[_],h=w.indexOf(u),h>=0?(je(B[u],D[u],v,$,Pe,u,te,Z),w[h]=null):je(B[u],void 0,v,$,Pe,u,te,Z);for(_=0;_<w.length;++_)u=w[_],u&&je(void 0,D[u],v,$,Pe,u,te,Z)}te.length=te.length-1}}else B!==D&&(me==="number"&&isNaN(B)&&isNaN(D)||v.push(new H(Pe,B,D)))}function De(B,D,v,$,z){var se=[];if(je(B,D,se,$,null,null,null,z),v)for(var te=0;te<se.length;++te)v(se[te]);return se}function Tt(B,D,v,$,z,se,te){return je(B,D,v,$,z,se,te,!0)}function qe(B,D,v,$){var z=$?function(te){te&&$.push(te)}:void 0,se=De(B,D,z,v);return $||(se.length?se:void 0)}function _e(B,D,v,$){var z=$?function(te){te&&$.push(te)}:void 0,se=De(B,D,z,v,!0);return $||(se.length?se:void 0)}function Te(B,D,v){if(v.path&&v.path.length){var $=B[D],z,se=v.path.length-1;for(z=0;z<se;z++)$=$[v.path[z]];switch(v.kind){case"A":Te($[v.path[z]],v.index,v.item);break;case"D":delete $[v.path[z]];break;case"E":case"N":$[v.path[z]]=v.rhs;break}}else switch(v.kind){case"A":Te(B[D],v.index,v.item);break;case"D":B=Ae(B,D);break;case"E":case"N":B[D]=v.rhs;break}return B}function ct(B,D,v){if(typeof v>"u"&&D&&~L.indexOf(D.kind)&&(v=D),B&&v&&v.kind){for(var $=B,z=-1,se=v.path?v.path.length-1:0;++z<se;)typeof $[v.path[z]]>"u"&&($[v.path[z]]=typeof v.path[z+1]<"u"&&typeof v.path[z+1]=="number"?[]:{}),$=$[v.path[z]];switch(v.kind){case"A":v.path&&typeof $[v.path[z]]>"u"&&($[v.path[z]]=[]),Te(v.path?$[v.path[z]]:$,v.index,v.item);break;case"D":delete $[v.path[z]];break;case"E":case"N":$[v.path[z]]=v.rhs;break}}}function He(B,D,v){if(v.path&&v.path.length){var $=B[D],z,se=v.path.length-1;for(z=0;z<se;z++)$=$[v.path[z]];switch(v.kind){case"A":He($[v.path[z]],v.index,v.item);break;case"D":$[v.path[z]]=v.lhs;break;case"E":$[v.path[z]]=v.lhs;break;case"N":delete $[v.path[z]];break}}else switch(v.kind){case"A":He(B[D],v.index,v.item);break;case"D":B[D]=v.lhs;break;case"E":B[D]=v.lhs;break;case"N":B=Ae(B,D);break}return B}function Nt(B,D,v){if(B&&D&&v&&v.kind){var $=B,z,se;for(se=v.path.length-1,z=0;z<se;z++)typeof $[v.path[z]]>"u"&&($[v.path[z]]={}),$=$[v.path[z]];switch(v.kind){case"A":He($[v.path[z]],v.index,v.item);break;case"D":$[v.path[z]]=v.lhs;break;case"E":$[v.path[z]]=v.lhs;break;case"N":delete $[v.path[z]];break}}}function rt(B,D,v){if(B&&D){var $=function(z){(!v||v(B,D,z))&&ct(B,D,z)};De(B,D,$)}}return Object.defineProperties(qe,{diff:{value:qe,enumerable:!0},orderIndependentDiff:{value:_e,enumerable:!0},observableDiff:{value:De,enumerable:!0},orderIndependentObservableDiff:{value:Tt,enumerable:!0},orderIndepHash:{value:Se,enumerable:!0},applyDiff:{value:rt,enumerable:!0},applyChange:{value:ct,enumerable:!0},revertChange:{value:Nt,enumerable:!0},isConflict:{value:function(){return typeof $conflict<"u"},enumerable:!0}}),qe.DeepDiff=qe,R&&(R.DeepDiff=qe),qe})});var fu=no(uo(),1),Eu=no(io(),1);var ll="as",il="=",fl="break",El="else",_l="enum",ml="export",pl="if",bl="import",Al="->",Ol="is",Tl="loop",Nl="mut",Il="native",dl="object",Sl="fn",hl="return",Pl="self",kl="template",Ll=Object.freeze({ALIAS:ll,ASSIGN:il,BREAK:fl,ELSE:El,ENUMERATION:_l,EXPORT:ml,IF:pl,IMPORT:bl,INTO:Al,IS:Ol,LOOP:Tl,MUTABLE:Nl,NATIVE:Il,OBJECT:dl,PROCEDURE:Sl,RETURN:hl,SELF:Pl,TEMPLATE:kl}),fo=Ll;var Rl="assign",Cl="array_assignment",vl="branch-match",Ul="branch-default",Dl="condition",Bl="loop",Ml="data",yl="generics",jl="enumeration",wl="expression",Fl="instance",Yl="Link",gl="local",Gl="object",Vl="procedure",Kl="return",Hl="select",$l="member",zl="store",Xl="break",Jl="literal",Wl="array_access",Zl="valueLink",Ql="linkValue",ql="self",xl="procedure-call",ei="Maybe",ti="native",si="move",ni="String",oi="Array",ci="import",ri="library",ai="constructor",ui="destructor",li="free",ii="block-end",fi="default-block",Ei="continue",_i="branch",mi="statement",pi="draw",bi="size",Ai=Object.freeze({TYPES_ASSIGN:Rl,TYPES_ARRAY:oi,TYPES_ARRAY_ASSIGNMENT:Cl,TYPES_BRANCH_MATCH:vl,TYPES_BRANCH_DEFAULT:Ul,TYPES_CONDITION:Dl,TYPES_LOOP:Bl,TYPES_DATA:Ml,TYPES_GENERICS:yl,TYPES_ENUMERATION:jl,TYPES_EXPRESSION:wl,TYPES_INSTANCE:Fl,TYPES_LINK:Yl,TYPES_IMPORT:ci,TYPES_LOCAL:gl,TYPES_OBJECT:Gl,TYPES_PROCEDURE:Vl,TYPES_RETURN:Kl,TYPES_SELECT:Hl,TYPES_MEMBER:$l,TYPES_STORE:zl,TYPES_BREAK:Xl,TYPES_LITERAL:Jl,TYPES_ARRAY_ACCESS:Wl,TYPES_LINK_TO:Zl,TYPES_VALUE_AT:Ql,TYPES_SELF:ql,TYPES_LIBRARY:ri,TYPES_DROP:xl,TYPES_MAYBE:ei,TYPES_NATIVE:ti,TYPES_MOVE:si,TYPES_STRING:ni,TYPES_CONSTRUCTOR:ai,TYPES_FREE:li,TYPES_DEFAULT_BLOCK:fi,TYPES_BLOCK_END:ii,TYPES_CONTINUE:Ei,TYPES_BRANCH:_i,TYPES_STATEMENT:mi,TYPES_DESTRUCTOR:ui,TYPES_DRAW:pi,TYPES_SIZE:bi}),Ms=Ai;var Oi=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Eo=Oi;var Ti=Object.freeze([]),Ni=Object.freeze({}),et="",Ii="	",di=`
`,Si="UTF-8",_o=Ms,hi=Object.freeze({EMPTY_ARRAY:Ti,EMPTY_OBJECT:Ni,EMPTY_STRING:et,HORIZONTAL_TAB:Ii,LINE_BREAK:di,UNICODE_TEXT:Si,Codes:Eo,Keys:fo,Types:Ms}),mo=hi;function b(R,L=[],U=""){let K=L.map((x,ne)=>({name:`operand${ne+1}`,data:{type:"data",name:x,path:"Flogram"}})),H={type:"native",name:R,path:"Flogram",description:{inputs:K,outputs:U&&L.length<=0?null:[{name:"result",data:{type:"data",name:U||(L.length>0?L[0]:""),path:"Flogram"}}]}};return Object.freeze(H)}var Pi=Object.freeze({"+":[b("+",["FP64","FP64"]),b("+",["U64","U64"]),b("+",["I64","I64"]),b("+",["FP32","FP32"]),b("+",["U32","U32"]),b("+",["I32","I32"]),b("+",["U16","U16"]),b("+",["I16","I16"]),b("+",["U8","U8"]),b("+",["I8","I8"]),b("+",["any","any"])],"-":[b("-",["FP64","FP64"]),b("-",["U64","U64"]),b("-",["I64","I64"]),b("-",["FP32","FP32"]),b("-",["U32","U32"]),b("-",["I32","I32"]),b("-",["U16","U16"]),b("-",["I16","I16"]),b("-",["U8","U8"]),b("-",["I8","I8"]),b("-",["any","any"]),b("-",["FP64"]),b("-",["I64"]),b("-",["FP32"]),b("-",["I32"]),b("-",["I16"]),b("-",["I8"]),b("-",["any"])],"*":[b("*",["FP64","FP64"]),b("*",["U64","U64"]),b("*",["I64","I64"]),b("*",["FP32","FP32"]),b("*",["U32","U32"]),b("*",["I32","I32"]),b("*",["U16","U16"]),b("*",["I16","I16"]),b("*",["U8","U8"]),b("*",["I8","I8"]),b("*",["any","any"])],"/":[b("/",["FP64","FP64"]),b("/",["U64","U64"]),b("/",["I64","I64"]),b("/",["FP32","FP32"]),b("/",["U32","U32"]),b("/",["I32","I32"]),b("/",["U16","U16"]),b("/",["I16","I16"]),b("/",["U8","U8"]),b("/",["I8","I8"]),b("/",["any","any"])],"%":[b("%",["I64","I64"]),b("%",["U64","U64"]),b("%",["I32","I32"]),b("%",["U32","U32"]),b("%",["I16","I16"]),b("%",["U16","U16"]),b("%",["I8","I8"]),b("%",["U8","U8"]),b("%",["any","any"])],"!=":[b("!=",["FP64","FP64"],"Bool"),b("!=",["U64","U64"],"Bool"),b("!=",["I64","I64"],"Bool"),b("!=",["FP32","FP32"],"Bool"),b("!=",["U32","U32"],"Bool"),b("!=",["I32","I32"],"Bool"),b("!=",["U16","U16"],"Bool"),b("!=",["I16","I16"],"Bool"),b("!=",["U8","U8"],"Bool"),b("!=",["I8","I8"],"Bool"),b("!=",["any","any"],"any")],"==":[b("==",["FP64","FP64"],"Bool"),b("==",["U64","U64"],"Bool"),b("==",["I64","I64"],"Bool"),b("==",["FP32","FP32"],"Bool"),b("==",["U32","U32"],"Bool"),b("==",["I32","I32"],"Bool"),b("==",["U16","U16"],"Bool"),b("==",["I16","I16"],"Bool"),b("==",["U8","U8"],"Bool"),b("==",["I8","I8"],"Bool"),b("==",["any","any"],"any")],">":[b(">",["FP64","FP64"],"Bool"),b(">",["U64","U64"],"Bool"),b(">",["I64","I64"],"Bool"),b(">",["FP32","FP32"],"Bool"),b(">",["U32","U32"],"Bool"),b(">",["I32","I32"],"Bool"),b(">",["U16","U16"],"Bool"),b(">",["I16","I16"],"Bool"),b(">",["U8","U8"],"Bool"),b(">",["I8","I8"],"Bool"),b(">",["any","any"],"any")],"<":[b("<",["FP64","FP64"],"Bool"),b("<",["U64","U64"],"Bool"),b("<",["I64","I64"],"Bool"),b("<",["FP32","FP32"],"Bool"),b("<",["U32","U32"],"Bool"),b("<",["I32","I32"],"Bool"),b("<",["U16","U16"],"Bool"),b("<",["I16","I16"],"Bool"),b("<",["U8","U8"],"Bool"),b("<",["I8","I8"],"Bool"),b("<",["any","any"],"any")],">=":[b(">=",["FP64","FP64"],"Bool"),b(">=",["U64","U64"],"Bool"),b(">=",["I64","I64"],"Bool"),b(">=",["FP32","FP32"],"Bool"),b(">=",["U32","U32"],"Bool"),b(">=",["I32","I32"],"Bool"),b(">=",["U16","U16"],"Bool"),b(">=",["I16","I16"],"Bool"),b(">=",["U8","U8"],"Bool"),b(">=",["I8","I8"],"Bool"),b(">=",["any","any"],"any")],"<=":[b("<=",["FP64","FP64"],"Bool"),b("<=",["U64","U64"],"Bool"),b("<=",["I64","I64"],"Bool"),b("<=",["FP32","FP32"],"Bool"),b("<=",["U32","U32"],"Bool"),b("<=",["I32","I32"],"Bool"),b("<=",["U16","U16"],"Bool"),b("<=",["I16","I16"],"Bool"),b("<=",["U8","U8"],"Bool"),b("<=",["I8","I8"],"Bool"),b("<=",["any","any"],"any")],"&":[b("&",["Bool","Bool"],"Bool"),b("&",["any","any"],"any")],"^":[b("^",["Bool","Bool"],"Bool"),b("^",["any","any"],"any")],"|":[b("|",["Bool","Bool"],"Bool"),b("|",["any","any"],"any")],not:[b("not",["Bool"],"Bool"),b("not",["any"],"any")],I32:[b("I32",["FP64"],"I32"),b("I32",["U64"],"I32"),b("I32",["I64"],"I32"),b("I32",["FP32"],"I32"),b("I32",["U32"],"I32"),b("I32",["I32"],"I32"),b("I32",["U16"],"I32"),b("I32",["I16"],"I32"),b("I32",["U8"],"I32"),b("I32",["I8"],"I32"),b("I32",["any"],"any")],U32:[b("U32",["FP64"],"U32"),b("U32",["U64"],"U32"),b("U32",["I64"],"U32"),b("U32",["FP32"],"U32"),b("U32",["U32"],"U32"),b("U32",["I32"],"U32"),b("U32",["U16"],"U32"),b("U32",["I16"],"U32"),b("U32",["U8"],"U32"),b("U32",["I8"],"U32"),b("U32",["any"],"any")],I64:[b("I64",["FP64"],"I64"),b("I64",["U64"],"I64"),b("I64",["I64"],"I64"),b("I64",["FP32"],"I64"),b("I64",["U32"],"I64"),b("I64",["I32"],"I64"),b("I64",["U16"],"I64"),b("I64",["I16"],"I64"),b("I64",["U8"],"I64"),b("I64",["I8"],"I64"),b("I64",["any"],"any")],U64:[b("U64",["FP64"],"U64"),b("U64",["U64"],"U64"),b("U64",["I64"],"U64"),b("U64",["FP32"],"U64"),b("U64",["U32"],"U64"),b("U64",["I32"],"U64"),b("U64",["U16"],"U64"),b("U64",["I16"],"U64"),b("U64",["U8"],"U64"),b("U64",["I8"],"U64"),b("U64",["any"],"any")],FP32:[b("FP32",["FP64"],"FP32"),b("FP32",["U64"],"FP32"),b("FP32",["I64"],"FP32"),b("FP32",["FP32"],"FP32"),b("FP32",["U32"],"FP32"),b("FP32",["I32"],"FP32"),b("FP32",["U16"],"FP32"),b("FP32",["I16"],"FP32"),b("FP32",["U8"],"FP32"),b("FP32",["I8"],"FP32"),b("FP32",["any"],"any")],FP64:[b("FP64",["FP64"],"FP64"),b("FP64",["U64"],"FP64"),b("FP64",["I64"],"FP64"),b("FP64",["FP32"],"FP64"),b("FP64",["U32"],"FP64"),b("FP64",["I32"],"FP64"),b("FP64",["U16"],"FP64"),b("FP64",["I16"],"FP64"),b("FP64",["U8"],"FP64"),b("FP64",["I8"],"FP64"),b("FP64",["any"],"any")]}),qt=Pi;var po=Object.freeze(["+","-","*","/","%",">",">=","<","<=","!=","&","|","^","not","I32","U32","I64","U64","FP64","FP32"]);var ki=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),pt=ki;var{EMPTY_STRING:Li,UNICODE_TEXT:Fs}=mo,Ri=44,Ci=48,vi=57,Ui=46,Di=45,Bi=43,Mi=65,yi=90,ji=-1,wi=1,Fi=new TextDecoder(Fs),Yi=new TextEncoder,gi=(R,L,U=0,K=R.length|0,H=0,x=L.length|0)=>{for(H=H|0,U=U|0,x=x|0,K=K|0;;){let ne=U>=K,ce=H>=x;if(ne||ce)break;let oe=R[U],fe=L[H];if(U=U+1|0,H=H+1|0,oe<fe)return ji;if(oe>fe)return wi}return 0},Ys=(R,L,U=0,K=R.length|0,H=0,x=L.length|0)=>{for(H=H|0,U=U|0,x=x|0,K=K|0;;){let ne=H>=x,ce=U>=K;if(ne||ce)break;L[H]=R[U],H=H+1|0,U=U+1|0}},gs=(R,L,U=0,K=R.length|0,H=0,x=L.length|0)=>{U=U|0,H=H|0,K=K|0,x=x|0;let ne=K-U|0,ce=x-H|0;if(ne!==ce)return!1;for(;;){let Ae=U>=K,oe=H>=x;if(Ae||oe)break;let Se=R[U],je=L[H];if(U=U+1|0,H=H+1|0,Se!==je)return!1}return!0},Gi=R=>{R=R>>>0;let L=0,U=0;for(;U=(U<<1|1)>>>0,!(U>R);)L=L+1|0;return L},Oo=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),ws=(R,L,U,K)=>{for(R=R>>>0,K=K??L.length|0,U=U|0,K=K|0;R>0&&K>U;)K=K-1|0,L[K]=Oo[R&15],R=R>>>4},Gs=(R,L,U,K)=>{let H=U|0,x=U+K|0;if(K===0)return!1;let ne=L[H];for((ne===Bi||ne===Di)&&(H=H+1|0);H<x;){let ce=L[H];if(H=H+1|0,!(Ci<=ce&&ce<=vi||(Ui===ce||Ri===ce)))return!1}return!0},Vs=R=>{let L=R>=Mi,U=R<=yi;return L&&U},es=128,ts=127,To=-1,Lt=64,Ks=R=>{R=R|0;let L=[];for(;;){let U=R&ts;R=R>>7;let K=R===0,H=(U&Lt)===0,x=K&&H,ne=R===-1,ce=(U&Lt)!==0;if(x||ne&&ce){L.push(U);break}U=U|es,L.push(U)}return L},Vi=R=>{let L=[],U=!0;for(;U;){let K=R&ts;R>>=7,R===0&&!(K&Lt)||R===-1&&K&Lt?U=!1:K|=es,L.push(K)}return L},No=(R,L)=>{L=L|0;let U=0,K=0;for(;;){let H=R[L]|0;L=L+1|0;let x=(H&ts)<<K;if(K=K+7|0,U=U|x,(H&es)===0){let ce=(H&Lt)!==0,Ae=K<32;if(ce&&Ae){let fe=To<<K;U=U|fe}break}}return U},Ki=(R,L)=>{L=L|0;let U=0,K=0;for(;;){let H=R[L]|0;L=L+1|0;let x=(H&ts)<<K;if(K=K+7|0,U=U|x,!(H&es)){if(H&Lt){let ne=To<<K;U=U|ne}break}}return U},S=R=>Fi.decode(R),re=R=>Yi.encode(R),Hi=(R=Li)=>{let L=R.length|0,U=Ks(L),K=Buffer.from(R,Fs);return Object.freeze([...U,...K])},$i=(R,L)=>{L=L|0;let U=No(R,L),K=Ks(U).length;return L=L+K|0,R.subarray(L,L+U|0).toString(Fs)},zi=58,Xi=46,Vt=32,ys=48,Ji=67,bt=new Uint8Array(Ji),bo=bt.subarray(0,8),xt=bt.subarray(10,49),Ao=bt.subarray(51,68),js=16,Wi=2;bt[8]=zi;bt[9]=Vt;bt[49]=Vt;bt[50]=Vt;var Zi=(R,L)=>{L=L??console.log;let U=32,K=126,H=R.length|0,x=0;for(;H>0;){bo.fill(ys),ws(x,bo),xt.fill(Vt),Ao.fill(Vt);let ne=H>=js?js:H;H=H-js|0;let ce=0,Ae=0;for(let fe=1;fe<=ne;fe=fe+1|0){let Se=R[x]&255;xt[ce+0|0]=ys,xt[ce+1|0]=ys,ws(Se,xt,ce,ce+2|0);let je=Xi;U<=Se&&Se<=K&&(je=Se),Ao[Ae]=je,x=x+1|0,ce=ce+2|0,Ae=Ae+1|0,fe%Wi===0&&(ce=ce+1|0)}let oe=String.fromCodePoint(...bt);L(oe)}},Qi=function*(R,L){let U=R.length|0,K=L.length|0,H=0;for(;H<U&&H<K;){let x=R[H],ne=L[H];yield[x,ne],H=H+1|0}},qi=function*(R,L,U){let K=R.length|0,H=L.length|0,x=U.length|0,ne=0;for(;ne<K&&ne<H&&ne<x;){let ce=R[ne],Ae=L[ne],oe=U[ne];yield[ce,Ae,oe],ne=ne+1|0}},pE=Object.freeze({ARRAY_COMPARE:gi,ARRAY_COPY:Ys,ARRAY_EQUAL:gs,BIT_DEPTH:Gi,HEX_DIGITS:Oo,HEX_ENCODE:ws,IS_NUMBER:Gs,IS_UPPERCASE:Vs,LEB128_DECODE:No,LEB128_DECODE_SIGNED:Ki,LEB128_ENCODE:Ks,LEB128_ENCODE_SIGNED:Vi,UTF8_DECODE:S,UTF8_ENCODE:re,WASM_STRING_ENCODE:Hi,WASM_STRING_DECODE:$i,XXD_DUMP_HEX:Zi,ZIP2:Qi,ZIP3:qi});var{TYPES_ASSIGN:ss,TYPES_ARRAY:Qe,TYPES_ARRAY_ASSIGNMENT:xi,TYPES_BRANCH_MATCH:Io,TYPES_BRANCH_DEFAULT:So,TYPES_CONDITION:ef,TYPES_LOOP:tf,TYPES_DATA:$e,TYPES_GENERICS:ns,TYPES_ENUMERATION:Rt,TYPES_EXPRESSION:Ct,TYPES_IMPORT:sf,TYPES_INSTANCE:OE,TYPES_LIBRARY:nf,TYPES_LINK:ho,TYPES_LOCAL:tt,TYPES_OBJECT:ge,TYPES_PROCEDURE:st,TYPES_RETURN:of,TYPES_SELECT:Hs,TYPES_MEMBER:$s,TYPES_NATIVE:cf,TYPES_STORE:Po,TYPES_BREAK:rf,TYPES_LITERAL:Be,TYPES_ARRAY_ACCESS:zs,TYPES_LINK_TO:It,TYPES_VALUE_AT:lt,TYPES_SELF:nt,TYPES_DROP:ko,TYPES_MAYBE:Lo,TYPES_MOVE:Xs,TYPES_STRING:Kt,TYPES_CONSTRUCTOR:Js,TYPES_DESTRUCTOR:Ro,TYPES_FREE:af,TYPES_BLOCK_END:TE,TYPES_STATEMENT:NE,TYPES_DRAW:uf,TYPES_SIZE:Ws}=_o,X=gs,Zs=re("="),lf=re("enum"),ff=re("loop"),Ef=re("break"),_f=re("if"),mf=re("else"),Co=re("is"),vo=re("->"),vt=re(`
`),Uo=re("object"),Ut=re("pass"),Do=re("fn"),pf=re("return"),Bo=re("size"),Mo=re("at"),os=re(Qe),At=re("Link!!"),dt=re("Link"),cs=re("LinkSmart"),yo=re("mut"),jo=re("self"),wo=re("nocopy"),bf=re("move"),Af=re("size"),Of=re("import"),Tf=re("export"),rs=re("Maybe"),Nf=re("NONE"),If=re("SOME"),Fo=re("free"),df=re("free!!"),Ge=58,Qs=61,we=44,xe=46,Ze=123,Ie=40,Oe=10,Sf=35,ot=125,de=41,it=91,as=93,hf=39,qs=34,Pf=64,xs=47,en=1,Yo=2,tn=3,Yt="done",Le="fail",kf={EVENT_DONE:Yt,EVENT_FAIL:Le},_u=1,mu=2,pu=3,bu=4,Au=5,Ou=6,Tu=7,Nu=8,Iu=9,du=10,Su=11,hu=12,Lf=13,Rf=14,Cf=15,Pu=16,vf=99,Ve={FAIL_UNRESOLVED_NAME:R=>`Unresolved name '${R}'. The name '${R}' does not exist in the current context. Please check the spelling and scope of your identifiers.`,FAIL_UNEXPECTED_TOKEN:(R,L)=>`Unexpected token '${R}' at position ${L}. Please check the syntax.`,FAIL_INDENTATION_MISMATCH:R=>`Indentation mismatch on line ${R}. The code on this line does not align with the expected indentation. Check your indentation for inconsistencies.`,FAIL_INDENTATION_NO_INCREASE:R=>`Indentation error on line ${R}. Expected an increase in indentation but found none. Check your indentation.`,FAIL_DUPLICATE_DATA:R=>`Duplicate data '${R}' found. Ensure each piece of data is unique.`,FAIL_DUPLICATE_OBJECT_MEMBER:(R,L)=>`Duplicate member '${R}' in object '${L}'. Each member in an object must have a unique name.`,FAIL_INVALID_IDENTIFIER:R=>`Invalid identifier '${R}'. The name '${R}' is not a valid identifier. Ensure your identifiers adhere to the language's naming rules.`,FAIL_RETURN_LENGTH_MISMATCH:(R,L)=>`Return length mismatch. Expected '${R}' value(s) but received '${L}'. Ensure the number of return values matches the expected count.`,FAIL_UNRESOLVED_OBJECT_MEMBER:(R,L)=>`Unresolved member '${R}' of object '${L}'. The member '${R}' does not exist on the object '${L}'`,FAIL_UNKNOWN_PROCEDURE_NAME:R=>`Call to undefined procedure '${R}'. Please ensure that the procedure is defined before calling it.`,FAIL_IMMUTABLE_ASSIGNMENT:R=>`Assignment to an immutable variable '${R}'. You are attempting to assign a new value to a variable which was declared as immutable and cannot be changed.`,FAIL_RESERVED_KEYWORD_USAGE:R=>`Reserved keyword '${R}' used as an identifier. The keyword '${R}' is reserved by the language and cannot be used as an identifier. Please choose a different name.`,FAIL_INPUT_TYPE_MISMATCH:(R,L)=>`Type Mismatch at line ${R}. Nature procedures expect all parameters to be of same type. Provided: ${L}.`,FAIL_UNSUPPORTED_TYPE:R=>`Unsupported type found. Type '${R}' was not defined in this context and isn't a native to Flogram. Please check your code and language supported types.`,FAIL_UNALLOWED_COPY:R=>`Copy operation not allowed. The object '${R}' has been defined as uncopyable in your code, and therefore, the copy operation you're attempting is not allowed.`,FAIL_ASSIGNMENT_TYPE_MISMATCH:(R,L)=>`Assignment type mismatch. Type '${L}' assigned to '${R}'.`},Uf=Object.freeze({FAIL_UNRESOLVED_NAME:_u,FAIL_UNEXPECTED_TOKEN:mu,FAIL_INDENTATION_MISMATCH:pu,FAIL_INDENTATION_NO_INCREASE:bu,FAIL_DUPLICATE_DATA:Au,FAIL_DUPLICATE_OBJECT_MEMBER:Ou,FAIL_INVALID_IDENTIFIER:Tu,FAIL_RETURN_LENGTH_MISMATCH:Nu,FAIL_UNRESOLVED_OBJECT_MEMBER:Iu,FAIL_UNKNOWN_PROCEDURE_NAME:du,FAIL_IMMUTABLE_ASSIGNMENT:Su,FAIL_RESERVED_KEYWORD_USAGE:hu,FAIL_ASSIGNMENT_TYPE_MISMATCH:Pu}),Df=new Set(["fn","object","pass","enum"]),go=new Set(["==","!=",">",">=","<","<=","!","&","|"]),Me=(R,L,U,K)=>{if(K===1){let Te=L[U],ct=Te&191,He=Te&223,Nt=He^93,rt=He^91,B=Te&254,v=Te&254^40,z=Te&253^44,te=Te&254^58;return ct===0||(Nt===0||rt===0)||v===0||z===0||te===0||Te===Oe}let qe=L.subarray(U,U+K|0),_e=S(qe);return!1},Bf=(R,L,U,K)=>{let H=L.subarray(U,U+K|0),x=S(H);return Df.has(x)||pt.includes(x)},Mf=512,Wn=1,ku=2,Rs=3,Zn=4,Lu=5,Ru=6,Cu=7,vu=8,Uu=9,yf=10,jf=11,wf=12,Ff=13,Yf=14,gf=15,Gf=16,Vf=17,Kf=18,Ot=Object.freeze([Wn]),Dt=Object.freeze([ku]),Ht=Object.freeze([Rs]),sn=Object.freeze([Rs,Zn]),Go=Object.freeze([Lu]),Hf=Object.freeze([Wn,Ru]),$f=Object.freeze([Cu]),Ke=Object.freeze([Zn,vu]),Fe=Object.freeze([Uu]),zf=Object.freeze([yf]),Bt=Object.freeze([jf]),Xf=Object.freeze([Rs,Uu]),$t=Object.freeze([wf]),Mt=Object.freeze([Ff]),nn=Object.freeze([Yf]),Vo=Object.freeze([gf]),Ko=Object.freeze([Gf]),us=Object.freeze([Vf]),on=Object.freeze([Kf]),Jf=Object.freeze({REASON_COLON_OPENS_SCOPE:Wn,REASON_LINE_BREAK_BEFORE_OPEN_SCOPE:ku,REASON_CLOSING_LINE_BREAK:Rs,REASON_SEQUENCE_SEPARATOR_COMMA:Zn,REASON_INTO_BETWEEN_INPUTS_OUTPUTS:Lu,REASON_IS_OPENS_CONDITION_BRANCH_MATCH:Ru,REASON_OPEN_STATEMENT_WITH_KEYWORD:Cu,REASON_RIGHT_PARENTHESIS_CLOSES_LIST:vu}),Ce=1,Ho=2,zt=3,$o=4,cn=5,zo=6,ze=7,St=8,ve=9,Xt=10,yt=11,Xo=12,Jo=13,Jt=1,Wo=2,ye=3,rn=4,Zo=5,Qo=6,qo=7,xo=1,ec=2,tc=3,sc=4,nc=5,an=6,oc=7,cc=8,rc=9,ac=10,uc=11,lc=12,ic=13,un=14,Wt=1,fc=2,ls=3,Ec=4,ln=5,_c=6,mc=7,Zt=1,pc=2,is=3,bc=4,Ac=6,Oc=1,Tc=2,Nc=3,Ic=4,fn=5,dc=6,Sc=7,fs=8,hc=9,Pc=10,kc=11,Lc=12,Rc=13,Cc=14,vc=1,Uc=2,Dc=1,Bc=2,Wf=3;var Mc=7,En=8,yc=9,Es=1,_s=2,ms=3,ps=4,jt=5,bs=6,As=7,wt=8,Os=9,Ts=10,Ns=11,Ft=1,jc=2,wc=3,_n=4,Fc=5,Yc=6,gc=7,mn=8,Gc=9,Vc=10,Kc=11,Hc=12,$c=13,zc=14,pn=15;var Xc=17,bn=18,An=19,Jc=20,Wc=21,On=22,Zc=23,Qc=24,ht=25,Is=26,qc=27,xc=28,er=29,tr=30,sr=31,nr=32,or=33,cr=34,rr=35,ar=36,ur=37,lr=38,ir=39,Tn=40,Nn=41,fr=42,Er=43,_r=44,In=45,mr=46,pr=47,br=48,Ar=49,dn=50,Or=51,Tr=52,Sn=53,hn=54,Nr=55,Ir=56,dr=57,Sr=58,Pn=59,hr=60,Pr=61,kr=62,Lr=63,Rr=64,Cr=65,_t=1,vr=2,Ur=3,Dr=4,kn=5,Br=6,ds=1,Mr=2,yr=3,jr=4,wr=5,Pt=6,Fr=7,Ln=8,Ss=9,Rn=10,hs=11,Yr=12,gr=13,Cn=14,vn=15,Un=16,Gr=17,Vr=18,Kr=19,Dn=20,Bn=21,Hr=22,$r=23,zr=24,Xr=25,Jr=26,Mn=27,Wr=28,Zr=29,yn=30,Qr=31,jn=32,qr=33,xr=34,ea=35,ta=36,sa=37,wn=38,Fn=39,na=40,oa=41,ca=42,ra=43,aa=44,Yn=45,gn=46,ua=47,Ps=48,la=49,ia=50,fa=51,Ea=52,_a=53,ma=54,pa=55,ba=56,Aa=57,Oa=58,Ta=59,Na=60,Ia=61,da=62,Sa=63,Gn=64,ha=65,Vn=66,Pa=67,ks=68,ka=69,Kn=70,La=71,Ra=72,Ca=73,va=74,Ua=75,Da=76,Ba=77,Ma=78,ya=79,ja=80,wa=81,Fa=82,Ya=83,ga=84,Ga=85,Hn=86,Zf=87,$n=88,Va=89,zn=1,Ka=2,Ha=3,$a=4,za=5,Xa=6,Ja=7,Wa=8,Za=9,Qa=10,Xn=11,qa=12,xa=13,eu=14,tu=15,su=16,nu=17,ou=18,cu=19,ru=20,Ue="Flogram",au="0",uu="any",Jn="data",lu="code",iu=R=>["TRUE","FALSE"].includes(R),Ls=!1,Du=R=>{let L=[],U=[],K=[],H={name:"draw",type:"procedure",description:{inputs:[{name:"a",data:{type:"data",name:"I32",path:"Flogram"}}],locals:[],outputs:[]}},x=Object.freeze({data:L,code:U,exports:K}),ne=new Uint8Array(Mf),ce=[],Ae=0,oe=(r,n,e,f)=>{let t=Object.freeze({position:r,length:f});Ys(n,ne,e,e+f|0,Ae,Ae+f|0),ce.push(t),Ae=Ae+f|0},fe=()=>{Ae=0;let r=ne,n=ce,e=0;for(;n.length>0;){let f=n.shift(),{length:t,position:s}=f;Gt(s,r,e,t),e=e+t|0}},Se=(r,n,e,f)=>{let{description:t}=r,{members:s}=t,o=s.find(E=>E.name===n[e]),l=L.find(E=>E.name===o.data.name);return l.type===ge&&e<n.length-1?Se(l,n,e+1,f):o},je=r=>{let n=Number(r);if(isNaN(n))return"";if(Number.isInteger(n)){if(n>=-Math.pow(2,31)&&n<Math.pow(2,31))return"I32";if(n>=-Math.pow(2,63)&&n<Math.pow(2,63))return"I64"}else if(typeof n=="number")return r.replace(".","").length<=7?"FP32":"FP64"},De=r=>{switch(r.type){case"select":return r.value.name;case"store":case"linkValue":return De(r.link);case"valueLink":return De(r.value)}return r.name},Tt=(r,n)=>{let e=qt[r];if(e){let f=e.find(t=>t.description&&Array.isArray(t.description.inputs)?t.description.inputs.length!==n.length?!1:t.description.inputs.every((s,o)=>s.data.name===n[o].data.name):!1);if(f)return f;A=O|0,p=position-T|0,gt(r);return}else{A=O|0,p=position-T|0,eo(r);return}},qe=r=>{let n=a.procedure.description.inputs.find(e=>e.name===r)||a.procedure.description.locals.find(e=>e.name===r);if(n){let e=L.find(f=>f.type===ns&&f.name===n.data.name);if(e)return{data:e}}return n},_e=(r,n=!1)=>{let e;switch(r.type){case Hs:{let f=a.stack.get(r.value.name||r.value.link,r.value.value);if(f){let t=L.find(N=>N.name===f.name),{description:s}=t,{members:o}=s,l=0,E=o.find(N=>N.name===r.trail[l]),m=L.find(N=>N.name===E.data.name);if(m.type===ge&&l<r.trail.length-1)e={data:Se(m,r.trail,l+1,n)?.data};else{if(E.data.freed){A=O|0,p=position-T|0,ue(`Attempted to use '${r.trail.join(".")}', which has been freed. Ensure links are valid before use.`);return}if(n){let N=L.indexOf(t),P=JSON.parse(JSON.stringify(t)),k=t.description.members.indexOf(E);k>=0&&(P.description.members[k].data.freed=!0,L.splice(N,1,P))}e=E}}break}case lt:{e=_e(r.link);break}case Xs:case It:{e=_e(r.value);break}case Ws:{e={data:{types:$e,name:"I32",path:Ue}};break}case zs:{e={data:a.stack.get(r.array.name)};break}case $s:{if(r.trail.length>0){let f=L.find(t=>{if(t.description&&t.description.members)return t.description.members.find(s=>s.name===r.trail[0])});if(f){let{description:t}=f,{members:s}=t,o=0,l=s.find(m=>m.name===r.trail[o]),E=L.find(m=>m.name===l.data.name);E.type===ge&&o<r.trail.length-1?e={data:Se(E,r.trail,o+1,n).data}:e={data:l.data}}else A=O|0,p=0,ft(r.trail[0],`${nt}(current object in definition)`)}else e=a.stack.get(r.trail[0]);break}case Ct:{let f=s=>U.find(o=>o.type===st&&o.name===s.name)?.description.outputs[0],t=(s,o)=>{let l;for(let E=0;o&&E<=s.name.length-2;E++)o=a.stack.get(s.name[E]),o&&(l=L.find(m=>m.type===ge&&m.name===o.name));return l?.description.members?.find(E=>E.name===s.name[s.name.length-1])?.description.outputs[0]};if(r.path!==Ue){if(e=f(r),typeof r.name=="object"){let s=a.stack.get(r.name[0]);e=t(r,s)}}else if(go.has(r.name))e={data:{type:$e,name:"Bool",path:Ue}},Ye(e.data.name);else{let s=r.inputs.map(l=>_e(l)),o=U.find(l=>l.description&&Array.isArray(l.description.inputs)?l.description.inputs.length!==s.length||l.name!==r.name||l.path!==r.path?!1:l.description.inputs.every((E,m)=>E.data.name===s[m].data.name):!1);if(o){let{description:l}=o,{outputs:E}=l;e=E[0]}else{A=O|0,p=position-T|0,ue(`Unable to find expression matching: ${s.map(l=>l.data.name)}`);return}}break}default:{e=qe(r.name);break}}if(!e)if(po.includes(r.name)&&r.type===Ct){let f=r.inputs.map(s=>_e(s)),t=Tt(r.name,f);e={data:{name:t.description.outputs[0].data.name,path:t.description.outputs[0].data.path}}}else r.type===Be&&(e={data:{type:Be,name:r.name,literal:r.literal,path:r.path}});return e},Te=r=>{let n=_e(r);return n&&n.data.path===Ue&&n.data.type!==Qe&&n.data.mutable?Object.seal({type:lt,link:r}):r},ct=(r,n)=>{let e=JSON.parse(JSON.stringify(r)),f=r.description.generics.map(s=>s.name);function t(s){for(let o in s)if(s[o]&&typeof s[o]=="object")t(s[o]);else if(o==="name"&&f.includes(s[o])){let l=f.indexOf(s[o]);s[o]=n[l].name,s.path=n[l].path}else if(o==="path"&&s[o].split(".").includes(e.name)){let l=s[o].split("."),E=l.indexOf(e.name),m=He(e.name,n);l[E]=m,s[o]=l.join(".")}}t(e);for(let s of U){let{description:o}=s,{inputs:l,outputs:E}=o,m=[...l,...E];if(s.type==="native"&&m.some(N=>f.includes(N.data.name))){let N=JSON.parse(JSON.stringify(s));t(N),U.push(N)}}return e},He=(r,n)=>{let f=n.map(t=>`${t.name}${t.segment?`_${t.segment}`:""}`).join("__");return`${r}___${f}`},Nt=r=>r.type===It&&r.value!==nt||r.type===lt&&r.link!==nt,{path:rt,imports:B,files:D,Tokenizer:v}=R,$=new Map,z=new Map,se=new Map,te=new Map,Z=(r,n="")=>{let{name:e,path:f}=r,t=n||e,s=`${f}.${t}`;se.set(s,r);let o=te.get(t)||[];o.push(r),te.set(t,o)},{data:Pe}=B;for(let r of Pe)Z(r);let Xe=[rt],me=new fu.default,i=[],_=[],d=[],u=!1,h=!1,C=!1,j=!0,Y=!1,w=!1,I=Ce,c=Jt,a=null,le=null,ie=[],ae=0,O=1,T=0,Ee=1,at=null,A=0,p=0,be=(r,n,e,f)=>{let t=n.subarray(e,e+f|0),s=S(t);return Bf(r,n,e,f)?(A=O|0,p=r-T|0,ju(s),!0):Me(r,n,e,f)?(A=O|0,p=r-T|0,ke(s),!0):!1};me.on(Yt,r=>{for(let n of _)n(r)}),me.on(Le,r=>{for(let n of d)n(r)});let Qn=r=>{let n=Object.freeze({type:Au,message:Ve.FAIL_DUPLICATE_DATA(r),failureRow:A,failureColumn:p,name:r});h=!0,C=!0,me.emit(Le,n)},qn=r=>{let n=Object.freeze({type:Ou,message:Ve.FAIL_DUPLICATE_OBJECT_MEMBER(r),failureRow:A,failureColumn:p,name:r});h=!0,C=!0,me.emit(Le,n)},Bu=r=>{let n=Ee,e=mt(r),f=Object.freeze({type:pu,message:Ve.FAIL_INDENTATION_MISMATCH(A),failureRow:A,failureColumn:p,expected:n,actual:e});h=!0,C=!0,me.emit(Le,f)},xn=r=>{let n=Object.freeze({type:bu,message:Ve.FAIL_INDENTATION_NO_INCREASE(A),failureRow:A,failureColumn:p,indentation:Ee});h=!0,C=!0,me.emit(Le,n)},ke=r=>{let n=Object.freeze({type:Tu,message:Ve.FAIL_INVALID_IDENTIFIER(r),failureRow:A,failureColumn:p,identifier:r});h=!0,C=!0,me.emit(Le,n)},Mu=(r,n)=>{let e=Object.freeze({type:Nu,message:Ve.FAIL_RETURN_LENGTH_MISMATCH(r,n),failureRow:A,failureColumn:p});C=!0,me.emit(Le,e)},yu=r=>{let n=Object.freeze({type:Su,message:Ve.FAIL_IMMUTABLE_ASSIGNMENT(r),failureRow:A,failureColumn:p,variable:r});h=!0,C=!0,me.emit(Le,n)},ju=r=>{let n=Object.freeze({type:hu,message:Ve.FAIL_RESERVED_KEYWORD_USAGE(r),failureRow:A,failureColumn:p,keyword:r});h=!0,C=!0,me.emit(Le,n)},F=(r,n)=>{let e=Object.freeze({type:mu,message:Ve.FAIL_UNEXPECTED_TOKEN(r,p),failureRow:A,failureColumn:p,reasons:n,token:r});h=!0,C=!0,me.emit(Le,e)},Qt=r=>{let n=Object.freeze({type:_u,message:Ve.FAIL_UNRESOLVED_NAME(r),failureRow:A,failureColumn:p,name:r});h=!0,C=!0,me.emit(Le,n)},ft=(r,n)=>{let e=Object.freeze({type:Iu,message:Ve.FAIL_UNRESOLVED_OBJECT_MEMBER(r,n),failureRow:A,failureColumn:p,name:r});h=!0,C=!0,me.emit(Le,e)},eo=r=>{let n=Object.freeze({type:du,message:Ve.FAIL_UNKNOWN_PROCEDURE_NAME(r),failureRow:A,failureColumn:p,name:r});h=!0,C=!0,me.emit(Le,n)},wu=r=>{let n=Object.freeze({type:Cf,message:Ve.FAIL_UNALLOWED_COPY(r),failureRow:A,failureColumn:p,name:r});h=!0,C=!0,me.emit(Le,n)},Fu=(r,n)=>{let e=Object.freeze({type:Pu,message:Ve.FAIL_ASSIGNMENT_TYPE_MISMATCH(r,n),failureRow:A,failureColumn:p});h=!0,C=!0,me.emit(Le,e)},ue=r=>{let n=Object.freeze({type:vf,message:r,failureRow:A,failureColumn:p});h=!0,C=!0,me.emit(Le,n)},Yu=r=>{let n=Object.freeze({type:Lf,message:Ve.FAIL_INPUT_TYPE_MISMATCH(A,r),failureRow:A,failureColumn:p,inputs:r});h=!0,C=!0,me.emit(Le,n)},gt=r=>{let n=Object.freeze({type:Rf,message:Ve.FAIL_UNSUPPORTED_TYPE(r),failureRow:A,failureColumn:p,inputs});h=!0,C=!0,me.emit(Le,n)},mt=r=>r-T|0,Cs=r=>{let n=Ee|0;return mt(r)<n},vs=(r,n)=>{let e=Ee|0,f=mt(r);switch(n){case en:return f<=e;case Yo:return f!==e}throw tn},qf=r=>{U.push(r)},Us=(r,n=!0)=>{let{name:e,path:f}=r,t=`${f}.${e}`;if(!$.has(t)){n?L.unshift(r):L.push(r),$.set(t,r),se.has(t)||Z(r);return}},Ye=r=>{let n=te.get(r);if(!n)return null;if(n.length===1){let[e]=n;return Us(e),e}throw tn},xf=(r,n)=>{let{description:e}=r,{inputs:f,locals:t}=e,{name:s}=n;for(let o of f)if(o.name===s)return o.data;for(let o of t)if(o.name===s)return o.data;return null},gu=(r,n,e,f)=>{switch(c){case Jt:{let t=n.subarray(e,e+f|0);if(a&&a.export&&(Ee=mt(r),at&&at!==Ee&&(y(),a=null,M(),at=null,Ee=1),at=Ee),X(t,Of)){M(),I=Jo,c=Dc,u=!0;return}if(X(t,Tf)){M(),Ee=mt(r),a=Object.freeze({export:!0,indentation:Ee}),c=Qo;return}if(X(t,lf)){M(),I=Ho,c=xo,u=!0;return}if(X(t,Uo)||X(t,wo)){M(),I=$o,c=Oc,u=!0;return}if(X(t,Ut)){M(),I=cn,c=vc,u=!0;return}if(X(t,Do)){M(),I=zo,c=Es,u=!0;return}break}case Qo:{if(n[e]===Ge){c=Jt,M(),c=qo;return}u=!0,c=Jt;break}case qo:{if(n[e]===Oe){c=Jt;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Dt);break}case Wo:{w=!1;let t=n.subarray(e,e+f|0);if(X(t,_f)){I=ze,c=wc,u=!0;return}if(X(t,mf)){I=ze,c=_r,u=!0;return}if(X(t,ff)){I=ze,c=sr,u=!0;return}if(X(t,Ef)){I=ze,c=rr;return}if(X(t,Mo)){I=ze,c=Jc,u=!0;return}if(X(t,dt)||X(t,At)||X(t,cs)){A=O|0,p=r-T|0;let l=S(t);F(l,on);return}if(X(t,Ut)){I=ze,c=Hc,u=!0;return}if(X(t,pf)){I=ze,c=zc,u=!0;return}if(X(t,Fo)||X(t,df)){I=ze,c=Pr,u=!0;return}if(!be(r,n,e,f)){I=ze,c=br,u=!0;return}A=O|0,p=r-T|0;let s=S(t);F(s,$f);break}case ye:{let t=n[e],s=n.subarray(e,e+f|0),o=S(s);if(L.find(E=>E.type===Rt&&E.description.labels.find(m=>m.name===o))){I=ve,c=jn,u=!0;return}if(Vs(t)&&!iu(S(s))){if(L.find(N=>N.name===o&&N.type===ge)){I=ve,c=gr,u=!0;return}if(L.find(N=>N.type===Rt&&N.name===o)){I=ve,c=jn,u=!0;return}}if(X(s,rs)){I=ve,c=ea,u=!0;return}if(X(s,jo)){I=ve,c=Jr,u=!0;return}if(X(s,Mo)){I=ve,c=yr,u=!0;return}if(X(s,dt)){I=ve,c=ds,u=!0;return}if(X(s,At)){I=ve,c=ds,u=!0;return}if(X(s,cs)){I=ve,c=ds,u=!0;return}if(X(s,os)){I=ve,c=Kn,u=!0;return}if(X(s,bf)){I=ve,c=ma,u=!0;return}if(X(s,Af)){I=ve,c=ya,u=!0;return}if(t===it){I=ve,c=Bn,u=!0;return}c=rn,u=!0;break}case rn:{oe(r,n,e,f),c=Zo;break}case Zo:{oe(r,n,e,f);let t=n[e];if(t===Ie){I=ve,c=Ss,fe();return}if(t===it){I=ve,c=Hr,fe();return}if(t===Ze){I=ve,c=Ss,fe();return}if(t===xe){c=rn;return}I=ve,c=wr,fe();break}}},Gu=(r,n,e,f)=>{switch(c){case xo:{let t=Xe.join("."),s=Object.seal({labels:[],generics:[]}),o=Object.seal({type:Rt,name:et,path:t,description:s});a=Object.seal({enumeration:o}),c=ec;break}case ec:{let{enumeration:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(be(r,n,e,f))return;t.name=o,c=tc;break}case tc:{let t=n[e];if(t===Ge){c=sc;return}if(t===Ze){let{enumeration:E}=a,{description:m}=E,{generics:N}=m;M(),a=N,I=Xt,c=Zt,u=!0;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ot);break}case sc:{if(n[e]===Oe){c=nc;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Dt);break}case nc:{Ee=mt(r),c=an,u=!0;break}case an:{let{enumeration:t}=a;if(Cs(r)){if(Us(t),y(),a&&a.export){let s=Object.freeze({name:t.name,type:t.type,path:Jn});K.push(s);let o=Ee;y(),Ee===o&&y(),Ee<o&&M()}u=!0;return}c=oc,u=!0;break}case oc:{let{enumeration:t}=a,{description:s}=t,{labels:o}=s,l=n.subarray(e,e+f|0),E=S(l);if(be(r,n,e,f))return;let m={name:E};o.push(m),c=an,M(),c=cc;break}case cc:{let t=n[e];if(u=!0,t===Ie){c=rc;return}let{enumeration:s}=a,{description:o}=s,{labels:l}=o,E=l.length-1;a=Object.seal({label:l[E]}),c=un;break}case rc:{if(n[e]===Ie){c=ac;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case ac:{let{enumeration:t}=a,{description:s}=t,{labels:o}=s;if(Me(r,n,e,f)){A=O|0,p=r-T|0,ke(E);return}let l=n.subarray(e,e+f|0),E=S(l),m=o.pop();m.data={name:E,path:rt},o.push(m),c=uc;break}case uc:{if(n[e]===Ge){c=lc;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ot);break}case lc:{let{enumeration:t}=a,{description:s}=t,{labels:o}=s,l=n.subarray(e,e+f|0),E=S(l);if(be(r,n,e,f))return;let m=o.pop();m.data.type=E,o.push(m),a=Object.seal({label:m}),c=ic;break}case ic:{if(n[e]===de){c=un;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case un:{if(n[e]===Oe){y();return}break}}},Vu=(r,n,e,f)=>{switch(c){case Zt:{c=pc,u=!0;break}case pc:{if(n[e]===Ze){c=is;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case is:{let t=n[e];if(t===Oe)return;if(t===ot){y();return}c=bc,u=!0;break}case bc:{let t=n.subarray(e,e+f|0),s=S(t);if(be(r,n,e,f))return;M();let o=Object.seal({type:ns,name:s,path:rt});a=Object.seal({name:s,data:o}),Z(a.data,a.name),c=Ac;break}case Ac:{let t=a;y(),a.push(t);let o=n[e];if(o===ot){c=is,u=!0;return}if(o===we){c=is;return}A=O|0,p=r-T|0;let l=n.subarray(e,e+f|0),E=S(l);F(E,Ke);break}}},Ku=(r,n,e,f)=>{switch(c){case Wt:{c=fc,u=!0;break}case fc:{if(n[e]===Ie){c=ls;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case ls:{let t=n[e];if(t===Oe)return;if(t===de){y();return}c=Ec,u=!0;break}case Ec:{let t=n.subarray(e,e+f|0);if(M(),X(yo,t)){a=Object.seal({name:null,mutable:!0,data:null}),c=ln;return}a=Object.seal({name:null,data:null}),c=ln,u=!0;break}case ln:{let t=n.subarray(e,e+f|0),s=S(t);if(be(r,n,e,f))return;a.name=s,c=_c;break}case _c:{if(n[e]===Ge){c=mc,M(),I=St,c=_t;return}break}case mc:{let t=a;y();let s=a,{mutable:o,...l}=t;s.push(l);let E=n[e];if(E===de){c=ls,u=!0;return}if(E===we){c=ls;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Ke);break}}},Hu=(r,n,e,f)=>{switch(c){case Oc:{let t=Xe.join("."),s=Object.seal({members:[],generics:[]}),o=Object.seal({type:ge,name:et,copy:!0,path:t,description:s});a=Object.seal({mapNameMember:new Map,object:o}),c=Tc,u=!0;break}case Tc:{let t=n.subarray(e,e+f|0);if(c=Nc,X(t,wo)){a.object.copy=!1;return}u=!0;break}case Nc:{let t=n.subarray(e,e+f|0);if(X(t,Uo)){c=Ic;return}A=O|0,p=r-T|0;let s=S(t);F(s,Ot);break}case Ic:{let{object:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(be(r,n,e,f))return;let l=Ye(o);l&&Xe.join(".")===l.path&&(A=O|0,p=r-T|0,Qn(o)),t.name=o,Us(t,!1),c=Rc;break}case Rc:{if(n[e]===Ze)c=Cc,u=!0;else if(n[e]===Ge)c=fn,u=!0;else{let t=n.subarray(e,e+f|0),s=S(t);A=O|0,p=r-T|0,ke(s);return}break}case Cc:{let{object:t}=a,{description:s}=t,{generics:o}=s;c=fn,M(),a=o,I=Xt,c=Zt,u=!0;break}case fn:{if(n[e]===Ge){c=dc;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ot);break}case dc:{if(n[e]===Oe){c=Sc;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Dt);break}case Sc:{if(vs(r,en)){let t=i.length;if(i.length<1||i[t-1].item.indentation>=Ee){A=O|0,p=r-T|0,xn(r);return}}Ee=mt(r),c=fs,u=!0;break}case fs:{let{object:t}=a;if(Cs(r)){if(y(),a&&a.export){let s=Object.freeze({name:t.name,type:t.type,path:Jn});K.push(s);let o=Ee;y(),Ee===o&&y(),Ee<o&&M()}u=!0;return}if(vs(r,Yo)){A=O|0,p=r-T|0,Bu(r);return}c=hc,u=!0;break}case hc:{let{object:t,mapNameMember:s}=a,{description:o}=t,{members:l}=o,E=n.subarray(e,e+f|0),m=S(E);if(X(Do,E)){c=fs,M(),I=Xo,c=Es,u=!0;return}if(be(r,n,e,f))return;s.has(m)&&(A=O|0,p=r-T|0,qn(m));let N=Object.seal({name:m,data:null});l.push(N),s.set(m,N),c=fs,M(),a=Object.seal({member:N}),c=Pc;break}case Pc:{if(n[e]===Ge){c=kc;return}break}case kc:{c=Lc,M(),a=Object.seal({data:null}),M(),I=St,c=_t,u=!0;break}case Lc:{if(n[e]===Oe){let{data:E}=a;y();let{member:m}=a;m.data=E,y();return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ht);break}}},$u=(r,n,e,f)=>{switch(c){case Es:{let{mapNameMember:t,object:s}=a,{name:o}=s,l=new Map(t),E=`${Xe.join(".")}.${o}`,m=Object.seal({generics:[],inputs:[],locals:[],outputs:[],statements:[]}),N=Object.seal({type:st,name:et,path:E,description:m});a=Object.seal({procedure:N,stack:l}),c=_s;break}case _s:{let{procedure:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(be(r,n,e,f))return;t.name=o,c=ms;break}case ms:{if(n[e]===Ze)c=ps,u=!0;else if(n[e]===Ie)c=jt,u=!0;else{let t=n.subarray(e,e+f|0),s=S(t);A=O|0,p=r-T|0,ke(s);return}break}case ps:{let{procedure:t}=a,{description:s}=t,{generics:o}=s;c=jt,M(),a=o,I=Xt,c=Zt,u=!0;break}case jt:{let{procedure:t}=a,{description:s}=t,{inputs:o}=s;c=bs,M(),a=o,I=zt,c=Wt,u=!0;break}case bs:{let{procedure:t,stack:s}=a,{description:o}=t,{inputs:l}=o;for(let k of l){let{name:V,data:g}=k;s.set(V,g)}l.length>0&&a.procedure.name===Ro&&(A=O|0,p=r-T|0,ue("Destructors should not return any values. Your destructor appears to return a number. Please adhere to Flogram's conventions and correct your code."));let E=n.subarray(e,e+f|0),m=n[e];if(X(E,vo)){c=As;return}if(m===Ge){c=wt,u=!0;return}A=O|0,p=r-T|0;let N=S(E);F(N,Go);break}case As:{let{procedure:t}=a,{description:s}=t,{outputs:o}=s;c=wt,M(),a=o,I=zt,c=Wt,u=!0;break}case wt:{let t=n[e],{outputs:s}=a.procedure.description;if(s.length>0&&a.procedure.name===Js&&(A=O|0,p=r-T|0,ue(`Constructors in Flogram should not return any values. Your constructor seems to return ${s.length} outputs. Please correct your code according to Flogram rules.`)),s.length>0&&a.procedure.name===Ro&&(A=O|0,p=r-T|0,ue(`Destructors in Flogram should not return any values. Your destructor seems to return ${s.length} outputs. Please correct your code according to Flogram rules.`)),t===Ge){c=Os;return}A=O|0,p=r-T|0;let o=n.subarray(e,e+f|0),l=S(o);F(l,Ot);break}case Os:{if(n[e]===Oe){c=Ts;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Dt);break}case Ts:{let{procedure:t,stack:s}=a,{description:o}=t,{statements:l}=o;c=Ns,M(),a=Object.seal({procedure:t,stack:s,statements:l}),I=ze,c=Ft,u=!0;break}case Ns:{let{procedure:t}=a,{name:s}=t;y();let{object:o,mapNameMember:l}=a,{description:E}=o,{members:m}=E;l.has(s)&&(A=O|0,p=r-T|0,qn(s));let N=Object.seal({name:t.name,data:{name:t.name,type:t.type,path:t.path}});m.push(t),l.set(s,N),u=!0;break}}},zu=(r,n,e,f)=>{switch(c){case vc:{let t=n.subarray(e,e+f|0);if(X(t,Ut)){M(),I=cn,c=Uc,u=!0;return}break}case Uc:{if(n[e]===Oe){y();return}break}}},Xu=(r,n,e,f)=>{switch(c){case Es:{let t=new Map,s=Xe.join("."),o=Object.seal({generics:[],inputs:[],locals:[],outputs:[],statements:[]}),l=Object.seal({type:st,name:et,path:s,description:o});a=Object.seal({procedure:l,stack:t}),c=_s;break}case _s:{let{procedure:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(be(r,n,e,f))return;t.name=o,c=ms;break}case ms:{if(n[e]===Ze)c=ps,u=!0;else if(n[e]===Ie)c=jt,u=!0;else{let t=n.subarray(e,e+f|0),s=S(t);A=O|0,p=r-T|0,ke(s);return}break}case ps:{let{procedure:t}=a,{description:s}=t,{generics:o}=s;c=jt,M(),a=o,I=Xt,c=Zt,u=!0;break}case jt:{let{procedure:t}=a,{description:s}=t,{inputs:o}=s;c=bs,M(),a=o,I=zt,c=Wt,u=!0;break}case bs:{let{procedure:t,stack:s}=a,{description:o}=t,{inputs:l}=o;for(let k of l){let{name:V,data:g}=k;s.set(V,g)}let E=n.subarray(e,e+f|0),m=n[e];if(X(E,vo)){c=As;return}if(m===Ge){c=wt,u=!0;return}A=O|0,p=r-T|0;let N=S(E);F(N,Go);break}case As:{let{procedure:t}=a,{description:s}=t,{outputs:o}=s;c=wt,M(),a=o,I=zt,c=Wt,u=!0;break}case wt:{if(n[e]===Ge){c=Os;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ot);break}case Os:{if(n[e]===Oe){c=Ts;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Dt);break}case Ts:{let{procedure:t,stack:s}=a,{description:o}=t,{statements:l}=o;c=Ns,M(),a=Object.seal({procedure:t,stack:s,statements:l}),I=ze,c=Ft,u=!0;break}case Ns:{let{procedure:t}=a;if(U.push(t),y(),a&&a.export){let s=Object.freeze({name:t.name,type:t.type,path:lu});K.push(s);let o=Ee;y(),Ee===o&&y(),Ee<o&&M()}u=!0;break}}},Ju=(r,n,e,f)=>{switch(c){case Ft:{if(vs(r,en)){A=O|0,p=r-T|0,xn(r);return}Ee=mt(r),c=jc,u=!0;break}case jc:{let t=n.subarray(e,e+f|0);if(Cs(r)){y(),u=!0;return}M(),I=Ce,c=Wo,u=!0;break}case rr:{let{statements:t}=a,s={type:rf};t.push(s),y();break}case sr:{let{procedure:t,stack:s,statements:o}=a,l=Object.freeze({type:tf,statements:[]});o.push(l),M(),a=Object.seal({blockLoop:l,procedure:t,stack:s,value:0}),c=nr;break}case nr:{if(n[e]===Ge){c=or;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ot);break}case or:{let{blockLoop:t,procedure:s,stack:o}=a,{statements:l}=t;if(n[e]===Oe){c=cr,M(),a=Object.seal({procedure:s,stack:o,statements:l}),I=ze,c=Ft;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Ht);break}case cr:{y(),y(),u=!0;break}case wc:{let{procedure:t,stack:s,statements:o}=a,l=Object.freeze({type:ef,branches:[],values:[]});o.push(l),M(),a=Object.seal({blockCondition:l,procedure:t,stack:s,value:0}),c=ar;break}case ar:{oe(r,n,e,f),c=ur;break}case ur:{oe(r,n,e,f);let t=n[e],s=n.subarray(e,e+f|0);if(t===Ie){c=lr,fe();return}if(X(s,Co)){c=_n,fe();return}break}case _r:{let{stack:t,branches:s,procedure:o}=a,l={type:So,statements:[],values:[]};s.push(l),a=Object.seal({branch:l,stack:t,procedure:o}),c=Nn;break}case lr:{let t=n.subarray(e,e+f|0),{blockCondition:s,stack:o,procedure:l}=a,{branches:E}=s,m={type:Io,statements:[],values:[]};E.push(m);let N=S(t),P={type:Ct,name:N,path:Ue,inputs:[]},k=U.find(V=>V.type===st&&V.name===N);k&&(P.path,k.path),a=Object.seal({blockCondition:s,branch:m,stack:o,value:P,procedure:l}),c=ir;break}case ir:{if(n[e]===Ie){c=Pn;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Fe);break}case Pn:{let{stack:t,procedure:s}=a;if(n[e]===de){c=Tn,u=!0;return}c=hr,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case hr:{let{value:t}=a;y();let{value:s,stack:o,procedure:l}=a,{inputs:E}=s;E.push(Te(t));let m=n[e];if(m===de){c=Tn,u=!0;return}if(m===we){c=Pn;return}A=O|0,p=r-T|0;let N=n.subarray(e,e+f|0),P=S(N);F(P,sn);break}case Tn:{let{value:t,branch:s,stack:o}=a,{values:l}=s,{name:E}=t,m=qt[E];if(m){let V=t.inputs.map(G=>_e(G))||[],g=m.find(G=>G.description&&Array.isArray(G.description.inputs)?G.description.inputs.length!==V.length?!1:G.description.inputs.every((J,Q)=>J.data.name===V[Q].data.name):!1);g&&U.push(g)}if(l.push(t),Ye("Bool"),n[e]===de){c=Nn;return}A=O|0,p=r-T|0;let N=n.subarray(e,e+f|0),P=S(N);F(P,Ke);break}case Nn:{let t=n.subarray(e,e+f|0);if(n[e]===Ge){c=fr;return}A=O|0,p=r-T|0;let s=S(t);F(s,Bt);break}case fr:{let{branch:t,procedure:s,stack:o}=a,{statements:l}=t;if(n[e]===Oe){c=Er,M(),a=Object.seal({procedure:s,stack:o,statements:l}),I=ze,c=Ft;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Ht);break}case Er:{let{branch:t}=a;if(t.type===So){y(),y();let{branches:s,...o}=a;a=Object.seal(o)}else{let{blockCondition:s}=a,{branches:o}=s;y(),y(),a=Object.seal({...a,branches:o})}u=!0;break}case _n:{let{blockCondition:t,stack:s}=a,{values:o}=t,l=n.subarray(e,e+f|0),E=S(l);if(be(r,n,e,f))return;if(s.has(E)){let m=Object.freeze({type:tt,name:E});o.push(m)}c=Fc;break}case Fc:{if(n[e]===we){c=_n;return}let s=n.subarray(e,e+f|0);if(X(s,Co)){c=Yc,M(),c=gc,u=!0;return}A=O|0,p=r-T|0;let o=S(s);F(o,Hf);break}case Yc:{y(),y(),u=!0;break}case gc:{let{blockCondition:t,procedure:s,stack:o}=a,{branches:l}=t,E=Object.seal({type:Io,statements:[],values:[]});l.push(E),a=Object.seal({blockCondition:t,branchMatch:E,procedure:s,stack:o}),c=mn;break}case mn:{let{blockCondition:t,branchMatch:s,stack:o}=a,{values:l}=t,{values:E}=s,m=n.subarray(e,e+f|0),N=S(m);if(be(r,n,e,f))return;if(o.has(N)){let P=Object.freeze({type:tt,name:N});E.push(P)}else{let{procedure:P}=a,{description:k}=P,{outputs:V}=k,g=N,{name:G,path:J}=V[0].data,Q=Object.freeze({type:Be,literal:g,name:G,path:J});E.push(Q)}c=Gc;break}case Gc:{let t=n[e];if(t===we){c=mn;return}if(t===Ge){c=Vc;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ot);break}case Vc:{let{branchMatch:t,procedure:s,stack:o}=a,{statements:l}=t;if(n[e]===Oe){c=Kc,M(),a=Object.seal({procedure:s,stack:o,statements:l}),I=ze,c=Ft;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Ht);break}case Kc:{y();let t=n.subarray(e,e+f|0),s=S(t);u=!0;break}case Hc:{c=$c;break}case $c:{if(n[e]===Oe){y();return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ht);break}case zc:{let{procedure:t,stack:s,statements:o}=a,l=Object.seal({type:of,values:[]});o.push(l),M();let E=O|0,m=r-T|0,N=Object.freeze({row:E,column:m});a=Object.seal({commandReturn:l,coordinates:N,procedure:t,stack:s}),c=pn;break}case pn:{let{stack:t,procedure:s}=a;if(n[e]===Oe){c=bn,u=!0;return}c=Xc,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case Xc:{let{value:t}=a;y();let{commandReturn:s,stack:o,procedure:l}=a,{values:E}=s;E.push(Te(t));let m=n[e];if(m===Oe){c=bn,u=!0;return}if(m===we){c=pn;return}A=O|0,p=r-T|0;let N=n.subarray(e,e+f|0),P=S(N);F(P,sn);break}case bn:{let{commandReturn:t,coordinates:s,procedure:o}=a,{values:l}=t,{description:E}=o,{outputs:m}=E;l.length!==m.length&&(A=s.row|0,p=s.column|0,Mu(m.length,l.length));for(let N of m){let P=m.indexOf(N),k=_e(l[P]);k&&k.data.name!=N.data.name&&(A=s.row|0,p=s.column|0,ue(`Mismatching types provided on procedure's return. Procedure expected ${N.data.name} at index ${P} but was provided with a rather ${k.data.name}. Please review to provide matching types.`))}y(),y();break}case br:{let t=n.subarray(e,e+f|0),{procedure:s,stack:o,statements:l}=a,E={type:tt,name:null},m=Object.seal({type:ss,target:E,source:null});a=Object.freeze({declarationValue:m,procedure:s,stack:o,statements:l,target:E}),X(yo,t)?(E.mutable=!0,c=An):(u=!0,c=hn);break}case hn:{oe(r,n,e,f),c=Nr;break}case Nr:{if(oe(r,n,e,f),n[e]===Ie){let{procedure:t,stack:s,statements:o}=a;c=Ir;let l=Object.seal({type:ko,expression:null});a=Object.seal({stack:s,procedure:t,drop:l,value:null,statements:o}),M(),I=ve,c=Ss,fe();return}if(n[e]===xe){c=hn;return}c=An,fe();break}case Ir:{let{statements:t,drop:s,value:o}=a;s.expression=o,t.push(s),y();break}case An:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s),l=t.get(o);if(t.has(o)&&!l.mutable&&(w=!0),X(jo,s)){u=!0,c=Ar;return}let{target:E}=a;E.name=o,c=On;break}case On:{let t=n[e],{procedure:s,stack:o,statements:l,target:E}=a;if(t===it){let k=a.declarationValue,V={type:ss,target:{type:xi,array:{type:tt,name:k.target.name},index:null},source:null};a=Object.seal({declarationValue:V,procedure:s,stack:o,statements:l}),u=!0,c=xc;return}if(t===xe){let k=a.declarationValue,V=[],g=k.target;a=Object.seal({declarationValue:{type:ss,target:{type:Hs,value:g,trail:V},source:null},procedure:s,stack:o,statements:l}),M(),a=Object.seal({stack:o,trail:V,value:g}),c=In;return}if(t===Ge){u=!0,c=Zc;return}if(t===de){let{declarationValue:k}=a;y(),a.declarationValue.target=k.target,u=!0;return}if(t===Qs){let k=a.declarationValue?.target&&De(a.declarationValue?.target);if(k&&k!==nt&&!o.get(k)){A=O|0,p=r-T|0,Qt(k);return}c=Is;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Bt);break}case Ar:{a.target.type=$s,a.target.trail=[],delete a.target.name,c=dn;break}case dn:{if(n[e]===xe){c=Or;return}c=Sn,u=!0;break}case Or:{let t=n.subarray(e,e+f|0),s=S(t);a.target.trail.push(s),c=Tr;break}case Tr:{if(n[e]===xe){c=dn,u=!0;return}c=Sn,u=!0;break}case Sn:{c=ht,u=!0;break}case xc:{if(n[e]===it){c=er;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,nn);break}case er:{let{stack:t,procedure:s}=a;c=tr,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case tr:{if(n[e]===as){let{value:E}=a;y();let m=_e(E);if(m.data.mutable?a.declarationValue.target.index=Object.seal({type:lt,link:E}):a.declarationValue.target.index=E,!m||!["I32","U32","I16","U16","U8","I8"].includes(m.data.name)){A=O|0,p=r-T|0,ue("Invalid index. Array index should be a valid I32 variable");return}c=ht;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Vo);break}case Jc:{let{procedure:t,stack:s,statements:o}=a,l=Object.seal({type:Po,link:null}),E=Object.seal({type:ss,target:l,source:null});a=Object.freeze({declarationValue:E,procedure:t,stack:s,statements:o}),c=dr;break}case dr:{if(n[e]===Ie){c=Wc;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Fe);break}case Wc:{let{stack:t,procedure:s}=a;c=Sr,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case Sr:{if(n[e]===de){let{value:l}=a;y(),a.declarationValue.target.link=l,c=On;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Ke);break}case mr:{if(n[e]!==xe){y(),u=!0;return}c=In;break}case In:{let{stack:t,value:s,trail:o}=a,l=n.subarray(e,e+f|0),E=S(l),m,N,P=!1;if(s.type===tt){let{name:k}=s;m=t.get(k)}if(m){let{name:k,path:V}=m,g=`${V}.${k}`,G=se.get(g);G.type===ge&&(N=G)}if(N){let{description:k}=N,{members:V}=k;for(let g of V)if(g.name===E){P=!0;break}if(!P){A=O|0,p=r-T|0,ft(E,s.name);return}}if(s.value===nt||s.link===nt){if(!t.get(E)){A=O|0,p=r-T|0,ft(E,`${nt}(current object in definition)`);return}P=!0}if(!P){A=O|0,p=r-T|0,ft(E,s.name);return}o.push(E),c=mr;break}case Zc:{let t=n.subarray(e,e+f|0),s=S(t);if(n[e]===Ge){let{target:E,stack:m}=a,{name:N}=E;if(m.has(N)){A=O|0,p=r-T|0,Qn(N);return}if(n[e+1]===Qs&&f>1){c=pr,u=!0;return}c=Qc;return}A=O|0,p=r-T|0,F(s,zf);break}case Qc:{let{declarationValue:t,procedure:s,stack:o}=a,{target:l}=t,{description:E}=s,{locals:m}=E,N=n.subarray(e,e+f|0),P=S(N);if(Me(r,n,e,f)){A=O|0,p=r-T|0,ke(P);return}if(X(os,N)){c=ht,M(),I=yt,c=zn,u=!0;return}if(X(N,At)||X(N,dt)){c=ht,M(),I=yt,c=Xn,u=!0;return}if(X(N,rs)){c=ht,M(),I=yt,c=nu,u=!0;return}let k=Ye(P);if(k){let V=Object.seal({type:$e,name:k.name,path:k.path}),g;l.mutable?g=Object.freeze({name:l.name,data:{...V,mutable:l.mutable}}):g=Object.freeze({name:l.name,data:V}),o.set(l.name,g.data),m.push(g)}c=ht;break}case pr:{let{declarationValue:t,procedure:s,stack:o,statements:l}=a,{target:E}=t,{description:m}=s,{locals:N}=m,P;E.mutable?(P={name:E.name,mutable:E.mutable,data:null},delete E.mutable):P=Object.seal({name:E.name,data:null}),o.set(E.name,P.data),N.push(P),a=Object.seal({declarationValue:t,procedure:s,stack:o,statements:l,inferenceValue:P}),c=Is;break}case ht:{let t=n.subarray(e,e+f|0);if(X(t,Zs)){c=Is;return}A=O|0,p=r-T|0;let s=S(t);F(s,Bt);break}case Is:{let{procedure:t,stack:s,target:o}=a,l=n[e];if(Me(r,n,e,f)&&l!==it){let E=n.subarray(e,e+f|0),m=S(E);A=O|0,p=r-T|0,ke(m);return}c=qc,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ce,c=ye,u=!0;break}case qc:{if(n[e]===Oe){let{value:E}=a;y();let{declarationValue:m,statements:N,stack:P}=a;if(a.inferenceValue){let W=function(ee){let pe;switch(ee.type){case tt:{let Ne=P.get(ee.name);Ne.type===$e?pe=Ne:Ne.type===Be?(pe={type:$e,name:Ne.name,path:Ne.path},ee.mutable&&(pe.mutable=ee.mutable)):(Ne.type===Qe||Ne.type==="Link")&&(pe=Ne);let{moved:to,...Je}=pe;pe=Je;break}case Be:{pe={type:$e,name:ee.name,path:ee.path},ee.layout===Qe&&(pe.type=Qe,pe.length=ee.literal.length);break}case Ws:{pe={type:$e,name:"I32",path:Ue};break}case Lo:{pe={type:ee.type,name:ee.data.name,path:ee.data.path};break}case Xs:{pe=W(ee.value);break}case Ct:{let Ne=Je=>U.find(ut=>ut.type===st&&ut.name===Je.name)?.description.outputs[0]?.data,to=(Je,ut)=>{let We;for(let Et=0;ut&&Et<=Je.name.length-2;Et++)ut=P.get(Je.name[Et]),ut&&(We=L.find(kt=>kt.type===ge&&kt.name===ut.name));return We?.description.members?.find(Et=>Et.name===Je.name[Je.name.length-1])?.description.outputs[0]?.data};if(ee.path!==Ue){if(pe=Ne(ee),typeof ee.name=="object"){let Je=P.get(ee.name[0]);pe=to(ee,Je)}}else if(go.has(ee.name))pe={type:$e,name:"Bool",path:Ue},Ye(pe.name);else{let Je=ee.inputs.map(We=>_e(We)),ut=U.find(We=>We.description&&Array.isArray(We.description.inputs)?We.description.inputs.length!==Je.length||We.name!=ee.name?!1:We.description.inputs.every((Et,kt)=>Et.data.name===Je[kt].data.name):!1);if(ut){let{description:We}=ut,{outputs:Et}=We,kt=Et[0],{data:el}=kt,{name:tl,path:sl}=el;pe={type:$e,name:tl,path:sl}}else{A=O|0,p=r-T|0,ue(`Unable to find expression matching: ${Je.map(We=>We.data.name)}`);return}}break}case It:{pe={...W(ee.value),type:ho},ee.unsafe&&(pe.unsafe=ee.unsafe),ee.smart&&(pe.smart=ee.smart);break}case lt:{let Ne=P.get(ee.link);pe={type:$e,name:Ne.name,path:Ne.path};break}case zs:{let Ne=P.get(ee.array.name);pe={type:$e,name:Ne.name,path:Ne.path};break}default:{console.log("Unhandled: ",ee.type);break}}return pe},{inferenceValue:q}=a;q.data=W(E),q.mutable&&(q.data.mutable=q.mutable,delete q.mutable),P.set(q.name,q.data)}let{target:k}=m,V=De(k),g=De(E);if(P.has(g)){let q=L.find(W=>W.name===P.get(g).name&&W.type===ge);q&&!q.copy&&(A=O|0,p=r-T|0,wu(g))}V&&V!==nt&&(q=>{if(!P.get(q)?.mutable&&w){A=O|0,p=r-T|0,yu(q);return}})(V),m.source=E;let J=_e(k),Q=_e(E),he=(q,W)=>{if(q===W)return!0;if(typeof q!="object"||q===null||typeof W!="object"||W===null)return!1;if(q.type==="local"&&W.type==="local")return q.name===W.name;let ee=Object.keys(q).filter(Ne=>Ne!=="mutable"),pe=Object.keys(W).filter(Ne=>Ne!=="mutable");if(ee.length!==pe.length)return!1;for(let Ne of ee)if(!pe.includes(Ne)||!he(q[Ne],W[Ne]))return!1;return!0},Re=(q,W)=>q.some(ee=>he(ee,W));if(J&&Q){J.data?.mutable&&J.data.path===Ue&&J.data.type!==Qe&&(Re(ie,k)||a.procedure.description.inputs.some(W=>W.name===J.name||W.name===De(k))?m.target=Object.seal({type:Po,link:k}):Q.data.path===Ue&&Q.data.type!==Qe&&(m.source=Object.seal({type:It,value:E}),ie.push(k))),Q.data?.mutable&&Q.data.path===Ue&&Q.data.type!==Qe&&(m.source=Object.seal({type:lt,link:E}));let q=(W,ee)=>W.slice(1)===W.slice(1)||W.charAt(0)===W.charAt(0)||(W==="FP64"||W==="FP32"||W==="I64"||W==="U64"||W==="I32"||W==="U32"||W==="I16"||W==="U16"||W==="I8"||W==="U8")&&ee==="I32"||W==="FP64"&&ee=="FP32";if(J.data.name!==Q.data.name&&!(J.data.type===Q.data.name||J.data.name===Q.data.type)&&!(Q.data.type===Be&&q(J.data.name,Q.data.name))){A=O|0,p=r-T|0,Fu(J.data.name,Q.data.name);return}}N.push(m),y();return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Xf);break}case Pr:{let{stack:t,procedure:s}=a,o=Object.seal({type:af,unsafe:!0,value:null}),l=n.subarray(e,e+f|0);X(l,Fo)&&(o.unsafe=!1),M(),a=Object.seal({free:o,stack:t,procedure:s}),c=kr;break}case kr:{if(n[e]===Ie){let{stack:E,procedure:m}=a;c=Lr,M(),a={stack:E,procedure:m,value:null},M(),c=ye,I=Ce;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case Lr:{let{value:t,stack:s}=a;y();let{free:o}=a;o.value=Te(t);let l=!0,{name:E,data:m}=_e(t,l);if(A=O|0,p=r-T|0,m.type!==ho){ue(`Variable '${E}' is not a link and cannot be freed. Only 'unsafe' links are freeable.`);return}if(m.unsafe!==o.unsafe){ue(`Improper free method used for link '${E}'. Unsafe links are unsafely freed with 'free!!' while safe ones are freed with 'free'. Your link(${E}) is ${m.unsafe?"un":""}safe.`);return}let N=s.get(E);N&&s.set(E,{...N,freed:!0}),c=Rr,u=!0;break}case Rr:{if(n[e]===de){let{free:E}=a;y();let{statements:m}=a;m.push(E),c=Cr;break}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case Cr:{y();break}}},Wu=(r,n,e,f)=>{switch(c){case _t:{let t=n.subarray(e,e+f|0),s=S(t);if(Me(r,n,e,f)&&!pt.includes(s)){A=O|0,p=r-T|0,ke(s);return}if(c=vr,X(At,t)){a.data=Object.seal({type:s,unsafe:!0});return}if(X(dt,t)){a.data=Object.seal({type:s});return}if(X(rs,t)){a.data=Object.seal({type:s});return}if(X(os,t)){a.data={type:s};let l=i.length;if(i[l-1].situationGeneral===4){M();let{data:m}=a;a={isEnum:!0,type:m},u=!0,c=zn,I=yt;return}return}let o=Ye(s);if(o){o.type===ns?a.data=Object.seal({type:$e,name:s,path:o.path}):a.data=Object.seal({type:$e,name:o.name,path:o.path}),a.mutable&&(a.data=Object.seal({...a.data,type:S(dt),unsafe:!0,mutable:a.mutable}));return}console.log("Failed to find type",s),A=O|0,p=r-T|0,Qt(s),y();break}case vr:{let t=n.subarray(e,e+f|0);if(n[e]===Ze){u=!0,c=Ur;return}y(),u=!0;break}case Ur:{if(n[e]===Ze){c=Dr;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,$t);break}case Dr:{let t=n.subarray(e,e+f|0),s=S(t),o=Ye(s);if(o){let{data:E}=a,{unsafe:m,type:N,smart:P}=E,k=re(N);if(X(k,At))a.data=Object.seal({type:N.replace(/!!$/,""),name:o.name,path:o.path,segment:et,unsafe:m});else if(X(k,dt))a.data=Object.seal({type:N,name:o.name,path:o.path,segment:et});else if(X(k,cs))a.data=Object.seal({type:N,name:o.name,path:o.path,segment:et,smart:P});else{if(L.find(g=>g.type===ge&&g.name===E.name)){c=Br,M(),a=[],M(),a={data:null},M(),u=!0,c=_t;return}a.data=Object.seal({type:N,name:o.name,path:o.path})}a.mutable&&(a.data=Object.seal({...a.data,mutable:a.mutable}));return}let l=n[e];if(l===we)return;if(l===ot){u=!0,c=kn;return}a.data.segment!==void 0&&(a.data.segment=s),c=kn;break}case Br:{let t=n[e],{data:s}=a;if(y(),a.push(s),t===we){M(),a={data:null},M(),c=_t;return}if(t===ot){let m=a;y();let N=L.find(k=>k.type===ge&&k.name===a.data.name);if(!(N.description?.generics?.length===m.length)){A=O|0,p=r-T|0,ue(`Generic object '${name}' was provided with fewer or more than expect number of types. Expected: ${N.description.generics.length}. Got: ${m.length}`);return}a.data.name=He(a.data.name,m),y();return}A=O|0,p=r-T|0;let o=n.subarray(e,e+f|0),l=S(o);F(l,Mt);break}case kn:{if(n[e]===ot){y();return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Mt);break}}},Zu=(r,n,e,f)=>{switch(c){case zn:{let t=n.subarray(e,e+f|0),s=S(t),o=Object.seal({type:s,name:null,length:null,path:Ue});a=Object.seal({...a,type:o}),c=Ka;break}case Ka:{let t=n.subarray(e,e+f|0);if(n[e]===Ze){c=Ha;return}A=O|0,p=r-T|0;let s=S(t);F(s,$t);break}case Ha:{let t=n.subarray(e,e+f|0),s=S(t);if(Me(r,n,e,f)&&!pt.includes(s)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}Ye(s),a.type.name=s,c=$a;break}case $a:{let t=n.subarray(e,e+f|0);if(n[e]===ot){c=za;return}A=O|0,p=r-T|0;let s=S(t);F(s,Mt);break}case za:{let t=n.subarray(e,e+f|0);if(n[e]===Ie){c=Xa;return}A=O|0,p=r-T|0;let s=S(t);F(s,Fe);break}case Xa:{let t=n.subarray(e,e+f|0);if(X(Bo,t)){c=Ja;return}A=O|0,p=r-T|0;let s=S(t);F(s,us);break}case Ja:{let t=n.subarray(e,e+f|0);if(X(Zs,t)){c=Wa;return}A=O|0,p=r-T|0;let s=S(t);F(s,Bt);break}case Wa:{if(Me(r,n,e,f)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}let t=n.subarray(e,e+f|0),s=S(t);a.type.length=s,c=Za;break}case Za:{let t=n.subarray(e,e+f|0);if(n[e]===de){c=Qa,u=!0;return}A=O|0,p=r-T|0;let s=S(t);F(s,Ke);break}case Qa:{if(a.isEnum){let{type:P}=a;y(),a.data=P;return}let{declarationValue:t,procedure:s,stack:o}=a,{target:l}=t,{description:E}=s,{locals:m}=E,N;l.mutable?N=Object.freeze({name:l.name,data:{...a.type,mutable:l.mutable}}):N=Object.freeze({name:l.name,data:a.type}),o.set(l.name,N.data),m.push(N),y();break}case Xn:{let t=n.subarray(e,e+f|0),o={type:S(t).replace(/!!$/,""),path:Ue};X(t,At)&&(o.unsafe=!0),o=Object.seal({...o,name:null,segment:null});let{declarationValue:l,stack:E,procedure:m}=a;a=Object.seal({declarationValue:l,stack:E,procedure:m,type:o}),c=qa;break}case qa:{let t=n.subarray(e,e+f|0);if(n[e]===Ze){c=xa;return}A=O|0,p=r-T|0;let s=S(t);F(s,$t);break}case xa:{let t=n.subarray(e,e+f|0),s=S(t);if(Me(r,n,e,f)&&!pt.includes(s)){A=O|0,p=r-T|0,ke(s);return}Ye(s),a.type.name=s,c=eu;break}case eu:{let t=n.subarray(e,e+f|0);if(n[e]===we){c=tu;return}A=O|0,p=r-T|0;let s=S(t);F(s,Ke);break}case tu:{if(Me(r,n,e,f)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}let t=n.subarray(e,e+f|0),s=S(t);a.type.segment=s,c=su;break}case su:{let t=n.subarray(e,e+f|0);if(n[e]===ot){if(a.declarationValue){let{declarationValue:l,procedure:E,stack:m}=a,{target:N}=l,{description:P}=E,{locals:k}=P,V;N.mutable?V=Object.freeze({name:N.name,data:{...a.type,mutable:N.mutable}}):V=Object.freeze({name:N.name,data:a.type}),m.set(N.name,V.data),k.push(V),y()}else{let{type:l}=a;y(),a.data=l}return}A=O|0,p=r-T|0;let s=S(t);F(s,Mt);break}case nu:{let t=n.subarray(e,e+f|0),s=S(t),o=Object.seal({type:s,path:null,name:null}),{declarationValue:l,stack:E,procedure:m}=a;a=Object.seal({declarationValue:l,stack:E,procedure:m,type:o}),c=ou;break}case ou:{let t=n.subarray(e,e+f|0);if(n[e]===Ze){c=cu;return}A=O|0,p=r-T|0;let s=S(t);F(s,$t);break}case cu:{let t=n.subarray(e,e+f|0),s=S(t);if(Me(r,n,e,f)){A=O|0,p=r-T|0,ke(s);return}let o=Ye(s);a.type.name=s,a.type.path=o.path,c=ru;break}case ru:{let t=n.subarray(e,e+f|0);if(n[e]===ot){let{declarationValue:l,procedure:E,stack:m}=a,{target:N}=l,{description:P}=E,{locals:k}=P,V;N.mutable?V=Object.freeze({name:N.name,data:{...a.type,mutable:N.mutable}}):V=Object.freeze({name:N.name,data:a.type}),m.set(N.name,V.data),k.push(V),y();return}A=O|0,p=r-T|0;let s=S(t);F(s,Mt);break}}},Qu=(r,n,e,f)=>{switch(c){case ds:{let t=Object.seal({type:It,unsafe:null,smart:null,value:null}),s=n.subarray(e,e+f|0);X(s,At)&&(t.unsafe=!0),X(s,cs)&&(t.smart=!0),a.value=t,c=Ta;break}case Ta:{if(n[e]===Ie){c=Mr;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Fe);break}case Mr:{let{stack:t,procedure:s}=a,o=n.subarray(e,e+f|0),l=S(o),E=t.get(l);E&&E.moved&&(A=O|0,p=r-T|0,ue(`Moved variable used as value. Variable '${l}' was used while having been moved before.`)),c=Na,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case Na:{if(n[e]===de){let{value:l}=a;y(),a.value.value=Te(l),y();return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Fe);break}case yr:{let t=Object.seal({type:lt,link:null});a.value=t,c=Ia;break}case Ia:{if(n[e]===Ie){c=jr;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Fe);break}case jr:{let{stack:t,procedure:s}=a,o=n.subarray(e,e+f|0),l=S(o),E=t.get(l);E&&E.moved&&(A=O|0,p=r-T|0,ue(`Moved variable used as value. Variable '${l}' was used while having been moved before.`)),c=da,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case da:{if(n[e]===de){let{value:l}=a;y(),a.value.link=Te(l),y();return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Ke);break}case Jr:{let t=Object.seal({type:$s,trail:[]});a.value=t,c=Mn;break}case Mn:{if(n[e]===xe){c=Wr;return}c=yn,u=!0;break}case Wr:{let t=n.subarray(e,e+f|0),s=S(t);a.value.trail.push(s),c=Zr;break}case Zr:{if(n[e]===xe){c=Mn,u=!0;return}c=yn,u=!0;break}case yn:{y(),u=!0;break}case gr:{let t=n.subarray(e,e+f|0),s=S(t),o=L.find(P=>P.name===s);if(!o){A=O|0,p=r-T|0,Qt(s);return}let{description:l}=o,{members:E}=l,m=E.some(P=>P.name==="constructor"&&P.type===st),N=Object.seal({type:Be,explicitConstructor:m,name:s,literal:[],path:o.path});a.value=N,c=ia;break}case ia:{let t=n[e];if(t===Ie){c=Cn,u=!0;return}if(t===Ze){c=fa;return}break}case fa:{M(),a=[],c=Ea,u=!0;break}case Ea:{c=_a,M(),a={data:null},M(),I=St,c=_t,u=!0;break}case _a:{let t=n[e],{data:s}=a;if(y(),a.push(s),t===we){c=Ps;return}if(t===ot){let o=a;y();let{value:l}=a,{name:E}=l,m=L.find(N=>N.type===ge&&N.name===E);if(m){if(!(m.description.generics.length===o.length)){A=O|0,p=r-T|0,ue(`Generic procedure '${E}' was provided with fewer or more than expect number of types. Expected: ${genericProcedure.description.generics.length}. Got: ${o.length}`);return}let P=He(m.name,o);if(!L.some(k=>k.name===P)){let k=ct(m,o);k.name=P,k.description.generics=[],L.push(k)}l.name=P}c=Cn;break}}case Cn:{let{value:t}=a,{explicitConstructor:s,...o}=t;if(t=Object.seal(o),n[e]===Ie){if(s){c=Sa;return}c=vn;return}A=O|0,p=r-T|0;let E=n.subarray(e,e+f|0),m=S(E);F(m,Fe);break}case vn:{if(n[e]===Oe)return;if(n[e]===we){c=Un;return}c=Un,u=!0;break}case Un:{let t=n.subarray(e,e+f|0),s=S(t),{stack:o,procedure:l}=a;M();let E=Object.seal({name:s,value:null});a={procedure:l,stack:o,prop:E},c=Gr;break}case Gr:{let{stack:t,procedure:s}=a;if(n[e]===Qs){c=Vr,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce;return}A=O|0,p=r-T|0;let l=n.subarray(e,e+f|0),E=S(l);F(E,Bt);break}case Vr:{let{value:t}=a;y();let{prop:s}=a;if(s.value=Te(t),y(),a.value.literal.push(s),n[e]===we){c=vn;return}u=!0,c=Kr;break}case Kr:{if(n[e]===Oe){c=Dn;return}u=!0,c=Dn;break}case Dn:{let t=n[e];if(A=O|0,p=r-T|0,t===de){let{value:E}=a,{literal:m}=E,N=L.find(k=>k.name===E.name&&k.type===ge),P=N.description.members.filter(k=>k.type!==st);if(m.length!==P.length){let k=n.subarray(e,e+f|0),V=S(k);ue(`Incorrect number of parameters for Object ${N.name}. Expected ${P.length} parameters but received ${m.length}. Please ensure you provide the correct number of parameters.`);return}for(let k of m){let V=_e(k.value),g=m.indexOf(k),G=P.find(J=>J.name===k.name);G||ue(`Invalid member name. Name ${k.name} does not exist on object ${N.name}`),V.data.type!==Be&&V.data.name!==G.data.name&&ue(`Type mismatch in input for Object ${N.name}. At index ${g}, expected ${G.data.name} but received ${V.data.name}.`)}y();return}let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case Sa:{let l=function(m){let N=m.data.name,P=L.find(k=>k.name===N);if(P.type===ge){let k=[],{members:V}=P.description;for(let g of V)g.data&&k.push({name:g.name,value:l(g)});return{type:Be,name:N,literal:k,path:m.data.path}}else if(m.data.type===Qe){let k=parseInt(m.data.length,10);return{type:Be,literal:Array(k).fill(au),name:N,layout:Qe,path:m.data.path}}else if(m.data.type===Kt){let k=parseInt(m.data.length,10);return{type:Be,literal:Array(k).fill(et),name:N,path:m.data.path}}else return{type:Be,literal:au,name:N,path:m.data.path}},{value:t}=a,{literal:s,name:o}=t,E=L.find(m=>m.name===o);if(E){let{description:m}=E,{members:N}=m;for(let Re of N)Re.data&&s.push({name:Re.name,value:l(Re)});y(),y();let{stack:P,procedure:k,statements:V,declarationValue:g,inferenceValue:G}=a,{target:J}=g;G&&(G.data={type:$e,name:o,path:E.path},G.mutable&&(G.data.mutable=G.mutable),a.stack.set(J.name,G.data)),g.source=t,V.push(g),M();let Q=Object.seal({type:Ct,name:[J.name,Js],path:E.path,inputs:[]}),he=Object.seal({type:ko,expression:Q});a={stack:P,procedure:k,drop:he,value:Q},c=Gn,I=ve,u=!0;return}break}case Gn:{let{stack:t,procedure:s}=a;if(n[e]===de){c=Vn,u=!0;return}c=ha,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case ha:{let{value:t}=a;y();let{value:s,stack:o,procedure:l}=a,{inputs:E}=s;E.push(Te(t));let m=n[e];if(m===de){c=Vn,u=!0;return}if(m===we){c=Gn;return}A=O|0,p=r-T|0;let N=n.subarray(e,e+f|0),P=S(N);F(P,sn);break}case Vn:{let{value:t,stack:s,drop:o}=a,l=s.get(t.name[0]);if(l){let P=L.find(G=>G.name===l.name),k=P.description.members.find(G=>G.name===Js),V=t.inputs.filter(G=>G.type===Be);for(let G of V){let J=t.inputs.indexOf(G);J>=0&&t.inputs[J]&&(t.inputs[J]={...t.inputs[J],name:k.description.inputs[J]?.data?.name||G.name,path:k.description.inputs[J]?.data?.path||G.path})}let g=t.inputs.map(G=>_e(G))||[];if(k.description.inputs.length!==g.length){A=O|0,p=r-T|0,ue(`Mismatching number of parameters passed to constructor of object '${P.name}'. Expected: ${k.description.inputs.length}, Got: ${g.length}`);return}for(let G of k.description.inputs){let J=k.description.inputs.indexOf(G);if(G.data.name!==g[J].data.name){A=O|0,p=r-T|0,ue(`Input type mismatch on index '${J+1}'. '${P.name}' expected ${G.data.name}, but was provided with a rather ${g[J].data.name}`);return}}}if(n[e]===de){c=Pa;return}A=O|0,p=r-T|0;let E=n.subarray(e,e+f|0),m=S(E);F(m,Ke);break}case Pa:{if(n[e]===Oe){let{drop:E}=a;y();let{statements:m}=a;m.push(E),y();return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Dt);break}case wr:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(t.has(o)){let P=t.get(o);if(P&&(P.moved&&(A=O|0,p=r-T|0,ue(`Moved variable used as value. Variable '${o}' was used while having been moved before.`)),P.freed)){A=O|0,p=r-T|0,ue(`Attempted to use '${o}', which has been freed. Ensure links are valid before use.`);return}let k=Object.freeze({type:tt,name:o});a.value=k,c=Pt;return}let l=P=>{let k=i[P];if(k.item.target){let V=k.item.target,g=m.item.stack.get(V.name);if(g)return g.name}else return k.item.value?.type==="expression"?l(P-1):null},E=i.length,m=i[E-2],N;if(m.item.target){let P=m.item.target;if(P.name||P.trail?.length===1){let k=m.item.stack.get(P.name||P.trail[0]);k&&(N=P.name?k.name:k.data?.name)}if(P.trail?.length>1){let k=JSON.parse(JSON.stringify(P.trail)),V=m.item.stack.get(P.trail[0]),g=L.find(J=>J.name===V.data.name&&J.path===V.data.path),G=1;for(let J=1;J<k.length;J++)V=g.description.members.find(Q=>Q.name===k[J]),J<k.length-1&&(g=L.find(Q=>Q.name===V.data.name&&Q.path===V.data.path));N=V.data.name}}else m.item.value?.type==="expression"&&(N=l(E-4));if(Gs(r,n,e,f)){let P=o,k=je(P),V=Object.freeze({type:Be,literal:P,name:N||k,path:Ue});if(!k){A=O|0,p=r-T|0;let g=n.subarray(e,e+f|0),G=S(g);F(G,on)}Ye(V.name),a.value=V,c=Pt;return}if(iu(o)){let P=Object.freeze({type:Be,literal:o,name:"Bool",path:Ue});a.value=P,Ye(P.name),c=Pt;return}if(n[e]===qs){c=ga,u=!0;return}if(n[e]===hf){if(Ls){if(Ls=!1,c=Pt,a.value.literal.length>1){A=O|0,p=r-T|0,ue("Type Mismatch: Use single quotes for a Char (one character) in Flogram. For Strings, use double quotes or ensure there's only one character within single quotes.");return}}else Ls=!0;return}if(Ls){let P=Object.freeze({type:Be,literal:o,name:N||"Char",path:Ue});Ye(P.name),a.value=P;return}if(n[e]===it){c=Bn,u=!0;return}A=O|0,p=r-T|0,Qt(o),y();break}case ga:{if(n[e]==qs){c=Ga;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case Ga:{let t=n.subarray(e,e+f|0),s=S(t),o=Object.freeze({type:Be,literal:s,name:Kt,path:Ue});Ye(o.name),a.value=o,c=Hn;break}case Zf:{if(n[e]===qs){c=Hn;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,Fe);break}case Hn:{let{value:t,procedure:s,stack:o}=a,l=t.literal.match(/{(.*?)}/g);if(console.log(n[e],f),console.log(n),!l){y();return}let E=l.map(N=>N.slice(1,-1)),m=[];M(),a=Object.seal({procedure:s,stack:o,value:t,values:E,populatedValues:m}),c=$n,u=!0;break}case $n:{console.log("Entering VALUE_STRING_SUB case");let{values:t,procedure:s,stack:o}=a,l=E=>{console.log("come in here!!!!");let m=!0,N=null,P=null,k=new v({tabSize:4});k.on("token",(g,G,J,Q)=>{oe(g,G,J,Q)}),k.on("error",()=>{m=!1});let V=re(E);if(k.feed(V),k.done(),k.close(),!m){console.error("Tokenizer or Parser error occurred.",P);return}};if(t.length>0){let E=t.shift();l(E),c=Va,M(),a=Object.seal({procedure:s,stack:o,value:null}),M(),I=Ce,c=ye,u=!0,fe();return}break}case Va:{console.log(n[e],f),console.log("IT NEVER COME HERERE!!!!");let{value:t}=a;y();let{populatedValues:s}=a;if(s.push(t),console.log(a.values),a.values.length>0){c=$n,u=!0;return}console.log(s),y(),y(),console.log(a),console.log(c),console.log(I),console.log(n[e],f),console.log(n),u=!0;break}case Kn:{M(),c=La,a={data:null},M(),I=St,c=_t,u=!0;break}case La:{let t=n[e],{data:s}=a;y();let{stack:o,procedure:l}=a,E=Object.seal({type:Be,literal:[],name:s.name,length:null,layout:s.type,path:s.path});if(M(),a={stack:o,procedure:l,value:E},t===Ie){c=Ra;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Fe);break}case Ra:{let t=n.subarray(e,e+f|0);if(X(Bo,t)){c=Ca;return}A=O|0,p=r-T|0;let s=S(t);F(s,us);break}case Ca:{let t=n.subarray(e,e+f|0);if(X(Zs,t)){c=va;return}A=O|0,p=r-T|0;let s=S(t);F(s,Bt);break}case va:{if(Me(r,n,e,f)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}let t=n.subarray(e,e+f|0),s=S(t);a.value.length=s,c=Da;break}case Da:{let t=n[e];if(t===we){let{stack:E,procedure:m}=a,N=[];M(),a={stack:E,procedure:m,value:N},c=Ba;return}if(t===de){let{value:E}=a;y(),a.value=E,c=Pt;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ke);break}case Ba:{if(n[e]===it){c=Ma;return}A=O|0,p=r-T|0;let t=n.subarray(e,e+f|0),s=S(t);F(s,nn);break}case Ma:{if(c=Ua,n[e]===as)return;u=!0;break}case Ua:{let t=n.subarray(e,e+f|0);if(n[e]===de){let{value:s}=a;y();let{value:o}=a;y(),o.literal=s,a.value=o,y();return}M(),c=ks,u=!0;break}case Bn:{let t=n.subarray(e,e+f|0),s=S(t);if(n[e]===it){a.value=[],c=Pt,M(),c=ks;return}break}case ks:{let{stack:t,procedure:s}=a;c=ka,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case ka:{let t=n[e],{value:s}=a;if(y(),a.value.push(s),t===we){c=ks;return}if(t===as){let o=i.length,l=i[o-3],E=l.item.declarationValue?.target,m=l.item.stack.get(E?.name);if(l.situationSection!==Kn){let N;if(!m){if(a.value?.length>=1)if(N=_e(a.value[0]),N)for(let k=1;k<a.value.length;k++){let V=_e(a.value[k]);if(V.data.name!==N.data.name||V.data.path!==N.data.path){A=O|0,p=r-T|0,ue(`Type mismatch in array initialization. Expected all items to be of type ${N.data.name} from ${N.data.path}, but found type ${V.data.name} from ${V.data.path} at position ${k}. Ensure all items in the array have the same type.`);return}}else{A=O|0,p=r-T|0;let k=n.subarray(e,e+f|0),V=S(k);F(V,on);return}else N={data:{name:"FP32",path:"Flogram"}};Ye(N.data.name)}let P=Object.freeze({type:Be,literal:a.value,name:m?.name||N.data.name,layout:Qe,path:m?.name?Ue:N.data.path});a.value=P}y();return}break}case Pt:{if(n[e]===xe){let{stack:s,value:o}=a,l=[],E=Object.freeze({type:Hs,value:o,trail:l});a.value=E,M(),a=Object.seal({stack:s,trail:l,value:o}),c=Ln;return}y(),u=!0;break}case Fr:{if(n[e]!==xe){let s=n.subarray(e,e+f|0),o=S(s);y(),y(),u=!0;return}c=Ln;break}case Ln:{let{stack:t,value:s,trail:o}=a,l=n.subarray(e,e+f|0),E=S(l),m,N,P=!1;if(s.type===tt||s.type===lt||s.type===It||Nt(s)){let k=De(s);if(o.length===0)m=t.get(k);else{let V=o.length-1,g=t.get(k),G=L.find(q=>q.name===g.name),{description:J}=G,{members:Q}=J,he=Q.find(q=>q.name===o[V]),{data:Re}=he;if(m=Re,Re.freed){A=O|0,p=r-T|0,ue(`Attempted to use '${o.join(".")}', which has been freed. Ensure links are valid before use.`);return}}}if(m){let{name:k,path:V}=m,g=`${V}.${k}`,G=se.get(g);G.type===ge&&(N=G)}if(N){let{description:k}=N,{members:V}=k;for(let g of V)if(g.name===E){P=!0;break}if(!P){A=O|0,p=r-T|0,ft(E,s.name);return}}if(s.value===nt||s.link===nt){if(!t.get(E)){A=O|0,p=r-T|0,ft(E,`${nt}(current object in definition)`);return}P=!0}if(!P){A=O|0,p=r-T|0,ft(E,s.name);return}o.push(E),c=Fr;break}case Hr:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s);if(t.has(o)){let l=Object.seal({type:zs,array:{type:tt,name:o},index:null});a.value=l}c=$r;break}case $r:{if(n[e]===it){c=zr;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,nn);break}case zr:{let{stack:t,procedure:s}=a;c=Xr,M(),a={stack:t,procedure:s,value:null},M(),c=ye,I=Ce,u=!0;break}case Xr:{if(n[e]===as){let{value:E}=a;y();let m=_e(E);if(m.data.mutable?a.value.index=Object.seal({type:lt,link:E}):a.value.index=E,!m||!["I32","U32","I16","U16","U8","I8"].includes(m.data.name)){A=O|0,p=r-T|0,ue("Invalid index. Array index should be a valid I32 variable");return}y();return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Vo);break}case Ss:{let{stack:t}=a,s=n.subarray(e,e+f|0),o=S(s),l=U.find(m=>m.type===st&&m.name===o),E=Object.seal({type:Ct,name:o,path:l?.path||Ue,inputs:[]});if(a.value=E,t.has(o)){a.value.name=[o],c=Qr;return}c=gn;break}case Qr:{let t=n.subarray(e,e+f|0),s=S(t),o=n[e];if(o===xe)return;if(o===Ie){c=gn,u=!0;return}if(Me(r,n,e,f)){A=O|0,p=r-T|0,ke(s);return}a.value.name.push(s);break}case gn:{let t=n[e];if(t===Ie){c=Rn,u=!0;return}if(t===Ze){c=ua;return}break}case Rn:{if(n[e]===Ie){c=hs;return}break}case ua:{M(),a=[],c=Ps,u=!0;break}case Ps:{c=la,M(),a={data:null},M(),I=St,c=_t,u=!0;break}case la:{let t=n[e],{data:s}=a;if(y(),a.push(s),t===we){c=Ps;return}if(t===ot){let o=a;y();let{value:l}=a,{name:E}=l,m=U.find(N=>N.type===st&&N.name===E);if(m){if(!(m.description.generics.length===o.length)){A=O|0,p=r-T|0,ue(`Generic procedure '${E}' was provided with fewer or more than expect number of types. Expected: ${m.description.generics.length}. Got: ${o.length}`);return}let P=He(m.name,o);if(!U.some(k=>k.name===P)){let k=ct(m,o);k.name=P,k.description.generics=[],U.push(k)}l.name=P}c=Rn;break}}case hs:{let t=n[e];if(t===Oe)return;if(t===de){let l=a.value?.inputs?.map(g=>_e(g))||[],[E,...m]=l,{value:N}=a,{name:P}=N,k=qt[P],V=(g,G,J,Q)=>{for(let he in g.description?.members){let Re=[g.description.members[he].data.name,...G.map(q=>q.description.members[he].data.name)];if(Re.some(q=>!pt.includes(q))){let q=Re.map(W=>L.find(ee=>ee.name===W));q.every(Boolean)&&V(g,q,J,Q)}else{let q=J.find(W=>W.description&&Array.isArray(W.description.inputs)?W.description.inputs.length!==Re.length?!1:W.description.inputs.every((ee,pe)=>ee.data.name===Re[pe]):!1);if(q)U.push(q),z.set(Q,q);else{A=O|0,p=r-T|0,gt(`${Re.join(", ")} in ${Q}`);return}}}};if(k){let g=k.find(G=>G.description&&Array.isArray(G.description.inputs)?G.description.inputs.length!==l.length?!1:G.description.inputs.every((J,Q)=>J.data.name===l[Q].data.name):!1);if(g)U.push(g),z.set(P,g);else if(l.length>=1){if(l.some(G=>G.data.name!==E.data.name)){A=O|0,p=r-T|0,Yu(l.map(G=>G.data?.name)?.join(", "));return}if(l[0]?.data.type===ns){let G=k.find(Q=>Q.description.inputs.length===l.length&&l.length>0?Q.description.inputs[0].data.name===uu:!0),J=JSON.parse(JSON.stringify(G).replace(new RegExp(uu,"g"),l[0].data.name));U.push(J),z.set(P,J)}else if(!pt.includes(E.data.name)||m.some(G=>!pt.includes(G.data.name))){let G=L.find(Q=>Q.name===E.data.name),J=m.map(Q=>L.find(he=>he.name===Q.data.name));G&&J.every(Boolean)&&V(G,J,k,P)}else{A=O|0,p=r-T|0,gt(`${E.data.name,m.map(G=>G.data.name)?.join(", ")} in ${P}`);return}}else{A=O|0,p=r-T|0,gt(`${l.map(G=>G.data.name)?.join(", ")} in ${P}`);return}}else if(P!==uf){let g,G=U.find(Q=>Q.type===st&&Q.name===P);if(typeof P=="object"&&a.stack.has(P[0])){let Q=P[P.length-2]||P[0],he=a.stack.get(Q);if(he){let Re=L.find(q=>q.type===ge&&q.name===he.name);Re&&(a.value.path=Re.path,g=Re.description.members.find(q=>q.type===st&&q.name===P[P.length-1]))}}let J=g||G;if(J){let{description:Q}=J,{inputs:he}=Q,{value:Re}=a,{inputs:q}=Re;if(he.length!==q.length){A=O|0,p=r-T|0,ue(`Procedure '${P}' was provided with fewer or more than expect number of inputs. Please make sure you are passing the right number of inputs to the procedure.`);return}for(let W=0;W<he.length;W++){let ee=_e(q[W]);if(ee){if(he[W].data.name!==ee.data.name){A=O|0,p=r-T|0,ue(`The procedure '${typeof P=="object"?P.join("."):P}' received an input of incorrect type at position ${W+1}. Expected: '${he[W].data.name}', but received: '${ee.data.name}'.`);return}if(he[W].data.mutable&&!ee.data.mutable){A=O|0,p=r-T|0,ue(`The procedure '${typeof P=="object"?P.join("."):P}' received an immutable input at position ${W+1} while it expects a mutable input. Expected: mutable '${he[W].data.name}', received: immutable '${ee.data.name}'.`);return}he[W].data.mutable&&ee.data.mutable}else{A=O|0,p=r-T|0,gt(q[W]);return}}}else{A=O|0,p=r-T|0,eo(P);return}}y();return}if(Me(r,n,e,f)&&n[e]!=it){let l=n.subarray(e,e+f|0),E=S(l);A=O|0,p=r-T|0,ke(E);return}let{procedure:s,stack:o}=a;c=Yr,M(),a=Object.seal({procedure:s,stack:o,value:null}),M(),I=Ce,c=ye,u=!0;break}case Yr:{let{value:t}=a;y();let{value:s}=a,{inputs:o}=s;s.path!==Ue?o.push(t):o.push(Te(t));let l=n[e];if(l===we){c=hs;return}if(l===de){c=hs,u=!0;return}A=O|0,p=r-T|0;let E=n.subarray(e,e+f|0),m=S(E);F(m,Ke);break}case jn:{let t=n.subarray(e,e+f|0),s=S(t),o=L.find(E=>E.type===Rt&&E.name===s);if(o){let E=Object.seal({type:"literal",literal:null,name:o.name,path:o.path});a.value=E,c=qr;return}let l=L.find(E=>E.type===Rt&&E.description.labels.find(m=>m.name===s));if(l){let E=Object.freeze({type:"literal",literal:s,name:l.name,path:l.path});a.value=E,y();return}A=O|0,p=r-T|0,ft(s);break}case qr:{if(n[e]===xe){c=xr;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ko);break}case xr:{let t=n.subarray(e,e+f|0),s=S(t);if(L.find(l=>l.type===Rt&&l.name===a.value.name&&l.description.labels.find(E=>E.name===s))){a.value.literal=s,y();return}A=O|0,p=r-T|0,ft(s);break}case ea:{let t=Object.seal({type:Lo,layout:null,data:null,value:null});a.value=t,c=ta;break}case ta:{if(n[e]===Ze){c=sa;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,$t);break}case sa:{let t=n.subarray(e,e+f|0),s=S(t);if(Me(r,n,e,f)){A=O|0,p=r-T|0,ke(s);return}if(X(os,t)){c=Fn,M(),a={...a,data:null},M(),I=St,c=_t,u=!0;return}if(X(t,At)||X(t,dt)){c=Fn,M(),a={...a,data:null},M(),I=yt,c=Xn,u=!0;return}if(X(t,rs)){A=O|0,p=r-T|0;let l=n.subarray(e,e+f|0),E=S(l);F(E,us);return}let o=Ye(s);o&&(a.value.data=o),c=wn;break}case Fn:{let{data:t}=a;y(),a.value.data=t,u=!0,c=wn;break}case wn:{if(n[e]===ot){c=na;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Mt);break}case na:{if(n[e]===xe){c=oa;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Ko);break}case oa:{let t=n.subarray(e,e+f|0),s=S(t);if(a.value.layout=s,X(t,Nf)){c=Yn;return}if(X(t,If)){c=ca;return}A=O|0,p=r-T|0;let o=S(t);F(o,us);break}case ca:{if(n[e]===Ie){c=ra;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case ra:{let{procedure:t,stack:s}=a;if(Me(r,n,e,f)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}c=aa,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ce,c=ye,u=!0;break}case aa:{let{value:t}=a;if(y(),a.value.value=Te(t),n[e]===de){c=Yn;return}A=O|0,p=r-T|0;let o=n.subarray(e,e+f|0),l=S(o);F(l,Ke);break}case Yn:{y(),u=!0;break}case ma:{let t=Object.seal({type:Xs,value:null});a.value=t,c=pa;break}case pa:{if(n[e]===Ie){c=ba;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case ba:{let{procedure:t,stack:s}=a;if(Me(r,n,e,f)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}c=Aa,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ce,c=ye,u=!0;break}case Aa:{let{stack:t,value:s}=a;y();let o;if(s.type===tt)o=s.name;else if(s.type===lt)o=s.link;else if(s.type===It)o=s.value;else{A=O|0,p=r-T|0,ue("Non-movable type passed to move procedure. Please check types that can be moved and make sure your parameter's type is one of them.");return}let l=t.get(o);if(l&&t.set(o,{...l,moved:!0}),a.value.value=Te(s),n[e]===de){c=Oa;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Ke);break}case Oa:{y(),u=!0;break}case ya:{let t=Object.seal({type:Ws,value:null});a.value=t,c=ja;break}case ja:{if(n[e]===Ie){c=wa;return}A=O|0,p=r-T|0;let s=n.subarray(e,e+f|0),o=S(s);F(o,Fe);break}case wa:{let{procedure:t,stack:s}=a;if(Me(r,n,e,f)){let o=n.subarray(e,e+f|0),l=S(o);A=O|0,p=r-T|0,ke(l);return}c=Fa,M(),a=Object.seal({procedure:t,stack:s,value:null}),M(),I=Ce,c=ye,u=!0;break}case Fa:{let{stack:t,value:s}=a;y();let o,l=_e(s);if(l.data.name===Kt||l.data.name===Qe||l.data.layout===Kt||l.data.layout===Qe||l.data.type===Kt||l.data.type===Qe||(console.log(l),A=O|0,p=r-T|0,ue(`Provided type '${l.data.name}' cannot be used here as it's neither a string nor an array.`)),a.value.value=s,n[e]===de){c=Ya;return}A=O|0,p=r-T|0;let m=n.subarray(e,e+f|0),N=S(m);F(N,Ke);break}case Ya:{y(),u=!0;break}}},qu=(r,n,e,f)=>{switch(c){case Dc:{let t=Object.seal({type:et,path:[]}),s=Object.seal({type:sf,source:t,alias:et});a=Object.seal({import:s,source:t}),c=Bc;break}case Bc:{let t=n[e],{source:s}=a;if(t===Pf&&n[e+1]===xs){s.type=tt,c=Mc,M(),a=[],M(),c=En;return}if(Me(r,n,e,f)){A=O|0,p=r-T|0,ke(name);return}s.type=nf,c=Wf,u=!0;break}case Mc:{let t=n[e],s=a;y();let{source:o}=a;o.path.push(s.join("")),t===xs&&(M(),a=[],M(),c=En),t===Oe&&(c=yc,u=!0);break}case En:{let t=n[e];if(t===xs){y(),u=!0;return}if(t===Oe){y(),u=!0;return}let s=n.subarray(e,e+f|0),o=S(s);a.push(o);return}case yc:{let t=s=>{let o=!0,l=null,E=null,m=Du(R);m.on(Yt,g=>{l=g}),m.on(Le,g=>{E=g});let N=new v({tabSize:4});if(N.on("token",(g,G,J,Q)=>{m.feed(g,G,J,Q)}),N.on("error",()=>{o=!1}),N.feed(s),N.done(),N.close(),m.done(),!o||E){console.error("Tokenizer or Parser error occurred.",E);return}if(!l){console.error("Invalid representation after parsing.");return}let{exports:P,data:k}=l;for(let g of P){let G=l[g.path]?.find(J=>J.name===g.name);G&&(g.path===Jn&&(L.push(G),Z({name:G.name,path:G.path,type:$e})),g.path===lu&&U.push(G))}let V=k.filter(g=>g.type===cf);L.unshift(...V)};if(D&&D.length>0){let s=D.find(o=>o.path===a.source.path.join("/"));if(s){let o=re(s.data);t(o)}else A=O|0,p=r-T|0,ue("NO FILES WERE FOUND: ",a.source.path)}else A=O|0,p=r-T|0,ue("NO FILES WERE FOUND: ",a.source.path);y();break}}},xu=(r,n)=>{switch(r){case Yt:{_.push(n);break}case Le:{d.push(n);break}}},M=()=>{let r=Object.freeze({item:a,indentation:Ee,situationGeneral:I,situationSection:c});i.push(r)},y=()=>{let r=i.pop();return a=r.item,Ee=r.indentation,I=r.situationGeneral,c=r.situationSection,r},Gt=(r,n,e,f)=>{if(h)return;let t=()=>{j=!0,T=r|0,O=O+1};ae=r+f|0;let s=n[e];if(s!==Sf){if(s===Oe&&j){t();return}for(j=!1,u=!0;u;)switch(u=!1,I){case Ce:{gu(r,n,e,f);break}case Ho:{Gu(r,n,e,f);break}case zt:{Ku(r,n,e,f);break}case Xt:{Vu(r,n,e,f);break}case $o:{Hu(r,n,e,f);break}case cn:{zu(r,n,e,f);break}case zo:{Xu(r,n,e,f);break}case Xo:{$u(r,n,e,f);break}case ze:{Ju(r,n,e,f);break}case St:{Wu(r,n,e,f);break}case ve:{Qu(r,n,e,f);break}case yt:{Zu(r,n,e,f);break}case Jo:{qu(r,n,e,f);break}default:throw tn}s===Oe&&(Eu.default.diff(a,le)&&t(),le=JSON.parse(JSON.stringify(a)))}};return Object.freeze({done:()=>{if(Gt(ae,vt,0,vt.length),ae=ae+vt.length|0,Gt(ae,Ut,0,Ut.length),ae=ae+Ut.length|0,Gt(ae,vt,0,vt.length),ae=ae+vt.length|0,C){me.emit(Yt,null);return}me.emit(Yt,x)},feed:Gt,on:xu})},Qf=Object.freeze({create:Du,...kf,...Uf,...Jf}),PE=Qf;export{PE as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
