var eo="as",to="=",so="break",no="else",oo="enum",co="export",ao="if",ro="import",io="->",po="is",lo="loop",uo="mut",fo="native",Eo="object",ho="fn",bo="return",Oo="self",_o="template",mo=Object.freeze({ALIAS:eo,ASSIGN:to,BREAK:so,ELSE:no,ENUMERATION:oo,EXPORT:co,IF:ao,IMPORT:ro,INTO:io,IS:po,LOOP:lo,MUTABLE:uo,NATIVE:fo,OBJECT:Eo,PROCEDURE:ho,RETURN:bo,SELF:Oo,TEMPLATE:_o}),ln=mo;var go="assign",xo="array_assignment",To="branch-match",yo="branch-default",Io="condition",zo="loop",No="data",jo="generics",Po="enumeration",Ao="expression",Ro="instance",Co="Link",So="local",Do="object",Fo="procedure",ko="return",Uo="select",Lo="member",vo="store",Vo="break",Yo="literal",wo="array_access",Bo="valueLink",Mo="linkValue",Ko="self",Go="procedure-call",Ho="Maybe",Xo="native",$o="move",Jo="String",Wo="Array",Zo="import",qo="library",Qo="constructor",ec="destructor",tc="free",sc="block-end",nc="default-block",oc="continue",cc="branch",ac="statement",rc="draw",ic="size",pc="concatenation",lc="foreach",uc="while",fc="while-condition",Ec="foreach-condition",hc="foreach-end",bc="I32",Oc=Object.freeze({TYPES_ASSIGN:go,TYPES_ARRAY:Wo,TYPES_ARRAY_ASSIGNMENT:xo,TYPES_BRANCH_MATCH:To,TYPES_BRANCH_DEFAULT:yo,TYPES_CONDITION:Io,TYPES_LOOP:zo,TYPES_FOREACH_END:hc,TYPES_WHILE_CONDITION:fc,TYPES_FOREACH_CONDITION:Ec,TYPES_DATA:No,TYPES_GENERICS:jo,TYPES_ENUMERATION:Po,TYPES_EXPRESSION:Ao,TYPES_INSTANCE:Ro,TYPES_LINK:Co,TYPES_IMPORT:Zo,TYPES_LOCAL:So,TYPES_OBJECT:Do,TYPES_PROCEDURE:Fo,TYPES_RETURN:ko,TYPES_SELECT:Uo,TYPES_MEMBER:Lo,TYPES_STORE:vo,TYPES_BREAK:Vo,TYPES_LITERAL:Yo,TYPES_ARRAY_ACCESS:wo,TYPES_LINK_TO:Bo,TYPES_VALUE_AT:Mo,TYPES_SELF:Ko,TYPES_LIBRARY:qo,TYPES_DROP:Go,TYPES_MAYBE:Ho,TYPES_NATIVE:Xo,TYPES_MOVE:$o,TYPES_STRING:Jo,TYPES_CONSTRUCTOR:Qo,TYPES_FREE:tc,TYPES_DEFAULT_BLOCK:nc,TYPES_BLOCK_END:sc,TYPES_CONTINUE:oc,TYPES_BRANCH:cc,TYPES_STATEMENT:ac,TYPES_DESTRUCTOR:ec,TYPES_DRAW:rc,TYPES_SIZE:ic,TYPES_CONCAT:pc,TYPES_FOREACH:lc,TYPES_WHILE:uc,TYPES_I32:bc}),ds=Oc;var _c=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),un=_c;var dc=Object.freeze([]),mc=Object.freeze({}),gc="",xc="	",Tc=`
`,yc="UTF-8",Mt=ds,Ic=Object.freeze({EMPTY_ARRAY:dc,EMPTY_OBJECT:mc,EMPTY_STRING:gc,HORIZONTAL_TAB:xc,LINE_BREAK:Tc,UNICODE_TEXT:yc,Codes:un,Keys:ln,Types:ds}),fn=Ic;var{EMPTY_STRING:zc,UNICODE_TEXT:Ts}=fn,Nc=44,jc=48,Pc=57,Ac=46,Rc=45,Cc=43,Sc=65,Dc=90,Fc=-1,kc=1,Uc=new TextDecoder(Ts),Lc=new TextEncoder,vc=(s,t,c=0,E=s.length|0,N=0,e=t.length|0)=>{for(N=N|0,c=c|0,e=e|0,E=E|0;;){let v=c>=E,G=N>=e;if(v||G)break;let Re=s[c],me=t[N];if(c=c+1|0,N=N+1|0,Re<me)return Fc;if(Re>me)return kc}return 0},Vc=(s,t,c=0,E=s.length|0,N=0,e=t.length|0)=>{for(N=N|0,c=c|0,e=e|0,E=E|0;;){let v=N>=e,G=c>=E;if(v||G)break;t[N]=s[c],N=N+1|0,c=c+1|0}},Yc=(s,t,c=0,E=s.length|0,N=0,e=t.length|0)=>{c=c|0,N=N|0,E=E|0,e=e|0;let v=E-c|0,G=e-N|0;if(v!==G)return!1;for(;;){let de=c>=E,Re=N>=e;if(de||Re)break;let Qe=s[c],$e=t[N];if(c=c+1|0,N=N+1|0,Qe!==$e)return!1}return!0},wc=s=>{s=s>>>0;let t=0,c=0;for(;c=(c<<1|1)>>>0,!(c>s);)t=t+1|0;return t},bn=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),xs=(s,t,c,E)=>{for(s=s>>>0,E=E??t.length|0,c=c|0,E=E|0;s>0&&E>c;)E=E-1|0,t[E]=bn[s&15],s=s>>>4},Bc=(s,t,c,E)=>{let N=c|0,e=c+E|0;if(E===0)return!1;let v=t[N];for((v===Cc||v===Rc)&&(N=N+1|0);N<e;){let G=t[N];if(N=N+1|0,!(jc<=G&&G<=Pc||(Ac===G||Nc===G)))return!1}return!0},Mc=s=>{let t=s>=Sc,c=s<=Dc;return t&&c},Gt=128,Ht=127,On=-1,Ot=64,ys=s=>{s=s|0;let t=[];for(;;){let c=s&Ht;s=s>>7;let E=s===0,N=(c&Ot)===0,e=E&&N,v=s===-1,G=(c&Ot)!==0;if(e||v&&G){t.push(c);break}c=c|Gt,t.push(c)}return t},Kc=s=>{let t=[],c=!0;for(;c;){let E=s&Ht;s>>=7,s===0&&!(E&Ot)||s===-1&&E&Ot?c=!1:E|=Gt,t.push(E)}return t},_n=(s,t)=>{t=t|0;let c=0,E=0;for(;;){let N=s[t]|0;t=t+1|0;let e=(N&Ht)<<E;if(E=E+7|0,c=c|e,(N&Gt)===0){let G=(N&Ot)!==0,de=E<32;if(G&&de){let me=On<<E;c=c|me}break}}return c},Gc=(s,t)=>{t=t|0;let c=0,E=0;for(;;){let N=s[t]|0;t=t+1|0;let e=(N&Ht)<<E;if(E=E+7|0,c=c|e,!(N&Gt)){if(N&Ot){let v=On<<E;c=c|v}break}}return c},Hc=s=>Uc.decode(s),Xc=s=>Lc.encode(s),$c=(s=zc)=>{let t=s.length|0,c=ys(t),E=Buffer.from(s,Ts);return Object.freeze([...c,...E])},Jc=(s,t)=>{t=t|0;let c=_n(s,t),E=ys(c).length;return t=t+E|0,s.subarray(t,t+c|0).toString(Ts)},Wc=58,Zc=46,At=32,ms=48,qc=67,it=new Uint8Array(qc),En=it.subarray(0,8),Kt=it.subarray(10,49),hn=it.subarray(51,68),gs=16,Qc=2;it[8]=Wc;it[9]=At;it[49]=At;it[50]=At;var ea=(s,t)=>{t=t??console.log;let c=32,E=126,N=s.length|0,e=0;for(;N>0;){En.fill(ms),xs(e,En),Kt.fill(At),hn.fill(At);let v=N>=gs?gs:N;N=N-gs|0;let G=0,de=0;for(let me=1;me<=v;me=me+1|0){let Qe=s[e]&255;Kt[G+0|0]=ms,Kt[G+1|0]=ms,xs(Qe,Kt,G,G+2|0);let $e=Zc;c<=Qe&&Qe<=E&&($e=Qe),hn[de]=$e,e=e+1|0,G=G+2|0,de=de+1|0,me%Qc===0&&(G=G+1|0)}let Re=String.fromCodePoint(...it);t(Re)}},ta=function*(s,t){let c=s.length|0,E=t.length|0,N=0;for(;N<c&&N<E;){let e=s[N],v=t[N];yield[e,v],N=N+1|0}},sa=function*(s,t,c){let E=s.length|0,N=t.length|0,e=c.length|0,v=0;for(;v<E&&v<N&&v<e;){let G=s[v],de=t[v],Re=c[v];yield[G,de,Re],v=v+1|0}},na=Object.freeze({ARRAY_COMPARE:vc,ARRAY_COPY:Vc,ARRAY_EQUAL:Yc,BIT_DEPTH:wc,HEX_DIGITS:bn,HEX_ENCODE:xs,IS_NUMBER:Bc,IS_UPPERCASE:Mc,LEB128_DECODE:_n,LEB128_DECODE_SIGNED:Gc,LEB128_ENCODE:ys,LEB128_ENCODE_SIGNED:Kc,UTF8_DECODE:Hc,UTF8_ENCODE:Xc,WASM_STRING_ENCODE:$c,WASM_STRING_DECODE:Jc,XXD_DUMP_HEX:ea,ZIP2:ta,ZIP3:sa}),_t=na;var Me=(s,t=2)=>{let c="";switch(s){case"+":c="add";break;case"-":c=t===2?"sub":"neg";break;case"*":c="mul";break;case"/":c="div";break;case"%":c="rem";break;case"==":c="eq";break;case">":c="gt";break;case"<":c="lt";break;case">=":c="ge";break;case"<=":c="le";break;case"!=":c="ne";break;case"&":c="and";break;case"|":c="or";break;case"^":c="xor";break;case"not":c="not";break;case"I32":c="toi32";break;case"U32":c="tou32";break;case"I64":c="toi64";break;case"U64":c="tou64";break;case"FP64":c="tofp64";break;case"FP32":c="tofp32";break}return c};var oa=Object.freeze({type:"native",body:Object.freeze([160]),lengths:Object.freeze({inputs:2,outputs:1})}),ca=Object.freeze({type:"native",body:Object.freeze([163]),lengths:Object.freeze({inputs:2,outputs:1})}),aa=Object.freeze({type:"native",body:Object.freeze([162]),lengths:Object.freeze({inputs:2,outputs:1})}),ra=Object.freeze({type:"native",body:Object.freeze([68,0,0,0,0,0,0,240,191,162]),lengths:Object.freeze({inputs:1,outputs:1})}),ia=Object.freeze({type:"native",body:Object.freeze([161]),lengths:Object.freeze({inputs:2,outputs:1})}),pa=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),la=Object.freeze({type:"native",body:Object.freeze([128]),lengths:Object.freeze({inputs:2,outputs:1})}),ua=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),fa=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:1,outputs:1})}),Ea=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),ha=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),ba=Object.freeze({type:"native",body:Object.freeze([127]),lengths:Object.freeze({inputs:2,outputs:1})}),Oa=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),Hi=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:2,outputs:1})}),_a=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),dn=Object.freeze({type:"native",body:Object.freeze([146]),lengths:Object.freeze({inputs:2,outputs:1})}),mn=Object.freeze({type:"native",body:Object.freeze([149]),lengths:Object.freeze({inputs:2,outputs:1})}),gn=Object.freeze({type:"native",body:Object.freeze([148]),lengths:Object.freeze({inputs:2,outputs:1})}),da=Object.freeze({type:"native",body:Object.freeze([67,0,0,128,191,148]),lengths:Object.freeze({inputs:2,outputs:1})}),xn=Object.freeze({type:"native",body:Object.freeze([140]),lengths:Object.freeze({inputs:2,outputs:1})}),Is=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),zs=Object.freeze({type:"native",body:Object.freeze([110]),lengths:Object.freeze({inputs:2,outputs:1})}),Ns=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),js=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),Ps=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),As=Object.freeze({type:"native",body:Object.freeze([109]),lengths:Object.freeze({inputs:2,outputs:1})}),Rs=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),Cs=Object.freeze({type:"native",body:Object.freeze([65,1,0,0,0,108]),lengths:Object.freeze({inputs:1,outputs:1})}),Ss=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),ma=Object.freeze({type:"native",body:Object.freeze([130]),lengths:Object.freeze({inputs:2,outputs:1})}),ga=Object.freeze({type:"native",body:Object.freeze([129]),lengths:Object.freeze({inputs:2,outputs:1})}),Ds=Object.freeze({type:"native",body:Object.freeze([112]),lengths:Object.freeze({inputs:2,outputs:1})}),Fs=Object.freeze({type:"native",body:Object.freeze([111]),lengths:Object.freeze({inputs:2,outputs:1})}),xa=Object.freeze({type:"native",body:Object.freeze([86]),lengths:Object.freeze({inputs:2,outputs:1})}),Ta=Object.freeze({type:"native",body:Object.freeze([85]),lengths:Object.freeze({inputs:2,outputs:1})}),ya=Object.freeze({type:"native",body:Object.freeze([100]),lengths:Object.freeze({inputs:2,outputs:1})}),ks=Object.freeze({type:"native",body:Object.freeze([75]),lengths:Object.freeze({inputs:2,outputs:1})}),Us=Object.freeze({type:"native",body:Object.freeze([74]),lengths:Object.freeze({inputs:2,outputs:1})}),Ia=Object.freeze({type:"native",body:Object.freeze([94]),lengths:Object.freeze({inputs:2,outputs:1})}),za=Object.freeze({type:"native",body:Object.freeze([84]),lengths:Object.freeze({inputs:2,outputs:1})}),Na=Object.freeze({type:"native",body:Object.freeze([83]),lengths:Object.freeze({inputs:2,outputs:1})}),ja=Object.freeze({type:"native",body:Object.freeze([99]),lengths:Object.freeze({inputs:2,outputs:1})}),Ls=Object.freeze({type:"native",body:Object.freeze([73]),lengths:Object.freeze({inputs:2,outputs:1})}),vs=Object.freeze({type:"native",body:Object.freeze([72]),lengths:Object.freeze({inputs:2,outputs:1})}),Pa=Object.freeze({type:"native",body:Object.freeze([93]),lengths:Object.freeze({inputs:2,outputs:1})}),Aa=Object.freeze({type:"native",body:Object.freeze([87]),lengths:Object.freeze({inputs:2,outputs:1})}),Ra=Object.freeze({type:"native",body:Object.freeze([88]),lengths:Object.freeze({inputs:2,outputs:1})}),Ca=Object.freeze({type:"native",body:Object.freeze([101]),lengths:Object.freeze({inputs:2,outputs:1})}),Vs=Object.freeze({type:"native",body:Object.freeze([76]),lengths:Object.freeze({inputs:2,outputs:1})}),Ys=Object.freeze({type:"native",body:Object.freeze([77]),lengths:Object.freeze({inputs:2,outputs:1})}),Sa=Object.freeze({type:"native",body:Object.freeze([95]),lengths:Object.freeze({inputs:2,outputs:1})}),Da=Object.freeze({type:"native",body:Object.freeze([89]),lengths:Object.freeze({inputs:2,outputs:1})}),Fa=Object.freeze({type:"native",body:Object.freeze([90]),lengths:Object.freeze({inputs:2,outputs:1})}),ka=Object.freeze({type:"native",body:Object.freeze([102]),lengths:Object.freeze({inputs:2,outputs:1})}),ws=Object.freeze({type:"native",body:Object.freeze([78]),lengths:Object.freeze({inputs:2,outputs:1})}),Bs=Object.freeze({type:"native",body:Object.freeze([79]),lengths:Object.freeze({inputs:2,outputs:1})}),Ua=Object.freeze({type:"native",body:Object.freeze([96]),lengths:Object.freeze({inputs:2,outputs:1})}),La=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),va=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),Va=Object.freeze({type:"native",body:Object.freeze([97]),lengths:Object.freeze({inputs:2,outputs:1})}),Ms=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),Ks=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),Ya=Object.freeze({type:"native",body:Object.freeze([91]),lengths:Object.freeze({inputs:2,outputs:1})}),wa=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),Ba=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),Ma=Object.freeze({type:"native",body:Object.freeze([98]),lengths:Object.freeze({inputs:2,outputs:1})}),Gs=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),Hs=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),Ka=Object.freeze({type:"native",body:Object.freeze([92]),lengths:Object.freeze({inputs:2,outputs:1})}),Ga=Object.freeze({type:"native",body:Object.freeze([113]),lengths:Object.freeze({inputs:2,outputs:1})}),Ha=Object.freeze({type:"native",body:Object.freeze([114]),lengths:Object.freeze({inputs:2,outputs:1})}),Xa=Object.freeze({type:"native",body:Object.freeze([115]),lengths:Object.freeze({inputs:2,outputs:1})}),$a=Object.freeze({type:"native",body:Object.freeze([69]),lengths:Object.freeze({inputs:1,outputs:1})}),Tn=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),yn=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),Ja=Object.freeze({type:"native",body:Object.freeze([170]),lengths:Object.freeze({inputs:1,outputs:1})}),Wa=Object.freeze({type:"native",body:Object.freeze([171]),lengths:Object.freeze({inputs:1,outputs:1})}),Za=Object.freeze({type:"native",body:Object.freeze([168]),lengths:Object.freeze({inputs:1,outputs:1})}),qa=Object.freeze({type:"native",body:Object.freeze([169]),lengths:Object.freeze({inputs:1,outputs:1})}),In=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),Xt=Object.freeze({type:"native",body:Object.freeze([193]),lengths:Object.freeze({inputs:1,outputs:1})}),$t=Object.freeze({type:"native",body:Object.freeze([192]),lengths:Object.freeze({inputs:1,outputs:1})}),Qa=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),er=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),tr=Object.freeze({type:"native",body:Object.freeze([176]),lengths:Object.freeze({inputs:1,outputs:1})}),sr=Object.freeze({type:"native",body:Object.freeze([177]),lengths:Object.freeze({inputs:1,outputs:1})}),nr=Object.freeze({type:"native",body:Object.freeze([175]),lengths:Object.freeze({inputs:1,outputs:1})}),or=Object.freeze({type:"native",body:Object.freeze([174]),lengths:Object.freeze({inputs:1,outputs:1})}),cr=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),ar=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),rr=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),ir=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),zn=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),Nn=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),jn=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),Pn=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),pr=Object.freeze({type:"native",body:Object.freeze([185]),lengths:Object.freeze({inputs:1,outputs:1})}),lr=Object.freeze({type:"native",body:Object.freeze([186]),lengths:Object.freeze({inputs:1,outputs:1})}),Xs=Object.freeze({type:"native",body:Object.freeze([183]),lengths:Object.freeze({inputs:1,outputs:1})}),$s=Object.freeze({type:"native",body:Object.freeze([184]),lengths:Object.freeze({inputs:1,outputs:1})}),ur=Object.freeze({type:"native",body:Object.freeze([187]),lengths:Object.freeze({inputs:1,outputs:1})}),fr=Object.freeze({type:"native",body:Object.freeze([180]),lengths:Object.freeze({inputs:1,outputs:1})}),Er=Object.freeze({type:"native",body:Object.freeze([181]),lengths:Object.freeze({inputs:1,outputs:1})}),Js=Object.freeze({type:"native",body:Object.freeze([178]),lengths:Object.freeze({inputs:1,outputs:1})}),Ws=Object.freeze({type:"native",body:Object.freeze([179]),lengths:Object.freeze({inputs:1,outputs:1})}),hr=Object.freeze({type:"native",body:Object.freeze([182]),lengths:Object.freeze({inputs:1,outputs:1})}),Rt=Object.freeze(Object.assign({"Flogram./":mn,"Flogram.*":gn,"Flogram.+":dn,"Flogram.-":xn},{"Flogram.fp64.div":ca,"Flogram.fp64.mul":aa,"Flogram.fp64.add":oa,"Flogram.fp64.sub":ia,"Flogram.fp64.neg":ra,"Flogram.fp64.gt":ya,"Flogram.fp64.lt":ja,"Flogram.fp64.le":Ca,"Flogram.fp64.ge":ka,"Flogram.fp64.ne":Ma,"Flogram.fp64.eq":Va,"Flogram.fp64.toi32":Ja,"Flogram.fp64.tou32":Wa,"Flogram.fp64.tou64":sr,"Flogram.fp64.toi64":tr,"Flogram.fp64.tofp32":hr},{"Flogram.u64.add":pa,"Flogram.u64.sub":Ea,"Flogram.u64.mul":ua,"Flogram.u64.div":la,"Flogram.u64.rem":ma,"Flogram.u64.gt":xa,"Flogram.u64.lt":za,"Flogram.u64.le":Ra,"Flogram.u64.ge":Fa,"Flogram.u64.ne":Ba,"Flogram.u64.eq":va,"Flogram.u64.toi32":yn,"Flogram.u64.tou32":yn,"Flogram.u64.toi64":Qa,"Flogram.u64.tofp32":Er,"Flogram.u64.tofp64":lr},{"Flogram.i64.add":ha,"Flogram.i64.sub":_a,"Flogram.i64.neg":fa,"Flogram.i64.mul":Oa,"Flogram.i64.div":ba,"Flogram.i64.rem":ga,"Flogram.i64.gt":Ta,"Flogram.i64.lt":Na,"Flogram.i64.le":Aa,"Flogram.i64.ge":Da,"Flogram.i64.ne":wa,"Flogram.i64.eq":La,"Flogram.i64.toi32":Tn,"Flogram.i64.tou32":Tn,"Flogram.i64.tou64":er,"Flogram.i64.tofp32":fr,"Flogram.i64.tofp64":pr},{"Flogram.fp32.div":mn,"Flogram.fp32.mul":gn,"Flogram.fp32.add":dn,"Flogram.fp32.sub":xn,"Flogram.fp32.neg":da,"Flogram.fp32.gt":Ia,"Flogram.fp32.lt":Pa,"Flogram.fp32.le":Sa,"Flogram.fp32.ge":Ua,"Flogram.fp32.ne":Ka,"Flogram.fp32.eq":Ya,"Flogram.fp32.toi32":Za,"Flogram.fp32.tou32":qa,"Flogram.fp32.tou64":nr,"Flogram.fp32.toi64":or,"Flogram.fp32.tofp64":ur},{"Flogram.u32.add":Is,"Flogram.u32.sub":js,"Flogram.u32.mul":Ns,"Flogram.u32.div":zs,"Flogram.u32.rem":Ds,"Flogram.u32.gt":ks,"Flogram.u32.lt":Ls,"Flogram.u32.le":Ys,"Flogram.u32.ge":Bs,"Flogram.u32.ne":Hs,"Flogram.u32.eq":Ks,"Flogram.u32.toi32":In,"Flogram.u32.toi64":rr,"Flogram.u32.tou64":ir,"Flogram.u32.tofp32":Ws,"Flogram.u32.tofp64":$s},{"Flogram.i32.add":Ps,"Flogram.i32.sub":Ss,"Flogram.i32.neg":Cs,"Flogram.i32.mul":Rs,"Flogram.i32.div":As,"Flogram.i32.rem":Fs,"Flogram.i32.gt":Us,"Flogram.i32.lt":vs,"Flogram.i32.le":Vs,"Flogram.i32.ge":ws,"Flogram.i32.ne":Gs,"Flogram.i32.eq":Ms,"Flogram.i32.toi64":cr,"Flogram.i32.tou64":ar,"Flogram.i32.tou32":In,"Flogram.i32.tofp32":Js,"Flogram.i32.tofp64":Xs},{"Flogram.i16.add":Ps,"Flogram.i16.sub":Ss,"Flogram.i16.neg":Cs,"Flogram.i16.mul":Rs,"Flogram.i16.div":As,"Flogram.i16.rem":Fs,"Flogram.i16.gt":Us,"Flogram.i16.lt":vs,"Flogram.i16.le":Vs,"Flogram.i16.ge":ws,"Flogram.i16.ne":Gs,"Flogram.i16.eq":Ms,"Flogram.i16.toi32":Xt,"Flogram.i16.tou32":Xt,"Flogram.i16.toi64":zn,"Flogram.i16.tou64":Nn,"Flogram.i16.tofp32":Js,"Flogram.i16.tofp64":Xs},{"Flogram.u16.add":Is,"Flogram.u16.sub":js,"Flogram.u16.mul":Ns,"Flogram.u16.div":zs,"Flogram.u16.rem":Ds,"Flogram.u16.gt":ks,"Flogram.u16.lt":Ls,"Flogram.u16.le":Ys,"Flogram.u16.ge":Bs,"Flogram.u16.ne":Hs,"Flogram.u16.eq":Ks,"Flogram.u16.toi32":Xt,"Flogram.u16.tou32":Xt,"Flogram.u16.toi64":zn,"Flogram.u16.tou64":Nn,"Flogram.u16.tofp32":Ws,"Flogram.u16.tofp64":$s},{"Flogram.i8.add":Ps,"Flogram.i8.sub":Ss,"Flogram.i16.neg":Cs,"Flogram.i8.mul":Rs,"Flogram.i8.div":As,"Flogram.i8.rem":Fs,"Flogram.i8.gt":Us,"Flogram.i8.lt":vs,"Flogram.i8.le":Vs,"Flogram.i8.ge":ws,"Flogram.i8.ne":Gs,"Flogram.i8.eq":Ms,"Flogram.i8.toi32":$t,"Flogram.i8.tou32":$t,"Flogram.i8.toi64":jn,"Flogram.i8.tou64":Pn,"Flogram.i8.tofp32":Js,"Flogram.i8.tofp64":Xs},{"Flogram.u8.add":Is,"Flogram.u8.sub":js,"Flogram.u8.mul":Ns,"Flogram.u8.div":zs,"Flogram.u8.rem":Ds,"Flogram.u8.gt":ks,"Flogram.u8.lt":Ls,"Flogram.u8.le":Ys,"Flogram.u8.ge":Bs,"Flogram.u8.ne":Hs,"Flogram.u8.eq":Ks,"Flogram.u8.toi32":$t,"Flogram.u8.tou32":$t,"Flogram.u8.toi64":jn,"Flogram.u8.tou64":Pn,"Flogram.u8.tofp32":Ws,"Flogram.u8.tofp64":$s},{"Flogram.bool.and":Ga,"Flogram.bool.or":Ha,"Flogram.bool.xor":Xa,"Flogram.bool.not":$a}));var{LEB128_ENCODE:Ke}=_t,Ji=new Int8Array(1),Wi=new Uint8Array(1),br=s=>{let t=[],c=!0;for(;c;){let E=s&127;s>>=7,s===0&&!(E&64)||s===-1&&E&64?c=!1:E|=128,t.push(E)}return new Uint8Array(t)},Or=s=>{let t=[],c=!0;for(;c;){let E=s&127;s>>=7,s===0?c=!1:E|=128,t.push(E)}return new Uint8Array(t)},_r=s=>{let t=[];for(;s>=128;)t.push(s&127|128),s>>>=7;return t.push(s),new Uint8Array(t)},dr=128,mr=127,An=64,gr=s=>{s=s<<16>>16;let t=[];for(;;){let c=s&mr;s=s>>7;let E=s===0,N=(c&An)===0,e=E&&N,v=s===-1,G=(c&An)!==0;if(e||v&&G){t.push(c);break}c=c|dr,t.push(c)}return t};var xr=s=>{let t=new Float32Array(1);return t[0]=parseFloat(s),new Uint8Array(t.buffer)},Rn=s=>{let t=[],c=!0;for(;c;){let E=s&127;s>>=7,s===0&&!(E&64)||s===-1&&E&64?c=!1:E|=128,t.push(E)}return new Uint8Array(t)},Tr=s=>Ke(s),yr=s=>{let t=new Float64Array(1);return t[0]=s,new Uint8Array(t.buffer)},Ir=s=>{let t=[];for(;s>=128;)t.push(s&127|128),s>>>=7;return t.push(s),new Uint8Array(t)},zr=s=>{let t=[],c=!0;for(;c;){let E=s&127;s>>=7,s===0&&!(E&64)||s===-1&&E&64?c=!1:E|=128,t.push(E)}return new Uint8Array(t)},Nr=s=>{let t=new Uint8Array(1);return t[0]=s==="TRUE"?1:s==="FALSE"?0:s,t},jr=s=>{let t=s.charCodeAt(0);return Ke(t)},Cn=()=>{let s=new ArrayBuffer(4);return new Float32Array(s)[0]=-0,[...new Uint8Array(s)]},Pr=Object.freeze({type:"native",identity:127,opcode:65,encode:Rn,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Ar=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-1),encode:jr,link:Object.freeze({load:Object.freeze({opcode:44,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Rr=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-1),encode:Nr,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4}),values:{TRUE:1,FALSE:0}})}),Cr=Object.freeze({type:"native",identity:124,opcode:68,none:Cn(),encode:yr,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Sr=Object.freeze({type:"native",identity:126,opcode:66,none:Ke(-1),encode:Ir,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Dr=Object.freeze({type:"native",identity:126,opcode:66,none:Ke(-9223372036854776e3),encode:zr,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Fr=Object.freeze({type:"native",identity:125,opcode:67,none:Cn(),encode:xr,link:Object.freeze({load:Object.freeze({opcode:42,align:2,offset:0,size:4}),store:Object.freeze({opcode:56,align:2,offset:0,size:4})})}),kr=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-1),encode:Tr,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Ur=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-2147483648),encode:Rn,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Lr=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-32768),encode:gr,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),vr=Object.freeze({type:"native",identity:127,opcode:65,encode:_r,none:Ke(-1),link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Vr=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-128),encode:br,decode:s=>new Int8Array([s])[0],link:Object.freeze({load:Object.freeze({opcode:44,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),Yr=Object.freeze({type:"native",identity:127,opcode:65,none:Ke(-1),encode:Or,link:Object.freeze({load:Object.freeze({opcode:43,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),pt=Object.freeze({"Flogram.String":Pr,"Flogram.Char":Ar,"Flogram.Bool":Rr,"Flogram.FP64":Cr,"Flogram.U64":Sr,"Flogram.I64":Dr,"Flogram.FP32":Fr,"Flogram.U32":kr,"Flogram.I32":Ur,"Flogram.I16":Lr,"Flogram.U16":vr,"Flogram.I8":Vr,"Flogram.U8":Yr});var wr=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),Ct=wr;var{TYPES_ASSIGN:Br,TYPES_DRAW:Mr,TYPES_ARRAY:W,TYPES_ARRAY_ASSIGNMENT:Kr,TYPES_BRANCH_MATCH:Gr,TYPES_BRANCH_DEFAULT:Hr,TYPES_CONDITION:Zs,TYPES_LOOP:Jt,TYPES_WHILE:Xr,TYPES_FOREACH:$r,TYPES_DATA:Wt,TYPES_GENERICS:rp,TYPES_ENUMERATION:et,TYPES_EXPRESSION:dt,TYPES_INSTANCE:ip,TYPES_LINK:ct,TYPES_LOCAL:je,TYPES_CONCAT:Sn,TYPES_OBJECT:he,TYPES_PROCEDURE:pp,TYPES_RETURN:qs,TYPES_SELECT:at,TYPES_MEMBER:St,TYPES_STORE:Jr,TYPES_BREAK:Wr,TYPES_LITERAL:rt,TYPES_ARRAY_ACCESS:Zt,TYPES_LINK_TO:qt,TYPES_VALUE_AT:Dt,TYPES_SELF:lp,TYPES_DROP:Dn,TYPES_MAYBE:Ft,TYPES_MOVE:Zr,TYPES_NATIVE:Te,TYPES_STRING:fe,TYPES_FREE:qr,TYPES_BRANCH:Fn,TYPES_CONTINUE:kn,TYPES_DEFAULT_BLOCK:Un,TYPES_BLOCK_END:ft,TYPES_STATEMENT:Ln,TYPES_DESTRUCTOR:vn,TYPES_SIZE:Vn,TYPES_WHILE_CONDITION:Yn,TYPES_FOREACH_CONDITION:wn,TYPES_FOREACH_END:Bn}=Mt,kt=2,Qt=3,es=12,Ut=13,te=16,qe=26,O=65,Mn=71,Qr=113,ei=114,Qs=70,Ae=32,Lt=33,H=35,Pe=36,ti=15,en=11,Kn=4,si=5,tt=64,mt=127,Ge=108,ni=109,ee=106,oi=107,Ye=54,gt=40,Ie=0,ze=2,Ue=0,ci=1,Gn=2,Hn=3,ai=4,ri=5,He=6,ii=999999,Xn=888888,pi=777777,U=0,we=1,li=4,vt=8,$n=8,Jn="Flogram.draw",ts=new Set(["==","!=",">",">=","<","<=","!","&","|"]),{LEB128_ENCODE:g}=_t,tn,R=(s,t)=>`${t}.${s}`,Wn=(s,t,c)=>{let E=c.get(s);if(E&&E.length===1)return E[0];if(E&&E.length>1)return E[0];throw console.log(s),console.log(c),Error("No Callees were found")};function ss(s,t,c,E){s?.description?.inputs.length>0?tn=s.description.inputs[0].data.name:s?.description?.outputs.length>0&&(tn=s.description.outputs[0].data.name);let N=o=>{nt(o.collection).length},e=[],v=(o=U)=>{e.push(O,0),e.push(te,Ue),e.push(Pe,o)},G=()=>{e.push(H,U),e.push(H,we),e.push(te,Hn),e.push(H,we),e.push(H,U),e.push(te,Hn)},de=()=>{e.push(te,ai),e.push(Pe,we),e.push(Pe,U)},Re=()=>{e.push(te,ri),e.push(Pe,we),e.push(Pe,U)},me=()=>{e.push(te,Gn)},{description:Qe}=s,{inputs:$e,locals:Et,statements:Yt}=Qe,be=new Map,Z=new Map;{let o=0,a=r=>{for(let p of r){let{name:_,data:n}=p;switch(be.set(_,o),Z.set(_,p),n.type){case Ft:case Wt:{let{name:i,path:f}=n,d=R(i,f);switch(i){case fe:{o=o+2|0;break}default:{let x=t.get(d);switch(x.type){case Te:{o=o+1|0;break}case et:{o=o+1|0;break}case he:{let{length:Q}=x;o=o+2|0;break}}break}}break}case W:{o=o+2|0;break}case ct:{n.name===fe||n.name===W?o=o+2|0:o=o+1|0;break}}}};a($e),a(Et)}let Ce=0,Se=[];for(let o of Et){let{data:a}=o,r=()=>{Se.push(1,mt),Ce=Ce+1|0},p=()=>{Se.push(1,mt),Ce=Ce+1|0,Se.push(1,mt),Ce=Ce+1|0},_=()=>{Se.push(1,mt),Ce=Ce+1|0},n=f=>{let{identity:d}=f;Se.push(1,d),Ce=Ce+1|0},i=f=>{let{indivisibles:d}=f,{mapTrail:x}=d;for(let Q of x.values()){let{data:pe}=Q;if(pe.type===ct){pe.name===W||pe.name===fe?p():r();continue}if(pe.type===W){p();continue}let{name:le,path:ne}=pe,F=R(le,ne),b=t.get(F);switch(b.type){case Te:{n(b);break}case et:{_();break}}}};switch(a.type){case W:{p();break}case ct:{a.name===W||a.name===fe?p():r();break}case Ft:case Wt:{let{name:f,path:d}=a;switch(f){case fe:{p();break}default:{let x=R(f,d),Q=t.get(x);switch(Q.type){case Te:{n(Q);break}case et:{_();break}case he:{p();break}}break}}break}}}((o,a)=>{for(let[r,p]of o)if(p.type==a){Se.push(1,mt),Ce=Ce+1|0;break}})(t,he);let is=g(Ce);e.push(...is,...Se);let Be=o=>{if(typeof o!==he)return o;switch(o.type){case je:return o.name;case qt:return Be(o.value);case Dt:return Be(o.link);case St:return`${o.type}_${o.trail.join("_")}`;case Zt:return o.array.name}return null},nt=o=>{switch(o.type){case rt:return o;case je:return Z.get(o.name)?.data;case Dt:return nt(o.link);case qt:return nt(o.value);case Vn:{if(input.value.type===je)return{name:"I32",path:"Flogram",type:"data"};break}case Zt:return Z.get(Be(o));case at:{let{value:a,trail:r}=JSON.parse(JSON.stringify(o)),{name:p}=a,_=Z.get(p||Be(a)),{data:n}=_,i=R(n.name,n.path),f=t.get(i),{indivisibles:d}=f,x=JSON.parse(JSON.stringify(r)),Q=f;for(;x.length>0;){let pe=x.shift();if(x.length>0){let le=Q.members.get(pe),ne=R(le.name,le.path);Q=t.get(ne);continue}Q=Q.members.get(pe)}return Q}}},$=(o,a=qs)=>{let r=0,p=[],_=(F,b)=>{let k={type:"call",key:F,inputs:b};p.unshift(k)},n=F=>{let b={type:"value",value:F};p.unshift(b)},i=F=>{let b={type:St,member:F};p.unshift(b)},f=(F,b,k,Y)=>{let V={key:null,stop:!1},I;if(F&&Ct.includes(F.data.name)){let{data:Oe}=F,{name:T}=Oe;I=R(T.toLowerCase()+"."+Me(k),b),tn=T}else if(F){let{data:Oe}=F,{name:T,path:re}=Oe,m=R(T,re),l=t.get(m),{indivisibles:z}=l,{mapTrail:A}=z,j=A.size-1;for(let[C,D]of A){p.unshift({type:"compare",currentIndex:j,name:k}),I=R(D.data.name.toLowerCase()+"."+Me(k),D.data.path);let y=Y.map(S=>({type:at,value:{type:je,name:S.name},trail:[D.trail]}));_(I,y);var w=y.length-1|0;for(let S=w;S>=0;S=S-1|0){let B=y[S];n(B)}j--}V.stop=!0}return V.key=I,V},d=F=>{let{inputs:b}=F,k=b.find(Y=>Y.type==dt);if(ts.has(F.name))return"Bool";if(k){let Y=b.map(I=>{if(I.type===je)return Z.get(I.name);if(I.type===rt)return{data:I};if(I.type===dt)return{data:{name:d(I)}}}),V=E.find(I=>I.description&&Array.isArray(I.description.inputs)?I.description.inputs.length!==Y.length?!1:I.description.inputs.every((w,Oe)=>w.data.name===Y[Oe].data.name):!1);return V?ts.has(V.name)?V.description.inputs[0].data.name:V.description.outputs[0].data.name:"unknown"}else{let Y=b.map(I=>({data:nt(I)})),V=E.find(I=>I.description&&Array.isArray(I.description.inputs)?I.description.inputs.length!==Y.length?!1:I.description.inputs.every((w,Oe)=>w.data.name===Y[Oe].data.name):!1);return V?ts.has(V.name)?V.description.inputs[0].data.name:V.description.outputs[0].data.name:"unknown"}},x=F=>{let{inputs:b,name:k,path:Y}=F,V=R(k,Y),I=[Y],w;if(typeof k===he){let T=k[0];if(w=Z.get(T),w){I.push(w.data.name);for(let m=1;m<=k.length-2;m++)T=k[m],w=Z.get(T),w&&I.push(w.data.name)}let re=k.length-1|0;V=R(k[re],I.join("."))}if(Y==="Flogram"&&k!==Mr){let T=b.find(l=>l.type===dt),re=b.find(l=>l.type===rt),m=b.map(l=>Z.get(l.name)).find(Boolean);if(m){let l=f(m,Y,k,b);if(V=l.key,l.stop)return}else if(re)V=R(`${re.name.toLowerCase()}.${Me(k)}`,Y);else if(T)V=R(`${d(T).toLowerCase()}.${Me(k)}`,Y);else{let l=E.find(z=>z.name===F.name&&z.path===F.path&&z.description.inputs.length===F.inputs.length);V=R(`${ts.has(l.name)?l.description.inputs[0]?.data.name.toLowerCase():l.description.outputs[0]?.data.name.toLowerCase()}.${Me(l.name)}`,Y)}}if(_(V,b),typeof k===he){let T=Wn(V,b,c);if(T){let{procedure:re}=T,{description:m}=re,{self:l}=m,z=Z.get(k[0]),A=R(z.data.name,z.data.path),j=t.get(A);if(j){let C=be.get(k[0]),{indivisibles:D,members:y}=j,{mapTrail:S}=D;for(let B=l.length-1|0;B>=0;B--){let J=l[B];if(J.type===St){let L=J.trail.join(".");if(S.get(L)){let{address:oe}=S.get(L);i({index:C,address:oe})}else{let oe=JSON.parse(JSON.stringify(J.trail)),se=j;for(;oe.length>0;){let Ne=oe.shift();if(oe.length>0){let bt=se.members.get(Ne),Pt=R(bt.name,bt.path);se=t.get(Pt);continue}se=se.members.get(Ne)}let ae=R(se.name,se.path),xe=t.get(ae),{indivisibles:Ze}=xe,{mapIndex:ue,mapTrail:ve}=Ze,ke=ue.get(0),_e=`${L}.${ke.trail}`,{address:ie}=S.get(_e),Ve={index:C,address:ie-8};i(Ve)}}}}}}if(V!==Jn){var Oe=b.length-1|0;for(let T=Oe;T>=0;T=T-1|0){let re=b[T];n(re)}}},Q=F=>{let{key:b,inputs:k}=F;if(b===Jn){for(let I of k){let w=nt(I);I.type===at?w?.name===fe?(e.push(O,...g(Xn)),e.push(te,He),$(I),e.push(Pe,U),e.push(gt,ze,Ie),e.push(te,He),e.push(H,U),e.push(gt,ze,Ie),e.push(te,He)):($(I),e.push(te,He)):w?.name===fe||I.type===Sn?(e.push(O,...g(Xn)),e.push(te,He),$(I),e.push(te,He),e.push(te,He)):w?.name===W||w?.layout===W?(e.push(O,...g(ii)),e.push(te,He),$(I),e.push(te,He),e.push(te,He)):($(I),e.push(te,He)),I.type===at&&(e.push(qe),(w?.name===fe||w?.type===W||w?.layout===W)&&e.push(qe))}e.push(O,...g(pi)),e.push(te,He),r=r-k.length|0;return}let Y=Wn(b,k,c);switch(Y.type){case Te:{let{body:I}=Y;e.push(...I);break}case"artificial":{let{index:I}=Y,w=g(I);e.push(te,...w);break}}let{lengths:V}=Y;r=r-V.inputs|0,r=r+V.outputs|0},pe=F=>{let{value:b}=F,k=m=>{let l=0,z=Be(m),A;if(m.type===at){let{value:j,trail:C}=JSON.parse(JSON.stringify(m)),{name:D}=j,y=Z.get(D),{data:S}=y,B=R(S.name,S.path),J=t.get(B),{indivisibles:L}=J,{mapTrail:oe}=L,se=C.join("."),ae=JSON.parse(JSON.stringify(C)),xe=J;for(;ae.length>0;){let ue=ae.shift();if(ae.length>0){let ve=xe.members.get(ue),ke=R(ve.name,ve.path);xe=t.get(ke);continue}xe=xe.members.get(ue)}let Ze=R(xe.name,xe.path);A=t.get(Ze)}else{let j=Z.get(z),{data:C}=j,{name:D,path:y,segment:S}=C,B=R(D,y);A=t.get(B)}if(A){switch(A.type){case Te:{pe({value:m});let{link:j}=A,{load:C}=j;e.push(C.opcode,C.align,C.offset),l=l+1|0;break}case he:{let j=0,C=()=>{},D=J=>{pe({value:m});let{link:L}=J,{load:oe}=L;e.push(oe.opcode,oe.align,oe.offset+j|0),l=l+1|0,j=j+oe.size|0},y=()=>{},{indivisibles:S}=A,{mapTrail:B}=S;for(let J of B.values()){if(J.type===ct){y();continue}let{data:L}=J,{name:oe,path:se}=L,ae=R(oe,se),xe=t.get(ae);switch(xe.type){case Te:{D(xe);break}case et:{C();break}}}break}}return l}},Y=(m,l)=>{let z=0,{literal:A,name:j,path:C,size:D}=m,y=D||A.length;m.length&&!D&&(y=parseInt(m.length,10));let S=R(j,C),B=t.get(S);function J(L){let oe=0,{literal:se,name:ae,path:xe,vSize:Ze}=L,ue=Ze||se.length;L.length&&!Ze&&(ue=parseInt(L.length,10));let ve=R(ae,xe),ke=t.get(ve);v(),(ke.type===he||ae===fe&&L.layout===W||L.contains===W)&&(e.push(O,...g(ue*4*2|0)),e.push(te,Ue),e.push(Lt,U),G());for(let _e=0;_e<ue;_e++){let ie=se[_e];if(ie)if(ie.name===fe&&L.layout===W||ie.layout===W&&ke.type!==he){let Ve=[];if(ie.layout===W){let Ne=ie.size||ie.literal.length;e.push(H,U),e.push(H,U),e.push(H,U),e.push(O,...g(_e)),e.push(O,...g(8)),e.push(Ge),e.push(ee),Ve.push(ie.literal),J(ie),e.push(H,U),e.push(Ye,ze,Ie),e.push(O,...g(4)),e.push(O,...g(_e)),e.push(O,...g(8)),e.push(Ge),e.push(ee),e.push(ee),e.push(O,Ne),e.push(Ye,ze,Ie),e.push(Pe,U)}else{let Ne=ie.size||ie.literal.length;for(let Pt=0;Pt<Ne;Pt++)Ve.push({type:ie.type,path:ie.path,name:"I32",literal:ie.literal[Pt].charCodeAt().toString()});let bt={type:rt,name:"I32",layout:W,path:ie.path,literal:Ve};e.push(H,U),e.push(H,U),e.push(H,U),e.push(O,...g(_e)),e.push(O,...g(8)),e.push(Ge),e.push(ee),J(bt),e.push(H,U),e.push(Ye,ze,Ie),e.push(O,...g(4)),e.push(O,...g(_e)),e.push(O,...g(8)),e.push(Ge),e.push(ee),e.push(ee),e.push(O,Ne),e.push(Ye,ze,Ie),e.push(Pe,U)}}else switch(ke.type){case Te:{let{link:Ve}=ke,{store:Ne}=Ve;e.push(O,...g(Ne.size)),e.push(te,Ue),!ie||ie.type===rt?e.push(ke.opcode,...ke.encode(ie?.literal||0)):$(ie),e.push(Ne.opcode,Ne.align,Ne.offset),me(),oe=3;break}case he:{e.push(H,U),e.push(H,U),e.push(O,...g(_e)),e.push(O,...g(8)),e.push(Ge),e.push(ee),$(ie),e.push(Pe,we),e.push(Ye,ze,Ie),e.push(Pe,U),e.push(H,U),e.push(O,...g(4)),e.push(O,...g(_e)),e.push(O,...g(8)),e.push(Ge),e.push(ee),e.push(ee),e.push(H,we),e.push(Ye,ze,Ie);break}}}}return J(m),l?y:(e.push(H,U),e.push(O,...g(y)),z=1,z)},V=(m,l,z=!0)=>{let A=t.get(l);v();let j=(y,S)=>{G(),Re(),e.push(H,U),e.push(H,U),e.push(H,U),de(),e.push(O,...g(S)),e.push(ee),e.push(H,U),e.push(Ye,ze,Ie),e.push(O,...g(S)),e.push(O,...g(4)),e.push(ee),e.push(ee),e.push(O,...g(y)),e.push(Ye,ze,Ie),e.push(Pe,U)},C=[];for(let[y,S]of A.members){if(!S)continue;let B=m.find(oe=>oe.name===y)||{name:y,value:S.value},J=R(S.name,S.path),L=t.get(J);if(S.type===W){e.push(O,...g(vt)),e.push(te,Ue),e.push(qe),C.push({data:{keyName:y,keyData:S},literal:B});continue}switch(L.type){case Te:{let{link:oe}=L,{store:se}=oe;if(S.type===ct)G(),e.push(O,...g(4)),e.push(te,Ue),$(B.value),e.push(se.opcode,se.align,se.offset),de();else if(S.name===fe)e.push(O,...g(vt)),e.push(te,Ue),e.push(qe),C.push({data:{keyName:y,keyData:S},literal:B});else{e.push(O,...g(se.size)),e.push(te,Ue);let ae=JSON.parse(JSON.stringify(B.value));ae.literal&&(ae.name!==S.name||ae.path!==S.path)&&(ae={...ae,name:S.name,path:S.path}),$(ae),e.push(se.opcode,se.align,se.offset)}me();break}case he:{e.push(O,...g(vt)),e.push(te,Ue),e.push(qe),C.push({data:{keyName:y,keyData:S},literal:B});break}}}if(C.length>0){let y=C[0],{data:S,literal:B}=y,{keyName:J,keyData:L}=S,{type:oe,name:se,layout:ae,path:xe}=L,ue=(_e=>{let ie=A.indivisibles.mapTrail;if(ie.has(_e))return ie.get(_e).address;let Ve=Array.from(ie.entries()).filter(([Ne])=>Ne.startsWith(`${_e}.`));return Ve.length?(Ve.sort((Ne,bt)=>Ne[1].address-bt[1].address),Ve[0][1].address-8):null})(J),ve=R(se,xe),ke=t.get(ve);if(se===fe)G(),$(B.value),e.push(qe,qe),j(B.value.size||B.value.literal.length,ue),me();else if(oe===W||ae===W)if(B.value.type===je){let _e=be.get(B.value.name);G();let ie=w(L,_e);j(ie,ue),me()}else{G();let _e=Y(B.value,!0);j(_e,ue),me()}else if(ke.type===he){G();let _e=V(B.value.literal,ve,!1);j(_e,ue),me()}}let D=A.indivisibles.mapTrail.size+C.length;return z&&(e.push(H,U),e.push(O,...g(D))),D},I=(m,l)=>{let z=0,A=Z.get(l),j;if(A){let{data:D}=A,{name:y,path:S,segment:B}=D;j=R(y,S)}else{let D=y=>{if(y.type===rt)return R(y.name,y.path);if(y.type===dt)return D(y.inputs[0]);if(y.type===Dt)return D(y.link);if(y.type===qt)return D(y.value);if(y.type===je){let S=Z.get(y.name),{data:B}=S,{name:J,path:L,segment:oe}=B;return R(J,L)}else if(y.type===at){let S=t.get(D(y.value)),{indivisibles:B}=S,{mapTrail:J}=B,L=y.trail.join("."),{data:oe}=J.get(L),{name:se,path:ae}=oe;return R(se,ae)}};j=D(m)}let C=t.get(j);switch(C.type){case Te:{let{link:D}=C,{store:y}=D;e.push(O,...g(y.size)),e.push(te,Ue),e.push(Pe,U),e.push(H,U),$(m),e.push(y.opcode,y.align,y.offset),e.push(H,U),z=z+7|0;break}case he:{let D=0,y=()=>{},S=oe=>{$(m);let{link:se}=oe,{load:ae}=se;e.push(ae.opcode,ae.align,ae.offset+D|0),z=z+1|0,D=D+ae.size|0},B=()=>{},{indivisibles:J}=C,{mapTrail:L}=J;for(let oe of L.values()){if(oe.type===ct){B();continue}let{data:se}=oe,{name:ae,path:xe}=se,Ze=R(ae,xe),ue=t.get(Ze);switch(ue.type){case Te:{S(ue);break}case et:{y();break}}}break}}return z},w=(m,l=0)=>{let{name:z,path:A}=m,j=R(z,"Flogram"),C=t.get(j),{link:D}=C,{store:y,load:S}=D,B=Number(m.length);v();for(let J=0;J<B;J++){e.push(O,...g(y.size)),e.push(te,Ue);let L=l;T(L,L+1|0),e.push(O,...g(J)),e.push(O,S.size),e.push(Ge),e.push(ee),e.push(S.opcode,S.align,S.offset),e.push(y.opcode,y.align,y.offset),me()}return B},Oe=(m,l)=>{let z=t.get(l),{opcode:A}=z,j=z.encode(m);e.push(A,...j)},T=(m,l)=>{for(;m<l;)e.push(Ae,m),m=m+1|0};switch(b.type){case dt:{x(b);break}case"instance":{let{path:m,members:l}=b;var re=l.length-1|0;for(let z=re;z>=0;z=z-1|0){let A=l[z],{path:j,value:C}=A;n(C)}break}case Ft:{let{data:m}=b,{name:l,path:z}=m,A=R(l,z),j=t.get(A);b.layout==="NONE"?e.push(j.opcode,...j.none):$(b.value),r=r+1|0;break}case Dt:{let{link:m}=b,l=k(m);r=r+l|0;break}case qt:{let{value:m}=b,l=Be(m);if(Z.get(l)?.data.type===W){$({name:l,type:je});return}let A=I(m,l);r=r+A|0;break}case Vn:{let{value:m}=b;switch(m.type){case je:{let l=be.get(m.name);T(l+1|0,l+2|0);break}}break}case Sn:{let{values:m}=b;v(we);for(let l of m){let z=nt(l),A=R(z.name,z.path);if(z.name===fe||z.type===W||z.layout===W)$(l,"assignment"),e.push(qe),e.push(qe);else{let j=t.get(A),{link:C}=j,{store:D}=C;e.push(O,...g(D.size)),e.push(te,Ue),$(l),e.push(D.opcode,D.align,D.offset)}me()}v(),e.push(H,we),e.push(H,U),e.push(H,we),e.push(oi),e.push(O,4),e.push(ni),r=r+2|0;break}case rt:{let{literal:m,name:l,path:z}=b,A=R(l,z),j=t.get(A);if(b.layout===W){Y(b),r=r+2|0;return}else if(l===fe){let C=[];for(let y of m)C.push({type:rt,literal:y.charCodeAt(0).toString(),name:fe,path:"Flogram"});let D={...b,literal:C};Y(D),r=r+2|0;return}j&&j.type===he?(V(m,A),r=r+2|0):(j||(console.log(b),console.log("NO SHAPE FOUND")),Oe(m,A),r=r+1|0);break}case Zt:{let{array:m,index:l}=b,{name:z}=m,{name:A}=l,j=be.get(z),C=Z.get(z),D=R(C.data.name,C.data.path),y=t.get(D);switch(y.type){case Te:if(!(C.data.contains===W||C.data?.type===W&&C.data?.layout===W||C.data?.name===fe)){let{link:S}=y,{load:B}=S;T(j,j+1|0),$(l),e.push(O,B.size),e.push(Ge),e.push(ee),e.push(B.opcode,B.align,B.offset),r=r+2|0;break}case he:{T(j,j+1|0),$(l),C.data?.type===W&&C.data?.name!==fe&&!C.data?.contains?e.push(O,4):e.push(O,...g($n)),e.push(Ge),e.push(ee),e.push(gt,ze,Ie),T(j,j+1|0),e.push(O,...g(4)),$(l),C.data?.type===W&&C.data?.name!==fe&&!C.data.contains?e.push(O,4):e.push(O,...g($n)),e.push(Ge),e.push(ee),e.push(ee),e.push(gt,ze,Ie),r=r+2|0;break}}break}case Zr:{$(b.value);break}case je:{let{name:m}=b,l=be.get(m),z=Z.get(m),{data:A}=z;switch(A.type){case ct:{A.name===W||A.name===fe?(T(l,l+2|0),r=r+2|0):(T(l,l+1|0),r=r+1|0);break}case W:{if(a==="assignment"&&A.length){let j=w(A,l);e.push(H,U),e.push(O,...g(j))}else T(l,l+2|0),r=r+2|0;break}case Ft:case Wt:{let{name:j,path:C}=A,D=R(j,C),y=t.get(D);switch(A.layout){case W:{T(l,l+2|0),r=r+2|0;break}default:{switch(y.type){case Te:{if(j===fe){a==="assignment"?(e.push(O,0),e.push(Pe,U),e.push(kt,tt),e.push(Qt,tt),e.push(O,4),e.push(te,Ue),e.push(Ae,l),e.push(H,U),e.push(O,4),e.push(Ge),e.push(ee),e.push(gt,ze,Ie),e.push(Ye,ze,Ie),e.push(H,U),e.push(O,1),e.push(ee),e.push(Pe,U),e.push(te,Gn),e.push(H,U),e.push(Ae,l+1),e.push(Qs),e.push(Ut,1),e.push(es,0),e.push(en),e.push(en),e.push(H,U),e.push(Ae,l+1)):(T(l,l+2|0),r=r+2|0);break}else T(l,l+1|0);break}case et:{T(l,l+1|0),r=r+1|0;break}case he:{T(l,l+2|0),r=r+2|0;break}}break}}break}}break}case at:{let{value:m,trail:l}=b,z=m.name||m.link||m.value,A,j=Z.get(z);if(j){let{data:ue}=j,ve=R(ue.name,ue.path);A=t.get(ve)}else{let ue=nt(m);A=t.get(R(ue.data?.name,ue.data?.path))}let{indivisibles:C}=A,{mapTrail:D}=C,y=JSON.parse(JSON.stringify(l)),S=D.get(l[0]),{address:B}=S,J=[B],L=A;for(;y.length>0;){let ue=y.shift();if(y.length>0){let ve=L.members.get(ue),ke=R(ve.name,ve.path);if(L=t.get(ke),L.indivisibles){let{indivisibles:_e}=L,{mapTrail:ie}=_e,Ve=ie.get(y[0]),{address:Ne}=Ve;J.push(Ne)}continue}L=L.members.get(ue)}let oe=R(L.name,L.path),se=t.get(oe),{link:ae}=se,{load:xe}=ae,Ze=be.get(z);for(e.push(Ae,...g(Ze));J.length>1;){let ue=J.shift();e.push(O,...g(ue)),e.push(ee),e.push(gt,ze,Ie)}e.push(O,...g(J[0])),e.push(ee),L.name===fe||L.type===W||L.layout===W?(e.push(Pe,U),e.push(H,U),e.push(O,4),e.push(ee),e.push(H,U)):e.push(xe.opcode,xe.align,xe.offset);break}}},le=F=>{let{name:b,currentIndex:k}=F;if(k===0)e.push(Lt,be.size+1);else if(e.push(Ae,be.size+1),b==="==")e.push(Qr);else if(b==="!=")e.push(ei);else throw new Error(`Unknown operator ${b} for objects`)},ne=F=>{let{member:b}=F,{isObject:k,index:Y,address:V}=b;if(k){e.push(Ae,...g(Y)),e.push(O,...g(V)),e.push(ee),e.push(Ae,...g(Y)),e.push(O,...g(V+4)),e.push(ee);return}e.push(Ae,...g(Y)),e.push(O,...g(V)),e.push(ee)};for(n(o);p.length>0;){let F=p.shift();switch(F.type){case"call":{Q(F);break}case"value":{pe(F);break}case St:{ne(F);break}case"compare":{le(F);break}}}return r},zt=o=>{let a=(p,_)=>{for(;p<_;)_=_-1|0,e.push(Lt,_)},r=(p,_)=>{switch(_.type){case ct:{_.name===W||_.name===fe?a(p,p+2|0):a(p,p+1|0);break}case fe:{a(p,p+2|0);break}case W:{a(p,p+2|0);break}case Ft:case Wt:{let{name:n,path:i}=_,f=R(n,i),d=t.get(f);switch(n){case fe:{a(p,p+2|0);break}case W:{a(p,p+Number(_.length)|0);break}default:{switch(d.type){case Te:if(n===fe){a(p,p+2|0);break}case et:{a(p,p+1|0);break}case he:{let{length:x}=d;a(p,p+2|0);break}}break}}break}}};switch(o.type){case je:{let{name:p}=o,_=be.get(p),n=Z.get(p),{data:i}=n;r(_,i);break}case at:{let{value:p,trail:_}=o,{name:n}=p,i=Z.get(n),{data:f}=i,d=R(f.name,f.path),x=t.get(d),{indivisibles:Q}=x,{mapTrail:pe}=Q,le=_.join("."),ne=JSON.parse(JSON.stringify(_)),F=pe.get(le),{index:b}=F,k=x;for(;ne.length>0;){let V=ne.shift();k=k.members.get(V)}let Y=be.get(n);k.type==W||k.type==fe?a(Y+b|0,Y+b+2|0):a(Y+b|0,Y+b+1|0);break}}},ps=(o,a)=>{let{array:r,index:p}=o,_=0,n=be.get(r.name),i=()=>{e.push(Ae,n)},f=Z.get(r.name),{data:d}=f,{name:x,path:Q,segment:pe}=d,le=R(x,Q),ne=t.get(le);switch(ne.type){case Te:{i(),$(p);let{link:F}=ne,{store:b}=F;e.push(O,b.size),e.push(Ge),e.push(ee),$(a),e.push(b.opcode,b.align,b.offset),_=_+4|0;break}case he:{let F=null,b=0;if(a.type===je){let{name:T}=a;F=Z.get(T),b=be.get(T)}let k=0,Y=()=>{},V=(T,re)=>{i();let{index:m}=re;e.push(Ae,b+m|0);let{link:l}=T,{store:z}=l;e.push(z.opcode,z.align,z.offset+k|0),_=_+1|0,k=k+z.size|0},I=()=>{},{indivisibles:w}=ne,{mapTrail:Oe}=w;for(let T of Oe.values()){if(T.type===ct){I();continue}let{data:re}=T,{name:m,path:l}=re,z=R(m,l),A=t.get(z);switch(A.type){case Te:{V(A,T);break}case et:{Y();break}}}break}}return _},ls=(o,a)=>{let{value:r,trail:p}=o,{name:_}=r,n=Z.get(_),{data:i}=n,f=R(i.name,i.path),d=t.get(f),{indivisibles:x}=d,{mapTrail:Q}=x,pe=p.join("."),le=JSON.parse(JSON.stringify(p)),ne=Q.get(pe),{address:F}=ne,b=d;for(;le.length>0;){let V=le.shift();if(le.length>0){let I=b.members.get(V),w=R(I.name,I.path);b=t.get(w);continue}b=b.members.get(V)}let k=R(b.name,b.path),Y=t.get(k);switch(Y.type){case Te:{let{link:V}=Y,{store:I}=V,w=be.get(_);e.push(Ae,...g(w)),e.push(O,...g(F)),e.push(ee),$(a),e.push(I.opcode,I.align,I.offset);break}}},us=(o,a)=>{let{link:r}=o,p=0,_=Be(r),n=Z.get(_),{data:i}=n,{name:f,path:d,segment:x}=i,Q=R(f,d),pe=t.get(Q);switch(pe.type){case Te:{$(r),$(a);let{link:le}=pe,{store:ne}=le;e.push(ne.opcode,ne.align,ne.offset),p=p+1|0;break}case he:{let le=null,ne=0,F=(T,re,m="")=>{let l=m?`${m}.${T.name}`:T.name,z=re.get(l);if(z){let{data:A}=z,j=R(A.name,A.path),C=t.get(j),{store:D}=C.link;$(r),e.push(O,...g(z.address)),e.push(ee),$(T.value),e.push(D.opcode,D.align,D.offset)}else if(T.value&&T.value.literal)for(let A of T.value.literal)F(A,re,l)};if(a.type===je){let{name:T}=a;if(ne=be.get(T),o.link.name.startsWith(St)){let re=be.get(o.link.name),{name:m,path:l}=Z.get(T),z=R(m,l),A=t.get(z),{indivisibles:j}=A,{mapTrail:C}=j;for(let D of C){let{data:y}=D,S=R(y.name,y.path),B=t.get(S),{load:J,store:L}=B.link;e.push(O,...g(re)),e.push(O,...g(D.address)),e.push(ee),e.push(O,...g(ne)),e.push(O,...g(D.address)),e.push(ee),e.push(J.opcode,J.align,J.offset),e.push(L.opcode,L.align,L.offset)}return}return $(r),e.push(Ae,...g(ne)),e.push(Ye,ze,Ie),$(r),e.push(O,...g(4)),e.push(ee),e.push(Ae,...g(ne+1|0)),e.push(Ye,ze,Ie),p=p+2|0,p}let{literal:b,name:k,path:Y}=a,V=R(k,Y),I=t.get(V),{indivisibles:w}=I,{mapTrail:Oe}=w;for(let T of b)F(T,Oe)}}return p},fs=(o,a)=>{let{link:r}=a,p=0,_=ne=>{let F=Array.from(ne.members.values()).reduce((I,w)=>w?I+1:I,0);v();let{indivisibles:b}=ne,{mapTrail:k}=b,Y=(I,w)=>{let{store:Oe,load:T}=I.link,{address:re}=k.get(w);e.push(O,...g(Oe.size)),e.push(te,Ue),$(r),e.push(O,...g(re)),e.push(ee),e.push(T.opcode,T.align,T.offset),e.push(Oe.opcode,Oe.align,Oe.offset)},V=(I,w)=>{e.push(O,...g(vt)),e.push(te,Ue),e.push(Pe,we);for(let[T,re]of I.members){if(!re)continue;let m=R(re.name,re.path),l=t.get(m);if(l.type===he){G(),V(l,`${w}.${T}`);continue}let z=`${w}.${T}`;Y(l,z)}e.push(H,we),e.push(H,we),e.push(O,...g(vt)),e.push(ee),e.push(Ye,ze,Ie);let Oe=Array.from(I.members.values()).reduce((T,re)=>re?T+1:T,0);e.push(H,we),e.push(O,...g(li)),e.push(ee),e.push(O,...g(Oe)),e.push(Ye,ze,Ie),de()};for(let[I,w]of ne.members){if(!w)continue;let Oe=R(w.name,w.path),T=t.get(Oe);if(T.type===he){V(T,I);continue}Y(T,I)}e.push(H,U),e.push(O,...g(F))},n=Be(r),i=Z.get(n),{data:f}=i,{name:d,path:x,segment:Q}=f,pe=R(d,x),le=t.get(pe);switch(le.type){case Te:case he:{if(o.type===je)return _(le),zt(o),p;break}}return p},Es=(o,a,r)=>{let p=t.get(o),_=i=>{switch(i.type){case je:{let{name:f}=i,d=be.get(f);e.push(Ae,d);break}case rt:{let{literal:f}=i,d=p.type===Te?f:p.evaluate(f),x=g(d);e.push(O,...x);break}}},n=()=>{switch(p.type){case et:{e.push(Mn),e.push(Ut,0);break}case Te:{e.push(Mn),e.push(Ut,0);break}}};switch(p.type){case et:{_(a),_(r),n();break}case Te:{_(a),_(r),n();break}}},ge=[],Je=o=>{let a={type:Ln,statement:o};ge.unshift(a)};ge.unshift({type:ft});let wt=(o,a)=>{if(o.members)for(let[r,p]of o.members.entries()){let _=R(p?.name,p?.path),n=t.get(_);if(n&&n.type===he){let i=wt(n,_,a);i&&u.push(i)}}return o.members&&o.members.has(vn)?a:null},u=[];Et.forEach(o=>{let a=R(o.data.name,o.data.path),r=t.get(a);if(r&&r.type===he){let p=wt(r,a);p&&u.push(p)}});let h=u.map(o=>({type:Dn,expression:{type:dt,name:vn,path:o,inputs:[]}}));for(let o of h)Je(o);var P=Yt.length-1|0;for(let o=P;o>=0;o=o-1|0){let a=Yt[o];Je(a)}let M=o=>{let{target:a,source:r}=o;if(a.type===Jr){us(a,r);return}if(a.type===Kr){ps(a,r);return}if(a.type===at){ls(a,r);return}if(r.type===Dt){let p=Z.get(a.name),{data:_}=p;if(_.path!=="Flogram"){let n=R(_.name,_.path);if(t.get(n).type===he){fs(a,r);return}}}$(r,"assignment"),zt(a)},X=o=>{let{statements:a}=o;e.push(kt,tt),e.push(Qt,tt);let r={type:ft,layout:Jt};ge.unshift(r),ge.unshift(r),ge.unshift({type:kn});var p=a.length-1|0;for(let _=p;_>=0;_=_-1|0){let n=a[_];Je(n)}},K=o=>{let{statements:a,condition:r}=o;e.push(kt,tt),e.push(Qt,tt);let p={type:ft,layout:Jt};ge.unshift(p),ge.unshift(p),ge.unshift({type:Yn,condition:r});var _=a.length-1|0;for(let n=_;n>=0;n=n-1|0){let i=a[n];Je(i)}},ce=o=>{let{statements:a,collection:r,index:p,iterator:_}=o;N(o),e.push(O,0),p?e.push(Lt,be.get(p)):e.push(Pe,U),e.push(kt,tt),e.push(Qt,tt);let n={type:ft,layout:Jt};ge.unshift(n),ge.unshift(n),ge.unshift({type:Bn,index:p});var i=a.length-1|0;for(let f=i;f>=0;f=f-1|0){let d=a[f];Je(d)}ge.unshift({type:wn,collection:r,iterator:_,index:p})},q=o=>{e.push(es,2)},Ee=o=>{let{branches:a}=o;ge.unshift({type:ft});for(let r=a.length-1;r>=0;r--){let p=a[r];switch(p.type){case Gr:{let{statements:_}=p,n=_.length;for(let f=n-1;f>=0;f--){let d=_[f];Je(d)}let i=_.find(f=>f.type===qs);ge.unshift({type:Zs,stop:i}),$(p.values[0]);break}case Hr:{let{statements:_}=p,n=_.length;for(let i=n-1;i>=0;i--){let f=_[i];Je(f)}ge.unshift({type:Un});break}}}},ye=o=>{let a=o,{branches:r,values:p}=a;if(r.length>0&&p.length===0)return Ee(o);e.push(kt,tt);let n={type:ft};ge.unshift(n);let i=[];for(let d of p)switch(d.type){case je:{let{name:x}=d,Q=Z.get(x),{data:pe}=Q,{name:le,path:ne}=pe,F=R(le,ne);i.push(F);break}}var f=r.length-1|0;for(let d=f;d>=0;d=d-1|0){let x=r[d],Q={type:Fn,branch:x,condition:a,commonKeys:i};ge.unshift(Q)}},De=o=>{let{expression:a}=o;var p=$(a)|0;for(let _=0;_<p;_=_+1|0)e.push(qe)},Fe=o=>{let{value:a}=o;$(a),e.push(te,ci),e.push(O,0),zt(a)},ot=o=>{let{values:a}=o;for(let r of a)$(r);e.push(ti)},We=o=>{e.push(en)},hs=o=>{e.push(12,0)},bs=o=>{e.push(si)},ht=o=>{o.stop?(e.push(Kn),e.push(mt)):(e.push(Kn),e.push(tt))},Os=o=>{let{branch:a,commonKeys:r,condition:p}=o,{values:_}=a,{values:n}=p;var i=r.length|0;for(let x=0;x<i;x=x+1|0){let Q=r[x],pe=_[x],le=n[x];Es(Q,pe,le)}let{statements:f}=a;var d=f.length-1|0;for(let x=d;x>=0;x=x-1|0){let Q=f[x];Je(Q)}},Nt=o=>{let{condition:a}=o;$(a),e.push(O,0),e.push(Qs),e.push(Ut,1),e.push(es,0)},jt=o=>{let{collection:a,iterator:r,index:p}=o;$(a);let _=be.get(p);p?e.push(Ae,_):e.push(H,U),e.push(Qs),e.push(Ut,1),e.push(qe);let n=Object.freeze({type:Zt,array:a,index:{type:je,name:p}}),i=Object.freeze({type:je,name:r}),f=Object.freeze({type:Br,target:i,source:n});Je(f)},_s=o=>{let{index:a}=o,r=be.get(a);a?e.push(Ae,r):e.push(H,U),e.push(O,1),e.push(ee),a?e.push(Lt,r):e.push(Pe,U),e.push(es,0)},Bt=o=>{let{statement:a}=o;switch(a.type){case"assign":{M(a);break}case Zs:{ye(a);break}case Jt:{X(a);break}case Xr:{K(a);break}case $r:{ce(a);break}case Wr:{q(a);break}case Dn:{De(a);break}case qr:{Fe(a);break}case qs:{ot(a);break}}};for(;ge.length>0;){let o=ge.shift();switch(o.type){case ft:{We(o);break}case kn:{hs(o);break}case Un:{bs(o);break}case Zs:{ht(o);break}case Fn:{Os(o);break}case Ln:{Bt(o);break}case Yn:{Nt(o);break}case wn:{jt(o);break}case Bn:{_s(o);break}default:break}}return e}var{HEX_ENCODE:sn,LEB128_ENCODE:st}=_t,{TYPES_ASSIGN:ui,TYPES_ARRAY:lt,TYPES_DATA:ns,TYPES_GENERICS:fi,TYPES_ENUMERATION:Vt,TYPES_EXPRESSION:Ei,TYPES_LINK:os,TYPES_LOCAL:xt,TYPES_OBJECT:Tt,TYPES_PROCEDURE:nn,TYPES_RETURN:hi,TYPES_SELECT:bi,TYPES_MEMBER:Oi,TYPES_STORE:on,TYPES_LITERAL:Zn,TYPES_LINK_TO:cs,TYPES_VALUE_AT:as,TYPES_SELF:qn,TYPES_NATIVE:yt,TYPES_STRING:It}=Mt,cn="",Le=(s,t)=>`${t}.${s}`,_i=s=>[">","<",">=","<=","!=","=="].includes(s),di=s=>["FP64","I64","U64","FP32","I32","U32","I16","U16","I8","U8","Bool"].includes(s),an=48,mi=Object.freeze([0,127]),gi=Object.freeze({}),xi=Object.freeze([127]),Qn=0;var Ti=2;var yi=10,Ii=7,zi=3,Ni=2,ji=1,Pi=6,ut=96,rs=127,rn=Object.freeze([7,105,109,112,111,114,116,115]),Ai=Object.freeze([6,109,101,109,111,114,121]),Ri=0;var Ci=65,Xe=new Uint8Array(8),Si=Object.freeze([0,97,115,109]),Di=Object.freeze([1,0,0,0]),Fi=(s,t)=>{t=t??gi;let c={},{data:E,code:N}=s,e=N.filter(u=>!u.description.generics||u.description.generics.length===0),v=new Map,G=new Map,de=u=>{let h=0;for(let P of u){let{data:M}=P;switch(M.type){case"Maybe":case ns:{let{name:X,path:K}=M,ce=Le(X,K),q=v.get(ce);if(q)switch(q.type){case yt:if(X===It){h=h+2|0;break}case Vt:{h=h+1|0;break}case Tt:{let{length:Ee}=q;h=h+2|0;break}}break}case os:{M.name===lt||M.name===It?h=h+2|0:h=h+1|0;break}case lt:{h=h+2|0;break}}}return h},Re=u=>{let{labels:h}=u,P=new Map;var M=h.length|0;for(let q=0;q<M;q=q+1|0){let{name:Ee}=h[q];P.set(Ee,q)}return Object.freeze({type:Vt,encode:q=>{let Ee=P.get(q);return typeof Ee>"u"?xi:st(Ee)},evaluate:q=>P.get(q),opcode:Ci,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})})},me=u=>{let h=[],P=[],M=0,X=()=>{let n=Object.freeze({type:"back"});h.unshift(n)},K=n=>{let i={type:ns,data:n};h.unshift(i)},ce=n=>{let i={type:"name",name:n};h.unshift(i)},q=(n,i)=>{i&&(X(),K(i),ce(n))},Ee=n=>E.find(i=>i.name===n),ye=(n,i)=>i.find(f=>f.name===n),De=(n,{inputs:i})=>i.find(f=>f.name===n),Fe=(n,i)=>{let f=n;for(let d of i){let x=ye(d,f.description.members),Q=Ee(x.data.name);if(Q&&Q.type===Tt)f=Q;else return x}return null},ot=(n,i)=>{let f=n.trail,d=ye(f[0],i.members);if(!d)return null;if(f.length===1)return d.data;let x=Ee(d.data.name);return Fe(x,f.slice(1)).data},We=(n,i,f,d)=>{if(De(i,f.description))return;f.description.self.push(n);let x=Object.seal({name:i,data:{...ot({trail:n.trail||n.value?.trail||n.link?.trail||[]},d),segment:"heap"}});n.type!==cs&&(x.data.type=os),f.description.inputs.push(x)},hs=(n,i,f)=>{let d=n.inputs.map(x=>ht(x,i,f));return{...n,inputs:d}},bs=(n,i,f)=>{if(!(n.value.link===qn||n.value.value===qn))return console.log("THIS IS NOT HANDLED; HANGING"),n;let d=`${n.type}_${n.trail.join("_")}`;if(We(n,d,i,f),n.value.value)return{type:cs,value:d};if(n.value.link)return{type:as,link:d}},ht=(n,i,f,d="")=>{switch(n.type){case xt:case Zn:return n;case Oi:{let x=`${n.type}_${n.trail.join("_")}`;return We(n,x,i,f),d==="target"?{type:on,link:{type:xt,name:x}}:{type:as,link:{type:xt,name:x}}}case cs:{if(n.value.type===Zn)return n.value;{let x=`${n.value.type}_${n.value.trail.join("_")}`;return We(n,x,i,f),{type:cs,value:{type:xt,name:x}}}}case as:{let x=`${n.link.type}_${n.link.trail.join("_")}`;return We(n,x,i,f),{type:as,link:{type:xt,name:x}}}case on:{let x=`${n.link.type}_${n.link.trail.join("_")}`;return We(n,x,i,f),{type:on,link:{type:xt,name:x}}}case bi:return bs(n,i,f);case Ei:return hs(n,i,f);default:return console.log("THIS IS NOT HANDLED; HANGING"),console.log(n),n}},Os=(n,i)=>{let f=JSON.parse(JSON.stringify(n));f.description.self=[];for(let d of f.description.statements)d.type===ui?(d.target=ht(d.target,f,i,"target"),d.source=ht(d.source,f,i)):d.type===hi&&(d.values=d.values.map(x=>ht(x,f,i)));e.push(f)},{members:Nt}=u,jt=new Map;for(let n of Nt){let{name:i,data:f,value:d}=n;jt.set(i,f),d&&jt.set(i,{...f,value:d})}var _s=Nt.length-1|0;for(let n=_s;n>=0;n=n-1|0){let i=Nt[n],{name:f,data:d}=i;if(i.type&&i.type===nn){Os(i,u);continue}q(f,d)}let Bt=new Map,o=new Map,a=0;for(;h.length>0;){let n=h.shift();switch(n.type){case"back":{P.pop();break}case ns:{let{data:i}=n,f=()=>{let le=P.join("."),ne=Le(i.name,i.path),F=v.get(ne),{link:b}=F,k=Object.freeze({data:i,index:a,address:M,trail:le});i.type===lt||i.layout===lt||i.name===It?M+=8:M+=b?.load.size||8,Bt.set(le,k),o.set(a,k),i.type===lt||i.name===It||i.layout===lt?a=a+2|0:a=a+1|0};if(i.type===os){f();break}let{name:d,path:x}=i,Q=Le(d,x);switch(v.get(Q).type){case yt:case Vt:{f();break}case Tt:{f();break}}break}case"name":{let{name:i}=n;P.push(i);break}}}let r=a|0,p=Object.freeze({mapTrail:Bt,mapIndex:o});return{type:Tt,length:r,members:jt,indivisibles:p}},Qe={};for(let u of E){let{path:h}=u;switch(u.type){case yt:{let{name:P,path:M}=u,X=Le(P,M);if(Object.hasOwn(pt,X)){let K=pt[X];v.set(X,K);continue}break}case"import":{if(Object.hasOwn(pt,h)){let P=pt[h];v.set(h,P);continue}break}case fi:{let{name:P,path:M}=u,X=Le(P,M),K=pt["Flogram.FP32"];v.set(X,K);break}case Vt:{let{name:P,path:M,description:X}=u,K=Le(P,M),ce=Re(X);v.set(K,ce);break}case Tt:{let{name:P,path:M,description:X}=u,{generics:K}=X,ce=Le(P,M);if(!K||K.length===0){let q=me(X);v.set(ce,q)}break}}}c.structures=Qe;let $e=0;t.memory&&($e+=t.draws?7:6);let Et=(u,h)=>{let P=G.get(u);if(typeof P>"u"){G.set(u,[h]);return}(P.length==0||P.length>0&&P[0].body!==h.body)&&G.set(u,[h,...P])},Yt=u=>{let{name:h,path:P}=u,M=Le(h,P);switch(P==="Flogram"&&(di(h)?M=Le(u.description.inputs[0]?.data?.name?.toLowerCase()+"."+Me(h),P):u.description.outputs&&u.description.outputs.length>=1&&!_i(u.name)?u.description.outputs[0]?.data?.name&&(M=Le(u.description.outputs[0]?.data?.name?.toLowerCase()+"."+Me(h,u.description.inputs?.length),P)):(Ct.includes(u.description.inputs[1]?.data?.name?.toUpperCase())&&(M=Le(u.description.inputs[1]?.data?.name?.toUpperCase()+"."+Me(h),P),cn=u.description.inputs[1]?.data?.name?.toUpperCase()),cn&&(M=Le(cn.toLowerCase()+"."+Me(h),P)))),u.type){case yt:{if(Object.hasOwn(Rt,M)){let X=Rt[M];Et(M,X);return}break}case nn:{let{description:X}=u,{inputs:K,outputs:ce}=X,q=Le(h,P),Ee={type:"artificial",index:$e,procedure:u,lengths:Object.freeze({inputs:de(K),outputs:de(ce)})};Et(q,Ee);break}}$e=$e+1|0},be=[],Z=[];for(let u of e){if(u.description.generics?.length>0)continue;let{description:h}=u,{inputs:P,outputs:M}=h,X=[...P,...M];if(!(u.type===yt&&X.some(K=>!Ct.includes(K.data.name))))switch(Yt(u),u.type){case"import":{let{path:K}=u;if(Object.hasOwn(Rt,K))continue;be.push(u);break}case nn:{Z.push(u);break}}}let Ce=u=>{let h=0,P=[];for(let M of u){let X=()=>{P.push(rs),h=h+1|0},K=De=>{let{identity:Fe}=De;P.push(Fe),h=h+1|0},ce=()=>{P.push(rs),h=h+1|0},q=()=>{P.push(rs),h=h+1|0,P.push(rs),h=h+1|0},{name:Ee,data:ye}=M;switch(ye.type){case"Maybe":case ns:{let{name:De,path:Fe}=ye,ot=Le(De,Fe),We=v.get(ot);if(!We)K(pt["Flogram.FP32"]);else switch(We.type){case yt:{De===It?q():K(We);break}case Vt:{X();break}case Tt:{q();break}}break}case os:{ye.name===lt||ye.name===It?q():ce();break}case lt:{q();break}}}return[h,P]},Se=(u,h)=>{let P=h.length|0,M=st(P);h.unshift(u,...M)},pn=()=>{let u=[],h=0,P=[...be,...Z];t.memory&&(h=t.draws?7:6,u.push(ut,1,127,1,127),u.push(ut,1,127,0),u.push(ut,0,0),u.push(ut,2,127,127,0),u.push(ut,0,2,127,127),u.push(ut,0,2,127,127),t.draws&&u.push(ut,1,127,0));for(let K of P){let{description:ce}=K,{inputs:q,outputs:Ee}=ce,[ye,De]=Ce(q),[Fe,ot]=Ce(Ee);u.push(ut,ye,...De,Fe,...ot)}let M=P.length|0,X=st(M+h);return u.unshift(...X),Se(ji,u),u},is=()=>{let u=[];return u.push(2),u.push(127,1),u.push(65,0,11),u.push(127,1),u.push(65,0,11),Se(Pi,u),u},Be=0,nt=()=>{let u=[],h=0,P={};if(t.memory){let K=Ee=>{let ye=[...Ee].map(De=>De.charCodeAt(0));return[ye.length,...ye]},ce=[K("alloc"),K("dealloc"),K("merge"),K("save"),K("undo"),K("undoPenultimate")];t.draws&&ce.push(K("draw"));let q=t.draws?7:6;for(let Ee=0;Ee<q;Ee++){Xe.fill(an),sn(h,Xe);let ye=h|0;u.push(...rn,...ce[Ee],Qn,ye),h=h+1|0}}for(let K of be){let{path:ce}=K;Xe.fill(an),sn(h,Xe);let q=String.fromCodePoint(...Xe);P[q]={path:K.path,description:K.description};let Ee=h|0;u.push(...rn,Xe.length|0,...Xe,Qn,Ee),h=h+1|0}Be=h|0,t.memory&&(u.push(...rn,...Ai,Ti,...mi),h=h+1|0);let M=h|0,X=st(M);return u.unshift(...X),Se(Ni,u),c.imports=P,u},$=()=>{let u=[];var h=Z.length|0;for(let X=0;X<h;X=X+1|0){let K=X|0,ce=Be+K|0,q=st(ce);u.push(...q)}let P=Z.length|0,M=st(P);return u.unshift(...M),Se(zi,u),u},zt=()=>{let u=[],h=0,P={};var M=Z.length|0;for(let ce=0;ce<M;ce=ce+1|0){let q=ce+Be|0,Ee=st(q);Xe.fill(an),sn(h,Xe);let{name:ye,path:De,description:Fe}=Z[ce];Fe={inputs:Fe.inputs,outputs:Fe.outputs};let ot=String.fromCodePoint(...Xe);P[ot]={name:ye,path:De,description:Fe},u.push(Xe.length|0,...Xe,Ri,...Ee),h=h+1|0}let X=h|0,K=st(X);return u.unshift(...K),Se(Ii,u),c.procedures=P,u},ps=()=>{let u=[];for(let M of Z){let X=ss(M,v,G,e),K=X.length|0,ce=st(K);u.push(...ce,...X)}let h=Z.length|0,P=st(h);return u.unshift(...P),Se(yi,u),u},ls=pn(),us=is(),fs=nt(),Es=$(),ge=zt(),Je=ps(),wt=new Uint8Array([...Si,...Di,...ls,...fs,...Es,...us,...ge,...Je]);return[c,wt]},ki=Object.freeze({compile:Fi}),mp=ki;export{mp as default};
