var Ps="as",Cs="=",Ss="break",Ds="else",Fs="enum",Us="export",ks="if",Ls="import",vs="->",Vs="is",Ys="loop",ws="mut",Ms="native",Bs="object",Ks="fn",Gs="return",Hs="self",Xs="template",$s=Object.freeze({ALIAS:Ps,ASSIGN:Cs,BREAK:Ss,ELSE:Ds,ENUMERATION:Fs,EXPORT:Us,IF:ks,IMPORT:Ls,INTO:vs,IS:Vs,LOOP:Ys,MUTABLE:ws,NATIVE:Ms,OBJECT:Bs,PROCEDURE:Ks,RETURN:Gs,SELF:Hs,TEMPLATE:Xs}),Ko=$s;var Js="assign",qs="array_assignment",Zs="branch-match",Qs="branch-default",Ws="condition",en="loop",tn="data",on="generics",sn="enumeration",nn="expression",cn="instance",an="Link",rn="local",ln="object",pn="procedure",un="return",fn="select",En="member",bn="store",On="break",_n="literal",hn="array_access",dn="valueLink",mn="linkValue",gn="self",xn="procedure-call",Tn="Maybe",yn="native",In="move",zn="String",Nn="Array",jn="import",An="library",Rn="constructor",Pn="destructor",Cn="free",Sn="block-end",Dn="default-block",Fn="continue",Un="branch",kn="statement",Ln="draw",vn="size",Vn=Object.freeze({TYPES_ASSIGN:Js,TYPES_ARRAY:Nn,TYPES_ARRAY_ASSIGNMENT:qs,TYPES_BRANCH_MATCH:Zs,TYPES_BRANCH_DEFAULT:Qs,TYPES_CONDITION:Ws,TYPES_LOOP:en,TYPES_DATA:tn,TYPES_GENERICS:on,TYPES_ENUMERATION:sn,TYPES_EXPRESSION:nn,TYPES_INSTANCE:cn,TYPES_LINK:an,TYPES_IMPORT:jn,TYPES_LOCAL:rn,TYPES_OBJECT:ln,TYPES_PROCEDURE:pn,TYPES_RETURN:un,TYPES_SELECT:fn,TYPES_MEMBER:En,TYPES_STORE:bn,TYPES_BREAK:On,TYPES_LITERAL:_n,TYPES_ARRAY_ACCESS:hn,TYPES_LINK_TO:dn,TYPES_VALUE_AT:mn,TYPES_SELF:gn,TYPES_LIBRARY:An,TYPES_DROP:xn,TYPES_MAYBE:Tn,TYPES_NATIVE:yn,TYPES_MOVE:In,TYPES_STRING:zn,TYPES_CONSTRUCTOR:Rn,TYPES_FREE:Cn,TYPES_DEFAULT_BLOCK:Dn,TYPES_BLOCK_END:Sn,TYPES_CONTINUE:Fn,TYPES_BRANCH:Un,TYPES_STATEMENT:kn,TYPES_DESTRUCTOR:Pn,TYPES_DRAW:Ln,TYPES_SIZE:vn}),Qt=Vn;var Yn=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Go=Yn;var wn=Object.freeze([]),Mn=Object.freeze({}),Bn="",Kn="	",Gn=`
`,Hn="UTF-8",Nt=Qt,Xn=Object.freeze({EMPTY_ARRAY:wn,EMPTY_OBJECT:Mn,EMPTY_STRING:Bn,HORIZONTAL_TAB:Kn,LINE_BREAK:Gn,UNICODE_TEXT:Hn,Codes:Go,Keys:Ko,Types:Qt}),Ho=Xn;var{EMPTY_STRING:$n,UNICODE_TEXT:oo}=Ho,Jn=44,qn=48,Zn=57,Qn=46,Wn=45,ec=43,tc=65,oc=90,sc=-1,nc=1,cc=new TextDecoder(oo),ac=new TextEncoder,rc=(o,t,s=0,f=o.length|0,e=0,w=t.length|0)=>{for(e=e|0,s=s|0,w=w|0,f=f|0;;){let F=s>=f,$=e>=w;if(F||$)break;let fe=o[s],Ie=t[e];if(s=s+1|0,e=e+1|0,fe<Ie)return sc;if(fe>Ie)return nc}return 0},ic=(o,t,s=0,f=o.length|0,e=0,w=t.length|0)=>{for(e=e|0,s=s|0,w=w|0,f=f|0;;){let F=e>=w,$=s>=f;if(F||$)break;t[e]=o[s],e=e+1|0,s=s+1|0}},lc=(o,t,s=0,f=o.length|0,e=0,w=t.length|0)=>{s=s|0,e=e|0,f=f|0,w=w|0;let F=f-s|0,$=w-e|0;if(F!==$)return!1;for(;;){let _e=s>=f,fe=e>=w;if(_e||fe)break;let Ye=o[s],Pe=t[e];if(s=s+1|0,e=e+1|0,Ye!==Pe)return!1}return!0},pc=o=>{o=o>>>0;let t=0,s=0;for(;s=(s<<1|1)>>>0,!(s>o);)t=t+1|0;return t},Jo=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),to=(o,t,s,f)=>{for(o=o>>>0,f=f??t.length|0,s=s|0,f=f|0;o>0&&f>s;)f=f-1|0,t[f]=Jo[o&15],o=o>>>4},uc=(o,t,s,f)=>{let e=s|0,w=s+f|0;if(f===0)return!1;let F=t[e];for((F===ec||F===Wn)&&(e=e+1|0);e<w;){let $=t[e];if(e=e+1|0,!(qn<=$&&$<=Zn||(Qn===$||Jn===$)))return!1}return!0},fc=o=>{let t=o>=tc,s=o<=oc;return t&&s},At=128,Rt=127,qo=-1,at=64,so=o=>{o=o|0;let t=[];for(;;){let s=o&Rt;o=o>>7;let f=o===0,e=(s&at)===0,w=f&&e,F=o===-1,$=(s&at)!==0;if(w||F&&$){t.push(s);break}s=s|At,t.push(s)}return t},Ec=o=>{let t=[],s=!0;for(;s;){let f=o&Rt;o>>=7,o===0&&!(f&at)||o===-1&&f&at?s=!1:f|=At,t.push(f)}return t},Zo=(o,t)=>{t=t|0;let s=0,f=0;for(;;){let e=o[t]|0;t=t+1|0;let w=(e&Rt)<<f;if(f=f+7|0,s=s|w,(e&At)===0){let $=(e&at)!==0,_e=f<32;if($&&_e){let Ie=qo<<f;s=s|Ie}break}}return s},bc=(o,t)=>{t=t|0;let s=0,f=0;for(;;){let e=o[t]|0;t=t+1|0;let w=(e&Rt)<<f;if(f=f+7|0,s=s|w,!(e&At)){if(e&at){let F=qo<<f;s=s|F}break}}return s},Oc=o=>cc.decode(o),_c=o=>ac.encode(o),hc=(o=$n)=>{let t=o.length|0,s=so(t),f=Buffer.from(o,oo);return Object.freeze([...s,...f])},dc=(o,t)=>{t=t|0;let s=Zo(o,t),f=so(s).length;return t=t+f|0,o.subarray(t,t+s|0).toString(oo)},mc=58,gc=46,ht=32,Wt=48,xc=67,Ze=new Uint8Array(xc),Xo=Ze.subarray(0,8),jt=Ze.subarray(10,49),$o=Ze.subarray(51,68),eo=16,Tc=2;Ze[8]=mc;Ze[9]=ht;Ze[49]=ht;Ze[50]=ht;var yc=(o,t)=>{t=t??console.log;let s=32,f=126,e=o.length|0,w=0;for(;e>0;){Xo.fill(Wt),to(w,Xo),jt.fill(ht),$o.fill(ht);let F=e>=eo?eo:e;e=e-eo|0;let $=0,_e=0;for(let Ie=1;Ie<=F;Ie=Ie+1|0){let Ye=o[w]&255;jt[$+0|0]=Wt,jt[$+1|0]=Wt,to(Ye,jt,$,$+2|0);let Pe=gc;s<=Ye&&Ye<=f&&(Pe=Ye),$o[_e]=Pe,w=w+1|0,$=$+2|0,_e=_e+1|0,Ie%Tc===0&&($=$+1|0)}let fe=String.fromCodePoint(...Ze);t(fe)}},Ic=function*(o,t){let s=o.length|0,f=t.length|0,e=0;for(;e<s&&e<f;){let w=o[e],F=t[e];yield[w,F],e=e+1|0}},zc=function*(o,t,s){let f=o.length|0,e=t.length|0,w=s.length|0,F=0;for(;F<f&&F<e&&F<w;){let $=o[F],_e=t[F],fe=s[F];yield[$,_e,fe],F=F+1|0}},Nc=Object.freeze({ARRAY_COMPARE:rc,ARRAY_COPY:ic,ARRAY_EQUAL:lc,BIT_DEPTH:pc,HEX_DIGITS:Jo,HEX_ENCODE:to,IS_NUMBER:uc,IS_UPPERCASE:fc,LEB128_DECODE:Zo,LEB128_DECODE_SIGNED:bc,LEB128_ENCODE:so,LEB128_ENCODE_SIGNED:Ec,UTF8_DECODE:Oc,UTF8_ENCODE:_c,WASM_STRING_ENCODE:hc,WASM_STRING_DECODE:dc,XXD_DUMP_HEX:yc,ZIP2:Ic,ZIP3:zc}),rt=Nc;var De=(o,t=2)=>{let s="";switch(o){case"+":s="add";break;case"-":s=t===2?"sub":"neg";break;case"*":s="mul";break;case"/":s="div";break;case"%":s="rem";break;case"==":s="eq";break;case">":s="gt";break;case"<":s="lt";break;case">=":s="ge";break;case"<=":s="le";break;case"!=":s="ne";break;case"&":s="and";break;case"|":s="or";break;case"^":s="xor";break;case"not":s="not";break;case"I32":s="toi32";break;case"U32":s="tou32";break;case"I64":s="toi64";break;case"U64":s="tou64";break;case"FP64":s="tofp64";break;case"FP32":s="tofp32";break}return s};var jc=Object.freeze({type:"native",body:Object.freeze([160]),lengths:Object.freeze({inputs:2,outputs:1})}),Ac=Object.freeze({type:"native",body:Object.freeze([163]),lengths:Object.freeze({inputs:2,outputs:1})}),Rc=Object.freeze({type:"native",body:Object.freeze([162]),lengths:Object.freeze({inputs:2,outputs:1})}),Pc=Object.freeze({type:"native",body:Object.freeze([68,0,0,0,0,0,0,240,191,162]),lengths:Object.freeze({inputs:1,outputs:1})}),Cc=Object.freeze({type:"native",body:Object.freeze([161]),lengths:Object.freeze({inputs:2,outputs:1})}),Sc=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),Dc=Object.freeze({type:"native",body:Object.freeze([128]),lengths:Object.freeze({inputs:2,outputs:1})}),Fc=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),Uc=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:1,outputs:1})}),kc=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),Lc=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),vc=Object.freeze({type:"native",body:Object.freeze([127]),lengths:Object.freeze({inputs:2,outputs:1})}),Vc=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),gi=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:2,outputs:1})}),Yc=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),Qo=Object.freeze({type:"native",body:Object.freeze([146]),lengths:Object.freeze({inputs:2,outputs:1})}),Wo=Object.freeze({type:"native",body:Object.freeze([149]),lengths:Object.freeze({inputs:2,outputs:1})}),es=Object.freeze({type:"native",body:Object.freeze([148]),lengths:Object.freeze({inputs:2,outputs:1})}),wc=Object.freeze({type:"native",body:Object.freeze([67,0,0,128,191,148]),lengths:Object.freeze({inputs:2,outputs:1})}),ts=Object.freeze({type:"native",body:Object.freeze([140]),lengths:Object.freeze({inputs:2,outputs:1})}),no=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),co=Object.freeze({type:"native",body:Object.freeze([110]),lengths:Object.freeze({inputs:2,outputs:1})}),ao=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),ro=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),io=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),lo=Object.freeze({type:"native",body:Object.freeze([109]),lengths:Object.freeze({inputs:2,outputs:1})}),po=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),uo=Object.freeze({type:"native",body:Object.freeze([65,1,0,0,0,108]),lengths:Object.freeze({inputs:1,outputs:1})}),fo=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),Mc=Object.freeze({type:"native",body:Object.freeze([130]),lengths:Object.freeze({inputs:2,outputs:1})}),Bc=Object.freeze({type:"native",body:Object.freeze([129]),lengths:Object.freeze({inputs:2,outputs:1})}),Eo=Object.freeze({type:"native",body:Object.freeze([112]),lengths:Object.freeze({inputs:2,outputs:1})}),bo=Object.freeze({type:"native",body:Object.freeze([111]),lengths:Object.freeze({inputs:2,outputs:1})}),Kc=Object.freeze({type:"native",body:Object.freeze([86]),lengths:Object.freeze({inputs:2,outputs:1})}),Gc=Object.freeze({type:"native",body:Object.freeze([85]),lengths:Object.freeze({inputs:2,outputs:1})}),Hc=Object.freeze({type:"native",body:Object.freeze([100]),lengths:Object.freeze({inputs:2,outputs:1})}),Oo=Object.freeze({type:"native",body:Object.freeze([75]),lengths:Object.freeze({inputs:2,outputs:1})}),_o=Object.freeze({type:"native",body:Object.freeze([74]),lengths:Object.freeze({inputs:2,outputs:1})}),Xc=Object.freeze({type:"native",body:Object.freeze([94]),lengths:Object.freeze({inputs:2,outputs:1})}),$c=Object.freeze({type:"native",body:Object.freeze([84]),lengths:Object.freeze({inputs:2,outputs:1})}),Jc=Object.freeze({type:"native",body:Object.freeze([83]),lengths:Object.freeze({inputs:2,outputs:1})}),qc=Object.freeze({type:"native",body:Object.freeze([99]),lengths:Object.freeze({inputs:2,outputs:1})}),ho=Object.freeze({type:"native",body:Object.freeze([73]),lengths:Object.freeze({inputs:2,outputs:1})}),mo=Object.freeze({type:"native",body:Object.freeze([72]),lengths:Object.freeze({inputs:2,outputs:1})}),Zc=Object.freeze({type:"native",body:Object.freeze([93]),lengths:Object.freeze({inputs:2,outputs:1})}),Qc=Object.freeze({type:"native",body:Object.freeze([87]),lengths:Object.freeze({inputs:2,outputs:1})}),Wc=Object.freeze({type:"native",body:Object.freeze([88]),lengths:Object.freeze({inputs:2,outputs:1})}),ea=Object.freeze({type:"native",body:Object.freeze([101]),lengths:Object.freeze({inputs:2,outputs:1})}),go=Object.freeze({type:"native",body:Object.freeze([76]),lengths:Object.freeze({inputs:2,outputs:1})}),xo=Object.freeze({type:"native",body:Object.freeze([77]),lengths:Object.freeze({inputs:2,outputs:1})}),ta=Object.freeze({type:"native",body:Object.freeze([95]),lengths:Object.freeze({inputs:2,outputs:1})}),oa=Object.freeze({type:"native",body:Object.freeze([89]),lengths:Object.freeze({inputs:2,outputs:1})}),sa=Object.freeze({type:"native",body:Object.freeze([90]),lengths:Object.freeze({inputs:2,outputs:1})}),na=Object.freeze({type:"native",body:Object.freeze([102]),lengths:Object.freeze({inputs:2,outputs:1})}),To=Object.freeze({type:"native",body:Object.freeze([78]),lengths:Object.freeze({inputs:2,outputs:1})}),yo=Object.freeze({type:"native",body:Object.freeze([79]),lengths:Object.freeze({inputs:2,outputs:1})}),ca=Object.freeze({type:"native",body:Object.freeze([96]),lengths:Object.freeze({inputs:2,outputs:1})}),aa=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),ra=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),ia=Object.freeze({type:"native",body:Object.freeze([97]),lengths:Object.freeze({inputs:2,outputs:1})}),Io=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),zo=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),la=Object.freeze({type:"native",body:Object.freeze([91]),lengths:Object.freeze({inputs:2,outputs:1})}),pa=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),ua=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),fa=Object.freeze({type:"native",body:Object.freeze([98]),lengths:Object.freeze({inputs:2,outputs:1})}),No=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),jo=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),Ea=Object.freeze({type:"native",body:Object.freeze([92]),lengths:Object.freeze({inputs:2,outputs:1})}),ba=Object.freeze({type:"native",body:Object.freeze([113]),lengths:Object.freeze({inputs:2,outputs:1})}),Oa=Object.freeze({type:"native",body:Object.freeze([114]),lengths:Object.freeze({inputs:2,outputs:1})}),_a=Object.freeze({type:"native",body:Object.freeze([115]),lengths:Object.freeze({inputs:2,outputs:1})}),ha=Object.freeze({type:"native",body:Object.freeze([69]),lengths:Object.freeze({inputs:1,outputs:1})}),os=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),ss=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),da=Object.freeze({type:"native",body:Object.freeze([170]),lengths:Object.freeze({inputs:1,outputs:1})}),ma=Object.freeze({type:"native",body:Object.freeze([171]),lengths:Object.freeze({inputs:1,outputs:1})}),ga=Object.freeze({type:"native",body:Object.freeze([168]),lengths:Object.freeze({inputs:1,outputs:1})}),xa=Object.freeze({type:"native",body:Object.freeze([169]),lengths:Object.freeze({inputs:1,outputs:1})}),ns=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),Pt=Object.freeze({type:"native",body:Object.freeze([193]),lengths:Object.freeze({inputs:1,outputs:1})}),Ct=Object.freeze({type:"native",body:Object.freeze([192]),lengths:Object.freeze({inputs:1,outputs:1})}),Ta=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),ya=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),Ia=Object.freeze({type:"native",body:Object.freeze([176]),lengths:Object.freeze({inputs:1,outputs:1})}),za=Object.freeze({type:"native",body:Object.freeze([177]),lengths:Object.freeze({inputs:1,outputs:1})}),Na=Object.freeze({type:"native",body:Object.freeze([175]),lengths:Object.freeze({inputs:1,outputs:1})}),ja=Object.freeze({type:"native",body:Object.freeze([174]),lengths:Object.freeze({inputs:1,outputs:1})}),Aa=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),Ra=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),Pa=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),Ca=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),cs=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),as=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),rs=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),is=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),Sa=Object.freeze({type:"native",body:Object.freeze([185]),lengths:Object.freeze({inputs:1,outputs:1})}),Da=Object.freeze({type:"native",body:Object.freeze([186]),lengths:Object.freeze({inputs:1,outputs:1})}),Ao=Object.freeze({type:"native",body:Object.freeze([183]),lengths:Object.freeze({inputs:1,outputs:1})}),Ro=Object.freeze({type:"native",body:Object.freeze([184]),lengths:Object.freeze({inputs:1,outputs:1})}),Fa=Object.freeze({type:"native",body:Object.freeze([187]),lengths:Object.freeze({inputs:1,outputs:1})}),Ua=Object.freeze({type:"native",body:Object.freeze([180]),lengths:Object.freeze({inputs:1,outputs:1})}),ka=Object.freeze({type:"native",body:Object.freeze([181]),lengths:Object.freeze({inputs:1,outputs:1})}),Po=Object.freeze({type:"native",body:Object.freeze([178]),lengths:Object.freeze({inputs:1,outputs:1})}),Co=Object.freeze({type:"native",body:Object.freeze([179]),lengths:Object.freeze({inputs:1,outputs:1})}),La=Object.freeze({type:"native",body:Object.freeze([182]),lengths:Object.freeze({inputs:1,outputs:1})}),dt=Object.freeze(Object.assign({"Flogram./":Wo,"Flogram.*":es,"Flogram.+":Qo,"Flogram.-":ts},{"Flogram.fp64.div":Ac,"Flogram.fp64.mul":Rc,"Flogram.fp64.add":jc,"Flogram.fp64.sub":Cc,"Flogram.fp64.neg":Pc,"Flogram.fp64.gt":Hc,"Flogram.fp64.lt":qc,"Flogram.fp64.le":ea,"Flogram.fp64.ge":na,"Flogram.fp64.ne":fa,"Flogram.fp64.eq":ia,"Flogram.fp64.toi32":da,"Flogram.fp64.tou32":ma,"Flogram.fp64.tou64":za,"Flogram.fp64.toi64":Ia,"Flogram.fp64.tofp32":La},{"Flogram.u64.add":Sc,"Flogram.u64.sub":kc,"Flogram.u64.mul":Fc,"Flogram.u64.div":Dc,"Flogram.u64.rem":Mc,"Flogram.u64.gt":Kc,"Flogram.u64.lt":$c,"Flogram.u64.le":Wc,"Flogram.u64.ge":sa,"Flogram.u64.ne":ua,"Flogram.u64.eq":ra,"Flogram.u64.toi32":ss,"Flogram.u64.tou32":ss,"Flogram.u64.toi64":Ta,"Flogram.u64.tofp32":ka,"Flogram.u64.tofp64":Da},{"Flogram.i64.add":Lc,"Flogram.i64.sub":Yc,"Flogram.i64.neg":Uc,"Flogram.i64.mul":Vc,"Flogram.i64.div":vc,"Flogram.i64.rem":Bc,"Flogram.i64.gt":Gc,"Flogram.i64.lt":Jc,"Flogram.i64.le":Qc,"Flogram.i64.ge":oa,"Flogram.i64.ne":pa,"Flogram.i64.eq":aa,"Flogram.i64.toi32":os,"Flogram.i64.tou32":os,"Flogram.i64.tou64":ya,"Flogram.i64.tofp32":Ua,"Flogram.i64.tofp64":Sa},{"Flogram.fp32.div":Wo,"Flogram.fp32.mul":es,"Flogram.fp32.add":Qo,"Flogram.fp32.sub":ts,"Flogram.fp32.neg":wc,"Flogram.fp32.gt":Xc,"Flogram.fp32.lt":Zc,"Flogram.fp32.le":ta,"Flogram.fp32.ge":ca,"Flogram.fp32.ne":Ea,"Flogram.fp32.eq":la,"Flogram.fp32.toi32":ga,"Flogram.fp32.tou32":xa,"Flogram.fp32.tou64":Na,"Flogram.fp32.toi64":ja,"Flogram.fp32.tofp64":Fa},{"Flogram.u32.add":no,"Flogram.u32.sub":ro,"Flogram.u32.mul":ao,"Flogram.u32.div":co,"Flogram.u32.rem":Eo,"Flogram.u32.gt":Oo,"Flogram.u32.lt":ho,"Flogram.u32.le":xo,"Flogram.u32.ge":yo,"Flogram.u32.ne":jo,"Flogram.u32.eq":zo,"Flogram.u32.toi32":ns,"Flogram.u32.toi64":Pa,"Flogram.u32.tou64":Ca,"Flogram.u32.tofp32":Co,"Flogram.u32.tofp64":Ro},{"Flogram.i32.add":io,"Flogram.i32.sub":fo,"Flogram.i32.neg":uo,"Flogram.i32.mul":po,"Flogram.i32.div":lo,"Flogram.i32.rem":bo,"Flogram.i32.gt":_o,"Flogram.i32.lt":mo,"Flogram.i32.le":go,"Flogram.i32.ge":To,"Flogram.i32.ne":No,"Flogram.i32.eq":Io,"Flogram.i32.toi64":Aa,"Flogram.i32.tou64":Ra,"Flogram.i32.tou32":ns,"Flogram.i32.tofp32":Po,"Flogram.i32.tofp64":Ao},{"Flogram.i16.add":io,"Flogram.i16.sub":fo,"Flogram.i16.neg":uo,"Flogram.i16.mul":po,"Flogram.i16.div":lo,"Flogram.i16.rem":bo,"Flogram.i16.gt":_o,"Flogram.i16.lt":mo,"Flogram.i16.le":go,"Flogram.i16.ge":To,"Flogram.i16.ne":No,"Flogram.i16.eq":Io,"Flogram.i16.toi32":Pt,"Flogram.i16.tou32":Pt,"Flogram.i16.toi64":cs,"Flogram.i16.tou64":as,"Flogram.i16.tofp32":Po,"Flogram.i16.tofp64":Ao},{"Flogram.u16.add":no,"Flogram.u16.sub":ro,"Flogram.u16.mul":ao,"Flogram.u16.div":co,"Flogram.u16.rem":Eo,"Flogram.u16.gt":Oo,"Flogram.u16.lt":ho,"Flogram.u16.le":xo,"Flogram.u16.ge":yo,"Flogram.u16.ne":jo,"Flogram.u16.eq":zo,"Flogram.u16.toi32":Pt,"Flogram.u16.tou32":Pt,"Flogram.u16.toi64":cs,"Flogram.u16.tou64":as,"Flogram.u16.tofp32":Co,"Flogram.u16.tofp64":Ro},{"Flogram.i8.add":io,"Flogram.i8.sub":fo,"Flogram.i16.neg":uo,"Flogram.i8.mul":po,"Flogram.i8.div":lo,"Flogram.i8.rem":bo,"Flogram.i8.gt":_o,"Flogram.i8.lt":mo,"Flogram.i8.le":go,"Flogram.i8.ge":To,"Flogram.i8.ne":No,"Flogram.i8.eq":Io,"Flogram.i8.toi32":Ct,"Flogram.i8.tou32":Ct,"Flogram.i8.toi64":rs,"Flogram.i8.tou64":is,"Flogram.i8.tofp32":Po,"Flogram.i8.tofp64":Ao},{"Flogram.u8.add":no,"Flogram.u8.sub":ro,"Flogram.u8.mul":ao,"Flogram.u8.div":co,"Flogram.u8.rem":Eo,"Flogram.u8.gt":Oo,"Flogram.u8.lt":ho,"Flogram.u8.le":xo,"Flogram.u8.ge":yo,"Flogram.u8.ne":jo,"Flogram.u8.eq":zo,"Flogram.u8.toi32":Ct,"Flogram.u8.tou32":Ct,"Flogram.u8.toi64":rs,"Flogram.u8.tou64":is,"Flogram.u8.tofp32":Co,"Flogram.u8.tofp64":Ro},{"Flogram.bool.and":ba,"Flogram.bool.or":Oa,"Flogram.bool.xor":_a,"Flogram.bool.not":ha}));var{LEB128_ENCODE:Fe}=rt,yi=new Int8Array(1),Ii=new Uint8Array(1),va=o=>{let t=[],s=!0;for(;s;){let f=o&127;o>>=7,o===0&&!(f&64)||o===-1&&f&64?s=!1:f|=128,t.push(f)}return new Uint8Array(t)},Va=o=>{let t=[],s=!0;for(;s;){let f=o&127;o>>=7,o===0?s=!1:f|=128,t.push(f)}return new Uint8Array(t)},Ya=o=>{let t=[];for(;o>=128;)t.push(o&127|128),o>>>=7;return t.push(o),new Uint8Array(t)},wa=128,Ma=127,ls=64,Ba=o=>{o=o<<16>>16;let t=[];for(;;){let s=o&Ma;o=o>>7;let f=o===0,e=(s&ls)===0,w=f&&e,F=o===-1,$=(s&ls)!==0;if(w||F&&$){t.push(s);break}s=s|wa,t.push(s)}return t};var Ka=o=>{let t=new Float32Array(1);return t[0]=parseFloat(o),new Uint8Array(t.buffer)},ps=o=>{let t=[],s=!0;for(;s;){let f=o&127;o>>=7,o===0&&!(f&64)||o===-1&&f&64?s=!1:f|=128,t.push(f)}return new Uint8Array(t)},Ga=o=>Fe(o),Ha=o=>{let t=new Float64Array(1);return t[0]=o,new Uint8Array(t.buffer)},Xa=o=>{let t=[];for(;o>=128;)t.push(o&127|128),o>>>=7;return t.push(o),new Uint8Array(t)},$a=o=>{let t=[],s=!0;for(;s;){let f=o&127;o>>=7,o===0&&!(f&64)||o===-1&&f&64?s=!1:f|=128,t.push(f)}return new Uint8Array(t)},Ja=o=>{let t=new Uint8Array(1);return t[0]=o==="TRUE"?1:o==="FALSE"?0:o,t},qa=o=>{let t=o.charCodeAt(0);return Fe(t)},us=()=>{let o=new ArrayBuffer(4);return new Float32Array(o)[0]=-0,[...new Uint8Array(o)]},Za=Object.freeze({type:"native",identity:127,opcode:65,encode:ps,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Qa=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-1),encode:qa,link:Object.freeze({load:Object.freeze({opcode:44,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Wa=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-1),encode:Ja,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4}),values:{TRUE:1,FALSE:0}})}),er=Object.freeze({type:"native",identity:124,opcode:68,none:us(),encode:Ha,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),tr=Object.freeze({type:"native",identity:126,opcode:66,none:Fe(-1),encode:Xa,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),or=Object.freeze({type:"native",identity:126,opcode:66,none:Fe(-9223372036854776e3),encode:$a,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),sr=Object.freeze({type:"native",identity:125,opcode:67,none:us(),encode:Ka,link:Object.freeze({load:Object.freeze({opcode:42,align:2,offset:0,size:4}),store:Object.freeze({opcode:56,align:2,offset:0,size:4})})}),nr=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-1),encode:Ga,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),cr=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-2147483648),encode:ps,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),ar=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-32768),encode:Ba,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),rr=Object.freeze({type:"native",identity:127,opcode:65,encode:Ya,none:Fe(-1),link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),ir=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-128),encode:va,decode:o=>new Int8Array([o])[0],link:Object.freeze({load:Object.freeze({opcode:44,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),lr=Object.freeze({type:"native",identity:127,opcode:65,none:Fe(-1),encode:Va,link:Object.freeze({load:Object.freeze({opcode:43,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),Qe=Object.freeze({"Flogram.String":Za,"Flogram.Char":Qa,"Flogram.Bool":Wa,"Flogram.FP64":er,"Flogram.U64":tr,"Flogram.I64":or,"Flogram.FP32":sr,"Flogram.U32":nr,"Flogram.I32":cr,"Flogram.I16":ar,"Flogram.U16":rr,"Flogram.I8":ir,"Flogram.U8":lr});var pr=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),mt=pr;var{TYPES_ASSIGN:Ui,TYPES_DRAW:ur,TYPES_ARRAY:le,TYPES_ARRAY_ASSIGNMENT:fr,TYPES_BRANCH_MATCH:Er,TYPES_BRANCH_DEFAULT:br,TYPES_CONDITION:So,TYPES_LOOP:fs,TYPES_DATA:St,TYPES_GENERICS:ki,TYPES_ENUMERATION:Be,TYPES_EXPRESSION:it,TYPES_INSTANCE:Li,TYPES_LINK:$e,TYPES_LOCAL:me,TYPES_OBJECT:Ee,TYPES_PROCEDURE:vi,TYPES_RETURN:Do,TYPES_SELECT:lt,TYPES_MEMBER:gt,TYPES_STORE:Or,TYPES_BREAK:_r,TYPES_LITERAL:Ke,TYPES_ARRAY_ACCESS:hr,TYPES_LINK_TO:Fo,TYPES_VALUE_AT:Dt,TYPES_SELF:Vi,TYPES_DROP:Es,TYPES_MAYBE:xt,TYPES_MOVE:dr,TYPES_NATIVE:be,TYPES_STRING:Ae,TYPES_FREE:mr,TYPES_BRANCH:bs,TYPES_CONTINUE:Os,TYPES_DEFAULT_BLOCK:_s,TYPES_BLOCK_END:Tt,TYPES_STATEMENT:hs,TYPES_DESTRUCTOR:ds,TYPES_SIZE:ms}=Nt,gs=2,gr=3,xr=12,xs=13,ne=16,Tr=26,Y=65,Ts=71,yr=113,Ir=114;var Ue=32,ys=33,de=35,Ve=36,zr=15,Nr=11,Is=4,jr=5,Ft=64,pt=127,Uo=108,Te=106,We=54,et=0,tt=2,Ce=0,Ar=1,Rr=2,zs=3,Pr=4,Cr=5,ot=6,Sr=999999,Dr=888888,Fr=777777,ye=0,Se=1,Ur=4,Ut=8,kr="Flogram.draw",Lr=new Set(["==","!=",">",">=","<","<=","!","&","|"]),{LEB128_ENCODE:D}=rt,ko,N=(o,t)=>`${t}.${o}`,Ns=(o,t,s)=>{let f=s.get(o);if(f&&f.length===1)return f[0];if(f&&f.length>1)return f[0];throw console.log(o),console.log(s),Error("No Callees were found")};function kt(o,t,s,f){o?.description?.inputs.length>0?ko=o.description.inputs[0].data.name:o?.description?.outputs.length>0&&(ko=o.description.outputs[0].data.name);let e=[],w=(c=ye)=>{e.push(Y,0),e.push(ne,Ce),e.push(Ve,c)},F=()=>{e.push(de,ye),e.push(de,Se),e.push(ne,zs),e.push(de,Se),e.push(de,ye),e.push(ne,zs)},$=()=>{e.push(ne,Pr),e.push(Ve,Se),e.push(Ve,ye)},_e=()=>{e.push(ne,Cr),e.push(Ve,Se),e.push(Ve,ye)},fe=()=>{e.push(ne,Rr)},{description:Ie}=o,{inputs:Ye,locals:Pe,statements:bt}=Ie,Oe=new Map,Q=new Map;{let c=0,i=r=>{for(let E of r){let{name:g,data:A}=E;switch(Oe.set(g,c),Q.set(g,E),A.type){case xt:case St:{let{name:L,path:v}=A,S=N(L,v);switch(L){case Ae:{c=c+2|0;break}default:{let G=t.get(S);switch(G.type){case be:{c=c+1|0;break}case Be:{c=c+1|0;break}case Ee:{let{length:ce}=G;c=c+2|0;break}}break}}break}case le:{c=c+2|0;break}case $e:{A.name===Ae||A.name===le?c=c+2|0:c=c+1|0;break}}}};i(Ye),i(Pe)}let pe=0,we=[];for(let c of Pe){let{data:i}=c,r=()=>{we.push(1,pt),pe=pe+1|0},E=()=>{we.push(1,pt),pe=pe+1|0,we.push(1,pt),pe=pe+1|0},g=()=>{we.push(1,pt),pe=pe+1|0},A=v=>{let{identity:S}=v;we.push(1,S),pe=pe+1|0},L=v=>{let{indivisibles:S}=v,{mapTrail:G}=S;for(let ce of G.values()){let{data:ie}=ce;if(ie.type===$e){ie.name===le||ie.name===Ae?E():r();continue}if(ie.type===le){E();continue}let{name:l,path:O}=ie,p=N(l,O),n=t.get(p);switch(n.type){case be:{A(n);break}case Be:{g();break}}}};switch(i.type){case le:{E();break}case $e:{i.name===le||i.name===Ae?E():r();break}case xt:case St:{let{name:v,path:S}=i;switch(v){case Ae:{E();break}default:{let G=N(v,S),ce=t.get(G);switch(ce.type){case be:{A(ce);break}case Be:{g();break}case Ee:{E();break}}break}}break}}}((c,i)=>{for(let[r,E]of c)if(E.type==i){we.push(1,pt),pe=pe+1|0;break}})(t,Ee);let Bt=D(pe);e.push(...Bt,...we);let Je=c=>{if(typeof c!==Ee)return c;switch(c.type){case me:return c.name;case Fo:return Je(c.value);case Dt:return Je(c.link);case gt:return`${c.type}_${c.trail.join("_")}`}return null},Z=(c,i=Do)=>{let r=0,E=[],g=(p,n)=>{let d={type:"call",key:p,inputs:n};E.unshift(d)},A=p=>{let n={type:"value",value:p};E.unshift(n)},L=p=>{let n={type:gt,member:p};E.unshift(n)},v=(p,n,d,R)=>{let V={key:null,stop:!1},h;if(p&&mt.includes(p.data.name)){let{data:ae}=p,{name:m}=ae;h=N(m.toLowerCase()+"."+De(d),n),ko=m}else if(p){let{data:ae}=p,{name:m,path:q}=ae,_=N(m,q),u=t.get(_),{indivisibles:T}=u,{mapTrail:I}=T,j=I.size-1;for(let[H,P]of I){E.unshift({type:"compare",currentIndex:j,name:d}),h=N(P.data.name.toLowerCase()+"."+De(d),P.data.path);let z=R.map(B=>({type:lt,value:{type:me,name:B.name},trail:[P.trail]}));g(h,z);var C=z.length-1|0;for(let B=C;B>=0;B=B-1|0){let K=z[B];A(K)}j--}V.stop=!0}return V.key=h,V},S=p=>{let{inputs:n}=p;if(n.find(R=>R.type==it)){let R=n.map(h=>{if(h.type===me)return Q.get(h.name);if(h.type===Ke)return{data:h};if(h.type===it)return{data:{name:S(h)}}}),V=f.find(h=>h.description&&Array.isArray(h.description.inputs)?h.description.inputs.length!==R.length?!1:h.description.inputs.every((C,ae)=>C.data.name===R[ae].data.name):!1);return V?V.description.outputs[0].data.name:"unknown"}else{let R=n.map(h=>{if(h.type===me)return Q.get(h.name);if(h.type===Ke)return{data:h}}),V=f.find(h=>h.description&&Array.isArray(h.description.inputs)?h.description.inputs.length!==R.length?!1:h.description.inputs.every((C,ae)=>C.data.name===R[ae].data.name):!1);return V?V.description.outputs[0].data.name:"unknown"}},G=p=>{let{inputs:n,name:d,path:R}=p,V=N(d,R),h=[R],C;if(typeof d===Ee){let m=d[0];if(C=Q.get(m),C){h.push(C.data.name);for(let _=1;_<=d.length-2;_++)m=d[_],C=Q.get(m),C&&h.push(C.data.name)}let q=d.length-1|0;V=N(d[q],h.join("."))}if(R==="Flogram"&&d!==ur){let m=n.find(u=>u.type===it),q=n.find(u=>u.type===Ke),_=n.map(u=>Q.get(u.name)).find(Boolean);if(_){let u=v(_,R,d,n);if(V=u.key,u.stop)return}else if(q)V=N(`${q.name.toLowerCase()}.${De(d)}`,R);else if(m)V=N(`${S(m).toLowerCase()}.${De(d)}`,R);else{let u=f.find(T=>T.name===p.name&&T.path===p.path&&T.description.inputs.length===p.inputs.length);V=N(`${Lr.has(u.name)?u.description.inputs[0]?.data.name.toLowerCase():u.description.outputs[0]?.data.name.toLowerCase()}.${De(u.name)}`,R)}}if(g(V,n),typeof d===Ee){let m=Ns(V,n,s);if(m){let{procedure:q}=m,{description:_}=q,{self:u}=_,T=Q.get(d[0]),I=N(T.data.name,T.data.path),j=t.get(I);if(j){let H=Oe.get(d[0]),{indivisibles:P,members:z}=j,{mapTrail:B}=P;for(let K=u.length-1|0;K>=0;K--){let y=u[K];if(y.type===gt){let J=y.trail.join(".");if(B.get(J)){let{address:te}=B.get(J);L({index:H,address:te})}else{let te=JSON.parse(JSON.stringify(y.trail)),oe=j;for(;te.length>0;){let ct=te.shift();if(te.length>0){let Bo=oe.members.get(ct),Rs=N(Bo.name,Bo.path);oe=t.get(Rs);continue}oe=oe.members.get(ct)}let ee=N(oe.name,oe.path),se=t.get(ee),{indivisibles:ge}=se,{mapIndex:xe,mapTrail:Xe}=ge,ue=xe.get(0),ve=`${J}.${ue.trail}`,{address:Me}=B.get(ve),Zt={index:H,address:Me-8};L(Zt)}}}}}}var ae=n.length-1|0;for(let m=ae;m>=0;m=m-1|0){let q=n[m];A(q)}},ce=p=>{let{key:n,inputs:d}=p;if(n===kr){for(let h of d){let C;h.type===Ke?C=h:h.type===me?C=Q.get(h.name)?.data:h.type===ms&&h.value.type===me&&(C={name:"I32",path:"Flogram",data:"data"}),C?.name===Ae?(e.push(Y,...D(Dr)),e.push(ne,ot),Z(h),e.push(ne,ot),e.push(ne,ot)):C?.name===le||C?.layout===le?(e.push(Y,...D(Sr)),e.push(ne,ot),Z(h),e.push(ne,ot),e.push(ne,ot)):(Z(h),e.push(ne,ot))}e.push(Y,...D(Fr)),e.push(ne,ot);return}let R=Ns(n,d,s);switch(R.type){case be:{let{body:h}=R;e.push(...h);break}case"artificial":{let{index:h}=R,C=D(h);e.push(ne,...C);break}}let{lengths:V}=R;r=r-V.inputs|0,r=r+V.outputs|0},ie=p=>{let{value:n}=p,d=_=>{let u=0,T=Je(_),I;if(_.type===lt){let{value:j,trail:H}=JSON.parse(JSON.stringify(_)),{name:P}=j,z=Q.get(P),{data:B}=z,K=N(B.name,B.path),y=t.get(K),{indivisibles:J}=y,{mapTrail:te}=J,oe=H.join("."),ee=JSON.parse(JSON.stringify(H)),se=y;for(;ee.length>0;){let xe=ee.shift();if(ee.length>0){let Xe=se.members.get(xe),ue=N(Xe.name,Xe.path);se=t.get(ue);continue}se=se.members.get(xe)}let ge=N(se.name,se.path);I=t.get(ge)}else{let j=Q.get(T),{data:H}=j,{name:P,path:z,segment:B}=H,K=N(P,z);I=t.get(K)}if(I){switch(I.type){case be:{ie({value:_});let{link:j}=I,{load:H}=j;e.push(H.opcode,H.align,H.offset),u=u+1|0;break}case Ee:{let j=0,H=()=>{},P=y=>{ie({value:_});let{link:J}=y,{load:te}=J;e.push(te.opcode,te.align,te.offset+j|0),u=u+1|0,j=j+te.size|0},z=()=>{},{indivisibles:B}=I,{mapTrail:K}=B;for(let y of K.values()){if(y.type===$e){z();continue}let{data:J}=y,{name:te,path:oe}=J,ee=N(te,oe),se=t.get(ee);switch(se.type){case be:{P(se);break}case Be:{H();break}}}break}}return u}},R=(_,u)=>{let T=0,{literal:I,name:j,path:H}=_,P=I.length;_.length&&(P=parseInt(_.length,10));let z=N(j,H),B=t.get(z);function K(y){let J=0,{literal:te,name:oe,path:ee}=y,se=te.length;y.length&&(se=parseInt(y.length,10));let ge=N(oe,ee),xe=t.get(ge);w();for(let Xe=0;Xe<se;Xe++){let ue=te[Xe];if(ue)if(ue.name===Ae&&y.layout===le||ue.layout===le){let ve=[];if(ue.layout===le)ve.push(ue.literal),K(ue);else{let Me=ue.literal.length;for(let ct=0;ct<Me;ct++)ve.push({type:ue.type,path:ue.path,name:"I32",literal:ue.literal[ct].charCodeAt().toString()});let Zt={type:Ke,name:"I32",layout:le,path:ue.path,literal:ve};K(Zt)}e.push(Y,...D(4)),e.push(ne,Ce),e.push(de,ye),e.push(We,tt,et),e.push(Y,...D(4)),e.push(ne,Ce),e.push(Y,...D(ve.length)),e.push(We,tt,et)}else switch(xe.type){case be:{let{link:ve}=xe,{store:Me}=ve;e.push(Y,...D(Me.size)),e.push(ne,Ce),!ue||ue.type===Ke?e.push(xe.opcode,...xe.encode(ue?.literal||0)):Z(ue),e.push(Me.opcode,Me.align,Me.offset),fe(),J=3;break}}}}return K(_),u?P:(e.push(de,ye),e.push(Y,...D(P)),T=1,T)},V=(_,u,T=!0)=>{let I=t.get(u);w();let j=K=>{F(),_e(),e.push(de,ye),e.push(de,Se),e.push(de,Se),$(),e.push(de,ye),e.push(We,tt,et),e.push(Y,...D(4)),e.push(Te),e.push(Y,...D(K)),e.push(We,tt,et),e.push(Ve,ye)};for(let[K,y]of I.members){if(!y)continue;e.push(Y,0),e.push(ne,Ce),e.push(Ve,Se);let J=_.find(ee=>ee.name===K),te=N(y.name,y.path),oe=t.get(te);if(y.type===le){if(e.push(Y,...D(Ut)),e.push(ne,Ce),e.push(Ve,Se),J.value.type===me){let ee=Oe.get(J.value.name);F();let se=C(y,ee);j(se),fe()}else{F();let ee=R(J.value,!0);j(ee),fe()}continue}switch(oe.type){case be:{let{link:ee}=oe,{store:se}=ee;if(y.type===$e)F(),e.push(Y,...D(4)),e.push(ne,Ce),Z(J.value),e.push(se.opcode,se.align,se.offset),$();else{e.push(Y,...D(se.size)),e.push(ne,Ce);let ge=JSON.parse(JSON.stringify(J.value));ge.literal&&(ge.name!==y.name||ge.path!==y.path)&&(ge={...ge,name:y.name,path:y.path}),Z(ge),e.push(se.opcode,se.align,se.offset)}fe();break}case Ee:{e.push(Y,...D(Ut)),e.push(ne,Ce),e.push(Ve,Se),F();let ee=V(J.value.literal,te,!1);j(ee),fe();break}}}function H(K){let y=0;for(let J of K.values())J.data.type===le&&(y+=parseInt(J.data.length,10)+1);return y}let P=Array.from(I.indivisibles.mapTrail.entries()).reduce((K,y)=>y[1].address>K[1].address?y:K,[null,{address:0}]),z=H(I.indivisibles.mapTrail),B=P[1].address/4+1+z;return T&&(e.push(de,ye),e.push(Y,...D(B))),B},h=(_,u)=>{let T=0,I=Q.get(u),j;if(I){let{data:P}=I,{name:z,path:B,segment:K}=P;j=N(z,B)}else{let P=z=>{if(z.type===Ke)return N(z.name,z.path);if(z.type===it)return P(z.inputs[0]);if(z.type===Dt)return P(z.link);if(z.type===Fo)return P(z.value);if(z.type===me){let B=Q.get(z.name),{data:K}=B,{name:y,path:J,segment:te}=K;return N(y,J)}else if(z.type===lt){let B=t.get(P(z.value)),{indivisibles:K}=B,{mapTrail:y}=K,J=z.trail.join("."),{data:te}=y.get(J),{name:oe,path:ee}=te;return N(oe,ee)}};j=P(_)}let H=t.get(j);switch(H.type){case be:{let{link:P}=H,{store:z}=P;e.push(Y,...D(z.size)),e.push(ne,Ce),e.push(Ve,ye),e.push(de,ye),Z(_),e.push(z.opcode,z.align,z.offset),e.push(de,ye),T=T+7|0;break}case Ee:{let P=0,z=()=>{},B=te=>{Z(_);let{link:oe}=te,{load:ee}=oe;e.push(ee.opcode,ee.align,ee.offset+P|0),T=T+1|0,P=P+ee.size|0},K=()=>{},{indivisibles:y}=H,{mapTrail:J}=y;for(let te of J.values()){if(te.type===$e){K();continue}let{data:oe}=te,{name:ee,path:se}=oe,ge=N(ee,se),xe=t.get(ge);switch(xe.type){case be:{B(xe);break}case Be:{z();break}}}break}}return T},C=(_,u=0)=>{let{name:T,path:I}=_,j=N(T,"Flogram"),H=t.get(j),{link:P}=H,{store:z,load:B}=P,K=Number(_.length);w();for(let y=0;y<K;y++){e.push(Y,...D(z.size)),e.push(ne,Ce);let J=u;m(J,J+1|0),e.push(Y,...D(y)),e.push(Y,B.size),e.push(Uo),e.push(Te),e.push(B.opcode,B.align,B.offset),e.push(z.opcode,z.align,z.offset),fe()}return K},ae=(_,u)=>{let T=t.get(u),{opcode:I}=T,j=T.encode(_);e.push(I,...j)},m=(_,u)=>{for(;_<u;)e.push(Ue,_),_=_+1|0};switch(n.type){case it:{G(n);break}case"instance":{let{path:_,members:u}=n;var q=u.length-1|0;for(let T=q;T>=0;T=T-1|0){let I=u[T],{path:j,value:H}=I;A(H)}break}case xt:{let{data:_}=n,{name:u,path:T}=_,I=N(u,T),j=t.get(I);n.layout==="NONE"?e.push(j.opcode,...j.none):Z(n.value),r=r+1|0;break}case Dt:{let{link:_}=n,u=d(_);r=r+u|0;break}case Fo:{let{value:_}=n,u=Je(_);if(Q.get(u)?.data.type===le){Z({name:u,type:me});return}let I=h(_,u);r=r+I|0;break}case ms:{let{value:_}=n;switch(_.type){case me:{let u=Oe.get(_.name);m(u+1|0,u+2|0);break}}break}case Ke:{let{literal:_,name:u,path:T}=n,I=N(u,T),j=t.get(I);if(n.layout===le){R(n),r=r+2|0;return}else if(u===Ae){let H=[];for(let z of _)H.push({type:Ke,literal:z.charCodeAt(0).toString(),name:Ae,path:"Flogram"});let P={...n,literal:H};R(P),r=r+2|0;return}j&&j.type===Ee?(V(_,I),r=r+2|0):(j||(console.log(n),console.log("NO SHAPE FOUND")),ae(_,I),r=r+1|0);break}case hr:{let{array:_,index:u}=n,{name:T}=_,{name:I}=u,j=Oe.get(T),H=Oe.get(I),P=Q.get(T),z=N(P.data.name,P.data.path),B=t.get(z),{link:K}=B,{load:y}=K;switch(B.type){case be:{m(j,j+1|0),Z(u),e.push(Y,y.size),e.push(Uo),e.push(Te),e.push(y.opcode,y.align,y.offset),r=r+2|0;break}case Ee:{console.log("TO LOAD IS AN OBJECT");break}}break}case dr:{Z(n.value);break}case me:{let{name:_}=n,u=Oe.get(_),T=Q.get(_),{data:I}=T;switch(I.type){case $e:{I.name===le||I.name===Ae?(m(u,u+2|0),r=r+2|0):(m(u,u+1|0),r=r+1|0);break}case le:{if(i==="assignment"&&I.length){let j=C(I,u);e.push(de,ye),e.push(Y,...D(j))}else m(u,u+2|0),r=r+2|0;break}case xt:case St:{let{name:j,path:H}=I,P=N(j,H),z=t.get(P);switch(I.layout){case le:{m(u,u+2|0),r=r+2|0;break}default:{switch(z.type){case be:if(j===Ae){m(u,u+2|0),r=r+2|0;break}case Be:{m(u,u+1|0),r=r+1|0;break}case Ee:{m(u,u+2|0),r=r+2|0;break}}break}}break}}break}case lt:{let{value:_,trail:u}=n,T=_.name||_.link||_.value,I=Q.get(T),{data:j}=I,H=N(j.name,j.path),P=t.get(H),{indivisibles:z}=P,{mapTrail:B}=z,K=u.join("."),y=JSON.parse(JSON.stringify(u)),J=B.get(K),{address:te}=J,oe=P;for(;y.length>0;){let ue=y.shift();if(y.length>0){let ve=oe.members.get(ue),Me=N(ve.name,ve.path);oe=t.get(Me);continue}oe=oe.members.get(ue)}let ee=N(oe.name,oe.path),se=t.get(ee),{link:ge}=se,{load:xe}=ge,Xe=Oe.get(T);e.push(Ue,...D(Xe)),e.push(Y,...D(te)),e.push(Te),e.push(xe.opcode,xe.align,xe.offset);break}}},l=p=>{let{name:n,currentIndex:d}=p;if(d===0)e.push(ys,Oe.size+1);else if(e.push(Ue,Oe.size+1),n==="==")e.push(yr);else if(n==="!=")e.push(Ir);else throw new Error(`Unknown operator ${n} for objects`)},O=p=>{let{member:n}=p,{isObject:d,index:R,address:V}=n;if(d){e.push(Ue,...D(R)),e.push(Y,...D(V)),e.push(Te),e.push(Ue,...D(R)),e.push(Y,...D(V+4)),e.push(Te);return}e.push(Ue,...D(R)),e.push(Y,...D(V)),e.push(Te)};for(A(c);E.length>0;){let p=E.shift();switch(p.type){case"call":{ce(p);break}case"value":{ie(p);break}case gt:{O(p);break}case"compare":{l(p);break}}}return r},Ot=c=>{let i=(E,g)=>{for(;E<g;)g=g-1|0,e.push(ys,g)},r=(E,g)=>{switch(g.type){case $e:{g.name===le||g.name===Ae?i(E,E+2|0):i(E,E+1|0);break}case le:{i(E,E+2|0);break}case xt:case St:{let{name:A,path:L}=g,v=N(A,L),S=t.get(v);switch(A){case le:{i(E,E+Number(g.length)|0);break}default:{switch(S.type){case be:if(A===Ae){i(E,E+2|0);break}case Be:{i(E,E+1|0);break}case Ee:{let{length:G}=S;i(E,E+2|0);break}}break}}break}}};switch(c.type){case me:{let{name:E}=c,g=Oe.get(E),A=Q.get(E),{data:L}=A;r(g,L);break}case lt:{let{value:E,trail:g}=c,{name:A}=E,L=Q.get(A),{data:v}=L,S=N(v.name,v.path),G=t.get(S),{indivisibles:ce}=G,{mapTrail:ie}=ce,l=g.join("."),O=JSON.parse(JSON.stringify(g)),p=ie.get(l),{index:n}=p,d=G;for(;O.length>0;){let V=O.shift();d=d.members.get(V)}let R=Oe.get(A);d.type==le||d.type==Ae?i(R+n|0,R+n+2|0):i(R+n|0,R+n+1|0);break}}},Kt=(c,i)=>{let{array:r,index:E}=c,g=0,A=Oe.get(r.name),L=()=>{e.push(Ue,A)},v=Q.get(r.name),{data:S}=v,{name:G,path:ce,segment:ie}=S,l=N(G,ce),O=t.get(l);switch(O.type){case be:{L(),Z(E);let{link:p}=O,{store:n}=p;e.push(Y,n.size),e.push(Uo),e.push(Te),Z(i),e.push(n.opcode,n.align,n.offset),g=g+4|0;break}case Ee:{let p=null,n=0;if(i.type===me){let{name:m}=i;p=Q.get(m),n=Oe.get(m)}let d=0,R=()=>{},V=(m,q)=>{L();let{index:_}=q;e.push(Ue,n+_|0);let{link:u}=m,{store:T}=u;e.push(T.opcode,T.align,T.offset+d|0),g=g+1|0,d=d+T.size|0},h=()=>{},{indivisibles:C}=O,{mapTrail:ae}=C;for(let m of ae.values()){if(m.type===$e){h();continue}let{data:q}=m,{name:_,path:u}=q,T=N(_,u),I=t.get(T);switch(I.type){case be:{V(I,m);break}case Be:{R();break}}}break}}return g},Gt=(c,i)=>{let{value:r,trail:E}=c,{name:g}=r,A=Q.get(g),{data:L}=A,v=N(L.name,L.path),S=t.get(v),{indivisibles:G}=S,{mapTrail:ce}=G,ie=E.join("."),l=JSON.parse(JSON.stringify(E)),O=ce.get(ie),{address:p}=O,n=S;for(;l.length>0;){let V=l.shift();if(l.length>0){let h=n.members.get(V),C=N(h.name,h.path);n=t.get(C);continue}n=n.members.get(V)}let d=N(n.name,n.path),R=t.get(d);switch(R.type){case be:{let{link:V}=R,{store:h}=V,C=Oe.get(g);e.push(Ue,...D(C)),e.push(Y,...D(p)),e.push(Te),Z(i),e.push(h.opcode,h.align,h.offset);break}}},Ht=(c,i)=>{let{link:r}=c,E=0,g=Je(r),A=Q.get(g),{data:L}=A,{name:v,path:S,segment:G}=L,ce=N(v,S),ie=t.get(ce);switch(ie.type){case be:{Z(r),Z(i);let{link:l}=ie,{store:O}=l;e.push(O.opcode,O.align,O.offset),E=E+1|0;break}case Ee:{let l=null,O=0,p=(m,q,_="")=>{let u=_?`${_}.${m.name}`:m.name,T=q.get(u);if(T){let{data:I}=T,j=N(I.name,I.path),H=t.get(j),{store:P}=H.link;Z(r),e.push(Y,...D(T.address)),e.push(Te),Z(m.value),e.push(P.opcode,P.align,P.offset)}else if(m.value&&m.value.literal)for(let I of m.value.literal)p(I,q,u)};if(i.type===me){let{name:m}=i;if(O=Oe.get(m),c.link.name.startsWith(gt)){let q=Oe.get(c.link.name),{name:_,path:u}=Q.get(m),T=N(_,u),I=t.get(T),{indivisibles:j}=I,{mapTrail:H}=j;for(let P of H){let{data:z}=P,B=N(z.name,z.path),K=t.get(B),{load:y,store:J}=K.link;e.push(Y,...D(q)),e.push(Y,...D(P.address)),e.push(Te),e.push(Y,...D(O)),e.push(Y,...D(P.address)),e.push(Te),e.push(y.opcode,y.align,y.offset),e.push(J.opcode,J.align,J.offset)}return}return Z(r),e.push(Ue,...D(O)),e.push(We,tt,et),Z(r),e.push(Y,...D(4)),e.push(Te),e.push(Ue,...D(O+1|0)),e.push(We,tt,et),E=E+2|0,E}let{literal:n,name:d,path:R}=i,V=N(d,R),h=t.get(V),{indivisibles:C}=h,{mapTrail:ae}=C;for(let m of n)p(m,ae)}}return E},Xt=(c,i)=>{let{link:r}=i,E=0,g=O=>{let p=Array.from(O.members.values()).reduce((h,C)=>C?h+1:h,0);w();let{indivisibles:n}=O,{mapTrail:d}=n,R=(h,C)=>{let{store:ae,load:m}=h.link,{address:q}=d.get(C);e.push(Y,...D(ae.size)),e.push(ne,Ce),Z(r),e.push(Y,...D(q)),e.push(Te),e.push(m.opcode,m.align,m.offset),e.push(ae.opcode,ae.align,ae.offset)},V=(h,C)=>{e.push(Y,...D(Ut)),e.push(ne,Ce),e.push(Ve,Se);for(let[m,q]of h.members){if(!q)continue;let _=N(q.name,q.path),u=t.get(_);if(u.type===Ee){F(),V(u,`${C}.${m}`);continue}let T=`${C}.${m}`;R(u,T)}e.push(de,Se),e.push(de,Se),e.push(Y,...D(Ut)),e.push(Te),e.push(We,tt,et);let ae=Array.from(h.members.values()).reduce((m,q)=>q?m+1:m,0);e.push(de,Se),e.push(Y,...D(Ur)),e.push(Te),e.push(Y,...D(ae)),e.push(We,tt,et),$()};for(let[h,C]of O.members){if(!C)continue;let ae=N(C.name,C.path),m=t.get(ae);if(m.type===Ee){V(m,h);continue}R(m,h)}e.push(de,ye),e.push(Y,...D(p))},A=Je(r),L=Q.get(A),{data:v}=L,{name:S,path:G,segment:ce}=v,ie=N(S,G),l=t.get(ie);switch(l.type){case be:case Ee:{if(c.type===me)return g(l),Ot(c),E;break}}return E},$t=(c,i,r)=>{let E=t.get(c),g=L=>{switch(L.type){case me:{let{name:v}=L,S=Oe.get(v);e.push(Ue,S);break}case Ke:{let{literal:v}=L,S=E.type===be?v:E.evaluate(v),G=D(S);e.push(Y,...G);break}}},A=()=>{switch(E.type){case Be:{e.push(Ts),e.push(xs,0);break}case be:{e.push(Ts),e.push(xs,0);break}}};switch(E.type){case Be:{g(i),g(r),A();break}case be:{g(i),g(r),A();break}}},ze=[],qe=c=>{let i={type:hs,statement:c};ze.unshift(i)};ze.unshift({type:Tt});let zt=(c,i)=>{if(c.members)for(let[r,E]of c.members.entries()){let g=N(E?.name,E?.path),A=t.get(g);if(A&&A.type===Ee){let L=zt(A,g,i);L&&_t.push(L)}}return c.members&&c.members.has(ds)?i:null},_t=[];Pe.forEach(c=>{let i=N(c.data.name,c.data.path),r=t.get(i);if(r&&r.type===Ee){let E=zt(r,i);E&&_t.push(E)}});let Jt=_t.map(c=>({type:Es,expression:{type:it,name:ds,path:c,inputs:[]}}));for(let c of Jt)qe(c);var a=bt.length-1|0;for(let c=a;c>=0;c=c-1|0){let i=bt[c];qe(i)}let b=c=>{let{target:i,source:r}=c;if(i.type===Or){Ht(i,r);return}if(i.type===fr){Kt(i,r);return}if(i.type===lt){Gt(i,r);return}if(r.type===Dt){let E=Q.get(i.name),{data:g}=E;if(g.path!=="Flogram"){let A=N(g.name,g.path);if(t.get(A).type===Ee){Xt(i,r);return}}}Z(r,"assignment"),Ot(i)},x=c=>{let{statements:i}=c;e.push(gs,Ft),e.push(gr,Ft);let r={type:Tt,layout:fs};ze.unshift(r),ze.unshift(r),ze.unshift({type:Os});var E=i.length-1|0;for(let g=E;g>=0;g=g-1|0){let A=i[g];qe(A)}},U=c=>{e.push(xr,2)},M=c=>{let{branches:i}=c;ze.unshift({type:Tt});for(let r=i.length-1;r>=0;r--){let E=i[r];switch(E.type){case Er:{let{statements:g}=E,A=g.length;for(let v=A-1;v>=0;v--){let S=g[v];qe(S)}let L=g.find(v=>v.type===Do);ze.unshift({type:So,stop:L}),Z(E.values[0]);break}case br:{let{statements:g}=E,A=g.length;for(let L=A-1;L>=0;L--){let v=g[L];qe(v)}ze.unshift({type:_s});break}}}},k=c=>{let i=c,{branches:r,values:E}=i;if(r.length>0&&E.length===0)return M(c);e.push(gs,Ft);let A={type:Tt};ze.unshift(A);let L=[];for(let S of E)switch(S.type){case me:{let{name:G}=S,ce=Q.get(G),{data:ie}=ce,{name:l,path:O}=ie,p=N(l,O);L.push(p);break}}var v=r.length-1|0;for(let S=v;S>=0;S=S-1|0){let G=r[S],ce={type:bs,branch:G,condition:i,commonKeys:L};ze.unshift(ce)}},W=c=>{let{expression:i}=c;var E=Z(i)|0;for(let g=0;g<E;g=g+1|0)e.push(Tr)},X=c=>{let{value:i}=c;Z(i),e.push(ne,Ar),e.push(Y,0),Ot(i)},re=c=>{let{values:i}=c;for(let r of i)Z(r);e.push(zr)},he=c=>{e.push(Nr)},Ne=c=>{e.push(12,0)},je=c=>{e.push(jr)},He=c=>{c.stop?(e.push(Is),e.push(pt)):(e.push(Is),e.push(Ft))},Le=c=>{let{branch:i,commonKeys:r,condition:E}=c,{values:g}=i,{values:A}=E;var L=r.length|0;for(let G=0;G<L;G=G+1|0){let ce=r[G],ie=g[G],l=A[G];$t(ce,ie,l)}let{statements:v}=i;var S=v.length-1|0;for(let G=S;G>=0;G=G-1|0){let ce=v[G];qe(ce)}},qt=c=>{let{statement:i}=c;switch(i.type){case"assign":{b(i);break}case So:{k(i);break}case fs:{x(i);break}case _r:{U(i);break}case Es:{W(i);break}case mr:{X(i);break}case Do:{re(i);break}}};for(;ze.length>0;){let c=ze.shift();switch(c.type){case Tt:{he(c);break}case Os:{Ne(c);break}case _s:{je(c);break}case So:{He(c);break}case bs:{Le(c);break}case hs:{qt(c);break}default:break}}return e}var{HEX_ENCODE:Lo,LEB128_ENCODE:Ge}=rt,{TYPES_ASSIGN:vr,TYPES_ARRAY:yt,TYPES_DATA:Lt,TYPES_GENERICS:Vr,TYPES_ENUMERATION:It,TYPES_EXPRESSION:Yr,TYPES_LINK:vt,TYPES_LOCAL:ut,TYPES_OBJECT:ft,TYPES_PROCEDURE:vo,TYPES_RETURN:wr,TYPES_SELECT:Mr,TYPES_MEMBER:Br,TYPES_STORE:Vo,TYPES_LITERAL:Kr,TYPES_LINK_TO:Vt,TYPES_VALUE_AT:Yt,TYPES_SELF:js,TYPES_NATIVE:Et,TYPES_STRING:wt}=Nt,Yo="",Re=(o,t)=>`${t}.${o}`,Gr=o=>[">","<",">=","<=","!=","=="].includes(o),Hr=o=>["FP64","I64","U64","FP32","I32","U32","I16","U16","I8","U8","Bool"].includes(o),wo=48,Xr=Object.freeze([0,127]),$r=Object.freeze({}),Jr=Object.freeze([127]),As=0;var qr=2;var Zr=10,Qr=7,Wr=3,ei=2,ti=1,oi=6,st=96,Mt=127,Mo=Object.freeze([7,105,109,112,111,114,116,115]),si=Object.freeze([6,109,101,109,111,114,121]),ni=0;var ci=65,ke=new Uint8Array(8),ai=Object.freeze([0,97,115,109]),ri=Object.freeze([1,0,0,0]),ii=(o,t)=>{t=t??$r;let s={},{data:f,code:e}=o,w=e.filter(a=>!a.description.generics||a.description.generics.length===0),F=new Map,$=new Map,_e=a=>{let b=0;for(let x of a){let{data:U}=x;switch(U.type){case"Maybe":case Lt:{let{name:M,path:k}=U,W=Re(M,k),X=F.get(W);if(X)switch(X.type){case Et:if(M===wt){b=b+2|0;break}case It:{b=b+1|0;break}case ft:{let{length:re}=X;b=b+2|0;break}}break}case vt:{U.name===yt||U.name===wt?b=b+2|0:b=b+1|0;break}case yt:{b=b+2|0;break}}}return b},fe=a=>{let{labels:b}=a,x=new Map;var U=b.length|0;for(let X=0;X<U;X=X+1|0){let{name:re}=b[X];x.set(re,X)}return Object.freeze({type:It,encode:X=>{let re=x.get(X);return typeof re>"u"?Jr:Ge(re)},evaluate:X=>x.get(X),opcode:ci,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})})},Ie=a=>{let b=[],x=[],U=0,M=()=>{let l=Object.freeze({type:"back"});b.unshift(l)},k=l=>{let O={type:Lt,data:l};b.unshift(O)},W=l=>{let O={type:"name",name:l};b.unshift(O)},X=(l,O)=>{O&&(M(),k(O),W(l))},re=l=>f.find(O=>O.name===l),he=(l,O)=>O.find(p=>p.name===l),Ne=(l,{inputs:O})=>O.find(p=>p.name===l),je=(l,O)=>{let p=l;for(let n of O){let d=he(n,p.description.members),R=re(d.data.name);if(R&&R.type===ft)p=R;else return d}return null},He=(l,O)=>{let p=l.trail,n=he(p[0],O.members);if(!n)return null;if(p.length===1)return n.data;let d=re(n.data.name);return je(d,p.slice(1)).data},Le=(l,O,p,n)=>{if(Ne(O,p.description))return;p.description.self.push(l);let d=Object.seal({name:O,data:{...He({trail:l.trail||l.value?.trail||l.link?.trail||[]},n),segment:"heap"}});l.type!==Vt&&(d.data.type=vt),p.description.inputs.push(d)},qt=(l,O,p)=>{let n=l.inputs.map(d=>i(d,O,p));return{...l,inputs:n}},c=(l,O,p)=>{if(!(l.value.link===js||l.value.value===js))return console.log("THIS IS NOT HANDLED; HANGING"),l;let n=`${l.type}_${l.trail.join("_")}`;if(Le(l,n,O,p),l.value.value)return{type:Vt,value:n};if(l.value.link)return{type:Yt,link:n}},i=(l,O,p,n="")=>{switch(l.type){case ut:case Kr:return l;case Br:{let d=`${l.type}_${l.trail.join("_")}`;return Le(l,d,O,p),n==="target"?{type:Vo,link:{type:ut,name:d}}:{type:Yt,link:{type:ut,name:d}}}case Vt:{let d=`${l.value.type}_${l.value.trail.join("_")}`;return Le(l,d,O,p),{type:Vt,value:{type:ut,name:d}}}case Yt:{let d=`${l.link.type}_${l.link.trail.join("_")}`;return Le(l,d,O,p),{type:Yt,link:{type:ut,name:d}}}case Vo:{let d=`${l.link.type}_${l.link.trail.join("_")}`;return Le(l,d,O,p),{type:Vo,link:{type:ut,name:d}}}case Mr:return c(l,O,p);case Yr:return qt(l,O,p);default:return console.log("THIS IS NOT HANDLED; HANGING"),console.log(l),l}},r=(l,O)=>{let p=JSON.parse(JSON.stringify(l));p.description.self=[];for(let n of p.description.statements)n.type===vr?(n.target=i(n.target,p,O,"target"),n.source=i(n.source,p,O)):n.type===wr&&(n.values=n.values.map(d=>i(d,p,O)));w.push(p)},{members:E}=a,g=new Map;for(let l of E){let{name:O,data:p}=l;g.set(O,p)}var A=E.length-1|0;for(let l=A;l>=0;l=l-1|0){let O=E[l],{name:p,data:n}=O;if(O.type&&O.type===vo){r(O,a);continue}X(p,n)}let L=new Map,v=new Map,S=0;for(;b.length>0;){let l=b.shift();switch(l.type){case"back":{x.pop();break}case Lt:{let{data:O}=l,p=()=>{let h=x.join("."),C=Re(O.name,O.path),ae=F.get(C),{link:m}=ae,{load:q}=m,_=Object.freeze({data:O,index:S,address:U,trail:h});U+=q.size,L.set(h,_),v.set(S,_),O.type===yt?S=S+2|0:S=S+1|0};if(O.type===vt){p();break}let{name:n,path:d}=O,R=Re(n,d),V=F.get(R);switch(V.type){case Et:case It:{p();break}case ft:{let{members:h}=V,C=[...h];var A=C.length-1|0;U+=8;for(let m=A;m>=0;m=m-1|0){let[q,_]=C[m];X(q,_)}break}}break}case"name":{let{name:O}=l;x.push(O);break}}}let G=S|0,ce=Object.freeze({mapTrail:L,mapIndex:v});return{type:ft,length:G,members:g,indivisibles:ce}},Ye={};for(let a of f){let{path:b}=a;switch(a.type){case Et:{let{name:x,path:U}=a,M=Re(x,U);if(Object.hasOwn(Qe,M)){let k=Qe[M];F.set(M,k);continue}break}case"import":{if(Object.hasOwn(Qe,b)){let x=Qe[b];F.set(b,x);continue}break}case Vr:{let{name:x,path:U}=a,M=Re(x,U),k=Qe["Flogram.FP32"];F.set(M,k);break}case It:{let{name:x,path:U,description:M}=a,k=Re(x,U),W=fe(M);F.set(k,W);break}case ft:{let{name:x,path:U,description:M}=a,{generics:k}=M,W=Re(x,U);if(!k||k.length===0){let X=Ie(M);F.set(W,X)}break}}}s.structures=Ye;let Pe=0;t.memory&&(Pe+=t.draws?7:6);let bt=(a,b)=>{let x=$.get(a);if(typeof x>"u"){$.set(a,[b]);return}(x.length==0||x.length>0&&x[0].body!==b.body)&&$.set(a,[b,...x])},Oe=a=>{let{name:b,path:x}=a,U=Re(b,x);switch(x==="Flogram"&&(Hr(b)?U=Re(a.description.inputs[0]?.data?.name?.toLowerCase()+"."+De(b),x):a.description.outputs&&a.description.outputs.length>=1&&!Gr(a.name)?a.description.outputs[0]?.data?.name&&(U=Re(a.description.outputs[0]?.data?.name?.toLowerCase()+"."+De(b,a.description.inputs?.length),x)):(mt.includes(a.description.inputs[1]?.data?.name?.toUpperCase())&&(U=Re(a.description.inputs[1]?.data?.name?.toUpperCase()+"."+De(b),x),Yo=a.description.inputs[1]?.data?.name?.toUpperCase()),Yo&&(U=Re(Yo.toLowerCase()+"."+De(b),x)))),a.type){case Et:{if(Object.hasOwn(dt,U)){let M=dt[U];bt(U,M);return}break}case vo:{let{description:M}=a,{inputs:k,outputs:W}=M,X=Re(b,x),re={type:"artificial",index:Pe,procedure:a,lengths:Object.freeze({inputs:_e(k),outputs:_e(W)})};bt(X,re);break}}Pe=Pe+1|0},Q=[],pe=[];for(let a of w){if(a.description.generics?.length>0)continue;let{description:b}=a,{inputs:x,outputs:U}=b,M=[...x,...U];if(!(a.type===Et&&M.some(k=>!mt.includes(k.data.name))))switch(Oe(a),a.type){case"import":{let{path:k}=a;if(Object.hasOwn(dt,k))continue;Q.push(a);break}case vo:{pe.push(a);break}}}let we=a=>{let b=0,x=[];for(let U of a){let M=()=>{x.push(Mt),b=b+1|0},k=Ne=>{let{identity:je}=Ne;x.push(je),b=b+1|0},W=()=>{x.push(Mt),b=b+1|0},X=()=>{x.push(Mt),b=b+1|0,x.push(Mt),b=b+1|0},{name:re,data:he}=U;switch(he.type){case"Maybe":case Lt:{let{name:Ne,path:je}=he,He=Re(Ne,je),Le=F.get(He);if(!Le)k(Qe["Flogram.FP32"]);else switch(Le.type){case Et:{Ne===wt?X():k(Le);break}case It:{M();break}case ft:{X();break}}break}case vt:{he.name===yt||he.name===wt?X():W();break}case yt:{X();break}}}return[b,x]},nt=(a,b)=>{let x=b.length|0,U=Ge(x);b.unshift(a,...U)},Bt=()=>{let a=[],b=0,x=[...Q,...pe];t.memory&&(b=t.draws?7:6,a.push(st,1,127,1,127),a.push(st,1,127,0),a.push(st,0,0),a.push(st,2,127,127,0),a.push(st,0,2,127,127),a.push(st,0,2,127,127),t.draws&&a.push(st,1,127,0));for(let k of x){let{description:W}=k,{inputs:X,outputs:re}=W,[he,Ne]=we(X),[je,He]=we(re);a.push(st,he,...Ne,je,...He)}let U=x.length|0,M=Ge(U+b);return a.unshift(...M),nt(ti,a),a},Je=()=>{let a=[];return a.push(2),a.push(127,1),a.push(65,0,11),a.push(127,1),a.push(65,0,11),nt(oi,a),a},Z=0,Ot=()=>{let a=[],b=0,x={};if(t.memory){let k=re=>{let he=[...re].map(Ne=>Ne.charCodeAt(0));return[he.length,...he]},W=[k("alloc"),k("dealloc"),k("merge"),k("save"),k("undo"),k("undoPenultimate")];t.draws&&W.push(k("draw"));let X=t.draws?7:6;for(let re=0;re<X;re++){ke.fill(wo),Lo(b,ke);let he=b|0;a.push(...Mo,...W[re],As,he),b=b+1|0}}for(let k of Q){let{path:W}=k;ke.fill(wo),Lo(b,ke);let X=String.fromCodePoint(...ke);x[X]={path:k.path,description:k.description};let re=b|0;a.push(...Mo,ke.length|0,...ke,As,re),b=b+1|0}Z=b|0,t.memory&&(a.push(...Mo,...si,qr,...Xr),b=b+1|0);let U=b|0,M=Ge(U);return a.unshift(...M),nt(ei,a),s.imports=x,a},Kt=()=>{let a=[];var b=pe.length|0;for(let M=0;M<b;M=M+1|0){let k=M|0,W=Z+k|0,X=Ge(W);a.push(...X)}let x=pe.length|0,U=Ge(x);return a.unshift(...U),nt(Wr,a),a},Gt=()=>{let a=[],b=0,x={};var U=pe.length|0;for(let W=0;W<U;W=W+1|0){let X=W+Z|0,re=Ge(X);ke.fill(wo),Lo(b,ke);let{name:he,path:Ne,description:je}=pe[W];je={inputs:je.inputs,outputs:je.outputs};let He=String.fromCodePoint(...ke);x[He]={name:he,path:Ne,description:je},a.push(ke.length|0,...ke,ni,...re),b=b+1|0}let M=b|0,k=Ge(M);return a.unshift(...k),nt(Qr,a),s.procedures=x,a},Ht=()=>{let a=[];for(let U of pe){let M=kt(U,F,$,w),k=M.length|0,W=Ge(k);a.push(...W,...M)}let b=pe.length|0,x=Ge(b);return a.unshift(...x),nt(Zr,a),a},Xt=Bt(),$t=Je(),ze=Ot(),qe=Kt(),zt=Gt(),_t=Ht(),Jt=new Uint8Array([...ai,...ri,...Xt,...ze,...qe,...$t,...zt,..._t]);return[s,Jt]},li=Object.freeze({compile:ii}),$i=li;export{$i as default};
