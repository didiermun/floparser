var Rn=Object.create;var Kt=Object.defineProperty;var Nn=Object.getOwnPropertyDescriptor;var kn=Object.getOwnPropertyNames;var Pn=Object.getPrototypeOf,Fn=Object.prototype.hasOwnProperty;var Ht=(a,l)=>()=>(l||a((l={exports:{}}).exports,l),l.exports);var Cn=(a,l,b,O)=>{if(l&&typeof l=="object"||typeof l=="function")for(let r of kn(l))!Fn.call(a,r)&&r!==b&&Kt(a,r,{get:()=>l[r],enumerable:!(O=Nn(l,r))||O.enumerable});return a};var Dn=(a,l,b)=>(b=a!=null?Rn(Pn(a)):{},Cn(l||!a||!a.__esModule?Kt(b,"default",{value:a,enumerable:!0}):b,a));var $t=Ht((Yt,Xt)=>{(function(a){var l=Object.hasOwnProperty,b=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},O=10,r=typeof process=="object"&&typeof process.nextTick=="function",F=typeof Symbol=="function",C=typeof Reflect=="object",K=typeof setImmediate=="function",le=K?setImmediate:setTimeout,ne=F?C&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function fe(){this._events={},this._conf&&W.call(this,this._conf)}function W(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==a&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function H(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var s=new Error(n);s.name="MaxListenersExceededWarning",s.emitter=this,s.count=e,process.emitWarning(s)}else console.error(n),console.trace&&console.trace()}var ue=function(e,t,n){var s=arguments.length;switch(s){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var u=new Array(s);s--;)u[s]=arguments[s];return u}};function Oe(e,t){for(var n={},s,u=e.length,f=t?t.length:0,h=0;h<u;h++)s=e[h],n[s]=h<f?t[h]:a;return n}function Ne(e,t,n){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var s,u;if((n.on||n.off)&&(s=n.on,u=n.off),t.addEventListener?(s=t.addEventListener,u=t.removeEventListener):t.addListener?(s=t.addListener,u=t.removeListener):t.on&&(s=t.on,u=t.off),!s&&!u)throw Error("target does not implement any known event API");if(typeof s!="function")throw TypeError("on method must be a function");if(typeof u!="function")throw TypeError("off method must be a function");this._on=s,this._off=u;var f=e._observers;f?f.push(this):e._observers=[this]}Object.assign(Ne.prototype,{subscribe:function(e,t,n){var s=this,u=this._target,f=this._emitter,h=this._listeners,i=function(){var c=ue.apply(null,arguments),o={data:c,name:t,original:e};if(n){var p=n.call(u,o);p!==!1&&f.emit.apply(f,[o.name].concat(c));return}f.emit.apply(f,[t].concat(c))};if(h[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,f._newListener&&f._removeListener&&!s._onNewListener?(this._onNewListener=function(c){c===t&&h[e]===null&&(h[e]=i,s._on.call(u,e,i))},f.on("newListener",this._onNewListener),this._onRemoveListener=function(c){c===t&&!f.hasListeners(c)&&h[e]&&(h[e]=null,s._off.call(u,e,i))},h[e]=null,f.on("removeListener",this._onRemoveListener)):(h[e]=i,s._on.call(u,e,i))},unsubscribe:function(e){var t=this,n=this._listeners,s=this._emitter,u,f,h=this._off,i=this._target,c;if(e&&typeof e!="string")throw TypeError("event must be a string");function o(){t._onNewListener&&(s.off("newListener",t._onNewListener),s.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var p=Le.call(s,t);s._observers.splice(p,1)}if(e){if(u=n[e],!u)return;h.call(i,e,u),delete n[e],--this._listenersCount||o()}else{for(f=ne(n),c=f.length;c-- >0;)e=f[c],h.call(i,e,n[e]);this._listeners={},this._listenersCount=0,o()}}});function _e(e,t,n,s){var u=Object.assign({},t);if(!e)return u;if(typeof e!="object")throw TypeError("options must be an object");var f=Object.keys(e),h=f.length,i,c,o;function p(x){throw Error('Invalid "'+i+'" option value'+(x?". Reason: "+x:""))}for(var E=0;E<h;E++){if(i=f[E],!s&&!l.call(t,i))throw Error('Unknown "'+i+'" option');c=e[i],c!==a&&(o=n[i],u[i]=o?o(c,p):c)}return u}function pe(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function xe(e){var t="value must be type of "+e.join("|"),n=e.length,s=e[0],u=e[1];return n===1?function(f,h){if(typeof f===s)return f;h(t)}:n===2?function(f,h){var i=typeof f;if(i===s||i===u)return f;h(t)}:function(f,h){for(var i=typeof f,c=n;c-- >0;)if(i===e[c])return f;h(t)}}var ke=xe(["function"]),Pe=xe(["object","function"]);function De(e,t,n){var s,u,f=0,h,i=new e(function(c,o,p){n=_e(n,{timeout:0,overload:!1},{timeout:function(A,P){return A*=1,(typeof A!="number"||A<0||!Number.isFinite(A))&&P("timeout must be a positive number"),A}}),s=!n.overload&&typeof e.prototype.cancel=="function"&&typeof p=="function";function E(){u&&(u=null),f&&(clearTimeout(f),f=0)}var x=function(A){E(),c(A)},I=function(A){E(),o(A)};s?t(x,I,p):(u=[function(A){I(A||Error("canceled"))}],t(x,I,function(A){if(h)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof A!="function")throw TypeError("onCancel callback must be a function");u.push(A)}),h=!0),n.timeout>0&&(f=setTimeout(function(){var A=Error("timeout");A.code="ETIMEDOUT",f=0,i.cancel(A),o(A)},n.timeout))});return s||(i.cancel=function(c){if(u){for(var o=u.length,p=1;p<o;p++)u[p](c);u[0](c),u=null}}),i}function Le(e){var t=this._observers;if(!t)return-1;for(var n=t.length,s=0;s<n;s++)if(t[s]._target===e)return s;return-1}function ie(e,t,n,s,u){if(!n)return null;if(s===0){var f=typeof t;if(f==="string"){var h,i,c=0,o=0,p=this.delimiter,E=p.length;if((i=t.indexOf(p))!==-1){h=new Array(5);do h[c++]=t.slice(o,i),o=i+E;while((i=t.indexOf(p,o))!==-1);h[c++]=t.slice(o),t=h,u=c}else t=[t],u=1}else f==="object"?u=t.length:(t=[t],u=1)}var x=null,I,A,P,w,J,ee=t[s],se=t[s+1],$,v;if(s===u)n._listeners&&(typeof n._listeners=="function"?(e&&e.push(n._listeners),x=[n]):(e&&e.push.apply(e,n._listeners),x=[n]));else if(ee==="*"){for($=ne(n),i=$.length;i-- >0;)I=$[i],I!=="_listeners"&&(v=ie(e,t,n[I],s+1,u),v&&(x?x.push.apply(x,v):x=v));return x}else if(ee==="**"){for(J=s+1===u||s+2===u&&se==="*",J&&n._listeners&&(x=ie(e,t,n,u,u)),$=ne(n),i=$.length;i-- >0;)I=$[i],I!=="_listeners"&&(I==="*"||I==="**"?(n[I]._listeners&&!J&&(v=ie(e,t,n[I],u,u),v&&(x?x.push.apply(x,v):x=v)),v=ie(e,t,n[I],s,u)):I===se?v=ie(e,t,n[I],s+2,u):v=ie(e,t,n[I],s,u),v&&(x?x.push.apply(x,v):x=v));return x}else n[ee]&&(x=ie(e,t,n[ee],s+1,u));if(A=n["*"],A&&ie(e,t,A,s+1,u),P=n["**"],P)if(s<u)for(P._listeners&&ie(e,t,P,u,u),$=ne(P),i=$.length;i-- >0;)I=$[i],I!=="_listeners"&&(I===se?ie(e,t,P[I],s+2,u):I===ee?ie(e,t,P[I],s+1,u):(w={},w[I]=P[I],ie(e,t,{"**":w},s+1,u)));else P._listeners?ie(e,t,P,u,u):P["*"]&&P["*"]._listeners&&ie(e,t,P["*"],u,u);return x}function be(e,t,n){var s=0,u=0,f,h=this.delimiter,i=h.length,c;if(typeof e=="string")if((f=e.indexOf(h))!==-1){c=new Array(5);do c[s++]=e.slice(u,f),u=f+i;while((f=e.indexOf(h,u))!==-1);c[s++]=e.slice(u)}else c=[e],s=1;else c=e,s=e.length;if(s>1){for(f=0;f+1<s;f++)if(c[f]==="**"&&c[f+1]==="**")return}var o=this.listenerTree,p;for(f=0;f<s;f++)if(p=c[f],o=o[p]||(o[p]={}),f===s-1)return o._listeners?(typeof o._listeners=="function"&&(o._listeners=[o._listeners]),n?o._listeners.unshift(t):o._listeners.push(t),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,H.call(this,o._listeners.length,p))):o._listeners=t,!0;return!0}function ve(e,t,n,s){for(var u=ne(e),f=u.length,h,i,c,o=e._listeners,p;f-- >0;)i=u[f],h=e[i],i==="_listeners"?c=n:c=n?n.concat(i):[i],p=s||typeof i=="symbol",o&&t.push(p?c:c.join(this.delimiter)),typeof h=="object"&&ve.call(this,h,t,c,p);return t}function Fe(e){for(var t=ne(e),n=t.length,s,u,f;n-- >0;)u=t[n],s=e[u],s&&(f=!0,u!=="_listeners"&&!Fe(s)&&delete e[u]);return f}function Ue(e,t,n){this.emitter=e,this.event=t,this.listener=n}Ue.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function He(e,t,n){if(n===!0)u=!0;else if(n===!1)s=!0;else{if(!n||typeof n!="object")throw TypeError("options should be an object or true");var s=n.async,u=n.promisify,f=n.nextTick,h=n.objectify}if(s||f||u){var i=t,c=t._origin||t;if(f&&!r)throw Error("process.nextTick is not supported");u===a&&(u=t.constructor.name==="AsyncFunction"),t=function(){var o=arguments,p=this,E=this.event;return u?f?Promise.resolve():new Promise(function(x){le(x)}).then(function(){return p.event=E,i.apply(p,o)}):(f?process.nextTick:le)(function(){p.event=E,i.apply(p,o)})},t._async=!0,t._origin=c}return[t,h?new Ue(this,e,t):this]}function S(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,W.call(this,e)}S.EventEmitter2=S,S.prototype.listenTo=function(e,t,n){if(typeof e!="object")throw TypeError("target musts be an object");var s=this;n=_e(n,{on:a,off:a,reducers:a},{on:ke,off:ke,reducers:Pe});function u(f){if(typeof f!="object")throw TypeError("events must be an object");var h=n.reducers,i=Le.call(s,e),c;i===-1?c=new Ne(s,e,n):c=s._observers[i];for(var o=ne(f),p=o.length,E,x=typeof h=="function",I=0;I<p;I++)E=o[I],c.subscribe(E,f[E]||E,x?h:h&&h[E])}return b(t)?u(Oe(t)):u(typeof t=="string"?Oe(t.split(/\s+/)):t),this},S.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var s=n.length,u,f=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;s-- >0;)u=n[s],(!e||u._target===e)&&(u.unsubscribe(t),f=!0);return f},S.prototype.delimiter=".",S.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},S.prototype.getMaxListeners=function(){return this._maxListeners},S.prototype.event="",S.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},S.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},S.prototype._once=function(e,t,n,s){return this._many(e,1,t,n,s)},S.prototype.many=function(e,t,n,s){return this._many(e,t,n,!1,s)},S.prototype.prependMany=function(e,t,n,s){return this._many(e,t,n,!0,s)},S.prototype._many=function(e,t,n,s,u){var f=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");function h(){return--t===0&&f.off(e,h),n.apply(this,arguments)}return h._origin=n,this._on(e,h,s,u)},S.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var e=arguments[0],t,n=this.wildcard,s,u,f,h,i;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(n&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(u=e.length,F){for(f=0;f<u;f++)if(typeof e[f]=="symbol"){i=!0;break}}i||(e=e.join(this.delimiter))}var c=arguments.length,o;if(this._all&&this._all.length)for(o=this._all.slice(),f=0,u=o.length;f<u;f++)switch(this.event=e,c){case 1:o[f].call(this,e);break;case 2:o[f].call(this,e,arguments[1]);break;case 3:o[f].call(this,e,arguments[1],arguments[2]);break;default:o[f].apply(this,arguments)}if(n)o=[],ie.call(this,o,t,this.listenerTree,0,u);else if(o=this._events[e],typeof o=="function"){switch(this.event=e,c){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(s=new Array(c-1),h=1;h<c;h++)s[h-1]=arguments[h];o.apply(this,s)}return!0}else o&&(o=o.slice());if(o&&o.length){if(c>3)for(s=new Array(c-1),h=1;h<c;h++)s[h-1]=arguments[h];for(f=0,u=o.length;f<u;f++)switch(this.event=e,c){case 1:o[f].call(this);break;case 2:o[f].call(this,arguments[1]);break;case 3:o[f].call(this,arguments[1],arguments[2]);break;default:o[f].apply(this,s)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},S.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||fe.call(this);var e=arguments[0],t=this.wildcard,n,s,u,f,h,i;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(n=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(f=e.length,F){for(h=0;h<f;h++)if(typeof e[h]=="symbol"){s=!0;break}}s||(e=e.join(this.delimiter))}var c=[],o=arguments.length,p;if(this._all)for(h=0,f=this._all.length;h<f;h++)switch(this.event=e,o){case 1:c.push(this._all[h].call(this,e));break;case 2:c.push(this._all[h].call(this,e,arguments[1]));break;case 3:c.push(this._all[h].call(this,e,arguments[1],arguments[2]));break;default:c.push(this._all[h].apply(this,arguments))}if(t?(p=[],ie.call(this,p,n,this.listenerTree,0)):p=this._events[e],typeof p=="function")switch(this.event=e,o){case 1:c.push(p.call(this));break;case 2:c.push(p.call(this,arguments[1]));break;case 3:c.push(p.call(this,arguments[1],arguments[2]));break;default:for(u=new Array(o-1),i=1;i<o;i++)u[i-1]=arguments[i];c.push(p.apply(this,u))}else if(p&&p.length){if(p=p.slice(),o>3)for(u=new Array(o-1),i=1;i<o;i++)u[i-1]=arguments[i];for(h=0,f=p.length;h<f;h++)switch(this.event=e,o){case 1:c.push(p[h].call(this));break;case 2:c.push(p[h].call(this,arguments[1]));break;case 3:c.push(p[h].call(this,arguments[1],arguments[2]));break;default:c.push(p[h].apply(this,u))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},S.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},S.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},S.prototype.onAny=function(e){return this._onAny(e,!1)},S.prototype.prependAny=function(e){return this._onAny(e,!0)},S.prototype.addListener=S.prototype.on,S.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},S.prototype._on=function(e,t,n,s){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||fe.call(this);var u=this,f;return s!==a&&(f=He.call(this,e,t,s),t=f[0],u=f[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(be.call(this,e,t,n),u):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,H.call(this,this._events[e].length,e))):this._events[e]=t,u)},S.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var n,s=[];if(this.wildcard){var u=typeof e=="string"?e.split(this.delimiter):e.slice();if(s=ie.call(this,null,u,this.listenerTree,0),!s)return this}else{if(!this._events[e])return this;n=this._events[e],s.push({_listeners:n})}for(var f=0;f<s.length;f++){var h=s[f];if(n=h._listeners,b(n)){for(var i=-1,c=0,o=n.length;c<o;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){i=c;break}if(i<0)continue;return this.wildcard?h._listeners.splice(i,1):this._events[e].splice(i,1),n.length===0&&(this.wildcard?delete h._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete h._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&Fe(this.listenerTree),this},S.prototype.offAny=function(e){var t=0,n=0,s;if(e&&this._all&&this._all.length>0){for(s=this._all,t=0,n=s.length;t<n;t++)if(e===s[t])return s.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(s=this._all,this._removeListener)for(t=0,n=s.length;t<n;t++)this.emit("removeListenerAny",s[t]);this._all=[]}return this},S.prototype.removeListener=S.prototype.off,S.prototype.removeAllListeners=function(e){if(e===a)return!this._events||fe.call(this),this;if(this.wildcard){var t=ie.call(this,null,e,this.listenerTree,0),n,s;if(!t)return this;for(s=0;s<t.length;s++)n=t[s],n._listeners=null;this.listenerTree&&Fe(this.listenerTree)}else this._events&&(this._events[e]=null);return this},S.prototype.listeners=function(e){var t=this._events,n,s,u,f,h;if(e===a){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(n=ne(t),f=n.length,u=[];f-- >0;)s=t[n[f]],typeof s=="function"?u.push(s):u.push.apply(u,s);return u}else{if(this.wildcard){if(h=this.listenerTree,!h)return[];var i=[],c=typeof e=="string"?e.split(this.delimiter):e.slice();return ie.call(this,i,c,h,0),i}return t?(s=t[e],s?typeof s=="function"?[s]:s:[]):[]}},S.prototype.eventNames=function(e){var t=this._events;return this.wildcard?ve.call(this,this.listenerTree,[],null,e):t?ne(t):[]},S.prototype.listenerCount=function(e){return this.listeners(e).length},S.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n=typeof e=="string"?e.split(this.delimiter):e.slice();return ie.call(this,t,n,this.listenerTree,0),t.length>0}var s=this._events,u=this._all;return!!(u&&u.length||s&&(e===a?ne(s).length:s[e]))},S.prototype.listenersAny=function(){return this._all?this._all:[]},S.prototype.waitFor=function(e,t){var n=this,s=typeof t;return s==="number"?t={timeout:t}:s==="function"&&(t={filter:t}),t=_e(t,{timeout:0,filter:a,handleError:!1,Promise,overload:!1},{filter:ke,Promise:pe}),De(t.Promise,function(u,f,h){function i(){var c=t.filter;if(!(c&&!c.apply(n,arguments)))if(n.off(e,i),t.handleError){var o=arguments[0];o?f(o):u(ue.apply(null,arguments).slice(1))}else u(ue.apply(null,arguments))}h(function(){n.off(e,i)}),n._on(e,i,!1)},{timeout:t.timeout,overload:t.overload})};function Ye(e,t,n){n=_e(n,{Promise,timeout:0,overload:!1},{Promise:pe});var s=n.Promise;return De(s,function(u,f,h){var i;if(typeof e.addEventListener=="function"){i=function(){u(ue.apply(null,arguments))},h(function(){e.removeEventListener(t,i)}),e.addEventListener(t,i,{once:!0});return}var c=function(){o&&e.removeListener("error",o),u(ue.apply(null,arguments))},o;t!=="error"&&(o=function(p){e.removeListener(t,c),f(p)},e.once("error",o)),h(function(){o&&e.removeListener("error",o),e.removeListener(t,c)}),e.once(t,c)},{timeout:n.timeout,overload:n.overload})}var g=S.prototype;if(Object.defineProperties(S,{defaultMaxListeners:{get:function(){return g._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");g._maxListeners=e},enumerable:!0},once:{value:Ye,writable:!0,configurable:!0}}),Object.defineProperties(g,{_maxListeners:{value:O,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return S});else if(typeof Yt=="object")Xt.exports=S;else{var y=new Function("","return this")();y.EventEmitter2=S}})()});var Qt=Ht((kc,qt)=>{qt.exports=$t()});var ri=Dn(Qt(),1);var Ln="as",Un="=",wn="break",Sn="else",Vn="enum",Mn="export",Bn="if",Gn="import",Kn="->",Hn="is",Yn="loop",Xn="mut",$n="native",qn="object",Qn="fn",Zn="return",Wn="self",Jn="template",es=Object.freeze({ALIAS:Ln,ASSIGN:Un,BREAK:wn,ELSE:Sn,ENUMERATION:Vn,EXPORT:Mn,IF:Bn,IMPORT:Gn,INTO:Kn,IS:Hn,LOOP:Yn,MUTABLE:Xn,NATIVE:$n,OBJECT:qn,PROCEDURE:Qn,RETURN:Zn,SELF:Wn,TEMPLATE:Jn}),Zt=es;var ts="array",ns="assignment",ss="branch-default",os="branch-value",rs="break",cs="condition",is="declaration",as="enumeration",ls="export",us="expression",fs="import",ps="instance",bs="label",hs="literal",ds="loop",_s="module",ms="mutable",Es="name-list",Os="native",gs="object",ys="procedure",xs="procedure-call",vs="return",js="self",Ts="submodule",zs="template",Is="type-pair",As=Object.freeze({ARRAY:ts,ASSIGNMENT:ns,BRANCH_DEFAULT:ss,BRANCH_VALUE:os,BREAK:rs,CONDITION:cs,DECLARATION:is,ENUMERATION:as,EXPORT:ls,EXPRESSION:us,IMPORT:fs,INSTANCE:ps,LABEL:bs,LITERAL:hs,LOOP:ds,MODULE:_s,MUTABLE:ms,NAME_LIST:Es,NATIVE:Os,OBJECT:gs,PROCEDURE:ys,PROCEDURE_CALL:xs,RETURN:vs,SELF:js,SUBMODULE:Ts,TEMPLATE:zs,TYPE_PAIR:Is}),Wt=As;var Rs=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Jt=Rs;var Ns=Object.freeze([]),ks=Object.freeze({}),Ps="",Fs="	",Cs=`
`,Ds="UTF-8",Ls=Object.freeze({EMPTY_ARRAY:Ns,EMPTY_OBJECT:ks,EMPTY_STRING:Ps,HORIZONTAL_TAB:Fs,LINE_BREAK:Cs,UNICODE_TEXT:Ds,Codes:Jt,Keys:Zt,Types:Wt}),Ze=Ls;var{EMPTY_STRING:Us,UNICODE_TEXT:bt}=Ze,ws=44,Ss=48,Vs=57,Ms=46,Bs=45,Gs=43,Ks=65,Hs=90,Ys=-1,Xs=1,$s=new TextDecoder(bt),qs=new TextEncoder,Qs=(a,l,b=0,O=a.length|0,r=0,F=l.length|0)=>{for(r=r|0,b=b|0,F=F|0,O=O|0;;){let C=b>=O,K=r>=F;if(C||K)break;let ne=a[b],fe=l[r];if(b=b+1|0,r=r+1|0,ne<fe)return Ys;if(ne>fe)return Xs}return 0},Zs=(a,l,b=0,O=a.length|0,r=0,F=l.length|0)=>{for(r=r|0,b=b|0,F=F|0,O=O|0;;){let C=r>=F,K=b>=O;if(C||K)break;l[r]=a[b],r=r+1|0,b=b+1|0}},Ws=(a,l,b=0,O=a.length|0,r=0,F=l.length|0)=>{b=b|0,r=r|0,O=O|0,F=F|0;let C=O-b|0,K=F-r|0;if(C!==K)return!1;for(;;){let le=b>=O,ne=r>=F;if(le||ne)break;let W=a[b],H=l[r];if(b=b+1|0,r=r+1|0,W!==H)return!1}return!0},Js=a=>{a=a>>>0;let l=0,b=0;for(;b=(b<<1|1)>>>0,!(b>a);)l=l+1|0;return l},nn=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),pt=(a,l,b,O)=>{for(a=a>>>0,O=O??l.length|0,b=b|0,O=O|0;a>0&&O>b;)O=O-1|0,l[O]=nn[a&15],a=a>>>4},eo=(a,l,b,O)=>{let r=b|0,F=b+O|0;if(O===0)return!1;let C=l[r];for((C===Gs||C===Bs)&&(r=r+1|0);r<F;){let K=l[r];if(r=r+1|0,!(Ss<=K&&K<=Vs||(Ms===K||ws===K)))return!1}return!0},to=a=>{let l=a>=Ks,b=a<=Hs;return l&&b},st=128,ot=127,sn=-1,Se=64,ht=a=>{a=a|0;let l=[];for(;;){let b=a&ot;a=a>>7;let O=a===0,r=(b&Se)===0,F=O&&r,C=a===-1,K=(b&Se)!==0;if(F||C&&K){l.push(b);break}b=b|st,l.push(b)}return l},no=a=>{let l=[],b=!0;for(;b;){let O=a&ot;a>>=7,a===0&&!(O&Se)||a===-1&&O&Se?b=!1:O|=st,l.push(O)}return l},on=(a,l)=>{l=l|0;let b=0,O=0;for(;;){let r=a[l]|0;l=l+1|0;let F=(r&ot)<<O;if(O=O+7|0,b=b|F,(r&st)===0){let K=(r&Se)!==0,le=O<32;if(K&&le){let fe=sn<<O;b=b|fe}break}}return b},so=(a,l)=>{l=l|0;let b=0,O=0;for(;;){let r=a[l]|0;l=l+1|0;let F=(r&ot)<<O;if(O=O+7|0,b=b|F,!(r&st)){if(r&Se){let C=sn<<O;b=b|C}break}}return b},oo=a=>$s.decode(a),ro=a=>qs.encode(a),co=(a=Us)=>{let l=a.length|0,b=ht(l),O=Buffer.from(a,bt);return Object.freeze([...b,...O])},io=(a,l)=>{l=l|0;let b=on(a,l),O=ht(b).length;return l=l+O|0,a.subarray(l,l+b|0).toString(bt)},ao=58,lo=46,We=32,ut=48,uo=67,Ie=new Uint8Array(uo),en=Ie.subarray(0,8),nt=Ie.subarray(10,49),tn=Ie.subarray(51,68),ft=16,fo=2;Ie[8]=ao;Ie[9]=We;Ie[49]=We;Ie[50]=We;var po=(a,l)=>{l=l??console.log;let b=32,O=126,r=a.length|0,F=0;for(;r>0;){en.fill(ut),pt(F,en),nt.fill(We),tn.fill(We);let C=r>=ft?ft:r;r=r-ft|0;let K=0,le=0;for(let fe=1;fe<=C;fe=fe+1|0){let W=a[F]&255;nt[K+0|0]=ut,nt[K+1|0]=ut,pt(W,nt,K,K+2|0);let H=lo;b<=W&&W<=O&&(H=W),tn[le]=H,F=F+1|0,K=K+2|0,le=le+1|0,fe%fo===0&&(K=K+1|0)}let ne=String.fromCodePoint(...Ie);l(ne)}},bo=function*(a,l){let b=a.length|0,O=l.length|0,r=0;for(;r<b&&r<O;){let F=a[r],C=l[r];yield[F,C],r=r+1|0}},ho=function*(a,l,b){let O=a.length|0,r=l.length|0,F=b.length|0,C=0;for(;C<O&&C<r&&C<F;){let K=a[C],le=l[C],ne=b[C];yield[K,le,ne],C=C+1|0}},_o=Object.freeze({ARRAY_COMPARE:Qs,ARRAY_COPY:Zs,ARRAY_EQUAL:Ws,BIT_DEPTH:Js,HEX_DIGITS:nn,HEX_ENCODE:pt,IS_NUMBER:eo,IS_UPPERCASE:to,LEB128_DECODE:on,LEB128_DECODE_SIGNED:so,LEB128_ENCODE:ht,LEB128_ENCODE_SIGNED:no,UTF8_DECODE:oo,UTF8_ENCODE:ro,WASM_STRING_ENCODE:co,WASM_STRING_DECODE:io,XXD_DUMP_HEX:po,ZIP2:bo,ZIP3:ho}),Ve=_o;var ge=(a,l=2)=>{let b="";switch(a){case"+":b="add";break;case"-":b=l===2?"sub":"neg";break;case"*":b="mul";break;case"/":b="div";break;case"%":b="rem";break;case"==":b="eq";break;case">":b="gt";break;case"<":b="lt";break;case">=":b="ge";break;case"<=":b="le";break;case"!=":b="ne";break;case"&":b="and";break;case"|":b="or";break;case"^":b="xor";break;case"not":b="not";break;case"i32":b="toi32";break;case"u32":b="tou32";break;case"i64":b="toi64";break;case"u64":b="tou64";break;case"fp64":b="tofp64";break;case"fp32":b="tofp32";break}return b};var mo=Object.freeze({type:"native",body:Object.freeze([160]),lengths:Object.freeze({inputs:2,outputs:1})}),Eo=Object.freeze({type:"native",body:Object.freeze([163]),lengths:Object.freeze({inputs:2,outputs:1})}),Oo=Object.freeze({type:"native",body:Object.freeze([162]),lengths:Object.freeze({inputs:2,outputs:1})}),go=Object.freeze({type:"native",body:Object.freeze([68,0,0,0,0,0,0,240,191,162]),lengths:Object.freeze({inputs:1,outputs:1})}),yo=Object.freeze({type:"native",body:Object.freeze([161]),lengths:Object.freeze({inputs:2,outputs:1})}),xo=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),vo=Object.freeze({type:"native",body:Object.freeze([128]),lengths:Object.freeze({inputs:2,outputs:1})}),jo=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),To=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:1,outputs:1})}),zo=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),Io=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),Ao=Object.freeze({type:"native",body:Object.freeze([127]),lengths:Object.freeze({inputs:2,outputs:1})}),Ro=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),Bc=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:2,outputs:1})}),No=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),rn=Object.freeze({type:"native",body:Object.freeze([146]),lengths:Object.freeze({inputs:2,outputs:1})}),cn=Object.freeze({type:"native",body:Object.freeze([149]),lengths:Object.freeze({inputs:2,outputs:1})}),an=Object.freeze({type:"native",body:Object.freeze([148]),lengths:Object.freeze({inputs:2,outputs:1})}),ko=Object.freeze({type:"native",body:Object.freeze([67,0,0,128,191,148]),lengths:Object.freeze({inputs:2,outputs:1})}),ln=Object.freeze({type:"native",body:Object.freeze([140]),lengths:Object.freeze({inputs:2,outputs:1})}),dt=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),_t=Object.freeze({type:"native",body:Object.freeze([110]),lengths:Object.freeze({inputs:2,outputs:1})}),mt=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),Et=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),Ot=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),gt=Object.freeze({type:"native",body:Object.freeze([109]),lengths:Object.freeze({inputs:2,outputs:1})}),yt=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),xt=Object.freeze({type:"native",body:Object.freeze([65,1,0,0,0,108]),lengths:Object.freeze({inputs:1,outputs:1})}),vt=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),Po=Object.freeze({type:"native",body:Object.freeze([130]),lengths:Object.freeze({inputs:2,outputs:1})}),Fo=Object.freeze({type:"native",body:Object.freeze([129]),lengths:Object.freeze({inputs:2,outputs:1})}),jt=Object.freeze({type:"native",body:Object.freeze([112]),lengths:Object.freeze({inputs:2,outputs:1})}),Tt=Object.freeze({type:"native",body:Object.freeze([111]),lengths:Object.freeze({inputs:2,outputs:1})}),Co=Object.freeze({type:"native",body:Object.freeze([86]),lengths:Object.freeze({inputs:2,outputs:1})}),Do=Object.freeze({type:"native",body:Object.freeze([85]),lengths:Object.freeze({inputs:2,outputs:1})}),Lo=Object.freeze({type:"native",body:Object.freeze([100]),lengths:Object.freeze({inputs:2,outputs:1})}),zt=Object.freeze({type:"native",body:Object.freeze([75]),lengths:Object.freeze({inputs:2,outputs:1})}),It=Object.freeze({type:"native",body:Object.freeze([74]),lengths:Object.freeze({inputs:2,outputs:1})}),Uo=Object.freeze({type:"native",body:Object.freeze([94]),lengths:Object.freeze({inputs:2,outputs:1})}),wo=Object.freeze({type:"native",body:Object.freeze([84]),lengths:Object.freeze({inputs:2,outputs:1})}),So=Object.freeze({type:"native",body:Object.freeze([83]),lengths:Object.freeze({inputs:2,outputs:1})}),Vo=Object.freeze({type:"native",body:Object.freeze([99]),lengths:Object.freeze({inputs:2,outputs:1})}),At=Object.freeze({type:"native",body:Object.freeze([73]),lengths:Object.freeze({inputs:2,outputs:1})}),Rt=Object.freeze({type:"native",body:Object.freeze([72]),lengths:Object.freeze({inputs:2,outputs:1})}),Mo=Object.freeze({type:"native",body:Object.freeze([93]),lengths:Object.freeze({inputs:2,outputs:1})}),Bo=Object.freeze({type:"native",body:Object.freeze([87]),lengths:Object.freeze({inputs:2,outputs:1})}),Go=Object.freeze({type:"native",body:Object.freeze([88]),lengths:Object.freeze({inputs:2,outputs:1})}),Ko=Object.freeze({type:"native",body:Object.freeze([101]),lengths:Object.freeze({inputs:2,outputs:1})}),Nt=Object.freeze({type:"native",body:Object.freeze([76]),lengths:Object.freeze({inputs:2,outputs:1})}),kt=Object.freeze({type:"native",body:Object.freeze([77]),lengths:Object.freeze({inputs:2,outputs:1})}),Ho=Object.freeze({type:"native",body:Object.freeze([95]),lengths:Object.freeze({inputs:2,outputs:1})}),Yo=Object.freeze({type:"native",body:Object.freeze([89]),lengths:Object.freeze({inputs:2,outputs:1})}),Xo=Object.freeze({type:"native",body:Object.freeze([90]),lengths:Object.freeze({inputs:2,outputs:1})}),$o=Object.freeze({type:"native",body:Object.freeze([102]),lengths:Object.freeze({inputs:2,outputs:1})}),Pt=Object.freeze({type:"native",body:Object.freeze([78]),lengths:Object.freeze({inputs:2,outputs:1})}),Ft=Object.freeze({type:"native",body:Object.freeze([79]),lengths:Object.freeze({inputs:2,outputs:1})}),qo=Object.freeze({type:"native",body:Object.freeze([96]),lengths:Object.freeze({inputs:2,outputs:1})}),Qo=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),Zo=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),Wo=Object.freeze({type:"native",body:Object.freeze([97]),lengths:Object.freeze({inputs:2,outputs:1})}),Ct=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),Dt=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),Jo=Object.freeze({type:"native",body:Object.freeze([91]),lengths:Object.freeze({inputs:2,outputs:1})}),er=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),tr=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),nr=Object.freeze({type:"native",body:Object.freeze([98]),lengths:Object.freeze({inputs:2,outputs:1})}),Lt=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),Ut=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),sr=Object.freeze({type:"native",body:Object.freeze([92]),lengths:Object.freeze({inputs:2,outputs:1})}),or=Object.freeze({type:"native",body:Object.freeze([113]),lengths:Object.freeze({inputs:2,outputs:1})}),rr=Object.freeze({type:"native",body:Object.freeze([114]),lengths:Object.freeze({inputs:2,outputs:1})}),cr=Object.freeze({type:"native",body:Object.freeze([115]),lengths:Object.freeze({inputs:2,outputs:1})}),ir=Object.freeze({type:"native",body:Object.freeze([69]),lengths:Object.freeze({inputs:1,outputs:1})}),un=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),fn=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),ar=Object.freeze({type:"native",body:Object.freeze([170]),lengths:Object.freeze({inputs:1,outputs:1})}),lr=Object.freeze({type:"native",body:Object.freeze([171]),lengths:Object.freeze({inputs:1,outputs:1})}),ur=Object.freeze({type:"native",body:Object.freeze([168]),lengths:Object.freeze({inputs:1,outputs:1})}),fr=Object.freeze({type:"native",body:Object.freeze([169]),lengths:Object.freeze({inputs:1,outputs:1})}),pn=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),rt=Object.freeze({type:"native",body:Object.freeze([193]),lengths:Object.freeze({inputs:1,outputs:1})}),ct=Object.freeze({type:"native",body:Object.freeze([192]),lengths:Object.freeze({inputs:1,outputs:1})}),pr=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),br=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),hr=Object.freeze({type:"native",body:Object.freeze([176]),lengths:Object.freeze({inputs:1,outputs:1})}),dr=Object.freeze({type:"native",body:Object.freeze([177]),lengths:Object.freeze({inputs:1,outputs:1})}),_r=Object.freeze({type:"native",body:Object.freeze([175]),lengths:Object.freeze({inputs:1,outputs:1})}),mr=Object.freeze({type:"native",body:Object.freeze([174]),lengths:Object.freeze({inputs:1,outputs:1})}),Er=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),Or=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),gr=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),yr=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),bn=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),hn=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),dn=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),_n=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),xr=Object.freeze({type:"native",body:Object.freeze([185]),lengths:Object.freeze({inputs:1,outputs:1})}),vr=Object.freeze({type:"native",body:Object.freeze([186]),lengths:Object.freeze({inputs:1,outputs:1})}),wt=Object.freeze({type:"native",body:Object.freeze([183]),lengths:Object.freeze({inputs:1,outputs:1})}),St=Object.freeze({type:"native",body:Object.freeze([184]),lengths:Object.freeze({inputs:1,outputs:1})}),jr=Object.freeze({type:"native",body:Object.freeze([187]),lengths:Object.freeze({inputs:1,outputs:1})}),Tr=Object.freeze({type:"native",body:Object.freeze([180]),lengths:Object.freeze({inputs:1,outputs:1})}),zr=Object.freeze({type:"native",body:Object.freeze([181]),lengths:Object.freeze({inputs:1,outputs:1})}),Vt=Object.freeze({type:"native",body:Object.freeze([178]),lengths:Object.freeze({inputs:1,outputs:1})}),Mt=Object.freeze({type:"native",body:Object.freeze([179]),lengths:Object.freeze({inputs:1,outputs:1})}),Ir=Object.freeze({type:"native",body:Object.freeze([182]),lengths:Object.freeze({inputs:1,outputs:1})}),Je=Object.freeze(Object.assign({"Flogram./":cn,"Flogram.*":an,"Flogram.+":rn,"Flogram.-":ln},{"Flogram.fp64.div":Eo,"Flogram.fp64.mul":Oo,"Flogram.fp64.add":mo,"Flogram.fp64.sub":yo,"Flogram.fp64.neg":go,"Flogram.fp64.gt":Lo,"Flogram.fp64.lt":Vo,"Flogram.fp64.le":Ko,"Flogram.fp64.ge":$o,"Flogram.fp64.ne":nr,"Flogram.fp64.eq":Wo,"Flogram.fp64.toi32":ar,"Flogram.fp64.tou32":lr,"Flogram.fp64.tou64":dr,"Flogram.fp64.toi64":hr,"Flogram.fp64.tofp32":Ir},{"Flogram.u64.add":xo,"Flogram.u64.sub":zo,"Flogram.u64.mul":jo,"Flogram.u64.div":vo,"Flogram.u64.rem":Po,"Flogram.u64.gt":Co,"Flogram.u64.lt":wo,"Flogram.u64.le":Go,"Flogram.u64.ge":Xo,"Flogram.u64.ne":tr,"Flogram.u64.eq":Zo,"Flogram.u64.toi32":fn,"Flogram.u64.tou32":fn,"Flogram.u64.toi64":pr,"Flogram.u64.tofp32":zr,"Flogram.u64.tofp64":vr},{"Flogram.i64.add":Io,"Flogram.i64.sub":No,"Flogram.i64.neg":To,"Flogram.i64.mul":Ro,"Flogram.i64.div":Ao,"Flogram.i64.rem":Fo,"Flogram.i64.gt":Do,"Flogram.i64.lt":So,"Flogram.i64.le":Bo,"Flogram.i64.ge":Yo,"Flogram.i64.ne":er,"Flogram.i64.eq":Qo,"Flogram.i64.toi32":un,"Flogram.i64.tou32":un,"Flogram.i64.tou64":br,"Flogram.i64.tofp32":Tr,"Flogram.i64.tofp64":xr},{"Flogram.fp32.div":cn,"Flogram.fp32.mul":an,"Flogram.fp32.add":rn,"Flogram.fp32.sub":ln,"Flogram.fp32.neg":ko,"Flogram.fp32.gt":Uo,"Flogram.fp32.lt":Mo,"Flogram.fp32.le":Ho,"Flogram.fp32.ge":qo,"Flogram.fp32.ne":sr,"Flogram.fp32.eq":Jo,"Flogram.fp32.toi32":ur,"Flogram.fp32.tou32":fr,"Flogram.fp32.tou64":_r,"Flogram.fp32.toi64":mr,"Flogram.fp32.tofp64":jr},{"Flogram.u32.add":dt,"Flogram.u32.sub":Et,"Flogram.u32.mul":mt,"Flogram.u32.div":_t,"Flogram.u32.rem":jt,"Flogram.u32.gt":zt,"Flogram.u32.lt":At,"Flogram.u32.le":kt,"Flogram.u32.ge":Ft,"Flogram.u32.ne":Ut,"Flogram.u32.eq":Dt,"Flogram.u32.toi32":pn,"Flogram.u32.toi64":gr,"Flogram.u32.tou64":yr,"Flogram.u32.tofp32":Mt,"Flogram.u32.tofp64":St},{"Flogram.i32.add":Ot,"Flogram.i32.sub":vt,"Flogram.i32.neg":xt,"Flogram.i32.mul":yt,"Flogram.i32.div":gt,"Flogram.i32.rem":Tt,"Flogram.i32.gt":It,"Flogram.i32.lt":Rt,"Flogram.i32.le":Nt,"Flogram.i32.ge":Pt,"Flogram.i32.ne":Lt,"Flogram.i32.eq":Ct,"Flogram.i32.toi64":Er,"Flogram.i32.tou64":Or,"Flogram.i32.tou32":pn,"Flogram.i32.tofp32":Vt,"Flogram.i32.tofp64":wt},{"Flogram.i16.add":Ot,"Flogram.i16.sub":vt,"Flogram.i16.neg":xt,"Flogram.i16.mul":yt,"Flogram.i16.div":gt,"Flogram.i16.rem":Tt,"Flogram.i16.gt":It,"Flogram.i16.lt":Rt,"Flogram.i16.le":Nt,"Flogram.i16.ge":Pt,"Flogram.i16.ne":Lt,"Flogram.i16.eq":Ct,"Flogram.i16.toi32":rt,"Flogram.i16.tou32":rt,"Flogram.i16.toi64":bn,"Flogram.i16.tou64":hn,"Flogram.i16.tofp32":Vt,"Flogram.i16.tofp64":wt},{"Flogram.u16.add":dt,"Flogram.u16.sub":Et,"Flogram.u16.mul":mt,"Flogram.u16.div":_t,"Flogram.u16.rem":jt,"Flogram.u16.gt":zt,"Flogram.u16.lt":At,"Flogram.u16.le":kt,"Flogram.u16.ge":Ft,"Flogram.u16.ne":Ut,"Flogram.u16.eq":Dt,"Flogram.u16.toi32":rt,"Flogram.u16.tou32":rt,"Flogram.u16.toi64":bn,"Flogram.u16.tou64":hn,"Flogram.u16.tofp32":Mt,"Flogram.u16.tofp64":St},{"Flogram.i8.add":Ot,"Flogram.i8.sub":vt,"Flogram.i16.neg":xt,"Flogram.i8.mul":yt,"Flogram.i8.div":gt,"Flogram.i8.rem":Tt,"Flogram.i8.gt":It,"Flogram.i8.lt":Rt,"Flogram.i8.le":Nt,"Flogram.i8.ge":Pt,"Flogram.i8.ne":Lt,"Flogram.i8.eq":Ct,"Flogram.i8.toi32":ct,"Flogram.i8.tou32":ct,"Flogram.i8.toi64":dn,"Flogram.i8.tou64":_n,"Flogram.i8.tofp32":Vt,"Flogram.i8.tofp64":wt},{"Flogram.u8.add":dt,"Flogram.u8.sub":Et,"Flogram.u8.mul":mt,"Flogram.u8.div":_t,"Flogram.u8.rem":jt,"Flogram.u8.gt":zt,"Flogram.u8.lt":At,"Flogram.u8.le":kt,"Flogram.u8.ge":Ft,"Flogram.u8.ne":Ut,"Flogram.u8.eq":Dt,"Flogram.u8.toi32":ct,"Flogram.u8.tou32":ct,"Flogram.u8.toi64":dn,"Flogram.u8.tou64":_n,"Flogram.u8.tofp32":Mt,"Flogram.u8.tofp64":St},{"Flogram.bool.and":or,"Flogram.bool.or":rr,"Flogram.bool.xor":cr,"Flogram.bool.not":ir}));var{LEB128_ENCODE:ye}=Ve,Hc=new Int8Array(1),Yc=new Uint8Array(1),Ar=a=>{let l=[],b=!0;for(;b;){let O=a&127;a>>=7,a===0&&!(O&64)||a===-1&&O&64?b=!1:O|=128,l.push(O)}return new Uint8Array(l)},Rr=a=>{let l=[],b=!0;for(;b;){let O=a&127;a>>=7,a===0?b=!1:O|=128,l.push(O)}return new Uint8Array(l)},Nr=a=>{let l=[];for(;a>=128;)l.push(a&127|128),a>>>=7;return l.push(a),new Uint8Array(l)},kr=128,Pr=127,mn=64,Fr=a=>{a=a<<16>>16;let l=[];for(;;){let b=a&Pr;a=a>>7;let O=a===0,r=(b&mn)===0,F=O&&r,C=a===-1,K=(b&mn)!==0;if(F||C&&K){l.push(b);break}b=b|kr,l.push(b)}return l};var Cr=a=>{let l=new Float32Array(1);return l[0]=parseFloat(a),new Uint8Array(l.buffer)},En=a=>{let l=[],b=!0;for(;b;){let O=a&127;a>>=7,a===0&&!(O&64)||a===-1&&O&64?b=!1:O|=128,l.push(O)}return new Uint8Array(l)},Dr=a=>ye(a),Lr=a=>{let l=new Float64Array(1);return l[0]=a,new Uint8Array(l.buffer)},Ur=a=>{let l=[];for(;a>=128;)l.push(a&127|128),a>>>=7;return l.push(a),new Uint8Array(l)},wr=a=>{let l=[],b=!0;for(;b;){let O=a&127;a>>=7,a===0&&!(O&64)||a===-1&&O&64?b=!1:O|=128,l.push(O)}return new Uint8Array(l)},Sr=a=>{let l=new Uint8Array(1);return l[0]=a==="TRUE"?1:a==="FALSE"?0:a,l},Vr=a=>{let l=a.charCodeAt(0);return ye(l)},On=()=>{let a=new ArrayBuffer(4);return new Float32Array(a)[0]=-0,[...new Uint8Array(a)]},Mr=Object.freeze({type:"native",identity:127,opcode:65,encode:En,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Br=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-1),encode:Vr,link:Object.freeze({load:Object.freeze({opcode:44,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Gr=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-1),encode:Sr,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4}),values:{TRUE:1,FALSE:0}})}),Kr=Object.freeze({type:"native",identity:124,opcode:68,none:On(),encode:Lr,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Hr=Object.freeze({type:"native",identity:126,opcode:66,none:ye(-1),encode:Ur,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Yr=Object.freeze({type:"native",identity:126,opcode:66,none:ye(-9223372036854776e3),encode:wr,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Xr=Object.freeze({type:"native",identity:125,opcode:67,none:On(),encode:Cr,link:Object.freeze({load:Object.freeze({opcode:42,align:2,offset:0,size:4}),store:Object.freeze({opcode:56,align:2,offset:0,size:4})})}),$r=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-1),encode:Dr,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),qr=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-2147483648),encode:En,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Qr=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-32768),encode:Fr,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Zr=Object.freeze({type:"native",identity:127,opcode:65,encode:Nr,none:ye(-1),link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Wr=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-128),encode:Ar,decode:a=>new Int8Array([a])[0],link:Object.freeze({load:Object.freeze({opcode:44,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),Jr=Object.freeze({type:"native",identity:127,opcode:65,none:ye(-1),encode:Rr,link:Object.freeze({load:Object.freeze({opcode:43,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),Ae=Object.freeze({"Flogram.String":Mr,"Flogram.Char":Br,"Flogram.Bool":Gr,"Flogram.FP64":Kr,"Flogram.U64":Hr,"Flogram.I64":Yr,"Flogram.FP32":Xr,"Flogram.U32":$r,"Flogram.I32":qr,"Flogram.I16":Qr,"Flogram.U16":Zr,"Flogram.I8":Wr,"Flogram.U8":Jr});var ec=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),et=ec;var gn=2,tc=3,nc=12,yn=13,sc=16,oc=26,Z=65,xn=71,rc=113,cc=114;var de=32,vn=33,ic=15,ac=11,jn=4,lc=5,it=64,Me=127,Bt=108,Re=106,Be=54,Ge=0,Ke=2,{LEB128_ENCODE:ce}=Ve,tt,B=(a,l)=>`${l}.${a}`,Tn=(a,l,b)=>{let O=b.get(a);if(O&&O.length===1)return O[0];if(O&&O.length>1)return O[0];throw console.log(a),console.log(b),Error("No Callees were found")};function at(a,l,b,O){a?.description?.inputs.length>0?tt=a.description.inputs[0].data.name:a?.description?.outputs.length>0&&(tt=a.description.outputs[0].data.name);let r=[],F=0,C=()=>F,{description:K}=a,{inputs:le,locals:ne,statements:fe}=K,W=new Map,H=new Map;{let i=0,c=o=>{for(let p of o){let{name:E,data:x}=p;switch(W.set(E,i),H.set(E,p),x.type){case"Maybe":case"data":{let{name:I,path:A}=x,P=B(I,A);switch(I){case"String":{i=i+2|0;break}default:{let w=l.get(P);switch(w.type){case"native":{i=i+1|0;break}case"enumeration":{i=i+1|0;break}case"object":{let{length:J}=w;i=i+2|0;break}}break}}break}case"Array":{i=i+2|0;break}case"Link":{x.name==="String"||x.name==="Array"?i=i+2|0:i=i+1|0;break}}}};c(le),c(ne)}let ue=0,Oe=[];for(let i of ne){let{data:c}=i,o=()=>{Oe.push(1,Me),ue=ue+1|0},p=()=>{Oe.push(1,Me),ue=ue+1|0,Oe.push(1,Me),ue=ue+1|0},E=()=>{Oe.push(1,Me),ue=ue+1|0},x=A=>{let{identity:P}=A;Oe.push(1,P),ue=ue+1|0},I=A=>{let{indivisibles:P}=A,{mapTrail:w}=P;for(let J of w.values()){let{data:ee}=J;if(ee.type==="Link"){ee.name==="Array"||ee.name==="String"?p():o();continue}if(ee.type==="Array"){p();continue}let{name:se,path:$}=ee,v=B(se,$),j=l.get(v);switch(j.type){case"native":{x(j);break}case"enumeration":{E();break}}}};switch(c.type){case"Array":{p();break}case"Link":{c.name==="Array"||c.name==="String"?p():o();break}case"Maybe":case"data":{let{name:A,path:P}=c;switch(A){case"String":{p();break}default:{let w=B(A,P),J=l.get(w);switch(J.type){case"native":{x(J);break}case"enumeration":{E();break}case"object":{p();break}}break}}break}}}((i,c)=>{for(let[o,p]of i)if(p.type==c){Oe.push(1,Me),ue=ue+1|0;break}})(l,"object");let _e=ce(ue);r.push(..._e,...Oe);let pe=(i,c="return")=>{let o=0,p=[],E=(v,j)=>{let L={type:"call",key:v,inputs:j};p.unshift(L)},x=v=>{let j={type:"value",value:v};p.unshift(j)},I=v=>{let j={type:"member",member:v};p.unshift(j)},A=(v,j,L,V)=>{let m={key:null,stop:!1},_;if(v&&et.includes(v.data.name)){let{data:k}=v,{name:T}=k;_=B(T.toLowerCase()+"."+ge(L),j),tt=T}else if(v){let{data:k}=v,{name:T,path:q}=k,z=B(T,q),d=l.get(z),{indivisibles:N}=d,{mapTrail:D}=N,U=D.size-1;for(let[Q,M]of D){p.unshift({type:"compare",currentIndex:U,name:L}),_=B(M.data.name.toLowerCase()+"."+ge(L),M.data.path);let G=V.map(Y=>({type:"select",value:{type:"local",name:Y.name},trail:[M.trail]}));E(_,G);var R=G.length-1|0;for(let Y=R;Y>=0;Y=Y-1|0){let oe=G[Y];x(oe)}U--}m.stop=!0}return m.key=_,m},P=v=>{let{inputs:j}=v;if(j.find(V=>V.type=="expression")){let V=j.map(_=>{if(_.type==="local")return H.get(_.name);if(_.type==="literal")return{data:_};if(_.type==="expression")return{data:{name:P(_)}}}),m=O.find(_=>_.description&&Array.isArray(_.description.inputs)?_.description.inputs.length!==V.length?!1:_.description.inputs.every((R,k)=>R.data.name===V[k].data.name):!1);return m?m.description.outputs[0].data.name:"unknown"}else{let V=j.map(_=>{if(_.type==="local")return H.get(_.name);if(_.type==="literal")return{data:_}}),m=O.find(_=>_.description&&Array.isArray(_.description.inputs)?_.description.inputs.length!==V.length?!1:_.description.inputs.every((R,k)=>R.data.name===V[k].data.name):!1);return m?m.description.outputs[0].data.name:"unknown"}},w=v=>{let{inputs:j,name:L,path:V}=v,m=B(L,V),_=[V],R;if(typeof L=="object"){let T=L[0];if(R=H.get(T),R){_.push(R.data.name);for(let z=1;z<=L.length-2;z++)T=L[z],R=H.get(T),R&&_.push(R.data.name)}let q=L.length-1|0;m=B(L[q],_.join("."))}if(V==="Flogram"){let T=j.find(d=>d.type==="expression"),q=j.find(d=>d.type==="literal"),z=j.map(d=>H.get(d.name)).find(Boolean);if(z){let d=A(z,V,L,j);if(m=d.key,d.stop)return}else q?m=B(`${q.name.toLowerCase()}.${ge(L)}`,V):T?m=B(`${P(T).toLowerCase()}.${ge(L)}`,V):tt&&(m=B(tt.toLowerCase()+"."+ge(L),V))}if(E(m,j),typeof L=="object"){let T=Tn(m,j,b);if(T){let{procedure:q}=T,{description:z}=q,{self:d}=z,N=H.get(L[0]),D=B(N.data.name,N.data.path),U=l.get(D);if(U){let Q=W.get(L[0]),{indivisibles:M}=U,{mapTrail:G}=M;for(let Y=d.length-1|0;Y>=0;Y--){let oe=d[Y];if(oe.type==="member"){let ae=oe.trail.join("."),{address:te}=G.get(ae);I({index:Q,address:te})}}}}}var k=j.length-1|0;for(let T=k;T>=0;T=T-1|0){let q=j[T];x(q)}},J=v=>{let{key:j,inputs:L}=v,V=Tn(j,L,b);switch(V.type){case"native":{let{body:_}=V;r.push(..._);break}case"artificial":{let{index:_}=V,R=ce(_);r.push(sc,...R);break}}let{lengths:m}=V;o=o-m.inputs|0,o=o+m.outputs|0},ee=v=>{let{value:j}=v,L=z=>{let d=0,N=W.get(z),D=()=>{r.push(de,N)},U=H.get(z),{data:Q}=U,{name:M,path:G,segment:Y}=Q,oe=B(M,G),ae=l.get(oe);switch(ae.type){case"native":{D();let{link:te}=ae,{load:re}=te;r.push(re.opcode,re.align,re.offset),d=d+1|0;break}case"object":{let te=0,re=()=>{},X=Ee=>{D();let{link:ze}=Ee,{load:he}=ze;r.push(he.opcode,he.align,he.offset+te|0),d=d+1|0,te=te+he.size|0},Ce=()=>{},{indivisibles:Xe}=ae,{mapTrail:$e}=Xe;for(let Ee of $e.values()){if(Ee.type==="Link"){Ce();continue}let{data:ze}=Ee,{name:he,path:we}=ze,qe=B(he,we),Qe=l.get(qe);switch(Qe.type){case"native":{X(Qe);break}case"enumeration":{re();break}}}break}}return d},V=(z,d=!1)=>{let N=0,{literal:D,name:U,path:Q}=z,M=B(U,Q),G=l.get(M),Y=C();for(let oe=0;oe<D.length;oe++){let ae=C(),te=D[oe];switch(G.type){case"native":{let{link:re}=G,{store:X}=re;r.push(Z,ae),r.push(G.opcode,...G.encode(te)),r.push(X.opcode,X.align,X.offset),F=F+X.size,N=3;break}}}return d?{startingAddress:Y,length:D.length}:(r.push(Z,Y),r.push(Z,D.length),N=1,N)},m=(z,d)=>{let N=l.get(d),D=C(),U=(M,G,Y)=>{r.push(Z,...ce(M)),r.push(Z,...ce(G)),r.push(Be,Ke,Ge),r.push(Z,ce(M+4)),r.push(Z,ce(Y)),r.push(Be,Ke,Ge)};for(let[M,G]of N.members){if(!G)continue;let Y=C(),oe=z.find(re=>re.name===M),ae=B(G.name,G.path),te=l.get(ae);if(G.type==="Array"){if(F+=8,oe.value.type==="local"){let re=W.get(oe.value.name),{startingAddress:X,length:Ce}=R(G,re);U(Y,X,Ce)}else{let{startingAddress:re,length:X}=V(oe.value,!0);U(Y,re,X)}continue}switch(te.type){case"native":{let{link:re}=te,{store:X}=re;r.push(Z,Y),r.push(te.opcode,...te.encode(oe.value.literal)),r.push(X.opcode,X.align,X.offset),F=F+X.size;break}case"object":{F+=8;let{startingAddress:re,length:X}=m(oe.value.literal,ae);U(Y,re,X);break}}}let Q=Array.from(N.members.values()).reduce((M,G)=>G?M+1:M,0);return r.push(Z,...ce(D)),r.push(Z,...ce(Q)),{startingAddress:D,length:Q}},_=z=>{let d=0,N=W.get(z),D=()=>{r.push(de,N)},U=H.get(z),{data:Q}=U,{name:M,path:G,segment:Y}=Q,oe=B(M,G),ae=l.get(oe);switch(ae.type){case"native":{let te=C(),{link:re}=ae,{store:X}=re;r.push(Z,te),D(),r.push(X.opcode,X.align,X.offset),F=+X.size,r.push(Z,te),d=d+4|0;break}case"object":{let te=0,re=()=>{},X=Ee=>{D();let{link:ze}=Ee,{load:he}=ze;r.push(he.opcode,he.align,he.offset+te|0),d=d+1|0,te=te+he.size|0},Ce=()=>{},{indivisibles:Xe}=ae,{mapTrail:$e}=Xe;for(let Ee of $e.values()){if(Ee.type==="Link"){Ce();continue}let{data:ze}=Ee,{name:he,path:we}=ze,qe=B(he,we),Qe=l.get(qe);switch(Qe.type){case"native":{X(Qe);break}case"enumeration":{re();break}}}break}}return d},R=(z,d=0)=>{let{name:N,path:D}=z,U=B(N,"Flogram"),Q=l.get(U),{link:M}=Q,{store:G,load:Y}=M,oe=Number(z.length),ae=C();for(let te=0;te<oe;te++){let re=C();r.push(Z,...ce(re));let X=d;T(X,X+1|0),r.push(Z,...ce(te)),r.push(Z,Y.size),r.push(Bt),r.push(Re),r.push(Y.opcode,Y.align,Y.offset),r.push(G.opcode,G.align,G.offset),F=F+G.size}return{startingAddress:ae,length:oe}},k=(z,d)=>{let N=l.get(d),{opcode:D}=N,U=N.encode(z);r.push(D,...U)},T=(z,d)=>{for(;z<d;)r.push(de,z),z=z+1|0};switch(j.type){case"expression":{w(j);break}case"instance":{let{path:z,members:d}=j;var q=d.length-1|0;for(let N=q;N>=0;N=N-1|0){let D=d[N],{path:U,value:Q}=D;x(Q)}break}case"Maybe":{let{data:z}=j,{name:d,path:N}=z,D=B(d,N),U=l.get(D);j.layout==="NONE"?r.push(U.opcode,...U.none):pe(j.value),o=o+1|0;break}case"linkValue":{let{link:z}=j,d=L(z);o=o+d|0;break}case"valueLink":{let{value:z}=j;if(H.get(z).data.type==="Array"){pe({name:z,type:"local"});return}let N=_(z);o=o+N|0;break}case"literal":{let{literal:z,name:d,path:N}=j,D=B(d,N),U=l.get(D);if(j.layout==="Array"){V(j),o=o+2|0;return}else if(d==="String"){let Q=[];for(let G of z)Q.push(G.charCodeAt(0));let M={...j,literal:Q};V(M),o=o+2|0;return}U&&U.type==="object"?(m(z,D),o=o+2|0):(U||(console.log(j),console.log("NO SHAPE FOUND")),k(z,D),o=o+1|0);break}case"array_access":{let{array:z,index:d}=j,{name:N}=z,{name:D}=d,U=W.get(N),Q=W.get(D),M=H.get(N),G=B(M.data.name,M.data.path),Y=l.get(G),{link:oe}=Y,{load:ae}=oe;switch(Y.type){case"native":{if(T(U,U+1|0),d.type==="literal"){let{literal:te}=d;r.push(Y.opcode,...Y.encode(te))}else T(Q,Q+1|0);r.push(Z,ae.size),r.push(Bt),r.push(Re),r.push(ae.opcode,ae.align,ae.offset),o=o+2|0;break}case"object":{console.log("TO LOAD IS AN OBJECT");break}}break}case"move":{pe(j.value);break}case"local":{let{name:z}=j,d=W.get(z),N=H.get(z),{data:D}=N;switch(D.type){case"Link":{D.name==="Array"||D.name==="String"?(T(d,d+2|0),o=o+2|0):(T(d,d+1|0),o=o+1|0);break}case"Array":{if(c==="assignment"&&D.length){let{startingAddress:U,length:Q}=R(D,d);r.push(Z,...ce(U)),r.push(Z,...ce(Q))}else F=200,T(d,d+2|0),o=o+2|0;break}case"Maybe":case"data":{let{name:U,path:Q}=D,M=B(U,Q),G=l.get(M);switch(D.layout){case"Array":{T(d,d+2|0),o=o+2|0;break}default:{switch(G.type){case"native":if(U==="String"){T(d,d+2|0),o=o+2|0;break}case"enumeration":{T(d,d+1|0),o=o+1|0;break}case"object":{T(d,d+2|0),o=o+2|0;break}}break}}break}}break}case"select":{let{value:z,trail:d}=j,{name:N}=z,D=H.get(N),{data:U}=D,Q=B(U.name,U.path),M=l.get(Q),{indivisibles:G}=M,{mapTrail:Y}=G,oe=d.join("."),ae=Y.get(oe),{address:te}=ae,re=d.length-1,X=M;for(;d.length>0;){let he=d.shift();if(d.length>0){let we=X.members.get(he),qe=B(we.name,we.path);X=l.get(qe);continue}X=X.members.get(he)}let Ce=B(X.name,X.path),Xe=l.get(Ce),{link:$e}=Xe,{load:Ee}=$e,ze=W.get(N);r.push(de,ze),r.push(Z,te),r.push(Re),r.push(Ee.opcode,Ee.align,Ee.offset);break}}},se=v=>{let{name:j,currentIndex:L}=v;if(L===0)r.push(vn,W.size+1);else if(r.push(de,W.size+1),j==="==")r.push(rc);else if(j==="!=")r.push(cc);else throw new Error(`Unknown operator ${j} for objects`)},$=v=>{let{member:j}=v,{index:L,address:V}=j;r.push(de,...ce(L)),r.push(Z,...ce(V)),r.push(Re)};for(x(i);p.length>0;){let v=p.shift();switch(v.type){case"call":{J(v);break}case"value":{ee(v);break}case"member":{$(v);break}case"compare":{se(v);break}}}return o},xe=i=>{let c=(p,E)=>{for(;p<E;)E=E-1|0,r.push(vn,E)},o=(p,E)=>{switch(E.type){case"Link":{E.name==="Array"||E.name==="String"?c(p,p+2|0):c(p,p+1|0);break}case"Array":{c(p,p+2|0);break}case"Maybe":case"data":{let{name:x,path:I}=E,A=B(x,I),P=l.get(A);switch(x){case"Array":{c(p,p+Number(E.length)|0);break}default:{switch(P.type){case"native":if(x==="String"){c(p,p+2|0);break}case"enumeration":{c(p,p+1|0);break}case"object":{let{length:w}=P;c(p,p+2|0);break}}break}}break}}};switch(i.type){case"local":{let{name:p}=i,E=W.get(p),x=H.get(p),{data:I}=x;o(E,I);break}case"select":{let{value:p,trail:E}=i,{name:x}=p,I=H.get(x),{data:A}=I,P=B(A.name,A.path),w=l.get(P),{indivisibles:J}=w,{mapTrail:ee}=J,se=E.join("."),$=ee.get(se),{index:v}=$,j=w;for(;E.length>0;){let V=E.shift();j=j.members.get(V)}let L=W.get(x);j.type=="Array"||j.type=="String"?c(L+v|0,L+v+2|0):c(L+v|0,L+v+1|0);break}}},ke=(i,c)=>{let{array:o,index:p}=i,E=0,x=W.get(o.name),I=()=>{r.push(de,x)},A=H.get(o.name),{data:P}=A,{name:w,path:J,segment:ee}=P,se=B(w,J),$=l.get(se);switch($.type){case"native":{if(I(),p.type==="literal"){let{literal:L}=p;r.push(Z,...$.encode(L))}else r.push(de,x);let{link:v}=$,{store:j}=v;r.push(Z,j.size),r.push(Bt),r.push(Re),pe(c),r.push(j.opcode,j.align,j.offset),E=E+4|0;break}case"object":{let v=null,j=0;if(c.type==="local"){let{name:T}=c;v=H.get(T),j=W.get(T)}let L=0,V=()=>{},m=(T,q)=>{I();let{index:z}=q;r.push(de,j+z|0);let{link:d}=T,{store:N}=d;r.push(N.opcode,N.align,N.offset+L|0),E=E+1|0,L=L+N.size|0},_=()=>{},{indivisibles:R}=$,{mapTrail:k}=R;for(let T of k.values()){if(T.type==="Link"){_();continue}let{data:q}=T,{name:z,path:d}=q,N=B(z,d),D=l.get(N);switch(D.type){case"native":{m(D,T);break}case"enumeration":{V();break}}}break}}return E},Pe=(i,c)=>{let{value:o,trail:p}=i,{name:E}=o,x=H.get(E),{data:I}=x,A=B(I.name,I.path),P=l.get(A),{indivisibles:w}=P,{mapTrail:J}=w,ee=p.join("."),se=J.get(ee),{address:$}=se,v=p.length-1,j=P;for(;p.length>0;){let m=p.shift();if(p.length>0){let _=j.members.get(m),R=B(_.name,_.path);j=l.get(R);continue}j=j.members.get(m)}let L=B(j.name,j.path),V=l.get(L);switch(V.type){case"native":{let{link:m}=V,{store:_}=m,R=W.get(E);r.push(de,R),r.push(Z,$),r.push(Re),pe(c),r.push(_.opcode,_.align,_.offset);break}}},De=(i,c)=>{let{link:o}=i,p=0,E=W.get(o),x=()=>{r.push(de,E)},I=H.get(o),{data:A}=I,{name:P,path:w,segment:J}=A,ee=B(P,w),se=l.get(ee);switch(se.type){case"native":{x(),pe(c);let{link:$}=se,{store:v}=$;r.push(v.opcode,v.align,v.offset),p=p+1|0;break}case"object":{let $=null,v=0;if(c.type==="local"){let{name:k}=c;return v=W.get(k),x(),r.push(de,...ce(v)),r.push(Be,Ke,Ge),x(),r.push(Z,...ce(4)),r.push(Re),r.push(de,...ce(v+1|0)),r.push(Be,Ke,Ge),p=p+2|0,p}let j=0,L=()=>{},V=(k,T)=>{x();let{index:q}=T;r.push(de,v+q|0);let{link:z}=k,{store:d}=z;r.push(d.opcode,d.align,d.offset+j|0),p=p+1|0,j=j+d.size|0},m=()=>{},{indivisibles:_}=se,{mapTrail:R}=_;for(let k of R.values()){if(k.type==="Link"){m();continue}let{data:T}=k,{name:q,path:z}=T,d=B(q,z),N=l.get(d);switch(N.type){case"native":{V(N,k);break}case"enumeration":{L();break}}}break}}return p},Le=(i,c)=>{let{link:o}=c,p=0,E=W.get(o),x=()=>{r.push(de,E)},I=v=>{let j=Array.from(v.members.values()).reduce((k,T)=>T?k+1:k,0),L=C(),{indivisibles:V}=v,{mapTrail:m}=V,_=(k,T,q)=>{let{store:z,load:d}=k.link,{address:N}=m.get(q);r.push(Z,T),x(),r.push(Z,...ce(N)),r.push(Re),r.push(d.opcode,d.align,d.offset),r.push(z.opcode,z.align,z.offset),F+=z.size},R=(k,T)=>{let q=C();F+=8;let z=C();for(let[N,D]of k.members){if(!D)continue;let U=C(),Q=B(D.name,D.path),M=l.get(Q);if(M.type==="object"){R(M,`${T}.${N}`);continue}let G=`${T}.${N}`;_(M,U,G)}r.push(Z,...ce(q)),r.push(Z,...ce(z)),r.push(Be,Ke,Ge);let d=Array.from(k.members.values()).reduce((N,D)=>D?N+1:N,0);r.push(Z,...ce(q+4)),r.push(Z,...ce(d)),r.push(Be,Ke,Ge)};for(let[k,T]of v.members){if(!T)continue;let q=C(),z=B(T.name,T.path),d=l.get(z);if(d.type==="object"){R(d,k);continue}_(d,q,k)}r.push(Z,...ce(L)),r.push(Z,...ce(j))},A=H.get(o),{data:P}=A,{name:w,path:J,segment:ee}=P,se=B(w,J),$=l.get(se);switch($.type){case"native":case"object":{if(i.type==="local")return I($),xe(i),p;break}}return p},ie=(i,c,o)=>{let p=l.get(i),E=I=>{switch(I.type){case"local":{let{name:A}=I,P=W.get(A);r.push(de,P);break}case"literal":{let{literal:A}=I,P=p.type==="native"?A:p.evaluate(A),w=ce(P);r.push(Z,...w);break}}},x=()=>{switch(p.type){case"enumeration":{r.push(xn),r.push(yn,0);break}case"native":{r.push(xn),r.push(yn,0);break}}};switch(p.type){case"enumeration":{E(c),E(o),x();break}case"native":{E(c),E(o),x();break}}},be=[],ve=i=>{let c={type:"statement",statement:i};be.unshift(c)};be.unshift({type:"block-end"});var Fe=fe.length-1|0;for(let i=Fe;i>=0;i=i-1|0){let c=fe[i];ve(c)}let Ue=i=>{let{target:c,source:o}=i;if(c.type==="store"){De(c,o);return}if(c.type==="array_assignment"){ke(c,o);return}if(c.type==="select"){Pe(c,o);return}if(o.type==="linkValue"){let p=H.get(c.name),{data:E}=p;if(E.path!=="Flogram"){let x=B(E.name,E.path);if(l.get(x).type==="object"){Le(c,o);return}}}pe(o,"assignment"),xe(c)},He=i=>{let{statements:c}=i;r.push(gn,it),r.push(tc,it);let o={type:"block-end",layout:"loop"};be.unshift(o),be.unshift(o),be.unshift({type:"continue"});var p=c.length-1|0;for(let E=p;E>=0;E=E-1|0){let x=c[E];ve(x)}},S=i=>{r.push(nc,2)},Ye=i=>{let{branches:c}=i;be.unshift({type:"block-end"});for(let o=c.length-1;o>=0;o--){let p=c[o];switch(p.type){case"branch-match":{let{statements:E}=p,x=E.length;for(let A=x-1;A>=0;A--){let P=E[A];ve(P)}let I=E.find(A=>A.type==="return");be.unshift({type:"condition",stop:I}),pe(p.values[0]);break}case"branch-default":{let{statements:E}=p,x=E.length;for(let I=x-1;I>=0;I--){let A=E[I];ve(A)}be.unshift({type:"default-block"});break}}}},g=i=>{let c=i,{branches:o,values:p}=c;if(o.length>0&&p.length===0)return Ye(i);r.push(gn,it);let x={type:"block-end"};be.unshift(x);let I=[];for(let P of p)switch(P.type){case"local":{let{name:w}=P,J=H.get(w),{data:ee}=J,{name:se,path:$}=ee,v=B(se,$);I.push(v);break}}var A=o.length-1|0;for(let P=A;P>=0;P=P-1|0){let J={type:"branch",branch:o[P],condition:c,commonKeys:I};be.unshift(J)}},y=i=>{let{expression:c}=i;var p=pe(c)|0;for(let E=0;E<p;E=E+1|0)r.push(oc)},e=i=>{let{values:c}=i;for(let o of c)pe(o);r.push(ic)},t=i=>{r.push(ac)},n=i=>{r.push(12,0)},s=i=>{r.push(lc)},u=i=>{i.stop?(r.push(jn),r.push(Me)):(r.push(jn),r.push(it))},f=i=>{let{branch:c,commonKeys:o,condition:p}=i,{values:E}=c,{values:x}=p;var I=o.length|0;for(let w=0;w<I;w=w+1|0){let J=o[w],ee=E[w],se=x[w];ie(J,ee,se)}let{statements:A}=c;var P=A.length-1|0;for(let w=P;w>=0;w=w-1|0){let J=A[w];ve(J)}},h=i=>{let{statement:c}=i;switch(c.type){case"assign":{Ue(c);break}case"condition":{g(c);break}case"loop":{He(c);break}case"break":{S(c);break}case"procedure-call":{y(c);break}case"return":{e(c);break}}};for(;be.length>0;){let i=be.shift();switch(i.type){case"block-end":{t(i);break}case"continue":{n(i);break}case"default-block":{s(i);break}case"condition":{u(i);break}case"branch":{f(i);break}case"statement":{h(i);break}default:break}}return r}var{EMPTY_ARRAY:pi,EMPTY_OBJECT:bi,EMPTY_STRING:hi,UNICODE_TEXT:di}=Ze,{BIT_DEPTH:_i,HEX_ENCODE:zn,LEB128_ENCODE:je}=Ve,{Types:mi}=Ze,Gt="",me=(a,l)=>`${l}.${a}`,uc=a=>[">","<",">=","<=","!=","=="].includes(a),fc=a=>["fp64","i64","u64","fp32","i32","u32","i16","u16","i8","u8","bool"].includes(a),In=48,pc=Object.freeze([0,127]),bc=Object.freeze({}),hc=Object.freeze([127]),dc=0;var _c=2;var mc=10,Ec=7,Oc=3,gc=2,yc=1;var xc=96,lt=127;var An=Object.freeze([7,105,109,112,111,114,116,115]),vc=0;var jc=Object.freeze([6,109,101,109,111,114,121]),Tc=65,Te=new Uint8Array(8),zc=Object.freeze([0,97,115,109]),Ic=Object.freeze([1,0,0,0]),Ac=(a,l)=>{l=l??bc;let b={},{data:O,code:r}=a,F=r.filter(g=>!g.description.generics||g.description.generics.length===0),C=new Map,K=new Map,le=g=>{let y=0;for(let e of g){let{data:t}=e;switch(t.type){case"Maybe":case"data":{let{name:n,path:s}=t,u=me(n,s),f=C.get(u);if(f)switch(f.type){case"native":if(n==="String"){y=y+2|0;break}case"enumeration":{y=y+1|0;break}case"object":{let{length:h}=f;y=y+2|0;break}}break}case"Link":{t.name==="Array"||t.name==="String"?y=y+2|0:y=y+1|0;break}case"Array":{y=y+2|0;break}}}return y},ne=g=>{let{labels:y}=g,e=new Map;var t=y.length|0;for(let f=0;f<t;f=f+1|0){let{name:h}=y[f];e.set(h,f)}return Object.freeze({type:"enumeration",encode:f=>{let h=e.get(f);return typeof h>"u"?hc:je(h)},evaluate:f=>e.get(f),opcode:Tc})},fe=g=>{let y=[],e=[],t=0,n=()=>{let m=Object.freeze({type:"back"});y.unshift(m)},s=m=>{let _={type:"data",data:m};y.unshift(_)},u=m=>{let _={type:"name",name:m};y.unshift(_)},f=(m,_)=>{n(),s(_),u(m)},h=m=>O.find(_=>_.name===m),i=(m,_)=>_.find(R=>R.name===m),c=(m,{inputs:_})=>_.find(R=>R.name===m),o=(m,_)=>{let R=m;for(let k of _){let T=i(k,R.description.members),q=h(T.data.name);if(q&&q.type==="object")R=q;else return T}return null},p=(m,_)=>{let R=m.trail,k=i(R[0],_.members);if(!k)return null;if(R.length===1)return k.data;let T=h(k.data.name);return o(T,R.slice(1)).data},E=(m,_,R,k)=>{if(c(_,R.description))return;R.description.self.push(m);let T=Object.seal({name:_,data:{...p({trail:m.trail},k),segment:"heap"}});(!m.value||!m.value.value)&&(T.data.type="Link"),R.description.inputs.push(T)},x=(m,_,R)=>{let k=m.inputs.map(T=>A(T,_,R));return{...m,inputs:k}},I=(m,_,R)=>{if(!(m.value.link==="self"||m.value.value==="self"))return console.log("THIS IS NOT HANDLED; HANGING"),m;let k=`${m.type}_${m.trail.join("_")}`;if(E(m,k,_,R),m.value.value)return{type:"valueLink",value:k};if(m.value.link)return{type:"linkValue",link:k}},A=(m,_,R,k="")=>{switch(m.type){case"local":case"literal":return m;case"member":{let T=`${m.type}_${m.trail.join("_")}`;return E(m,T,_,R),k==="target"?{type:"store",link:T}:{type:"linkValue",link:T}}case"select":return I(m,_,R);case"expression":return x(m,_,R);default:return console.log("THIS IS NOT HANDLED; HANGING"),console.log(m),m}},P=(m,_)=>{let R=JSON.parse(JSON.stringify(m));R.description.self=[];for(let k of R.description.statements)k.type==="assign"?(k.target=A(k.target,R,_,"target"),k.source=A(k.source,R,_)):k.type==="return"&&(k.values=k.values.map(T=>A(T,R,_)));F.push(R)},{members:w}=g,J=new Map;for(let m of w){let{name:_,data:R}=m;J.set(_,R)}var ee=w.length-1|0;for(let m=ee;m>=0;m=m-1|0){let _=w[m],{name:R,data:k}=_;if(_.type&&_.type==="procedure"){P(_,g);continue}f(R,k)}let se=new Map,$=new Map,v=0;for(;y.length>0;){let m=y.shift();switch(m.type){case"back":{e.pop();break}case"data":{let{data:_}=m,R=()=>{let d=e.join("."),N=me(_.name,_.path),D=C.get(N),{link:U}=D,{load:Q}=U,M=Object.freeze({data:_,index:v,address:t,trail:d});t+=Q.size,se.set(d,M),$.set(v,M),_.type==="Array"?v=v+2|0:v=v+1|0};if(_.type==="Link"){R();break}let{name:k,path:T}=_,q=me(k,T),z=C.get(q);switch(z.type){case"native":case"enumeration":{R();break}case"object":{let{members:d}=z,N=[...d];var ee=N.length-1|0;t+=8;for(let U=ee;U>=0;U=U-1|0){let[Q,M]=N[U];f(Q,M)}break}}break}case"name":{let{name:_}=m;e.push(_);break}}}let j=v|0,L=Object.freeze({mapTrail:se,mapIndex:$});return{type:"object",length:j,members:J,indivisibles:L}},W={};for(let g of O){let{path:y}=g;switch(g.type){case"native":{let{name:e,path:t}=g,n=me(e,t);if(Object.hasOwn(Ae,n)){let s=Ae[n];C.set(n,s);continue}break}case"import":{if(Object.hasOwn(Ae,y)){let e=Ae[y];C.set(y,e);continue}break}case"generics":{let{name:e,path:t}=g,n=me(e,t),s=Ae["Flogram.FP32"];C.set(n,s);break}case"enumeration":{let{name:e,path:t,description:n}=g,s=me(e,t),u=ne(n);C.set(s,u);break}case"object":{let{name:e,path:t,description:n}=g,{generics:s}=n,u=me(e,t);if(!s||s.length===0){let f=fe(n);C.set(u,f)}break}}}b.structures=W;let H=0,ue=(g,y)=>{let e=K.get(g);if(typeof e>"u"){K.set(g,[y]);return}(e.length==0||e.length>0&&e[0].body!==y.body)&&K.set(g,[y,...e])},Oe=g=>{let{name:y,path:e}=g,t=me(y,e);switch(e==="Flogram"&&(fc(y)?t=me(g.description.inputs[0]?.data?.name?.toLowerCase()+"."+ge(y),e):g.description.outputs&&g.description.outputs.length>=1&&!uc(g.name)?g.description.outputs[0]?.data?.name&&(t=me(g.description.outputs[0]?.data?.name?.toLowerCase()+"."+ge(y,g.description.inputs?.length),e)):(et.includes(g.description.inputs[1]?.data?.name?.toUpperCase())&&(t=me(g.description.inputs[1]?.data?.name?.toUpperCase()+"."+ge(y),e),Gt=g.description.inputs[1]?.data?.name?.toUpperCase()),Gt&&(t=me(Gt.toLowerCase()+"."+ge(y),e)))),g.type){case"native":{if(Object.hasOwn(Je,t)){let n=Je[t];ue(t,n);return}break}case"procedure":{let{description:n}=g,{inputs:s,outputs:u}=n,f=me(y,e),h={type:"artificial",index:H,procedure:g,lengths:Object.freeze({inputs:le(s),outputs:le(u)})};ue(f,h);break}}H=H+1|0},Ne=[],_e=[];for(let g of F){if(g.description.generics?.length>0)continue;let{description:y}=g,{inputs:e,outputs:t}=y,n=[...e,...t];if(!(g.type==="native"&&n.some(s=>!et.includes(s.data.name))))switch(Oe(g),g.type){case"import":{let{path:s}=g;if(Object.hasOwn(Je,s))continue;Ne.push(g);break}case"procedure":{_e.push(g);break}}}let pe=g=>{let y=0,e=[];for(let t of g){let n=()=>{e.push(lt),y=y+1|0},s=c=>{let{identity:o}=c;e.push(o),y=y+1|0},u=()=>{e.push(lt),y=y+1|0},f=()=>{e.push(lt),y=y+1|0,e.push(lt),y=y+1|0},{name:h,data:i}=t;switch(i.type){case"Maybe":case"data":{let{name:c,path:o}=i,p=me(c,o),E=C.get(p);if(!E)s(Ae["Flogram.FP32"]);else switch(E.type){case"native":{c==="String"?f():s(E);break}case"enumeration":{n();break}case"object":{f();break}}break}case"Link":{i.name==="Array"||i.name==="String"?f():u();break}case"Array":{f();break}}}return[y,e]},xe=(g,y)=>{let e=y.length|0,t=je(e);y.unshift(g,...t)},ke=()=>{let g=[],y=[...Ne,..._e];for(let n of y){let{description:s}=n,{inputs:u,outputs:f}=s,[h,i]=pe(u),[c,o]=pe(f);g.push(xc,h,...i,c,...o)}let e=y.length|0,t=je(e);return g.unshift(...t),xe(yc,g),g},Pe=0,De=()=>{let g=[],y=0,e={};for(let s of Ne){let{path:u}=s;Te.fill(In),zn(y,Te);let f=String.fromCodePoint(...Te);e[f]={path:s.path,description:s.description};let h=y|0;g.push(...An,Te.length|0,...Te,dc,h),y=y+1|0}Pe=y|0,l.memory&&(g.push(...An,...jc,_c,...pc),y=y+1|0);let t=y|0,n=je(t);return g.unshift(...n),xe(gc,g),b.imports=e,g},Le=()=>{let g=[];var y=_e.length|0;for(let n=0;n<y;n=n+1|0){let s=n|0,u=Pe+s|0,f=je(u);g.push(...f)}let e=_e.length|0,t=je(e);return g.unshift(...t),xe(Oc,g),g},ie=()=>{let g=[],y=0,e={};var t=_e.length|0;for(let u=0;u<t;u=u+1|0){let f=u+Pe|0,h=je(f);Te.fill(In),zn(y,Te);let{name:i,path:c,description:o}=_e[u];o={inputs:o.inputs,outputs:o.outputs};let p=String.fromCodePoint(...Te);e[p]={name:i,path:c,description:o},g.push(Te.length|0,...Te,vc,...h),y=y+1|0}let n=y|0,s=je(n);return g.unshift(...s),xe(Ec,g),b.procedures=e,g},be=()=>{let g=[];for(let t of _e){let n=at(t,C,K,F),s=n.length|0,u=je(s);g.push(...u,...n)}let y=_e.length|0,e=je(y);return g.unshift(...e),xe(mc,g),g},ve=ke(),Fe=De(),Ue=Le(),He=ie(),S=be(),Ye=new Uint8Array([...zc,...Ic,...ve,...Fe,...Ue,...He,...S]);return[b,Ye]},Rc=Object.freeze({compile:Ac}),Ei=Rc;export{Ei as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
