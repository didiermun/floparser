var As="as",Ps="=",Cs="break",Ss="else",Ds="enum",Fs="export",Us="if",ks="import",Ls="->",vs="is",Vs="loop",Ys="mut",ws="native",Ms="object",Bs="fn",Ks="return",Gs="self",Hs="template",Xs=Object.freeze({ALIAS:As,ASSIGN:Ps,BREAK:Cs,ELSE:Ss,ENUMERATION:Ds,EXPORT:Fs,IF:Us,IMPORT:ks,INTO:Ls,IS:vs,LOOP:Vs,MUTABLE:Ys,NATIVE:ws,OBJECT:Ms,PROCEDURE:Bs,RETURN:Ks,SELF:Gs,TEMPLATE:Hs}),Bo=Xs;var $s="assign",Js="array_assignment",qs="branch-match",Qs="branch-default",Ws="condition",Zs="loop",en="data",tn="generics",on="enumeration",sn="expression",nn="instance",cn="Link",an="local",rn="object",ln="procedure",pn="return",un="select",fn="member",En="store",bn="break",On="literal",_n="array_access",hn="valueLink",dn="linkValue",mn="self",gn="procedure-call",xn="Maybe",Tn="native",yn="move",In="String",zn="Array",Nn="import",jn="library",Rn="constructor",An="destructor",Pn="free",Cn="block-end",Sn="default-block",Dn="continue",Fn="branch",Un="statement",kn="draw",Ln=Object.freeze({TYPES_ASSIGN:$s,TYPES_ARRAY:zn,TYPES_ARRAY_ASSIGNMENT:Js,TYPES_BRANCH_MATCH:qs,TYPES_BRANCH_DEFAULT:Qs,TYPES_CONDITION:Ws,TYPES_LOOP:Zs,TYPES_DATA:en,TYPES_GENERICS:tn,TYPES_ENUMERATION:on,TYPES_EXPRESSION:sn,TYPES_INSTANCE:nn,TYPES_LINK:cn,TYPES_IMPORT:Nn,TYPES_LOCAL:an,TYPES_OBJECT:rn,TYPES_PROCEDURE:ln,TYPES_RETURN:pn,TYPES_SELECT:un,TYPES_MEMBER:fn,TYPES_STORE:En,TYPES_BREAK:bn,TYPES_LITERAL:On,TYPES_ARRAY_ACCESS:_n,TYPES_LINK_TO:hn,TYPES_VALUE_AT:dn,TYPES_SELF:mn,TYPES_LIBRARY:jn,TYPES_DROP:gn,TYPES_MAYBE:xn,TYPES_NATIVE:Tn,TYPES_MOVE:yn,TYPES_STRING:In,TYPES_CONSTRUCTOR:Rn,TYPES_FREE:Pn,TYPES_DEFAULT_BLOCK:Sn,TYPES_BLOCK_END:Cn,TYPES_CONTINUE:Dn,TYPES_BRANCH:Fn,TYPES_STATEMENT:Un,TYPES_DESTRUCTOR:An,TYPES_DRAW:kn}),qt=Ln;var vn=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Ko=vn;var Vn=Object.freeze([]),Yn=Object.freeze({}),wn="",Mn="	",Bn=`
`,Kn="UTF-8",It=qt,Gn=Object.freeze({EMPTY_ARRAY:Vn,EMPTY_OBJECT:Yn,EMPTY_STRING:wn,HORIZONTAL_TAB:Mn,LINE_BREAK:Bn,UNICODE_TEXT:Kn,Codes:Ko,Keys:Bo,Types:qt}),Go=Gn;var{EMPTY_STRING:Hn,UNICODE_TEXT:eo}=Go,Xn=44,$n=48,Jn=57,qn=46,Qn=45,Wn=43,Zn=65,ec=90,tc=-1,oc=1,sc=new TextDecoder(eo),nc=new TextEncoder,cc=(o,t,s=0,u=o.length|0,e=0,w=t.length|0)=>{for(e=e|0,s=s|0,w=w|0,u=u|0;;){let D=s>=u,$=e>=w;if(D||$)break;let pe=o[s],xe=t[e];if(s=s+1|0,e=e+1|0,pe<xe)return tc;if(pe>xe)return oc}return 0},ac=(o,t,s=0,u=o.length|0,e=0,w=t.length|0)=>{for(e=e|0,s=s|0,w=w|0,u=u|0;;){let D=e>=w,$=s>=u;if(D||$)break;t[e]=o[s],e=e+1|0,s=s+1|0}},rc=(o,t,s=0,u=o.length|0,e=0,w=t.length|0)=>{s=s|0,e=e|0,u=u|0,w=w|0;let D=u-s|0,$=w-e|0;if(D!==$)return!1;for(;;){let Ee=s>=u,pe=e>=w;if(Ee||pe)break;let ve=o[s],je=t[e];if(s=s+1|0,e=e+1|0,ve!==je)return!1}return!0},ic=o=>{o=o>>>0;let t=0,s=0;for(;s=(s<<1|1)>>>0,!(s>o);)t=t+1|0;return t},$o=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),Zt=(o,t,s,u)=>{for(o=o>>>0,u=u??t.length|0,s=s|0,u=u|0;o>0&&u>s;)u=u-1|0,t[u]=$o[o&15],o=o>>>4},lc=(o,t,s,u)=>{let e=s|0,w=s+u|0;if(u===0)return!1;let D=t[e];for((D===Wn||D===Qn)&&(e=e+1|0);e<w;){let $=t[e];if(e=e+1|0,!($n<=$&&$<=Jn||(qn===$||Xn===$)))return!1}return!0},pc=o=>{let t=o>=Zn,s=o<=ec;return t&&s},Nt=128,jt=127,Jo=-1,Ze=64,to=o=>{o=o|0;let t=[];for(;;){let s=o&jt;o=o>>7;let u=o===0,e=(s&Ze)===0,w=u&&e,D=o===-1,$=(s&Ze)!==0;if(w||D&&$){t.push(s);break}s=s|Nt,t.push(s)}return t},uc=o=>{let t=[],s=!0;for(;s;){let u=o&jt;o>>=7,o===0&&!(u&Ze)||o===-1&&u&Ze?s=!1:u|=Nt,t.push(u)}return t},qo=(o,t)=>{t=t|0;let s=0,u=0;for(;;){let e=o[t]|0;t=t+1|0;let w=(e&jt)<<u;if(u=u+7|0,s=s|w,(e&Nt)===0){let $=(e&Ze)!==0,Ee=u<32;if($&&Ee){let xe=Jo<<u;s=s|xe}break}}return s},fc=(o,t)=>{t=t|0;let s=0,u=0;for(;;){let e=o[t]|0;t=t+1|0;let w=(e&jt)<<u;if(u=u+7|0,s=s|w,!(e&Nt)){if(e&Ze){let D=Jo<<u;s=s|D}break}}return s},Ec=o=>sc.decode(o),bc=o=>nc.encode(o),Oc=(o=Hn)=>{let t=o.length|0,s=to(t),u=Buffer.from(o,eo);return Object.freeze([...s,...u])},_c=(o,t)=>{t=t|0;let s=qo(o,t),u=to(s).length;return t=t+u|0,o.subarray(t,t+s|0).toString(eo)},hc=58,dc=46,bt=32,Qt=48,mc=67,Xe=new Uint8Array(mc),Ho=Xe.subarray(0,8),zt=Xe.subarray(10,49),Xo=Xe.subarray(51,68),Wt=16,gc=2;Xe[8]=hc;Xe[9]=bt;Xe[49]=bt;Xe[50]=bt;var xc=(o,t)=>{t=t??console.log;let s=32,u=126,e=o.length|0,w=0;for(;e>0;){Ho.fill(Qt),Zt(w,Ho),zt.fill(bt),Xo.fill(bt);let D=e>=Wt?Wt:e;e=e-Wt|0;let $=0,Ee=0;for(let xe=1;xe<=D;xe=xe+1|0){let ve=o[w]&255;zt[$+0|0]=Qt,zt[$+1|0]=Qt,Zt(ve,zt,$,$+2|0);let je=dc;s<=ve&&ve<=u&&(je=ve),Xo[Ee]=je,w=w+1|0,$=$+2|0,Ee=Ee+1|0,xe%gc===0&&($=$+1|0)}let pe=String.fromCodePoint(...Xe);t(pe)}},Tc=function*(o,t){let s=o.length|0,u=t.length|0,e=0;for(;e<s&&e<u;){let w=o[e],D=t[e];yield[w,D],e=e+1|0}},yc=function*(o,t,s){let u=o.length|0,e=t.length|0,w=s.length|0,D=0;for(;D<u&&D<e&&D<w;){let $=o[D],Ee=t[D],pe=s[D];yield[$,Ee,pe],D=D+1|0}},Ic=Object.freeze({ARRAY_COMPARE:cc,ARRAY_COPY:ac,ARRAY_EQUAL:rc,BIT_DEPTH:ic,HEX_DIGITS:$o,HEX_ENCODE:Zt,IS_NUMBER:lc,IS_UPPERCASE:pc,LEB128_DECODE:qo,LEB128_DECODE_SIGNED:fc,LEB128_ENCODE:to,LEB128_ENCODE_SIGNED:uc,UTF8_DECODE:Ec,UTF8_ENCODE:bc,WASM_STRING_ENCODE:Oc,WASM_STRING_DECODE:_c,XXD_DUMP_HEX:xc,ZIP2:Tc,ZIP3:yc}),et=Ic;var Pe=(o,t=2)=>{let s="";switch(o){case"+":s="add";break;case"-":s=t===2?"sub":"neg";break;case"*":s="mul";break;case"/":s="div";break;case"%":s="rem";break;case"==":s="eq";break;case">":s="gt";break;case"<":s="lt";break;case">=":s="ge";break;case"<=":s="le";break;case"!=":s="ne";break;case"&":s="and";break;case"|":s="or";break;case"^":s="xor";break;case"not":s="not";break;case"i32":s="toi32";break;case"u32":s="tou32";break;case"i64":s="toi64";break;case"u64":s="tou64";break;case"fp64":s="tofp64";break;case"fp32":s="tofp32";break}return s};var zc=Object.freeze({type:"native",body:Object.freeze([160]),lengths:Object.freeze({inputs:2,outputs:1})}),Nc=Object.freeze({type:"native",body:Object.freeze([163]),lengths:Object.freeze({inputs:2,outputs:1})}),jc=Object.freeze({type:"native",body:Object.freeze([162]),lengths:Object.freeze({inputs:2,outputs:1})}),Rc=Object.freeze({type:"native",body:Object.freeze([68,0,0,0,0,0,0,240,191,162]),lengths:Object.freeze({inputs:1,outputs:1})}),Ac=Object.freeze({type:"native",body:Object.freeze([161]),lengths:Object.freeze({inputs:2,outputs:1})}),Pc=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),Cc=Object.freeze({type:"native",body:Object.freeze([128]),lengths:Object.freeze({inputs:2,outputs:1})}),Sc=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),Dc=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:1,outputs:1})}),Fc=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),Uc=Object.freeze({type:"native",body:Object.freeze([124]),lengths:Object.freeze({inputs:2,outputs:1})}),kc=Object.freeze({type:"native",body:Object.freeze([127]),lengths:Object.freeze({inputs:2,outputs:1})}),Lc=Object.freeze({type:"native",body:Object.freeze([126]),lengths:Object.freeze({inputs:2,outputs:1})}),hi=Object.freeze({type:"native",body:Object.freeze([66,255,255,255,255,255,255,255,255,126]),lengths:Object.freeze({inputs:2,outputs:1})}),vc=Object.freeze({type:"native",body:Object.freeze([125]),lengths:Object.freeze({inputs:2,outputs:1})}),Qo=Object.freeze({type:"native",body:Object.freeze([146]),lengths:Object.freeze({inputs:2,outputs:1})}),Wo=Object.freeze({type:"native",body:Object.freeze([149]),lengths:Object.freeze({inputs:2,outputs:1})}),Zo=Object.freeze({type:"native",body:Object.freeze([148]),lengths:Object.freeze({inputs:2,outputs:1})}),Vc=Object.freeze({type:"native",body:Object.freeze([67,0,0,128,191,148]),lengths:Object.freeze({inputs:2,outputs:1})}),es=Object.freeze({type:"native",body:Object.freeze([140]),lengths:Object.freeze({inputs:2,outputs:1})}),oo=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),so=Object.freeze({type:"native",body:Object.freeze([110]),lengths:Object.freeze({inputs:2,outputs:1})}),no=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),co=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),ao=Object.freeze({type:"native",body:Object.freeze([106]),lengths:Object.freeze({inputs:2,outputs:1})}),ro=Object.freeze({type:"native",body:Object.freeze([109]),lengths:Object.freeze({inputs:2,outputs:1})}),io=Object.freeze({type:"native",body:Object.freeze([108]),lengths:Object.freeze({inputs:2,outputs:1})}),lo=Object.freeze({type:"native",body:Object.freeze([65,1,0,0,0,108]),lengths:Object.freeze({inputs:1,outputs:1})}),po=Object.freeze({type:"native",body:Object.freeze([107]),lengths:Object.freeze({inputs:2,outputs:1})}),Yc=Object.freeze({type:"native",body:Object.freeze([130]),lengths:Object.freeze({inputs:2,outputs:1})}),wc=Object.freeze({type:"native",body:Object.freeze([129]),lengths:Object.freeze({inputs:2,outputs:1})}),uo=Object.freeze({type:"native",body:Object.freeze([112]),lengths:Object.freeze({inputs:2,outputs:1})}),fo=Object.freeze({type:"native",body:Object.freeze([111]),lengths:Object.freeze({inputs:2,outputs:1})}),Mc=Object.freeze({type:"native",body:Object.freeze([86]),lengths:Object.freeze({inputs:2,outputs:1})}),Bc=Object.freeze({type:"native",body:Object.freeze([85]),lengths:Object.freeze({inputs:2,outputs:1})}),Kc=Object.freeze({type:"native",body:Object.freeze([100]),lengths:Object.freeze({inputs:2,outputs:1})}),Eo=Object.freeze({type:"native",body:Object.freeze([75]),lengths:Object.freeze({inputs:2,outputs:1})}),bo=Object.freeze({type:"native",body:Object.freeze([74]),lengths:Object.freeze({inputs:2,outputs:1})}),Gc=Object.freeze({type:"native",body:Object.freeze([94]),lengths:Object.freeze({inputs:2,outputs:1})}),Hc=Object.freeze({type:"native",body:Object.freeze([84]),lengths:Object.freeze({inputs:2,outputs:1})}),Xc=Object.freeze({type:"native",body:Object.freeze([83]),lengths:Object.freeze({inputs:2,outputs:1})}),$c=Object.freeze({type:"native",body:Object.freeze([99]),lengths:Object.freeze({inputs:2,outputs:1})}),Oo=Object.freeze({type:"native",body:Object.freeze([73]),lengths:Object.freeze({inputs:2,outputs:1})}),_o=Object.freeze({type:"native",body:Object.freeze([72]),lengths:Object.freeze({inputs:2,outputs:1})}),Jc=Object.freeze({type:"native",body:Object.freeze([93]),lengths:Object.freeze({inputs:2,outputs:1})}),qc=Object.freeze({type:"native",body:Object.freeze([87]),lengths:Object.freeze({inputs:2,outputs:1})}),Qc=Object.freeze({type:"native",body:Object.freeze([88]),lengths:Object.freeze({inputs:2,outputs:1})}),Wc=Object.freeze({type:"native",body:Object.freeze([101]),lengths:Object.freeze({inputs:2,outputs:1})}),ho=Object.freeze({type:"native",body:Object.freeze([76]),lengths:Object.freeze({inputs:2,outputs:1})}),mo=Object.freeze({type:"native",body:Object.freeze([77]),lengths:Object.freeze({inputs:2,outputs:1})}),Zc=Object.freeze({type:"native",body:Object.freeze([95]),lengths:Object.freeze({inputs:2,outputs:1})}),ea=Object.freeze({type:"native",body:Object.freeze([89]),lengths:Object.freeze({inputs:2,outputs:1})}),ta=Object.freeze({type:"native",body:Object.freeze([90]),lengths:Object.freeze({inputs:2,outputs:1})}),oa=Object.freeze({type:"native",body:Object.freeze([102]),lengths:Object.freeze({inputs:2,outputs:1})}),go=Object.freeze({type:"native",body:Object.freeze([78]),lengths:Object.freeze({inputs:2,outputs:1})}),xo=Object.freeze({type:"native",body:Object.freeze([79]),lengths:Object.freeze({inputs:2,outputs:1})}),sa=Object.freeze({type:"native",body:Object.freeze([96]),lengths:Object.freeze({inputs:2,outputs:1})}),na=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),ca=Object.freeze({type:"native",body:Object.freeze([81]),lengths:Object.freeze({inputs:2,outputs:1})}),aa=Object.freeze({type:"native",body:Object.freeze([97]),lengths:Object.freeze({inputs:2,outputs:1})}),To=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),yo=Object.freeze({type:"native",body:Object.freeze([70]),lengths:Object.freeze({inputs:2,outputs:1})}),ra=Object.freeze({type:"native",body:Object.freeze([91]),lengths:Object.freeze({inputs:2,outputs:1})}),ia=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),la=Object.freeze({type:"native",body:Object.freeze([82]),lengths:Object.freeze({inputs:2,outputs:1})}),pa=Object.freeze({type:"native",body:Object.freeze([98]),lengths:Object.freeze({inputs:2,outputs:1})}),Io=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),zo=Object.freeze({type:"native",body:Object.freeze([71]),lengths:Object.freeze({inputs:2,outputs:1})}),ua=Object.freeze({type:"native",body:Object.freeze([92]),lengths:Object.freeze({inputs:2,outputs:1})}),fa=Object.freeze({type:"native",body:Object.freeze([113]),lengths:Object.freeze({inputs:2,outputs:1})}),Ea=Object.freeze({type:"native",body:Object.freeze([114]),lengths:Object.freeze({inputs:2,outputs:1})}),ba=Object.freeze({type:"native",body:Object.freeze([115]),lengths:Object.freeze({inputs:2,outputs:1})}),Oa=Object.freeze({type:"native",body:Object.freeze([69]),lengths:Object.freeze({inputs:1,outputs:1})}),ts=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),os=Object.freeze({type:"native",body:Object.freeze([167]),lengths:Object.freeze({inputs:1,outputs:1})}),_a=Object.freeze({type:"native",body:Object.freeze([170]),lengths:Object.freeze({inputs:1,outputs:1})}),ha=Object.freeze({type:"native",body:Object.freeze([171]),lengths:Object.freeze({inputs:1,outputs:1})}),da=Object.freeze({type:"native",body:Object.freeze([168]),lengths:Object.freeze({inputs:1,outputs:1})}),ma=Object.freeze({type:"native",body:Object.freeze([169]),lengths:Object.freeze({inputs:1,outputs:1})}),ss=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),Rt=Object.freeze({type:"native",body:Object.freeze([193]),lengths:Object.freeze({inputs:1,outputs:1})}),At=Object.freeze({type:"native",body:Object.freeze([192]),lengths:Object.freeze({inputs:1,outputs:1})}),ga=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),xa=Object.freeze({type:"native",body:Object.freeze([]),lengths:Object.freeze({inputs:1,outputs:1})}),Ta=Object.freeze({type:"native",body:Object.freeze([176]),lengths:Object.freeze({inputs:1,outputs:1})}),ya=Object.freeze({type:"native",body:Object.freeze([177]),lengths:Object.freeze({inputs:1,outputs:1})}),Ia=Object.freeze({type:"native",body:Object.freeze([175]),lengths:Object.freeze({inputs:1,outputs:1})}),za=Object.freeze({type:"native",body:Object.freeze([174]),lengths:Object.freeze({inputs:1,outputs:1})}),Na=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),ja=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),Ra=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),Aa=Object.freeze({type:"native",body:Object.freeze([196]),lengths:Object.freeze({inputs:1,outputs:1})}),ns=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),cs=Object.freeze({type:"native",body:Object.freeze([195]),lengths:Object.freeze({inputs:1,outputs:1})}),as=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),rs=Object.freeze({type:"native",body:Object.freeze([194]),lengths:Object.freeze({inputs:1,outputs:1})}),Pa=Object.freeze({type:"native",body:Object.freeze([185]),lengths:Object.freeze({inputs:1,outputs:1})}),Ca=Object.freeze({type:"native",body:Object.freeze([186]),lengths:Object.freeze({inputs:1,outputs:1})}),No=Object.freeze({type:"native",body:Object.freeze([183]),lengths:Object.freeze({inputs:1,outputs:1})}),jo=Object.freeze({type:"native",body:Object.freeze([184]),lengths:Object.freeze({inputs:1,outputs:1})}),Sa=Object.freeze({type:"native",body:Object.freeze([187]),lengths:Object.freeze({inputs:1,outputs:1})}),Da=Object.freeze({type:"native",body:Object.freeze([180]),lengths:Object.freeze({inputs:1,outputs:1})}),Fa=Object.freeze({type:"native",body:Object.freeze([181]),lengths:Object.freeze({inputs:1,outputs:1})}),Ro=Object.freeze({type:"native",body:Object.freeze([178]),lengths:Object.freeze({inputs:1,outputs:1})}),Ao=Object.freeze({type:"native",body:Object.freeze([179]),lengths:Object.freeze({inputs:1,outputs:1})}),Ua=Object.freeze({type:"native",body:Object.freeze([182]),lengths:Object.freeze({inputs:1,outputs:1})}),Ot=Object.freeze(Object.assign({"Flogram./":Wo,"Flogram.*":Zo,"Flogram.+":Qo,"Flogram.-":es},{"Flogram.fp64.div":Nc,"Flogram.fp64.mul":jc,"Flogram.fp64.add":zc,"Flogram.fp64.sub":Ac,"Flogram.fp64.neg":Rc,"Flogram.fp64.gt":Kc,"Flogram.fp64.lt":$c,"Flogram.fp64.le":Wc,"Flogram.fp64.ge":oa,"Flogram.fp64.ne":pa,"Flogram.fp64.eq":aa,"Flogram.fp64.toi32":_a,"Flogram.fp64.tou32":ha,"Flogram.fp64.tou64":ya,"Flogram.fp64.toi64":Ta,"Flogram.fp64.tofp32":Ua},{"Flogram.u64.add":Pc,"Flogram.u64.sub":Fc,"Flogram.u64.mul":Sc,"Flogram.u64.div":Cc,"Flogram.u64.rem":Yc,"Flogram.u64.gt":Mc,"Flogram.u64.lt":Hc,"Flogram.u64.le":Qc,"Flogram.u64.ge":ta,"Flogram.u64.ne":la,"Flogram.u64.eq":ca,"Flogram.u64.toi32":os,"Flogram.u64.tou32":os,"Flogram.u64.toi64":ga,"Flogram.u64.tofp32":Fa,"Flogram.u64.tofp64":Ca},{"Flogram.i64.add":Uc,"Flogram.i64.sub":vc,"Flogram.i64.neg":Dc,"Flogram.i64.mul":Lc,"Flogram.i64.div":kc,"Flogram.i64.rem":wc,"Flogram.i64.gt":Bc,"Flogram.i64.lt":Xc,"Flogram.i64.le":qc,"Flogram.i64.ge":ea,"Flogram.i64.ne":ia,"Flogram.i64.eq":na,"Flogram.i64.toi32":ts,"Flogram.i64.tou32":ts,"Flogram.i64.tou64":xa,"Flogram.i64.tofp32":Da,"Flogram.i64.tofp64":Pa},{"Flogram.fp32.div":Wo,"Flogram.fp32.mul":Zo,"Flogram.fp32.add":Qo,"Flogram.fp32.sub":es,"Flogram.fp32.neg":Vc,"Flogram.fp32.gt":Gc,"Flogram.fp32.lt":Jc,"Flogram.fp32.le":Zc,"Flogram.fp32.ge":sa,"Flogram.fp32.ne":ua,"Flogram.fp32.eq":ra,"Flogram.fp32.toi32":da,"Flogram.fp32.tou32":ma,"Flogram.fp32.tou64":Ia,"Flogram.fp32.toi64":za,"Flogram.fp32.tofp64":Sa},{"Flogram.u32.add":oo,"Flogram.u32.sub":co,"Flogram.u32.mul":no,"Flogram.u32.div":so,"Flogram.u32.rem":uo,"Flogram.u32.gt":Eo,"Flogram.u32.lt":Oo,"Flogram.u32.le":mo,"Flogram.u32.ge":xo,"Flogram.u32.ne":zo,"Flogram.u32.eq":yo,"Flogram.u32.toi32":ss,"Flogram.u32.toi64":Ra,"Flogram.u32.tou64":Aa,"Flogram.u32.tofp32":Ao,"Flogram.u32.tofp64":jo},{"Flogram.i32.add":ao,"Flogram.i32.sub":po,"Flogram.i32.neg":lo,"Flogram.i32.mul":io,"Flogram.i32.div":ro,"Flogram.i32.rem":fo,"Flogram.i32.gt":bo,"Flogram.i32.lt":_o,"Flogram.i32.le":ho,"Flogram.i32.ge":go,"Flogram.i32.ne":Io,"Flogram.i32.eq":To,"Flogram.i32.toi64":Na,"Flogram.i32.tou64":ja,"Flogram.i32.tou32":ss,"Flogram.i32.tofp32":Ro,"Flogram.i32.tofp64":No},{"Flogram.i16.add":ao,"Flogram.i16.sub":po,"Flogram.i16.neg":lo,"Flogram.i16.mul":io,"Flogram.i16.div":ro,"Flogram.i16.rem":fo,"Flogram.i16.gt":bo,"Flogram.i16.lt":_o,"Flogram.i16.le":ho,"Flogram.i16.ge":go,"Flogram.i16.ne":Io,"Flogram.i16.eq":To,"Flogram.i16.toi32":Rt,"Flogram.i16.tou32":Rt,"Flogram.i16.toi64":ns,"Flogram.i16.tou64":cs,"Flogram.i16.tofp32":Ro,"Flogram.i16.tofp64":No},{"Flogram.u16.add":oo,"Flogram.u16.sub":co,"Flogram.u16.mul":no,"Flogram.u16.div":so,"Flogram.u16.rem":uo,"Flogram.u16.gt":Eo,"Flogram.u16.lt":Oo,"Flogram.u16.le":mo,"Flogram.u16.ge":xo,"Flogram.u16.ne":zo,"Flogram.u16.eq":yo,"Flogram.u16.toi32":Rt,"Flogram.u16.tou32":Rt,"Flogram.u16.toi64":ns,"Flogram.u16.tou64":cs,"Flogram.u16.tofp32":Ao,"Flogram.u16.tofp64":jo},{"Flogram.i8.add":ao,"Flogram.i8.sub":po,"Flogram.i16.neg":lo,"Flogram.i8.mul":io,"Flogram.i8.div":ro,"Flogram.i8.rem":fo,"Flogram.i8.gt":bo,"Flogram.i8.lt":_o,"Flogram.i8.le":ho,"Flogram.i8.ge":go,"Flogram.i8.ne":Io,"Flogram.i8.eq":To,"Flogram.i8.toi32":At,"Flogram.i8.tou32":At,"Flogram.i8.toi64":as,"Flogram.i8.tou64":rs,"Flogram.i8.tofp32":Ro,"Flogram.i8.tofp64":No},{"Flogram.u8.add":oo,"Flogram.u8.sub":co,"Flogram.u8.mul":no,"Flogram.u8.div":so,"Flogram.u8.rem":uo,"Flogram.u8.gt":Eo,"Flogram.u8.lt":Oo,"Flogram.u8.le":mo,"Flogram.u8.ge":xo,"Flogram.u8.ne":zo,"Flogram.u8.eq":yo,"Flogram.u8.toi32":At,"Flogram.u8.tou32":At,"Flogram.u8.toi64":as,"Flogram.u8.tou64":rs,"Flogram.u8.tofp32":Ao,"Flogram.u8.tofp64":jo},{"Flogram.bool.and":fa,"Flogram.bool.or":Ea,"Flogram.bool.xor":ba,"Flogram.bool.not":Oa}));var{LEB128_ENCODE:Ce}=et,gi=new Int8Array(1),xi=new Uint8Array(1),ka=o=>{let t=[],s=!0;for(;s;){let u=o&127;o>>=7,o===0&&!(u&64)||o===-1&&u&64?s=!1:u|=128,t.push(u)}return new Uint8Array(t)},La=o=>{let t=[],s=!0;for(;s;){let u=o&127;o>>=7,o===0?s=!1:u|=128,t.push(u)}return new Uint8Array(t)},va=o=>{let t=[];for(;o>=128;)t.push(o&127|128),o>>>=7;return t.push(o),new Uint8Array(t)},Va=128,Ya=127,is=64,wa=o=>{o=o<<16>>16;let t=[];for(;;){let s=o&Ya;o=o>>7;let u=o===0,e=(s&is)===0,w=u&&e,D=o===-1,$=(s&is)!==0;if(w||D&&$){t.push(s);break}s=s|Va,t.push(s)}return t};var Ma=o=>{let t=new Float32Array(1);return t[0]=parseFloat(o),new Uint8Array(t.buffer)},ls=o=>{let t=[],s=!0;for(;s;){let u=o&127;o>>=7,o===0&&!(u&64)||o===-1&&u&64?s=!1:u|=128,t.push(u)}return new Uint8Array(t)},Ba=o=>Ce(o),Ka=o=>{let t=new Float64Array(1);return t[0]=o,new Uint8Array(t.buffer)},Ga=o=>{let t=[];for(;o>=128;)t.push(o&127|128),o>>>=7;return t.push(o),new Uint8Array(t)},Ha=o=>{let t=[],s=!0;for(;s;){let u=o&127;o>>=7,o===0&&!(u&64)||o===-1&&u&64?s=!1:u|=128,t.push(u)}return new Uint8Array(t)},Xa=o=>{let t=new Uint8Array(1);return t[0]=o==="TRUE"?1:o==="FALSE"?0:o,t},$a=o=>{let t=o.charCodeAt(0);return Ce(t)},ps=()=>{let o=new ArrayBuffer(4);return new Float32Array(o)[0]=-0,[...new Uint8Array(o)]},Ja=Object.freeze({type:"native",identity:127,opcode:65,encode:ls,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),qa=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-1),encode:$a,link:Object.freeze({load:Object.freeze({opcode:44,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),Qa=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-1),encode:Xa,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4}),values:{TRUE:1,FALSE:0}})}),Wa=Object.freeze({type:"native",identity:124,opcode:68,none:ps(),encode:Ka,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),Za=Object.freeze({type:"native",identity:126,opcode:66,none:Ce(-1),encode:Ga,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),er=Object.freeze({type:"native",identity:126,opcode:66,none:Ce(-9223372036854776e3),encode:Ha,link:Object.freeze({load:Object.freeze({opcode:43,align:3,offset:0,size:8}),store:Object.freeze({opcode:57,align:3,offset:0,size:8})})}),tr=Object.freeze({type:"native",identity:125,opcode:67,none:ps(),encode:Ma,link:Object.freeze({load:Object.freeze({opcode:42,align:2,offset:0,size:4}),store:Object.freeze({opcode:56,align:2,offset:0,size:4})})}),or=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-1),encode:Ba,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),sr=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-2147483648),encode:ls,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),nr=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-32768),encode:wa,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),cr=Object.freeze({type:"native",identity:127,opcode:65,encode:va,none:Ce(-1),link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})}),ar=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-128),encode:ka,decode:o=>new Int8Array([o])[0],link:Object.freeze({load:Object.freeze({opcode:44,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),rr=Object.freeze({type:"native",identity:127,opcode:65,none:Ce(-1),encode:La,link:Object.freeze({load:Object.freeze({opcode:43,align:0,offset:0,size:4}),store:Object.freeze({opcode:58,align:0,offset:0,size:4})})}),$e=Object.freeze({"Flogram.String":Ja,"Flogram.Char":qa,"Flogram.Bool":Qa,"Flogram.FP64":Wa,"Flogram.U64":Za,"Flogram.I64":er,"Flogram.FP32":tr,"Flogram.U32":or,"Flogram.I32":sr,"Flogram.I16":nr,"Flogram.U16":cr,"Flogram.I8":ar,"Flogram.U8":rr});var ir=Object.freeze(["FP64","U64","I64","FP32","U32","I32","U16","I16","U8","I8","Bool","Char","Array","String","Link","Maybe"]),_t=ir;var{TYPES_ASSIGN:Si,TYPES_DRAW:lr,TYPES_ARRAY:_e,TYPES_ARRAY_ASSIGNMENT:pr,TYPES_BRANCH_MATCH:ur,TYPES_BRANCH_DEFAULT:fr,TYPES_CONDITION:Po,TYPES_LOOP:us,TYPES_DATA:Pt,TYPES_GENERICS:Di,TYPES_ENUMERATION:Ye,TYPES_EXPRESSION:tt,TYPES_INSTANCE:Fi,TYPES_LINK:Be,TYPES_LOCAL:me,TYPES_OBJECT:ue,TYPES_PROCEDURE:Ui,TYPES_RETURN:Co,TYPES_SELECT:ot,TYPES_MEMBER:ht,TYPES_STORE:Er,TYPES_BREAK:br,TYPES_LITERAL:Ke,TYPES_ARRAY_ACCESS:Or,TYPES_LINK_TO:So,TYPES_VALUE_AT:Ct,TYPES_SELF:ki,TYPES_DROP:fs,TYPES_MAYBE:dt,TYPES_MOVE:_r,TYPES_NATIVE:fe,TYPES_STRING:Re,TYPES_FREE:hr,TYPES_BRANCH:Es,TYPES_CONTINUE:bs,TYPES_DEFAULT_BLOCK:Os,TYPES_BLOCK_END:mt,TYPES_STATEMENT:_s,TYPES_DESTRUCTOR:hs}=It,ds=2,dr=3,mr=12,ms=13,re=16,gr=26,K=65,gs=71,xr=113,Tr=114;var Se=32,xs=33,he=35,ke=36,yr=15,Ir=11,Ts=4,zr=5,St=64,st=127,Do=108,de=106,nt=54,ct=0,at=2,Le=0,Nr=1,jr=2,ys=3,Rr=4,Ar=5,Qe=6,Pr=999999,Cr=888888,ge=0,Ae=1,Sr=4,Dt=8,Dr="Flogram.draw",Fr=new Set(["==","!=",">",">=","<","<=","!","&","|"]),{LEB128_ENCODE:Y}=et,Fo,j=(o,t)=>`${t}.${o}`,Is=(o,t,s)=>{let u=s.get(o);if(u&&u.length===1)return u[0];if(u&&u.length>1)return u[0];throw console.log(o),console.log(s),Error("No Callees were found")};function Ft(o,t,s,u){o?.description?.inputs.length>0?Fo=o.description.inputs[0].data.name:o?.description?.outputs.length>0&&(Fo=o.description.outputs[0].data.name);let e=[],w=(n=ge)=>{e.push(K,0),e.push(re,Le),e.push(ke,n)},D=()=>{e.push(he,ge),e.push(he,Ae),e.push(re,ys),e.push(he,Ae),e.push(he,ge),e.push(re,ys)},$=()=>{e.push(re,Rr),e.push(ke,Ae),e.push(ke,ge)},Ee=()=>{e.push(re,Ar),e.push(ke,Ae),e.push(ke,ge)},pe=()=>{e.push(re,jr)},{description:xe}=o,{inputs:ve,locals:je,statements:pt}=xe,be=new Map,Z=new Map;{let n=0,i=r=>{for(let f of r){let{name:d,data:R}=f;switch(be.set(d,n),Z.set(d,f),R.type){case dt:case Pt:{let{name:k,path:L}=R,C=j(k,L);switch(k){case Re:{n=n+2|0;break}default:{let G=t.get(C);switch(G.type){case fe:{n=n+1|0;break}case Ye:{n=n+1|0;break}case ue:{let{length:oe}=G;n=n+2|0;break}}break}}break}case _e:{n=n+2|0;break}case Be:{R.name===Re||R.name===_e?n=n+2|0:n=n+1|0;break}}}};i(ve),i(je)}let le=0,Ve=[];for(let n of je){let{data:i}=n,r=()=>{Ve.push(1,st),le=le+1|0},f=()=>{Ve.push(1,st),le=le+1|0,Ve.push(1,st),le=le+1|0},d=()=>{Ve.push(1,st),le=le+1|0},R=L=>{let{identity:C}=L;Ve.push(1,C),le=le+1|0},k=L=>{let{indivisibles:C}=L,{mapTrail:G}=C;for(let oe of G.values()){let{data:ie}=oe;if(ie.type===Be){ie.name===_e||ie.name===Re?f():r();continue}if(ie.type===_e){f();continue}let{name:l,path:O}=ie,p=j(l,O),c=t.get(p);switch(c.type){case fe:{R(c);break}case Ye:{d();break}}}};switch(i.type){case _e:{f();break}case Be:{i.name===_e||i.name===Re?f():r();break}case dt:case Pt:{let{name:L,path:C}=i;switch(L){case Re:{f();break}default:{let G=j(L,C),oe=t.get(G);switch(oe.type){case fe:{R(oe);break}case Ye:{d();break}case ue:{f();break}}break}}break}}}((n,i)=>{for(let[r,f]of n)if(f.type==i){Ve.push(1,st),le=le+1|0;break}})(t,ue);let wt=Y(le);e.push(...wt,...Ve);let Ge=n=>{if(typeof n!==ue)return n;switch(n.type){case me:return n.name;case So:return Ge(n.value);case Ct:return Ge(n.link);case ht:return`${n.type}_${n.trail.join("_")}`}return null},Q=(n,i=Co)=>{let r=0,f=[],d=(p,c)=>{let h={type:"call",key:p,inputs:c};f.unshift(h)},R=p=>{let c={type:"value",value:p};f.unshift(c)},k=p=>{let c={type:ht,member:p};f.unshift(c)},L=(p,c,h,P)=>{let v={key:null,stop:!1},m;if(p&&_t.includes(p.data.name)){let{data:se}=p,{name:g}=se;m=j(g.toLowerCase()+"."+Pe(h),c),Fo=g}else if(p){let{data:se}=p,{name:g,path:q}=se,_=j(g,q),E=t.get(_),{indivisibles:x}=E,{mapTrail:y}=x,N=y.size-1;for(let[H,A]of y){f.unshift({type:"compare",currentIndex:N,name:h}),m=j(A.data.name.toLowerCase()+"."+Pe(h),A.data.path);let z=P.map(V=>({type:ot,value:{type:me,name:V.name},trail:[A.trail]}));d(m,z);var S=z.length-1|0;for(let V=S;V>=0;V=V-1|0){let B=z[V];R(B)}N--}v.stop=!0}return v.key=m,v},C=p=>{let{inputs:c}=p;if(c.find(P=>P.type==tt)){let P=c.map(m=>{if(m.type===me)return Z.get(m.name);if(m.type===Ke)return{data:m};if(m.type===tt)return{data:{name:C(m)}}}),v=u.find(m=>m.description&&Array.isArray(m.description.inputs)?m.description.inputs.length!==P.length?!1:m.description.inputs.every((S,se)=>S.data.name===P[se].data.name):!1);return v?v.description.outputs[0].data.name:"unknown"}else{let P=c.map(m=>{if(m.type===me)return Z.get(m.name);if(m.type===Ke)return{data:m}}),v=u.find(m=>m.description&&Array.isArray(m.description.inputs)?m.description.inputs.length!==P.length?!1:m.description.inputs.every((S,se)=>S.data.name===P[se].data.name):!1);return v?v.description.outputs[0].data.name:"unknown"}},G=p=>{let{inputs:c,name:h,path:P}=p,v=j(h,P),m=[P],S;if(typeof h===ue){let g=h[0];if(S=Z.get(g),S){m.push(S.data.name);for(let _=1;_<=h.length-2;_++)g=h[_],S=Z.get(g),S&&m.push(S.data.name)}let q=h.length-1|0;v=j(h[q],m.join("."))}if(P==="Flogram"&&h!==lr){let g=c.find(E=>E.type===tt),q=c.find(E=>E.type===Ke),_=c.map(E=>Z.get(E.name)).find(Boolean);if(_){let E=L(_,P,h,c);if(v=E.key,E.stop)return}else if(q)v=j(`${q.name.toLowerCase()}.${Pe(h)}`,P);else if(g)v=j(`${C(g).toLowerCase()}.${Pe(h)}`,P);else{let E=u.find(x=>x.name===p.name&&x.path===p.path&&x.description.inputs.length===p.inputs.length);v=j(`${Fr.has(E.name)?E.description.inputs[0]?.data.name.toLowerCase():E.description.outputs[0]?.data.name.toLowerCase()}.${Pe(E.name)}`,P)}}if(d(v,c),typeof h===ue){let g=Is(v,c,s);if(g){let{procedure:q}=g,{description:_}=q,{self:E}=_,x=Z.get(h[0]),y=j(x.data.name,x.data.path),N=t.get(y);if(N){let H=be.get(h[0]),{indivisibles:A,members:z}=N,{mapTrail:V}=A;for(let B=E.length-1|0;B>=0;B--){let I=E[B];if(I.type===ht){let J=I.trail.join(".");if(V.get(J)){let{address:W}=V.get(J);k({index:H,address:W})}else{let W=JSON.parse(JSON.stringify(I.trail)),ne=N;for(;W.length>0;){let wo=W.shift();if(W.length>0){let Mo=ne.members.get(wo),Rs=j(Mo.name,Mo.path);ne=t.get(Rs);continue}ne=ne.members.get(wo)}let te=j(ne.name,ne.path),ae=t.get(te),{indivisibles:ze}=ae,{mapIndex:Ue,mapTrail:Et}=ze,We=Ue.get(0),yt=`${J}.${We.trail}`,{address:Jt}=V.get(yt),js={index:H,address:Jt-8};k(js)}}}}}}var se=c.length-1|0;for(let g=se;g>=0;g=g-1|0){let q=c[g];R(q)}},oe=p=>{let{key:c,inputs:h}=p;if(c===Dr){for(let m of h){let S;m.type===Ke?S=m:m.type===me&&(S=Z.get(m.name)?.data),S?.name===Re?(e.push(K,...Y(Cr)),e.push(re,Qe),Q(m),e.push(re,Qe),e.push(re,Qe)):S?.name===_e?(e.push(K,...Y(Pr)),e.push(re,Qe),Q(m),e.push(re,Qe),e.push(re,Qe)):(Q(m),e.push(re,Qe))}return}let P=Is(c,h,s);switch(P.type){case fe:{let{body:m}=P;e.push(...m);break}case"artificial":{let{index:m}=P,S=Y(m);e.push(re,...S);break}}let{lengths:v}=P;r=r-v.inputs|0,r=r+v.outputs|0},ie=p=>{let{value:c}=p,h=_=>{let E=0,x=Ge(_),y;if(_.type===ot){let{value:N,trail:H}=JSON.parse(JSON.stringify(_)),{name:A}=N,z=Z.get(A),{data:V}=z,B=j(V.name,V.path),I=t.get(B),{indivisibles:J}=I,{mapTrail:W}=J,ne=H.join("."),te=JSON.parse(JSON.stringify(H)),ae=I;for(;te.length>0;){let Ue=te.shift();if(te.length>0){let Et=ae.members.get(Ue),We=j(Et.name,Et.path);ae=t.get(We);continue}ae=ae.members.get(Ue)}let ze=j(ae.name,ae.path);y=t.get(ze)}else{let N=Z.get(x),{data:H}=N,{name:A,path:z,segment:V}=H,B=j(A,z);y=t.get(B)}if(y){switch(y.type){case fe:{ie({value:_});let{link:N}=y,{load:H}=N;e.push(H.opcode,H.align,H.offset),E=E+1|0;break}case ue:{let N=0,H=()=>{},A=I=>{ie({value:_});let{link:J}=I,{load:W}=J;e.push(W.opcode,W.align,W.offset+N|0),E=E+1|0,N=N+W.size|0},z=()=>{},{indivisibles:V}=y,{mapTrail:B}=V;for(let I of B.values()){if(I.type===Be){z();continue}let{data:J}=I,{name:W,path:ne}=J,te=j(W,ne),ae=t.get(te);switch(ae.type){case fe:{A(ae);break}case Ye:{H();break}}}break}}return E}},P=(_,E)=>{let x=0,{literal:y,name:N,path:H}=_,A=y.length;_.length&&(A=parseInt(_.length,10));let z=j(N,H),V=t.get(z);w();for(let B=0;B<A;B++){let I=y[B];switch(V.type){case fe:{let{link:J}=V,{store:W}=J;e.push(K,Y(W.size)),e.push(re,Le),!I||I.type===Ke?e.push(V.opcode,...V.encode(I?.literal||0)):Q(I),e.push(W.opcode,W.align,W.offset),pe(),x=3;break}}}return E?A:(e.push(he,ge),e.push(K,...Y(A)),x=1,x)},v=(_,E,x=!0)=>{let y=t.get(E);w();let N=B=>{D(),Ee(),e.push(he,ge),e.push(he,Ae),e.push(he,Ae),$(),e.push(he,ge),e.push(nt,at,ct),e.push(K,...Y(4)),e.push(de),e.push(K,...Y(B)),e.push(nt,at,ct),e.push(ke,ge)};for(let[B,I]of y.members){if(!I)continue;e.push(K,0),e.push(re,Le),e.push(ke,Ae);let J=_.find(te=>te.name===B),W=j(I.name,I.path),ne=t.get(W);if(I.type===_e){if(e.push(K,...Y(Dt)),e.push(re,Le),e.push(ke,Ae),J.value.type===me){let te=be.get(J.value.name);D();let ae=S(I,te);N(ae),pe()}else{D();let te=P(J.value,!0);N(te),pe()}continue}switch(ne.type){case fe:{let{link:te}=ne,{store:ae}=te;if(I.type===Be)D(),e.push(K,...Y(4)),e.push(re,Le),Q(J.value),e.push(ae.opcode,ae.align,ae.offset),$();else{e.push(K,...Y(ae.size)),e.push(re,Le);let ze=JSON.parse(JSON.stringify(J.value));ze.literal&&(ze.name!==I.name||ze.path!==I.path)&&(ze={...ze,name:I.name,path:I.path}),Q(ze),e.push(ae.opcode,ae.align,ae.offset)}pe();break}case ue:{e.push(K,...Y(Dt)),e.push(re,Le),e.push(ke,Ae),D();let te=v(J.value.literal,W,!1);N(te),pe();break}}}function H(B){let I=0;for(let J of B.values())J.data.type===_e&&(I+=parseInt(J.data.length,10)+1);return I}let A=Array.from(y.indivisibles.mapTrail.entries()).reduce((B,I)=>I[1].address>B[1].address?I:B,[null,{address:0}]),z=H(y.indivisibles.mapTrail),V=A[1].address/4+1+z;return x&&(e.push(he,ge),e.push(K,...Y(V))),V},m=(_,E)=>{let x=0,y=Z.get(E),N;if(y){let{data:A}=y,{name:z,path:V,segment:B}=A;N=j(z,V)}else{let A=z=>{if(z.type===Ke)return j(z.name,z.path);if(z.type===tt)return A(z.inputs[0]);if(z.type===Ct)return A(z.link);if(z.type===So)return A(z.value);if(z.type===me){let V=Z.get(z.name),{data:B}=V,{name:I,path:J,segment:W}=B;return j(I,J)}else if(z.type===ot){let V=t.get(A(z.value)),{indivisibles:B}=V,{mapTrail:I}=B,J=z.trail.join("."),{data:W}=I.get(J),{name:ne,path:te}=W;return j(ne,te)}};N=A(_)}let H=t.get(N);switch(H.type){case fe:{let{link:A}=H,{store:z}=A;e.push(K,...Y(z.size)),e.push(re,Le),e.push(ke,ge),e.push(he,ge),Q(_),e.push(z.opcode,z.align,z.offset),e.push(he,ge),x=x+7|0;break}case ue:{let A=0,z=()=>{},V=W=>{Q(_);let{link:ne}=W,{load:te}=ne;e.push(te.opcode,te.align,te.offset+A|0),x=x+1|0,A=A+te.size|0},B=()=>{},{indivisibles:I}=H,{mapTrail:J}=I;for(let W of J.values()){if(W.type===Be){B();continue}let{data:ne}=W,{name:te,path:ae}=ne,ze=j(te,ae),Ue=t.get(ze);switch(Ue.type){case fe:{V(Ue);break}case Ye:{z();break}}}break}}return x},S=(_,E=0)=>{let{name:x,path:y}=_,N=j(x,"Flogram"),H=t.get(N),{link:A}=H,{store:z,load:V}=A,B=Number(_.length);w();for(let I=0;I<B;I++){e.push(K,...Y(z.size)),e.push(re,Le);let J=E;g(J,J+1|0),e.push(K,...Y(I)),e.push(K,V.size),e.push(Do),e.push(de),e.push(V.opcode,V.align,V.offset),e.push(z.opcode,z.align,z.offset),pe()}return B},se=(_,E)=>{let x=t.get(E),{opcode:y}=x,N=x.encode(_);e.push(y,...N)},g=(_,E)=>{for(;_<E;)e.push(Se,_),_=_+1|0};switch(c.type){case tt:{G(c);break}case"instance":{let{path:_,members:E}=c;var q=E.length-1|0;for(let x=q;x>=0;x=x-1|0){let y=E[x],{path:N,value:H}=y;R(H)}break}case dt:{let{data:_}=c,{name:E,path:x}=_,y=j(E,x),N=t.get(y);c.layout==="NONE"?e.push(N.opcode,...N.none):Q(c.value),r=r+1|0;break}case Ct:{let{link:_}=c,E=h(_);r=r+E|0;break}case So:{let{value:_}=c,E=Ge(_);if(Z.get(E)?.data.type===_e){Q({name:E,type:me});return}let y=m(_,E);r=r+y|0;break}case Ke:{let{literal:_,name:E,path:x}=c,y=j(E,x),N=t.get(y);if(c.layout===_e){P(c),r=r+2|0;return}else if(E===Re){let H=[];for(let z of _)H.push({type:Ke,literal:z.charCodeAt(0).toString(),name:Re,path:"Flogram"});let A={...c,literal:H};P(A),r=r+2|0;return}N&&N.type===ue?(v(_,y),r=r+2|0):(N||(console.log(c),console.log("NO SHAPE FOUND")),se(_,y),r=r+1|0);break}case Or:{let{array:_,index:E}=c,{name:x}=_,{name:y}=E,N=be.get(x),H=be.get(y),A=Z.get(x),z=j(A.data.name,A.data.path),V=t.get(z),{link:B}=V,{load:I}=B;switch(V.type){case fe:{g(N,N+1|0),Q(E),e.push(K,I.size),e.push(Do),e.push(de),e.push(I.opcode,I.align,I.offset),r=r+2|0;break}case ue:{console.log("TO LOAD IS AN OBJECT");break}}break}case _r:{Q(c.value);break}case me:{let{name:_}=c,E=be.get(_),x=Z.get(_),{data:y}=x;switch(y.type){case Be:{y.name===_e||y.name===Re?(g(E,E+2|0),r=r+2|0):(g(E,E+1|0),r=r+1|0);break}case _e:{if(i==="assignment"&&y.length){let N=S(y,E);e.push(he,ge),e.push(K,...Y(N))}else g(E,E+2|0),r=r+2|0;break}case dt:case Pt:{let{name:N,path:H}=y,A=j(N,H),z=t.get(A);switch(y.layout){case _e:{g(E,E+2|0),r=r+2|0;break}default:{switch(z.type){case fe:if(N===Re){g(E,E+2|0),r=r+2|0;break}case Ye:{g(E,E+1|0),r=r+1|0;break}case ue:{g(E,E+2|0),r=r+2|0;break}}break}}break}}break}case ot:{let{value:_,trail:E}=c,x=_.name||_.link||_.value,y=Z.get(x),{data:N}=y,H=j(N.name,N.path),A=t.get(H),{indivisibles:z}=A,{mapTrail:V}=z,B=E.join("."),I=JSON.parse(JSON.stringify(E)),J=V.get(B),{address:W}=J,ne=A;for(;I.length>0;){let We=I.shift();if(I.length>0){let yt=ne.members.get(We),Jt=j(yt.name,yt.path);ne=t.get(Jt);continue}ne=ne.members.get(We)}let te=j(ne.name,ne.path),ae=t.get(te),{link:ze}=ae,{load:Ue}=ze,Et=be.get(x);e.push(Se,...Y(Et)),e.push(K,...Y(W)),e.push(de),e.push(Ue.opcode,Ue.align,Ue.offset);break}}},l=p=>{let{name:c,currentIndex:h}=p;if(h===0)e.push(xs,be.size+1);else if(e.push(Se,be.size+1),c==="==")e.push(xr);else if(c==="!=")e.push(Tr);else throw new Error(`Unknown operator ${c} for objects`)},O=p=>{let{member:c}=p,{isObject:h,index:P,address:v}=c;if(h){e.push(Se,...Y(P)),e.push(K,...Y(v)),e.push(de),e.push(Se,...Y(P)),e.push(K,...Y(v+4)),e.push(de);return}e.push(Se,...Y(P)),e.push(K,...Y(v)),e.push(de)};for(R(n);f.length>0;){let p=f.shift();switch(p.type){case"call":{oe(p);break}case"value":{ie(p);break}case ht:{O(p);break}case"compare":{l(p);break}}}return r},ut=n=>{let i=(f,d)=>{for(;f<d;)d=d-1|0,e.push(xs,d)},r=(f,d)=>{switch(d.type){case Be:{d.name===_e||d.name===Re?i(f,f+2|0):i(f,f+1|0);break}case _e:{i(f,f+2|0);break}case dt:case Pt:{let{name:R,path:k}=d,L=j(R,k),C=t.get(L);switch(R){case _e:{i(f,f+Number(d.length)|0);break}default:{switch(C.type){case fe:if(R===Re){i(f,f+2|0);break}case Ye:{i(f,f+1|0);break}case ue:{let{length:G}=C;i(f,f+2|0);break}}break}}break}}};switch(n.type){case me:{let{name:f}=n,d=be.get(f),R=Z.get(f),{data:k}=R;r(d,k);break}case ot:{let{value:f,trail:d}=n,{name:R}=f,k=Z.get(R),{data:L}=k,C=j(L.name,L.path),G=t.get(C),{indivisibles:oe}=G,{mapTrail:ie}=oe,l=d.join("."),O=JSON.parse(JSON.stringify(d)),p=ie.get(l),{index:c}=p,h=G;for(;O.length>0;){let v=O.shift();h=h.members.get(v)}let P=be.get(R);h.type==_e||h.type==Re?i(P+c|0,P+c+2|0):i(P+c|0,P+c+1|0);break}}},Mt=(n,i)=>{let{array:r,index:f}=n,d=0,R=be.get(r.name),k=()=>{e.push(Se,R)},L=Z.get(r.name),{data:C}=L,{name:G,path:oe,segment:ie}=C,l=j(G,oe),O=t.get(l);switch(O.type){case fe:{k(),Q(f);let{link:p}=O,{store:c}=p;e.push(K,c.size),e.push(Do),e.push(de),Q(i),e.push(c.opcode,c.align,c.offset),d=d+4|0;break}case ue:{let p=null,c=0;if(i.type===me){let{name:g}=i;p=Z.get(g),c=be.get(g)}let h=0,P=()=>{},v=(g,q)=>{k();let{index:_}=q;e.push(Se,c+_|0);let{link:E}=g,{store:x}=E;e.push(x.opcode,x.align,x.offset+h|0),d=d+1|0,h=h+x.size|0},m=()=>{},{indivisibles:S}=O,{mapTrail:se}=S;for(let g of se.values()){if(g.type===Be){m();continue}let{data:q}=g,{name:_,path:E}=q,x=j(_,E),y=t.get(x);switch(y.type){case fe:{v(y,g);break}case Ye:{P();break}}}break}}return d},Bt=(n,i)=>{let{value:r,trail:f}=n,{name:d}=r,R=Z.get(d),{data:k}=R,L=j(k.name,k.path),C=t.get(L),{indivisibles:G}=C,{mapTrail:oe}=G,ie=f.join("."),l=JSON.parse(JSON.stringify(f)),O=oe.get(ie),{address:p}=O,c=C;for(;l.length>0;){let v=l.shift();if(l.length>0){let m=c.members.get(v),S=j(m.name,m.path);c=t.get(S);continue}c=c.members.get(v)}let h=j(c.name,c.path),P=t.get(h);switch(P.type){case fe:{let{link:v}=P,{store:m}=v,S=be.get(d);e.push(Se,...Y(S)),e.push(K,...Y(p)),e.push(de),Q(i),e.push(m.opcode,m.align,m.offset);break}}},Kt=(n,i)=>{let{link:r}=n,f=0,d=Ge(r),R=Z.get(d),{data:k}=R,{name:L,path:C,segment:G}=k,oe=j(L,C),ie=t.get(oe);switch(ie.type){case fe:{Q(r),Q(i);let{link:l}=ie,{store:O}=l;e.push(O.opcode,O.align,O.offset),f=f+1|0;break}case ue:{let l=null,O=0,p=(g,q,_="")=>{let E=_?`${_}.${g.name}`:g.name,x=q.get(E);if(x){let{data:y}=x,N=j(y.name,y.path),H=t.get(N),{store:A}=H.link;Q(r),e.push(K,...Y(x.address)),e.push(de),Q(g.value),e.push(A.opcode,A.align,A.offset)}else if(g.value&&g.value.literal)for(let y of g.value.literal)p(y,q,E)};if(i.type===me){let{name:g}=i;if(O=be.get(g),n.link.name.startsWith(ht)){let q=be.get(n.link.name),{name:_,path:E}=Z.get(g),x=j(_,E),y=t.get(x),{indivisibles:N}=y,{mapTrail:H}=N;for(let A of H){let{data:z}=A,V=j(z.name,z.path),B=t.get(V),{load:I,store:J}=B.link;e.push(K,...Y(q)),e.push(K,...Y(A.address)),e.push(de),e.push(K,...Y(O)),e.push(K,...Y(A.address)),e.push(de),e.push(I.opcode,I.align,I.offset),e.push(J.opcode,J.align,J.offset)}return}return Q(r),e.push(Se,...Y(O)),e.push(nt,at,ct),Q(r),e.push(K,...Y(4)),e.push(de),e.push(Se,...Y(O+1|0)),e.push(nt,at,ct),f=f+2|0,f}let{literal:c,name:h,path:P}=i,v=j(h,P),m=t.get(v),{indivisibles:S}=m,{mapTrail:se}=S;for(let g of c)p(g,se)}}return f},Gt=(n,i)=>{let{link:r}=i,f=0,d=O=>{let p=Array.from(O.members.values()).reduce((m,S)=>S?m+1:m,0);w();let{indivisibles:c}=O,{mapTrail:h}=c,P=(m,S)=>{let{store:se,load:g}=m.link,{address:q}=h.get(S);e.push(K,...Y(se.size)),e.push(re,Le),Q(r),e.push(K,...Y(q)),e.push(de),e.push(g.opcode,g.align,g.offset),e.push(se.opcode,se.align,se.offset)},v=(m,S)=>{e.push(K,...Y(Dt)),e.push(re,Le),e.push(ke,Ae);for(let[g,q]of m.members){if(!q)continue;let _=j(q.name,q.path),E=t.get(_);if(E.type===ue){D(),v(E,`${S}.${g}`);continue}let x=`${S}.${g}`;P(E,x)}e.push(he,Ae),e.push(he,Ae),e.push(K,...Y(Dt)),e.push(de),e.push(nt,at,ct);let se=Array.from(m.members.values()).reduce((g,q)=>q?g+1:g,0);e.push(he,Ae),e.push(K,...Y(Sr)),e.push(de),e.push(K,...Y(se)),e.push(nt,at,ct),$()};for(let[m,S]of O.members){if(!S)continue;let se=j(S.name,S.path),g=t.get(se);if(g.type===ue){v(g,m);continue}P(g,m)}e.push(he,ge),e.push(K,...Y(p))},R=Ge(r),k=Z.get(R),{data:L}=k,{name:C,path:G,segment:oe}=L,ie=j(C,G),l=t.get(ie);switch(l.type){case fe:case ue:{if(n.type===me)return d(l),ut(n),f;break}}return f},Ht=(n,i,r)=>{let f=t.get(n),d=k=>{switch(k.type){case me:{let{name:L}=k,C=be.get(L);e.push(Se,C);break}case Ke:{let{literal:L}=k,C=f.type===fe?L:f.evaluate(L),G=Y(C);e.push(K,...G);break}}},R=()=>{switch(f.type){case Ye:{e.push(gs),e.push(ms,0);break}case fe:{e.push(gs),e.push(ms,0);break}}};switch(f.type){case Ye:{d(i),d(r),R();break}case fe:{d(i),d(r),R();break}}},Te=[],He=n=>{let i={type:_s,statement:n};Te.unshift(i)};Te.unshift({type:mt});let Tt=(n,i)=>{if(n.members)for(let[r,f]of n.members.entries()){let d=j(f?.name,f?.path),R=t.get(d);if(R&&R.type===ue){let k=Tt(R,d,i);k&&ft.push(k)}}return n.members&&n.members.has(hs)?i:null},ft=[];je.forEach(n=>{let i=j(n.data.name,n.data.path),r=t.get(i);if(r&&r.type===ue){let f=Tt(r,i);f&&ft.push(f)}});let Xt=ft.map(n=>({type:fs,expression:{type:tt,name:hs,path:n,inputs:[]}}));for(let n of Xt)He(n);var a=pt.length-1|0;for(let n=a;n>=0;n=n-1|0){let i=pt[n];He(i)}let b=n=>{let{target:i,source:r}=n;if(i.type===Er){Kt(i,r);return}if(i.type===pr){Mt(i,r);return}if(i.type===ot){Bt(i,r);return}if(r.type===Ct){let f=Z.get(i.name),{data:d}=f;if(d.path!=="Flogram"){let R=j(d.name,d.path);if(t.get(R).type===ue){Gt(i,r);return}}}Q(r,"assignment"),ut(i)},T=n=>{let{statements:i}=n;e.push(ds,St),e.push(dr,St);let r={type:mt,layout:us};Te.unshift(r),Te.unshift(r),Te.unshift({type:bs});var f=i.length-1|0;for(let d=f;d>=0;d=d-1|0){let R=i[d];He(R)}},F=n=>{e.push(mr,2)},M=n=>{let{branches:i}=n;Te.unshift({type:mt});for(let r=i.length-1;r>=0;r--){let f=i[r];switch(f.type){case ur:{let{statements:d}=f,R=d.length;for(let L=R-1;L>=0;L--){let C=d[L];He(C)}let k=d.find(L=>L.type===Co);Te.unshift({type:Po,stop:k}),Q(f.values[0]);break}case fr:{let{statements:d}=f,R=d.length;for(let k=R-1;k>=0;k--){let L=d[k];He(L)}Te.unshift({type:Os});break}}}},U=n=>{let i=n,{branches:r,values:f}=i;if(r.length>0&&f.length===0)return M(n);e.push(ds,St);let R={type:mt};Te.unshift(R);let k=[];for(let C of f)switch(C.type){case me:{let{name:G}=C,oe=Z.get(G),{data:ie}=oe,{name:l,path:O}=ie,p=j(l,O);k.push(p);break}}var L=r.length-1|0;for(let C=L;C>=0;C=C-1|0){let G=r[C],oe={type:Es,branch:G,condition:i,commonKeys:k};Te.unshift(oe)}},ee=n=>{let{expression:i}=n;var f=Q(i)|0;for(let d=0;d<f;d=d+1|0)e.push(gr)},X=n=>{let{value:i}=n;Q(i),e.push(re,Nr),e.push(K,0),ut(i)},ce=n=>{let{values:i}=n;for(let r of i)Q(r);e.push(yr)},Oe=n=>{e.push(Ir)},ye=n=>{e.push(12,0)},Ie=n=>{e.push(zr)},Me=n=>{n.stop?(e.push(Ts),e.push(st)):(e.push(Ts),e.push(St))},Fe=n=>{let{branch:i,commonKeys:r,condition:f}=n,{values:d}=i,{values:R}=f;var k=r.length|0;for(let G=0;G<k;G=G+1|0){let oe=r[G],ie=d[G],l=R[G];Ht(oe,ie,l)}let{statements:L}=i;var C=L.length-1|0;for(let G=C;G>=0;G=G-1|0){let oe=L[G];He(oe)}},$t=n=>{let{statement:i}=n;switch(i.type){case"assign":{b(i);break}case Po:{U(i);break}case us:{T(i);break}case br:{F(i);break}case fs:{ee(i);break}case hr:{X(i);break}case Co:{ce(i);break}}};for(;Te.length>0;){let n=Te.shift();switch(n.type){case mt:{Oe(n);break}case bs:{ye(n);break}case Os:{Ie(n);break}case Po:{Me(n);break}case Es:{Fe(n);break}case _s:{$t(n);break}default:break}}return e}var{HEX_ENCODE:Uo,LEB128_ENCODE:we}=et,{TYPES_ASSIGN:Ur,TYPES_ARRAY:gt,TYPES_DATA:Ut,TYPES_GENERICS:kr,TYPES_ENUMERATION:xt,TYPES_EXPRESSION:Lr,TYPES_LINK:kt,TYPES_LOCAL:rt,TYPES_OBJECT:it,TYPES_PROCEDURE:ko,TYPES_RETURN:vr,TYPES_SELECT:Vr,TYPES_MEMBER:Yr,TYPES_STORE:Lo,TYPES_LITERAL:wr,TYPES_LINK_TO:Lt,TYPES_VALUE_AT:vt,TYPES_SELF:zs,TYPES_NATIVE:lt,TYPES_STRING:Vt}=It,vo="",Ne=(o,t)=>`${t}.${o}`,Mr=o=>[">","<",">=","<=","!=","=="].includes(o),Br=o=>["fp64","i64","u64","fp32","i32","u32","i16","u16","i8","u8","bool"].includes(o),Vo=48,Kr=Object.freeze([0,127]),Gr=Object.freeze({}),Hr=Object.freeze([127]),Ns=0;var Xr=2;var $r=10,Jr=7,qr=3,Qr=2,Wr=1,Zr=6,Je=96,Yt=127,Yo=Object.freeze([7,105,109,112,111,114,116,115]),ei=Object.freeze([6,109,101,109,111,114,121]),ti=0;var oi=65,De=new Uint8Array(8),si=Object.freeze([0,97,115,109]),ni=Object.freeze([1,0,0,0]),ci=(o,t)=>{t=t??Gr;let s={},{data:u,code:e}=o,w=e.filter(a=>!a.description.generics||a.description.generics.length===0),D=new Map,$=new Map,Ee=a=>{let b=0;for(let T of a){let{data:F}=T;switch(F.type){case"Maybe":case Ut:{let{name:M,path:U}=F,ee=Ne(M,U),X=D.get(ee);if(X)switch(X.type){case lt:if(M===Vt){b=b+2|0;break}case xt:{b=b+1|0;break}case it:{let{length:ce}=X;b=b+2|0;break}}break}case kt:{F.name===gt||F.name===Vt?b=b+2|0:b=b+1|0;break}case gt:{b=b+2|0;break}}}return b},pe=a=>{let{labels:b}=a,T=new Map;var F=b.length|0;for(let X=0;X<F;X=X+1|0){let{name:ce}=b[X];T.set(ce,X)}return Object.freeze({type:xt,encode:X=>{let ce=T.get(X);return typeof ce>"u"?Hr:we(ce)},evaluate:X=>T.get(X),opcode:oi,link:Object.freeze({load:Object.freeze({opcode:40,align:2,offset:0,size:4}),store:Object.freeze({opcode:54,align:2,offset:0,size:4})})})},xe=a=>{let b=[],T=[],F=0,M=()=>{let l=Object.freeze({type:"back"});b.unshift(l)},U=l=>{let O={type:Ut,data:l};b.unshift(O)},ee=l=>{let O={type:"name",name:l};b.unshift(O)},X=(l,O)=>{O&&(M(),U(O),ee(l))},ce=l=>u.find(O=>O.name===l),Oe=(l,O)=>O.find(p=>p.name===l),ye=(l,{inputs:O})=>O.find(p=>p.name===l),Ie=(l,O)=>{let p=l;for(let c of O){let h=Oe(c,p.description.members),P=ce(h.data.name);if(P&&P.type===it)p=P;else return h}return null},Me=(l,O)=>{let p=l.trail,c=Oe(p[0],O.members);if(!c)return null;if(p.length===1)return c.data;let h=ce(c.data.name);return Ie(h,p.slice(1)).data},Fe=(l,O,p,c)=>{if(ye(O,p.description))return;p.description.self.push(l);let h=Object.seal({name:O,data:{...Me({trail:l.trail||l.value?.trail||l.link?.trail||[]},c),segment:"heap"}});l.type!==Lt&&(h.data.type=kt),p.description.inputs.push(h)},$t=(l,O,p)=>{let c=l.inputs.map(h=>i(h,O,p));return{...l,inputs:c}},n=(l,O,p)=>{if(!(l.value.link===zs||l.value.value===zs))return console.log("THIS IS NOT HANDLED; HANGING"),l;let c=`${l.type}_${l.trail.join("_")}`;if(Fe(l,c,O,p),l.value.value)return{type:Lt,value:c};if(l.value.link)return{type:vt,link:c}},i=(l,O,p,c="")=>{switch(l.type){case rt:case wr:return l;case Yr:{let h=`${l.type}_${l.trail.join("_")}`;return Fe(l,h,O,p),c==="target"?{type:Lo,link:{type:rt,name:h}}:{type:vt,link:{type:rt,name:h}}}case Lt:{let h=`${l.value.type}_${l.value.trail.join("_")}`;return Fe(l,h,O,p),{type:Lt,value:{type:rt,name:h}}}case vt:{let h=`${l.link.type}_${l.link.trail.join("_")}`;return Fe(l,h,O,p),{type:vt,link:{type:rt,name:h}}}case Lo:{let h=`${l.link.type}_${l.link.trail.join("_")}`;return Fe(l,h,O,p),{type:Lo,link:{type:rt,name:h}}}case Vr:return n(l,O,p);case Lr:return $t(l,O,p);default:return console.log("THIS IS NOT HANDLED; HANGING"),console.log(l),l}},r=(l,O)=>{let p=JSON.parse(JSON.stringify(l));p.description.self=[];for(let c of p.description.statements)c.type===Ur?(c.target=i(c.target,p,O,"target"),c.source=i(c.source,p,O)):c.type===vr&&(c.values=c.values.map(h=>i(h,p,O)));w.push(p)},{members:f}=a,d=new Map;for(let l of f){let{name:O,data:p}=l;d.set(O,p)}var R=f.length-1|0;for(let l=R;l>=0;l=l-1|0){let O=f[l],{name:p,data:c}=O;if(O.type&&O.type===ko){r(O,a);continue}X(p,c)}let k=new Map,L=new Map,C=0;for(;b.length>0;){let l=b.shift();switch(l.type){case"back":{T.pop();break}case Ut:{let{data:O}=l,p=()=>{let m=T.join("."),S=Ne(O.name,O.path),se=D.get(S),{link:g}=se,{load:q}=g,_=Object.freeze({data:O,index:C,address:F,trail:m});F+=q.size,k.set(m,_),L.set(C,_),O.type===gt?C=C+2|0:C=C+1|0};if(O.type===kt){p();break}let{name:c,path:h}=O,P=Ne(c,h),v=D.get(P);switch(v.type){case lt:case xt:{p();break}case it:{let{members:m}=v,S=[...m];var R=S.length-1|0;F+=8;for(let g=R;g>=0;g=g-1|0){let[q,_]=S[g];X(q,_)}break}}break}case"name":{let{name:O}=l;T.push(O);break}}}let G=C|0,oe=Object.freeze({mapTrail:k,mapIndex:L});return{type:it,length:G,members:d,indivisibles:oe}},ve={};for(let a of u){let{path:b}=a;switch(a.type){case lt:{let{name:T,path:F}=a,M=Ne(T,F);if(Object.hasOwn($e,M)){let U=$e[M];D.set(M,U);continue}break}case"import":{if(Object.hasOwn($e,b)){let T=$e[b];D.set(b,T);continue}break}case kr:{let{name:T,path:F}=a,M=Ne(T,F),U=$e["Flogram.FP32"];D.set(M,U);break}case xt:{let{name:T,path:F,description:M}=a,U=Ne(T,F),ee=pe(M);D.set(U,ee);break}case it:{let{name:T,path:F,description:M}=a,{generics:U}=M,ee=Ne(T,F);if(!U||U.length===0){let X=xe(M);D.set(ee,X)}break}}}s.structures=ve;let je=0;t.memory&&(je+=t.draws?7:6);let pt=(a,b)=>{let T=$.get(a);if(typeof T>"u"){$.set(a,[b]);return}(T.length==0||T.length>0&&T[0].body!==b.body)&&$.set(a,[b,...T])},be=a=>{let{name:b,path:T}=a,F=Ne(b,T);switch(T==="Flogram"&&(Br(b)?F=Ne(a.description.inputs[0]?.data?.name?.toLowerCase()+"."+Pe(b),T):a.description.outputs&&a.description.outputs.length>=1&&!Mr(a.name)?a.description.outputs[0]?.data?.name&&(F=Ne(a.description.outputs[0]?.data?.name?.toLowerCase()+"."+Pe(b,a.description.inputs?.length),T)):(_t.includes(a.description.inputs[1]?.data?.name?.toUpperCase())&&(F=Ne(a.description.inputs[1]?.data?.name?.toUpperCase()+"."+Pe(b),T),vo=a.description.inputs[1]?.data?.name?.toUpperCase()),vo&&(F=Ne(vo.toLowerCase()+"."+Pe(b),T)))),a.type){case lt:{if(Object.hasOwn(Ot,F)){let M=Ot[F];pt(F,M);return}break}case ko:{let{description:M}=a,{inputs:U,outputs:ee}=M,X=Ne(b,T),ce={type:"artificial",index:je,procedure:a,lengths:Object.freeze({inputs:Ee(U),outputs:Ee(ee)})};pt(X,ce);break}}je=je+1|0},Z=[],le=[];for(let a of w){if(a.description.generics?.length>0)continue;let{description:b}=a,{inputs:T,outputs:F}=b,M=[...T,...F];if(!(a.type===lt&&M.some(U=>!_t.includes(U.data.name))))switch(be(a),a.type){case"import":{let{path:U}=a;if(Object.hasOwn(Ot,U))continue;Z.push(a);break}case ko:{le.push(a);break}}}let Ve=a=>{let b=0,T=[];for(let F of a){let M=()=>{T.push(Yt),b=b+1|0},U=ye=>{let{identity:Ie}=ye;T.push(Ie),b=b+1|0},ee=()=>{T.push(Yt),b=b+1|0},X=()=>{T.push(Yt),b=b+1|0,T.push(Yt),b=b+1|0},{name:ce,data:Oe}=F;switch(Oe.type){case"Maybe":case Ut:{let{name:ye,path:Ie}=Oe,Me=Ne(ye,Ie),Fe=D.get(Me);if(!Fe)U($e["Flogram.FP32"]);else switch(Fe.type){case lt:{ye===Vt?X():U(Fe);break}case xt:{M();break}case it:{X();break}}break}case kt:{Oe.name===gt||Oe.name===Vt?X():ee();break}case gt:{X();break}}}return[b,T]},qe=(a,b)=>{let T=b.length|0,F=we(T);b.unshift(a,...F)},wt=()=>{let a=[],b=0,T=[...Z,...le];t.memory&&(b=t.draws?7:6,a.push(Je,1,127,1,127),a.push(Je,1,127,0),a.push(Je,0,0),a.push(Je,2,127,127,0),a.push(Je,0,2,127,127),a.push(Je,0,2,127,127),t.draws&&a.push(Je,1,127,0));for(let U of T){let{description:ee}=U,{inputs:X,outputs:ce}=ee,[Oe,ye]=Ve(X),[Ie,Me]=Ve(ce);a.push(Je,Oe,...ye,Ie,...Me)}let F=T.length|0,M=we(F+b);return a.unshift(...M),qe(Wr,a),a},Ge=()=>{let a=[];return a.push(2),a.push(127,1),a.push(65,0,11),a.push(127,1),a.push(65,0,11),qe(Zr,a),a},Q=0,ut=()=>{let a=[],b=0,T={};if(t.memory){let U=ce=>{let Oe=[...ce].map(ye=>ye.charCodeAt(0));return[Oe.length,...Oe]},ee=[U("alloc"),U("dealloc"),U("merge"),U("save"),U("undo"),U("undoPenultimate")];t.draws&&ee.push(U("draw"));let X=t.draws?7:6;for(let ce=0;ce<X;ce++){De.fill(Vo),Uo(b,De);let Oe=b|0;a.push(...Yo,...ee[ce],Ns,Oe),b=b+1|0}}for(let U of Z){let{path:ee}=U;De.fill(Vo),Uo(b,De);let X=String.fromCodePoint(...De);T[X]={path:U.path,description:U.description};let ce=b|0;a.push(...Yo,De.length|0,...De,Ns,ce),b=b+1|0}Q=b|0,t.memory&&(a.push(...Yo,...ei,Xr,...Kr),b=b+1|0);let F=b|0,M=we(F);return a.unshift(...M),qe(Qr,a),s.imports=T,a},Mt=()=>{let a=[];var b=le.length|0;for(let M=0;M<b;M=M+1|0){let U=M|0,ee=Q+U|0,X=we(ee);a.push(...X)}let T=le.length|0,F=we(T);return a.unshift(...F),qe(qr,a),a},Bt=()=>{let a=[],b=0,T={};var F=le.length|0;for(let ee=0;ee<F;ee=ee+1|0){let X=ee+Q|0,ce=we(X);De.fill(Vo),Uo(b,De);let{name:Oe,path:ye,description:Ie}=le[ee];Ie={inputs:Ie.inputs,outputs:Ie.outputs};let Me=String.fromCodePoint(...De);T[Me]={name:Oe,path:ye,description:Ie},a.push(De.length|0,...De,ti,...ce),b=b+1|0}let M=b|0,U=we(M);return a.unshift(...U),qe(Jr,a),s.procedures=T,a},Kt=()=>{let a=[];for(let F of le){let M=Ft(F,D,$,w),U=M.length|0,ee=we(U);a.push(...ee,...M)}let b=le.length|0,T=we(b);return a.unshift(...T),qe($r,a),a},Gt=wt(),Ht=Ge(),Te=ut(),He=Mt(),Tt=Bt(),ft=Kt(),Xt=new Uint8Array([...si,...ni,...Gt,...Te,...He,...Ht,...Tt,...ft]);return[s,Xt]},ai=Object.freeze({compile:ci}),Gi=ai;export{Gi as default};
