var ut=Object.create;var Pe=Object.defineProperty;var ft=Object.getOwnPropertyDescriptor;var ht=Object.getOwnPropertyNames;var pt=Object.getPrototypeOf,dt=Object.prototype.hasOwnProperty;var Ne=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports);var mt=(u,d,p,x)=>{if(d&&typeof d=="object"||typeof d=="function")for(let _ of ht(d))!dt.call(u,_)&&_!==p&&Pe(u,_,{get:()=>d[_],enumerable:!(x=ft(d,_))||x.enumerable});return u};var _t=(u,d,p)=>(p=u!=null?ut(pt(u)):{},mt(d||!u||!u.__esModule?Pe(p,"default",{value:u,enumerable:!0}):p,u));var ke=Ne((Ce,Re)=>{(function(u){var d=Object.hasOwnProperty,p=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},x=10,_=typeof process=="object"&&typeof process.nextTick=="function",k=typeof Symbol=="function",P=typeof Reflect=="object",v=typeof setImmediate=="function",w=v?setImmediate:setTimeout,C=k?P&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function M(){this._events={},this._conf&&X.call(this,this._conf)}function X(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==u&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function z(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var s=new Error(n);s.name="MaxListenersExceededWarning",s.emitter=this,s.count=e,process.emitWarning(s)}else console.error(n),console.trace&&console.trace()}var J=function(e,t,n){var s=arguments.length;switch(s){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var o=new Array(s);s--;)o[s]=arguments[s];return o}};function q(e,t){for(var n={},s,o=e.length,r=t?t.length:0,c=0;c<o;c++)s=e[c],n[s]=c<r?t[c]:u;return n}function $(e,t,n){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var s,o;if((n.on||n.off)&&(s=n.on,o=n.off),t.addEventListener?(s=t.addEventListener,o=t.removeEventListener):t.addListener?(s=t.addListener,o=t.removeListener):t.on&&(s=t.on,o=t.off),!s&&!o)throw Error("target does not implement any known event API");if(typeof s!="function")throw TypeError("on method must be a function");if(typeof o!="function")throw TypeError("off method must be a function");this._on=s,this._off=o;var r=e._observers;r?r.push(this):e._observers=[this]}Object.assign($.prototype,{subscribe:function(e,t,n){var s=this,o=this._target,r=this._emitter,c=this._listeners,l=function(){var i=J.apply(null,arguments),a={data:i,name:t,original:e};if(n){var E=n.call(o,a);E!==!1&&r.emit.apply(r,[a.name].concat(i));return}r.emit.apply(r,[t].concat(i))};if(c[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,r._newListener&&r._removeListener&&!s._onNewListener?(this._onNewListener=function(i){i===t&&c[e]===null&&(c[e]=l,s._on.call(o,e,l))},r.on("newListener",this._onNewListener),this._onRemoveListener=function(i){i===t&&!r.hasListeners(i)&&c[e]&&(c[e]=null,s._off.call(o,e,l))},c[e]=null,r.on("removeListener",this._onRemoveListener)):(c[e]=l,s._on.call(o,e,l))},unsubscribe:function(e){var t=this,n=this._listeners,s=this._emitter,o,r,c=this._off,l=this._target,i;if(e&&typeof e!="string")throw TypeError("event must be a string");function a(){t._onNewListener&&(s.off("newListener",t._onNewListener),s.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var E=ee.call(s,t);s._observers.splice(E,1)}if(e){if(o=n[e],!o)return;c.call(l,e,o),delete n[e],--this._listenersCount||a()}else{for(r=C(n),i=r.length;i-- >0;)e=r[i],c.call(l,e,n[e]);this._listeners={},this._listenersCount=0,a()}}});function Q(e,t,n,s){var o=Object.assign({},t);if(!e)return o;if(typeof e!="object")throw TypeError("options must be an object");var r=Object.keys(e),c=r.length,l,i,a;function E(b){throw Error('Invalid "'+l+'" option value'+(b?". Reason: "+b:""))}for(var D=0;D<c;D++){if(l=r[D],!s&&!d.call(t,l))throw Error('Unknown "'+l+'" option');i=e[l],i!==u&&(a=n[l],o[l]=a?a(i,E):i)}return o}function ne(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function G(e){var t="value must be type of "+e.join("|"),n=e.length,s=e[0],o=e[1];return n===1?function(r,c){if(typeof r===s)return r;c(t)}:n===2?function(r,c){var l=typeof r;if(l===s||l===o)return r;c(t)}:function(r,c){for(var l=typeof r,i=n;i-- >0;)if(l===e[i])return r;c(t)}}var V=G(["function"]),W=G(["object","function"]);function Z(e,t,n){var s,o,r=0,c,l=new e(function(i,a,E){n=Q(n,{timeout:0,overload:!1},{timeout:function(N,I){return N*=1,(typeof N!="number"||N<0||!Number.isFinite(N))&&I("timeout must be a positive number"),N}}),s=!n.overload&&typeof e.prototype.cancel=="function"&&typeof E=="function";function D(){o&&(o=null),r&&(clearTimeout(r),r=0)}var b=function(N){D(),i(N)},y=function(N){D(),a(N)};s?t(b,y,E):(o=[function(N){y(N||Error("canceled"))}],t(b,y,function(N){if(c)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof N!="function")throw TypeError("onCancel callback must be a function");o.push(N)}),c=!0),n.timeout>0&&(r=setTimeout(function(){var N=Error("timeout");N.code="ETIMEDOUT",r=0,l.cancel(N),a(N)},n.timeout))});return s||(l.cancel=function(i){if(o){for(var a=o.length,E=1;E<a;E++)o[E](i);o[0](i),o=null}}),l}function ee(e){var t=this._observers;if(!t)return-1;for(var n=t.length,s=0;s<n;s++)if(t[s]._target===e)return s;return-1}function j(e,t,n,s,o){if(!n)return null;if(s===0){var r=typeof t;if(r==="string"){var c,l,i=0,a=0,E=this.delimiter,D=E.length;if((l=t.indexOf(E))!==-1){c=new Array(5);do c[i++]=t.slice(a,l),a=l+D;while((l=t.indexOf(E,a))!==-1);c[i++]=t.slice(a),t=c,o=i}else t=[t],o=1}else r==="object"?o=t.length:(t=[t],o=1)}var b=null,y,N,I,S,K,H=t[s],Y=t[s+1],F,B;if(s===o)n._listeners&&(typeof n._listeners=="function"?(e&&e.push(n._listeners),b=[n]):(e&&e.push.apply(e,n._listeners),b=[n]));else if(H==="*"){for(F=C(n),l=F.length;l-- >0;)y=F[l],y!=="_listeners"&&(B=j(e,t,n[y],s+1,o),B&&(b?b.push.apply(b,B):b=B));return b}else if(H==="**"){for(K=s+1===o||s+2===o&&Y==="*",K&&n._listeners&&(b=j(e,t,n,o,o)),F=C(n),l=F.length;l-- >0;)y=F[l],y!=="_listeners"&&(y==="*"||y==="**"?(n[y]._listeners&&!K&&(B=j(e,t,n[y],o,o),B&&(b?b.push.apply(b,B):b=B)),B=j(e,t,n[y],s,o)):y===Y?B=j(e,t,n[y],s+2,o):B=j(e,t,n[y],s,o),B&&(b?b.push.apply(b,B):b=B));return b}else n[H]&&(b=j(e,t,n[H],s+1,o));if(N=n["*"],N&&j(e,t,N,s+1,o),I=n["**"],I)if(s<o)for(I._listeners&&j(e,t,I,o,o),F=C(I),l=F.length;l-- >0;)y=F[l],y!=="_listeners"&&(y===Y?j(e,t,I[y],s+2,o):y===H?j(e,t,I[y],s+1,o):(S={},S[y]=I[y],j(e,t,{"**":S},s+1,o)));else I._listeners?j(e,t,I,o,o):I["*"]&&I["*"]._listeners&&j(e,t,I["*"],o,o);return b}function g(e,t,n){var s=0,o=0,r,c=this.delimiter,l=c.length,i;if(typeof e=="string")if((r=e.indexOf(c))!==-1){i=new Array(5);do i[s++]=e.slice(o,r),o=r+l;while((r=e.indexOf(c,o))!==-1);i[s++]=e.slice(o)}else i=[e],s=1;else i=e,s=e.length;if(s>1){for(r=0;r+1<s;r++)if(i[r]==="**"&&i[r+1]==="**")return}var a=this.listenerTree,E;for(r=0;r<s;r++)if(E=i[r],a=a[E]||(a[E]={}),r===s-1)return a._listeners?(typeof a._listeners=="function"&&(a._listeners=[a._listeners]),n?a._listeners.unshift(t):a._listeners.push(t),!a._listeners.warned&&this._maxListeners>0&&a._listeners.length>this._maxListeners&&(a._listeners.warned=!0,z.call(this,a._listeners.length,E))):a._listeners=t,!0;return!0}function L(e,t,n,s){for(var o=C(e),r=o.length,c,l,i,a=e._listeners,E;r-- >0;)l=o[r],c=e[l],l==="_listeners"?i=n:i=n?n.concat(l):[l],E=s||typeof l=="symbol",a&&t.push(E?i:i.join(this.delimiter)),typeof c=="object"&&L.call(this,c,t,i,E);return t}function U(e){for(var t=C(e),n=t.length,s,o,r;n-- >0;)o=t[n],s=e[o],s&&(r=!0,o!=="_listeners"&&!U(s)&&delete e[o]);return r}function f(e,t,n){this.emitter=e,this.event=t,this.listener=n}f.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function m(e,t,n){if(n===!0)o=!0;else if(n===!1)s=!0;else{if(!n||typeof n!="object")throw TypeError("options should be an object or true");var s=n.async,o=n.promisify,r=n.nextTick,c=n.objectify}if(s||r||o){var l=t,i=t._origin||t;if(r&&!_)throw Error("process.nextTick is not supported");o===u&&(o=t.constructor.name==="AsyncFunction"),t=function(){var a=arguments,E=this,D=this.event;return o?r?Promise.resolve():new Promise(function(b){w(b)}).then(function(){return E.event=D,l.apply(E,a)}):(r?process.nextTick:w)(function(){E.event=D,l.apply(E,a)})},t._async=!0,t._origin=i}return[t,c?new f(this,e,t):this]}function h(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,X.call(this,e)}h.EventEmitter2=h,h.prototype.listenTo=function(e,t,n){if(typeof e!="object")throw TypeError("target musts be an object");var s=this;n=Q(n,{on:u,off:u,reducers:u},{on:V,off:V,reducers:W});function o(r){if(typeof r!="object")throw TypeError("events must be an object");var c=n.reducers,l=ee.call(s,e),i;l===-1?i=new $(s,e,n):i=s._observers[l];for(var a=C(r),E=a.length,D,b=typeof c=="function",y=0;y<E;y++)D=a[y],i.subscribe(D,r[D]||D,b?c:c&&c[D])}return p(t)?o(q(t)):o(typeof t=="string"?q(t.split(/\s+/)):t),this},h.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var s=n.length,o,r=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;s-- >0;)o=n[s],(!e||o._target===e)&&(o.unsubscribe(t),r=!0);return r},h.prototype.delimiter=".",h.prototype.setMaxListeners=function(e){e!==u&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},h.prototype.getMaxListeners=function(){return this._maxListeners},h.prototype.event="",h.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},h.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},h.prototype._once=function(e,t,n,s){return this._many(e,1,t,n,s)},h.prototype.many=function(e,t,n,s){return this._many(e,t,n,!1,s)},h.prototype.prependMany=function(e,t,n,s){return this._many(e,t,n,!0,s)},h.prototype._many=function(e,t,n,s,o){var r=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");function c(){return--t===0&&r.off(e,c),n.apply(this,arguments)}return c._origin=n,this._on(e,c,s,o)},h.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||M.call(this);var e=arguments[0],t,n=this.wildcard,s,o,r,c,l;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(n&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(o=e.length,k){for(r=0;r<o;r++)if(typeof e[r]=="symbol"){l=!0;break}}l||(e=e.join(this.delimiter))}var i=arguments.length,a;if(this._all&&this._all.length)for(a=this._all.slice(),r=0,o=a.length;r<o;r++)switch(this.event=e,i){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,arguments)}if(n)a=[],j.call(this,a,t,this.listenerTree,0,o);else if(a=this._events[e],typeof a=="function"){switch(this.event=e,i){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(s=new Array(i-1),c=1;c<i;c++)s[c-1]=arguments[c];a.apply(this,s)}return!0}else a&&(a=a.slice());if(a&&a.length){if(i>3)for(s=new Array(i-1),c=1;c<i;c++)s[c-1]=arguments[c];for(r=0,o=a.length;r<o;r++)switch(this.event=e,i){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,s)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},h.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||M.call(this);var e=arguments[0],t=this.wildcard,n,s,o,r,c,l;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(n=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(r=e.length,k){for(c=0;c<r;c++)if(typeof e[c]=="symbol"){s=!0;break}}s||(e=e.join(this.delimiter))}var i=[],a=arguments.length,E;if(this._all)for(c=0,r=this._all.length;c<r;c++)switch(this.event=e,a){case 1:i.push(this._all[c].call(this,e));break;case 2:i.push(this._all[c].call(this,e,arguments[1]));break;case 3:i.push(this._all[c].call(this,e,arguments[1],arguments[2]));break;default:i.push(this._all[c].apply(this,arguments))}if(t?(E=[],j.call(this,E,n,this.listenerTree,0)):E=this._events[e],typeof E=="function")switch(this.event=e,a){case 1:i.push(E.call(this));break;case 2:i.push(E.call(this,arguments[1]));break;case 3:i.push(E.call(this,arguments[1],arguments[2]));break;default:for(o=new Array(a-1),l=1;l<a;l++)o[l-1]=arguments[l];i.push(E.apply(this,o))}else if(E&&E.length){if(E=E.slice(),a>3)for(o=new Array(a-1),l=1;l<a;l++)o[l-1]=arguments[l];for(c=0,r=E.length;c<r;c++)switch(this.event=e,a){case 1:i.push(E[c].call(this));break;case 2:i.push(E[c].call(this,arguments[1]));break;case 3:i.push(E[c].call(this,arguments[1],arguments[2]));break;default:i.push(E[c].apply(this,o))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(i)},h.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},h.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},h.prototype.onAny=function(e){return this._onAny(e,!1)},h.prototype.prependAny=function(e){return this._onAny(e,!0)},h.prototype.addListener=h.prototype.on,h.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},h.prototype._on=function(e,t,n,s){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||M.call(this);var o=this,r;return s!==u&&(r=m.call(this,e,t,s),t=r[0],o=r[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(g.call(this,e,t,n),o):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,z.call(this,this._events[e].length,e))):this._events[e]=t,o)},h.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var n,s=[];if(this.wildcard){var o=typeof e=="string"?e.split(this.delimiter):e.slice();if(s=j.call(this,null,o,this.listenerTree,0),!s)return this}else{if(!this._events[e])return this;n=this._events[e],s.push({_listeners:n})}for(var r=0;r<s.length;r++){var c=s[r];if(n=c._listeners,p(n)){for(var l=-1,i=0,a=n.length;i<a;i++)if(n[i]===t||n[i].listener&&n[i].listener===t||n[i]._origin&&n[i]._origin===t){l=i;break}if(l<0)continue;return this.wildcard?c._listeners.splice(l,1):this._events[e].splice(l,1),n.length===0&&(this.wildcard?delete c._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&U(this.listenerTree),this},h.prototype.offAny=function(e){var t=0,n=0,s;if(e&&this._all&&this._all.length>0){for(s=this._all,t=0,n=s.length;t<n;t++)if(e===s[t])return s.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(s=this._all,this._removeListener)for(t=0,n=s.length;t<n;t++)this.emit("removeListenerAny",s[t]);this._all=[]}return this},h.prototype.removeListener=h.prototype.off,h.prototype.removeAllListeners=function(e){if(e===u)return!this._events||M.call(this),this;if(this.wildcard){var t=j.call(this,null,e,this.listenerTree,0),n,s;if(!t)return this;for(s=0;s<t.length;s++)n=t[s],n._listeners=null;this.listenerTree&&U(this.listenerTree)}else this._events&&(this._events[e]=null);return this},h.prototype.listeners=function(e){var t=this._events,n,s,o,r,c;if(e===u){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(n=C(t),r=n.length,o=[];r-- >0;)s=t[n[r]],typeof s=="function"?o.push(s):o.push.apply(o,s);return o}else{if(this.wildcard){if(c=this.listenerTree,!c)return[];var l=[],i=typeof e=="string"?e.split(this.delimiter):e.slice();return j.call(this,l,i,c,0),l}return t?(s=t[e],s?typeof s=="function"?[s]:s:[]):[]}},h.prototype.eventNames=function(e){var t=this._events;return this.wildcard?L.call(this,this.listenerTree,[],null,e):t?C(t):[]},h.prototype.listenerCount=function(e){return this.listeners(e).length},h.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n=typeof e=="string"?e.split(this.delimiter):e.slice();return j.call(this,t,n,this.listenerTree,0),t.length>0}var s=this._events,o=this._all;return!!(o&&o.length||s&&(e===u?C(s).length:s[e]))},h.prototype.listenersAny=function(){return this._all?this._all:[]},h.prototype.waitFor=function(e,t){var n=this,s=typeof t;return s==="number"?t={timeout:t}:s==="function"&&(t={filter:t}),t=Q(t,{timeout:0,filter:u,handleError:!1,Promise,overload:!1},{filter:V,Promise:ne}),Z(t.Promise,function(o,r,c){function l(){var i=t.filter;if(!(i&&!i.apply(n,arguments)))if(n.off(e,l),t.handleError){var a=arguments[0];a?r(a):o(J.apply(null,arguments).slice(1))}else o(J.apply(null,arguments))}c(function(){n.off(e,l)}),n._on(e,l,!1)},{timeout:t.timeout,overload:t.overload})};function O(e,t,n){n=Q(n,{Promise,timeout:0,overload:!1},{Promise:ne});var s=n.Promise;return Z(s,function(o,r,c){var l;if(typeof e.addEventListener=="function"){l=function(){o(J.apply(null,arguments))},c(function(){e.removeEventListener(t,l)}),e.addEventListener(t,l,{once:!0});return}var i=function(){a&&e.removeListener("error",a),o(J.apply(null,arguments))},a;t!=="error"&&(a=function(E){e.removeListener(t,i),r(E)},e.once("error",a)),c(function(){a&&e.removeListener("error",a),e.removeListener(t,i)}),e.once(t,i)},{timeout:n.timeout,overload:n.overload})}var T=h.prototype;if(Object.defineProperties(h,{defaultMaxListeners:{get:function(){return T._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");T._maxListeners=e},enumerable:!0},once:{value:O,writable:!0,configurable:!0}}),Object.defineProperties(T,{_maxListeners:{value:x,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return h});else if(typeof Ce=="object")Re.exports=h;else{var A=new Function("","return this")();A.EventEmitter2=h}})()});var Se=Ne((hs,De)=>{De.exports=ke()});var ct=_t(Se(),1);var Et="as",vt="=",bt="break",xt="else",Tt="enum",gt="export",Ot="if",yt="import",wt="->",Lt="is",At="loop",It="mut",Pt="native",Nt="object",Ct="fn",Rt="return",kt="self",Dt="template",St=Object.freeze({ALIAS:Et,ASSIGN:vt,BREAK:bt,ELSE:xt,ENUMERATION:Tt,EXPORT:gt,IF:Ot,IMPORT:yt,INTO:wt,IS:Lt,LOOP:At,MUTABLE:It,NATIVE:Pt,OBJECT:Nt,PROCEDURE:Ct,RETURN:Rt,SELF:kt,TEMPLATE:Dt}),Me=St;var Mt="array",jt="assignment",Bt="branch-default",Ut="branch-value",Ft="break",zt="condition",Ht="declaration",Yt="enumeration",Xt="export",Gt="expression",Vt="import",Kt="instance",Zt="label",Wt="literal",Qt="loop",Jt="module",qt="mutable",$t="name-list",en="native",tn="object",nn="procedure",sn="procedure-call",on="return",rn="self",cn="submodule",an="template",ln="type-pair",un=Object.freeze({ARRAY:Mt,ASSIGNMENT:jt,BRANCH_DEFAULT:Bt,BRANCH_VALUE:Ut,BREAK:Ft,CONDITION:zt,DECLARATION:Ht,ENUMERATION:Yt,EXPORT:Xt,EXPRESSION:Gt,IMPORT:Vt,INSTANCE:Kt,LABEL:Zt,LITERAL:Wt,LOOP:Qt,MODULE:Jt,MUTABLE:qt,NAME_LIST:$t,NATIVE:en,OBJECT:tn,PROCEDURE:nn,PROCEDURE_CALL:sn,RETURN:on,SELF:rn,SUBMODULE:cn,TEMPLATE:an,TYPE_PAIR:ln}),je=un;var fn=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Be=fn;var hn=Object.freeze([]),pn=Object.freeze({}),dn="",mn="	",_n=`
`,En="UTF-8",vn=Object.freeze({EMPTY_ARRAY:hn,EMPTY_OBJECT:pn,EMPTY_STRING:dn,HORIZONTAL_TAB:mn,LINE_BREAK:_n,UNICODE_TEXT:En,Codes:Be,Keys:Me,Types:je}),le=vn;var{EMPTY_STRING:bn,UNICODE_TEXT:Oe}=le,xn=44,Tn=48,gn=57,On=46,yn=45,wn=43,Ln=65,An=90,In=-1,Pn=1,Nn=new TextDecoder(Oe),Cn=new TextEncoder,Rn=(u,d,p=0,x=u.length|0,_=0,k=d.length|0)=>{for(_=_|0,p=p|0,k=k|0,x=x|0;;){let P=p>=x,v=_>=k;if(P||v)break;let C=u[p],M=d[_];if(p=p+1|0,_=_+1|0,C<M)return In;if(C>M)return Pn}return 0},kn=(u,d,p=0,x=u.length|0,_=0,k=d.length|0)=>{for(_=_|0,p=p|0,k=k|0,x=x|0;;){let P=_>=k,v=p>=x;if(P||v)break;d[_]=u[p],_=_+1|0,p=p+1|0}},Dn=(u,d,p=0,x=u.length|0,_=0,k=d.length|0)=>{p=p|0,_=_|0,x=x|0,k=k|0;let P=x-p|0,v=k-_|0;if(P!==v)return!1;for(;;){let w=p>=x,C=_>=k;if(w||C)break;let X=u[p],z=d[_];if(p=p+1|0,_=_+1|0,X!==z)return!1}return!0},Sn=u=>{u=u>>>0;let d=0,p=0;for(;p=(p<<1|1)>>>0,!(p>u);)d=d+1|0;return d},ze=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),Te=(u,d,p,x)=>{for(u=u>>>0,x=x??d.length|0,p=p|0,x=x|0;u>0&&x>p;)x=x-1|0,d[x]=ze[u&15],u=u>>>4},Mn=(u,d,p,x)=>{let _=p|0,k=p+x|0;if(x===0)return!1;let P=d[_];for((P===wn||P===yn)&&(_=_+1|0);_<k;){let v=d[_];if(_=_+1|0,!(Tn<=v&&v<=gn||(On===v||xn===v)))return!1}return!0},jn=u=>{let d=u>=Ln,p=u<=An;return d&&p},He=128,Ye=127,Bn=-1,ge=64,ye=u=>{u=u|0;let d=[];for(;;){let p=u&Ye;u=u>>7;let x=u===0,_=(p&ge)===0,k=x&&_,P=u===-1,v=(p&ge)!==0;if(k||P&&v){d.push(p);break}p=p|He,d.push(p)}return d},Xe=(u,d)=>{d=d|0;let p=0,x=0;for(;;){let _=u[d]|0;d=d+1|0;let k=(_&Ye)<<x;if(x=x+7|0,p=p|k,(_&He)===0){let v=(_&ge)!==0,w=x<32;if(v&&w){let M=Bn<<x;p=p|M}break}}return p},Un=u=>Nn.decode(u),Fn=u=>Cn.encode(u),zn=(u=bn)=>{let d=u.length|0,p=ye(d),x=Buffer.from(u,Oe);return Object.freeze([...p,...x])},Hn=(u,d)=>{d=d|0;let p=Xe(u,d),x=ye(p).length;return d=d+x|0,u.subarray(d,d+p|0).toString(Oe)},Yn=58,Xn=46,ue=32,be=48,Gn=67,re=new Uint8Array(Gn),Ue=re.subarray(0,8),de=re.subarray(10,49),Fe=re.subarray(51,68),xe=16,Vn=2;re[8]=Yn;re[9]=ue;re[49]=ue;re[50]=ue;var Kn=(u,d)=>{d=d??console.log;let p=32,x=126,_=u.length|0,k=0;for(;_>0;){Ue.fill(be),Te(k,Ue),de.fill(ue),Fe.fill(ue);let P=_>=xe?xe:_;_=_-xe|0;let v=0,w=0;for(let M=1;M<=P;M=M+1|0){let X=u[k]&255;de[v+0|0]=be,de[v+1|0]=be,Te(X,de,v,v+2|0);let z=Xn;p<=X&&X<=x&&(z=X),Fe[w]=z,k=k+1|0,v=v+2|0,w=w+1|0,M%Vn===0&&(v=v+1|0)}let C=String.fromCodePoint(...re);d(C)}},Zn=function*(u,d){let p=u.length|0,x=d.length|0,_=0;for(;_<p&&_<x;){let k=u[_],P=d[_];yield[k,P],_=_+1|0}},Wn=function*(u,d,p){let x=u.length|0,_=d.length|0,k=p.length|0,P=0;for(;P<x&&P<_&&P<k;){let v=u[P],w=d[P],C=p[P];yield[v,w,C],P=P+1|0}},Qn=Object.freeze({ARRAY_COMPARE:Rn,ARRAY_COPY:kn,ARRAY_EQUAL:Dn,BIT_DEPTH:Sn,HEX_DIGITS:ze,HEX_ENCODE:Te,IS_NUMBER:Mn,IS_UPPERCASE:jn,LEB128_DECODE:Xe,LEB128_ENCODE:ye,UTF8_DECODE:Un,UTF8_ENCODE:Fn,WASM_STRING_ENCODE:zn,WASM_STRING_DECODE:Hn,XXD_DUMP_HEX:Kn,ZIP2:Zn,ZIP3:Wn}),Ge=Qn;var{EMPTY_ARRAY:oe,EMPTY_OBJECT:ys,EMPTY_STRING:ws,UNICODE_TEXT:Ls}=le,{BIT_DEPTH:it,HEX_ENCODE:we,LEB128_ENCODE:R,ZIP2:Ve}=Ge,{Types:te}=le,Ke=Object.freeze({[te.BRANCH_VALUE]:1,[te.BRANCH_DEFAULT]:2}),Jn=new Set(["done","error"]),Ze=Object.freeze([0,97,115,109]),We=Object.freeze([1,0,0,0]),Le=48,Qe=10,Je=7,qe=3,$e=1,et=64,tt=96,fe=127,nt=0,st=2,qn=12,$n=13,Ae=65,es=71,me=32,ts=33,ot=15,Ie=11,ns=Object.freeze({type:"native",octets:Object.freeze([106])}),ss=Object.freeze({type:"native",octets:Object.freeze([108])}),os=Object.freeze({type:"native",octets:Object.freeze([110])}),_e=new Map;_e.set("Flogram.+",ns);_e.set("Flogram.*",ss);_e.set("Flogram./",os);var rs=Object.freeze({type:"native",code:127,evaluate:parseInt}),cs=Object.freeze({type:"native",code:127,evaluate:parseInt}),is=Object.freeze({type:"native",code:125,evaluate:parseFloat}),Ee=new Map;Ee.set("Flogram.FP32",is);Ee.set("Flogram.I32",rs);Ee.set("Flogram.U32",cs);var ae=1,he=2,rt=u=>u.join("."),as=(u,d)=>{let p=Ke[u.type]|0,x=Ke[d.type]|0;return p-x|0},at=u=>(d,p)=>{let x=()=>{let{labels:v}=p,w=it(v.length|0),C=new Map(Object.entries(v)),X=Object.freeze({type:"list",bitDepth:w,evaluate:z=>C.get(z)});return u.set(d,X),X},_=()=>{let v=[],w=[],C=()=>{let G=Object.freeze({type:"back"});v.unshift(G)},M=(G,V)=>{let W={type:"path",category:V,path:G};v.unshift(W)},X=G=>{let V={type:"name",name:G};v.unshift(V)},z=(G,V,W)=>{C(),M(V,W),X(G)},{members:J}=p,q=new Map;for(let G of J){let{name:V,path:W,type:Z}=G,ee=Object.freeze({category:Z,path:W});q.set(V,ee),z(V,W,Z)}let $=0,Q=new Map;for(;v.length>0;){let G=v.shift();switch(G.type){case"back":{w.pop();break}case"path":{let{path:V,category:W}=G,Z=()=>{let j=w.join("."),g=Object.freeze({category:W,index:$,path:V});Q.set(j,g),$=$+1|0};if(W==="pointer"){Z();break}let ee=u.get(V);switch(ee.type){case"native":case"list":{Z();break}case"object":{let{members:j}=ee;for(let[g,L]of j){let{category:U,path:f}=L;z(g,f,U)}break}}break}case"name":{let{name:V}=G;w.push(V);break}}}let ne={type:"object",members:q,indivisibles:Q};return u.set(d,ne),ne};switch(p.type){case"list":return x();case"object":return _()}let k=v=>{let w=[],C=[v];for(;C.length>0;){let M=C.shift(),{description:X}=M;switch(X.type){case"object":{let{members:z}=X,J=z.map(q=>{let{path:$}=q;return u.get($)});C.unshift(...J);break}}}return w};return data.map(k)},ls=()=>{let u=new Map,d=new ct.default;d.on("done",(P,v)=>{(u.get("done")||oe).forEach(C=>{C(P,v)})});let p=(P,v)=>{if(Jn.has(P)){let w=u.get(P)||[];w.push(v),u.set(P,w)}},x=P=>{let v=new Map,w=new Map,C=f=>{let m=[],{inputs:h,locals:O,outputs:T,statements:A}=f,e=b=>y=>({type:"branch",branch:y,values:b}),t=b=>({type:"statement",statement:b}),n=b=>{let y=new Map;return Object.keys(b).forEach(N=>{let I=b[N],{path:S,type:K}=I,H=v.get(S);y.set(N,H)}),y},s=n(h),o=n(T),r=A.map(t);r.push({type:"block-end"});let c=b=>{let{branch:y,values:N}=b;switch(y.type){case te.BRANCH_VALUE:{let{statements:I}=y;m.push(st,et);let S=Ve(N,y.values);for(let[H,Y]of S)switch(H.type){case"local":{let{label:F}=H,B=O.get(F),{index:se,path:ce}=B,ie=v.get(ce).parse(Y),ve=R(se);m.push(me),m.push(...ve);let lt=R(ie);m.push(Ae),m.push(...lt),m.push(es),m.push($n,0);break}}r.unshift({type:"branch-close"});let K=I.map(t);r.unshift(...K);break}}},l=b=>{m.push(qn,1),m.push(Ie)},i=b=>{let{statement:y}=b;switch(y.type){case te.CONDITION:{m.push(st,et),r.unshift({type:"block-end"});let{values:N,branches:I}=y;I.sort(as);let S=N.map(Y=>({type:"local",label:Y})),K=e(S),H=I.map(K);r.unshift(...H);break}case te.RETURN:{let{keys:N,map:I}=T,S=N.map(Y=>{let F=I.get(Y),{path:B}=F;return v.get(B)}),{values:K}=y,H=Ve(K,S);for(let[Y,F]of H){let B=F.parse(Y),se=R(B);m.push(Ae),m.push(...se)}m.push(ot);break}}},a=b=>{m.push(Ie)};for(;r.length>0;){let b=r.shift();switch(b.type){case"block-end":{a(b);break}case"branch":{c(b);break}case"branch-close":{l(b);break}case"statement":{i(b);break}}}let E=O.size-h.keys.length|0;return m=[...R(E),...m],m},M=()=>{let f=[];for(let[A,e]of w){let t=C(e),n=t.length|0,s=R(n);f=[...f,...s,...t]}let m=w.size|0;f=[...R(m),...f];let O=f.length|0,T=R(O);return f=[Qe,...T,...f],f},X=()=>{let f=[];for(let[O,T]of w){let{inputs:A,outputs:e}=T,{keys:t}=A,{keys:n}=e,s=t.length,o=n.length,r=Array(s).fill(fe),c=Array(o).fill(fe),l=[tt,s,...r,o,...c];f=[...f,...l]}f=[...R(w.size|0),...f];let h=R(f.length);return f=[$e,...h,...f],f},z=()=>{let f=[],m=new Uint8Array(8),h=R(8),O=R(nt);for(let[e,t]of w){let{index:n}=t,s=R(n);m.fill(Le),we(n,m),f=[...f,...h,...m,...O,...s]}f=[...R(w.size),...f];let A=R(f.length);return f=[Je,...A,...f],f},J=()=>{let f=[];for(let O=0;O<w.size;O=O+1|0){let T=R(O);f=[...f,...T]}f=[...R(w.size),...f];let h=R(f.length);return f=[qe,...h,...f],f},q=(f,m)=>{let h=new Map,O=m.map(T=>T.key);m.forEach(T=>{let{key:A,value:e}=T,t=e.join("."),n=[];for(let[s,o]of v)if(s.endsWith(t)){let r={type:"enumeration",path:s};n.push(r)}n.length===1&&h.set(A,n[0])}),f.map=h,f.keys=O},$=(f,m,h)=>{let{items:O,name:T}=h;m.push(T);let A={type:he};f.push(A);let e=D=>D.type===te.LABEL,t=D=>D.name,n=O.filter(e).map(t),s=it(n.length),o=new Map;n.forEach((D,b)=>{o.set(D,b)});let c={type:"list",bitDepth:s,labels:n,parse:D=>o.get(D)},l=rt(m);v.set(l,c);let i=D=>D.type!==te.LABEL,a=D=>({type:ae,node:D}),E=O.filter(i).map(a);f.push(...E)},Q=0,ne=(f,m,h)=>{let{head:O,body:T}=h,{name:A,inputs:e,outputs:t}=O,n=new Map;e.forEach((i,a)=>{let{key:E,value:D}=i,b=D.join("."),y=[];for(let[N,I]of v)if(N.endsWith(b)){let S={type:"enumeration",path:N};y.push(S)}if(y.length===1){let I={...y[0],index:a};n.set(E,I)}}),m.push(A);let s={type:he};f.push(s);let o=rt(m),r={};q(r,e);let c={};q(c,t);let l={index:Q,locals:n,inputs:r,outputs:c,statements:T};w.set(o,l),Q=Q+1|0},G=(f,m,h)=>{let{items:O,name:T}=h;m.push(T);let A={type:he};f.push(A);let e=O.map(t=>({type:ae,node:t}));f.push(...e)},V=f=>{let m=[],O=[{type:ae,node:f}];for(;O.length>0;){let T=O.pop();switch(T.type){case ae:{let{node:A}=T;switch(A.type){case te.ENUMERATION:{$(O,m,A);break}case te.MODULE:{G(O,m,A);break}}break}case he:{m.pop();break}}}},W=f=>{let m=[],O=[{type:ae,node:f}];for(;O.length>0;){let T=O.pop();switch(T.type){case ae:{let{node:A}=T;switch(A.type){case te.MODULE:{G(O,m,A);break}case te.PROCEDURE:{ne(O,m,A);break}}break}case he:{m.pop();break}}}};V(P),W(P);let Z={};if(v.size>0){let f=Z.data||{};Z.data=f;let m=f.types||[];f.types=m;for(let[h,O]of v){let{type:T,labels:A,bitDepth:e}=O,t={path:h,type:T,labels:A,bitDepth:e};m.push(t)}}if(w.size>0){let f=T=>{let{map:A,keys:e}=T,t=s=>{let o=A.get(s);return{name:s,...o}};return e.map(t)},m=Z.code||{};Z.code=m;let h=m.procedures||[];m.procedures=h;let O=new Uint8Array(8);for(let[T,A]of w){let{index:e,inputs:t,outputs:n}=A;O.fill(Le),we(e,O);let s=String.fromCodePoint(...O),o=f(t),r=f(n),c={key:s,path:T,inputs:o,outputs:r};h.push(c)}}let ee=X(),j=J(),g=z(),L=M(),U=new Uint8Array([...Ze,...We,...ee,...j,...g,...L]);d.emit("done",Z,U)},_=(P,v)=>{let{data:w,code:C}=P;w=w??oe,C=C??oe;let{allTypes:M}=v;M=M??new Map(Ee);let X=at(M);for(let g of w){let{path:L,description:U}=g;X(L,U)}let z=new Map;C.forEach((g,L)=>{let{path:U}=g,f={index:L,...g};z.set(U,f)});let J=g=>{let L=[],{description:U}=g,{inputs:f,outputs:m,locals:h,statements:O}=U;f=f??oe,m=m??oe,h=h??oe;let T=0,A=new Map,e=I=>{let{name:S,path:K}=I,H={index:T,...I};A.set(S,H);let Y=M.get(K);switch(Y.type){case"native":case"list":{T=T+1|0;break}case"object":{let{indivisibles:F}=Y;T=T+F.size|0;break}}},t=T|0;f.forEach(e);let s=(T|0)-t|0,o=T|0;h.forEach(e);let c=(T|0)-o|0,l=I=>({type:"statement",statement:I}),i=O.map(l);i.push({type:"block-end"});let a=I=>{let S=_e.get(I);if(S){let{octets:K}=S;L.push(...K);return}},E=I=>{let{inputs:S}=I,K=Y=>{switch(Y.type){case"expression":{E(Y);break}case"input":case"local":{let{name:F}=Y,B=A.get(F),{index:se}=B,ce=R(se);L.push(me),L.push(...ce);break}case"literal":{let{literal:F}=Y,B=F>>0,se=R(B);L.push(Ae),L.push(...se);break}}};S=S??oe,S.forEach(K);let{path:H}=I;a(H)},D=I=>{let{target:S,source:K}=I;switch(K.type){case"expression":{E(K);break}}switch(S.type){case"local":{let{name:H}=S,Y=A.get(H),{index:F}=Y,B=R(F);L.push(ts),L.push(...B);break}}},b=I=>{let{statement:S}=I;switch(S.type){case"assign":{D(S);break}case"return":{let{values:K}=S;K.forEach(H=>{switch(H.type){case"input":case"local":{let{name:Y}=H,F=A.get(Y),{index:B,path:se}=F,ce=M.get(se);switch(ce.type){case"native":case"list":{let pe=R(B);L.push(me),L.push(...pe);break}case"object":{let{indivisibles:pe}=ce,ie=0;for(;ie<pe.size;){let ve=R(B+ie);L.push(me),L.push(...ve),ie=ie+1|0}break}}break}}}),L.push(ot);break}}},y=I=>{L.push(Ie)};for(;i.length>0;){let I=i.shift();switch(I.type){case"block-end":{y(I);break}case"statement":{b(I);break}}}let N=h.length|0;return N>0?L=[1,...R(N),fe,...L]:L=[0,...L],L},q=()=>{let g=[],L=0;for(let h of z.values()){let O=J(h),T=O.length|0,A=R(T);g=[...g,...A,...O],L=L+1|0}g=[...R(L),...g];let f=g.length|0,m=R(f);return g=[Qe,...m,...g],g},$=()=>{let g=[],L=0,U=0,f=O=>{let{path:T}=O,A=M.get(T);switch(A.type){case"native":case"list":{U=U+1|0;break}case"object":{let{indivisibles:e}=A;U=U+e.size|0;break}}};for(let O of z.values()){let{description:T}=O,{inputs:A,outputs:e}=T;A=A??oe,e=e??oe;let{path:t}=O,n=U|0;A.forEach(f);let o=(U|0)-n|0,r=U|0;e.forEach(f);let l=(U|0)-r|0,i=Array(o).fill(fe),a=Array(l).fill(fe),E=[tt,o,...i,l,...a];g=[...g,...E],L=L+1|0}g=[...R(L),...g];let h=R(g.length);return g=[$e,...h,...g],g},Q=()=>{let g=[],L=new Uint8Array(8),U=R(8),f=R(nt),m=0;for(let T of z.values()){let{index:A}=T,e=R(A);L.fill(Le),we(A,L),g=[...g,...U,...L,...f,...e];let t=String.fromCodePoint(...L);T.key=t,m=m+1|0}g=[...R(m),...g];let O=R(g.length);return g=[Je,...O,...g],g},ne=()=>{let g=[],L=0;for(let m of z.values()){let{index:h}=m,O=R(h);g=[...g,...O],L=L+1|0}g=[...R(L),...g];let f=R(g.length);return g=[qe,...f,...g],g},G=$(),V=ne(),W=Q(),Z=q(),ee=new Uint8Array([...Ze,...We,...G,...V,...W,...Z]),j={};if(z.size>0){let g={};j.code=g;let L=[];g.procedures=[...z.values()]}d.emit("done",j,ee)};return Object.freeze({compile:(P,v)=>{if(v){let{input:w}=v;if(!w){x(P);return}switch(w){case"modern":{_(P,v);return}}}x(P)},on:p})},us=Object.freeze({create:ls,dataFlattener:at}),As=us;export{As as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
