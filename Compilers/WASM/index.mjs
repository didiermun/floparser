var pt=Object.create;var ke=Object.defineProperty;var dt=Object.getOwnPropertyDescriptor;var mt=Object.getOwnPropertyNames;var _t=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var De=(a,h)=>()=>(h||a((h={exports:{}}).exports,h),h.exports);var vt=(a,h,f,E)=>{if(h&&typeof h=="object"||typeof h=="function")for(let m of mt(h))!Et.call(a,m)&&m!==f&&ke(a,m,{get:()=>h[m],enumerable:!(E=dt(h,m))||E.enumerable});return a};var bt=(a,h,f)=>(f=a!=null?pt(_t(a)):{},vt(h||!a||!a.__esModule?ke(f,"default",{value:a,enumerable:!0}):f,a));var Me=De((Se,je)=>{(function(a){var h=Object.hasOwnProperty,f=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},E=10,m=typeof process=="object"&&typeof process.nextTick=="function",R=typeof Symbol=="function",P=typeof Reflect=="object",b=typeof setImmediate=="function",w=b?setImmediate:setTimeout,C=R?P&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function j(){this._events={},this._conf&&X.call(this,this._conf)}function X(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==a&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function z(e,t){var s="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(s+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var n=new Error(s);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(s),console.trace&&console.trace()}var J=function(e,t,s){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,s];default:for(var o=new Array(n);n--;)o[n]=arguments[n];return o}};function q(e,t){for(var s={},n,o=e.length,r=t?t.length:0,c=0;c<o;c++)n=e[c],s[n]=c<r?t[c]:a;return s}function $(e,t,s){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var n,o;if((s.on||s.off)&&(n=s.on,o=s.off),t.addEventListener?(n=t.addEventListener,o=t.removeEventListener):t.addListener?(n=t.addListener,o=t.removeListener):t.on&&(n=t.on,o=t.off),!n&&!o)throw Error("target does not implement any known event API");if(typeof n!="function")throw TypeError("on method must be a function");if(typeof o!="function")throw TypeError("off method must be a function");this._on=n,this._off=o;var r=e._observers;r?r.push(this):e._observers=[this]}Object.assign($.prototype,{subscribe:function(e,t,s){var n=this,o=this._target,r=this._emitter,c=this._listeners,u=function(){var i=J.apply(null,arguments),l={data:i,name:t,original:e};if(s){var v=s.call(o,l);v!==!1&&r.emit.apply(r,[l.name].concat(i));return}r.emit.apply(r,[t].concat(i))};if(c[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,r._newListener&&r._removeListener&&!n._onNewListener?(this._onNewListener=function(i){i===t&&c[e]===null&&(c[e]=u,n._on.call(o,e,u))},r.on("newListener",this._onNewListener),this._onRemoveListener=function(i){i===t&&!r.hasListeners(i)&&c[e]&&(c[e]=null,n._off.call(o,e,u))},c[e]=null,r.on("removeListener",this._onRemoveListener)):(c[e]=u,n._on.call(o,e,u))},unsubscribe:function(e){var t=this,s=this._listeners,n=this._emitter,o,r,c=this._off,u=this._target,i;if(e&&typeof e!="string")throw TypeError("event must be a string");function l(){t._onNewListener&&(n.off("newListener",t._onNewListener),n.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var v=te.call(n,t);n._observers.splice(v,1)}if(e){if(o=s[e],!o)return;c.call(u,e,o),delete s[e],--this._listenersCount||l()}else{for(r=C(s),i=r.length;i-- >0;)e=r[i],c.call(u,e,s[e]);this._listeners={},this._listenersCount=0,l()}}});function Q(e,t,s,n){var o=Object.assign({},t);if(!e)return o;if(typeof e!="object")throw TypeError("options must be an object");var r=Object.keys(e),c=r.length,u,i,l;function v(x){throw Error('Invalid "'+u+'" option value'+(x?". Reason: "+x:""))}for(var D=0;D<c;D++){if(u=r[D],!n&&!h.call(t,u))throw Error('Unknown "'+u+'" option');i=e[u],i!==a&&(l=s[u],o[u]=l?l(i,v):i)}return o}function ne(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function V(e){var t="value must be type of "+e.join("|"),s=e.length,n=e[0],o=e[1];return s===1?function(r,c){if(typeof r===n)return r;c(t)}:s===2?function(r,c){var u=typeof r;if(u===n||u===o)return r;c(t)}:function(r,c){for(var u=typeof r,i=s;i-- >0;)if(u===e[i])return r;c(t)}}var G=V(["function"]),W=V(["object","function"]);function Z(e,t,s){var n,o,r=0,c,u=new e(function(i,l,v){s=Q(s,{timeout:0,overload:!1},{timeout:function(N,A){return N*=1,(typeof N!="number"||N<0||!Number.isFinite(N))&&A("timeout must be a positive number"),N}}),n=!s.overload&&typeof e.prototype.cancel=="function"&&typeof v=="function";function D(){o&&(o=null),r&&(clearTimeout(r),r=0)}var x=function(N){D(),i(N)},y=function(N){D(),l(N)};n?t(x,y,v):(o=[function(N){y(N||Error("canceled"))}],t(x,y,function(N){if(c)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof N!="function")throw TypeError("onCancel callback must be a function");o.push(N)}),c=!0),s.timeout>0&&(r=setTimeout(function(){var N=Error("timeout");N.code="ETIMEDOUT",r=0,u.cancel(N),l(N)},s.timeout))});return n||(u.cancel=function(i){if(o){for(var l=o.length,v=1;v<l;v++)o[v](i);o[0](i),o=null}}),u}function te(e){var t=this._observers;if(!t)return-1;for(var s=t.length,n=0;n<s;n++)if(t[n]._target===e)return n;return-1}function M(e,t,s,n,o){if(!s)return null;if(n===0){var r=typeof t;if(r==="string"){var c,u,i=0,l=0,v=this.delimiter,D=v.length;if((u=t.indexOf(v))!==-1){c=new Array(5);do c[i++]=t.slice(l,u),l=u+D;while((u=t.indexOf(v,l))!==-1);c[i++]=t.slice(l),t=c,o=i}else t=[t],o=1}else r==="object"?o=t.length:(t=[t],o=1)}var x=null,y,N,A,S,K,Y=t[n],H=t[n+1],F,U;if(n===o)s._listeners&&(typeof s._listeners=="function"?(e&&e.push(s._listeners),x=[s]):(e&&e.push.apply(e,s._listeners),x=[s]));else if(Y==="*"){for(F=C(s),u=F.length;u-- >0;)y=F[u],y!=="_listeners"&&(U=M(e,t,s[y],n+1,o),U&&(x?x.push.apply(x,U):x=U));return x}else if(Y==="**"){for(K=n+1===o||n+2===o&&H==="*",K&&s._listeners&&(x=M(e,t,s,o,o)),F=C(s),u=F.length;u-- >0;)y=F[u],y!=="_listeners"&&(y==="*"||y==="**"?(s[y]._listeners&&!K&&(U=M(e,t,s[y],o,o),U&&(x?x.push.apply(x,U):x=U)),U=M(e,t,s[y],n,o)):y===H?U=M(e,t,s[y],n+2,o):U=M(e,t,s[y],n,o),U&&(x?x.push.apply(x,U):x=U));return x}else s[Y]&&(x=M(e,t,s[Y],n+1,o));if(N=s["*"],N&&M(e,t,N,n+1,o),A=s["**"],A)if(n<o)for(A._listeners&&M(e,t,A,o,o),F=C(A),u=F.length;u-- >0;)y=F[u],y!=="_listeners"&&(y===H?M(e,t,A[y],n+2,o):y===Y?M(e,t,A[y],n+1,o):(S={},S[y]=A[y],M(e,t,{"**":S},n+1,o)));else A._listeners?M(e,t,A,o,o):A["*"]&&A["*"]._listeners&&M(e,t,A["*"],o,o);return x}function g(e,t,s){var n=0,o=0,r,c=this.delimiter,u=c.length,i;if(typeof e=="string")if((r=e.indexOf(c))!==-1){i=new Array(5);do i[n++]=e.slice(o,r),o=r+u;while((r=e.indexOf(c,o))!==-1);i[n++]=e.slice(o)}else i=[e],n=1;else i=e,n=e.length;if(n>1){for(r=0;r+1<n;r++)if(i[r]==="**"&&i[r+1]==="**")return}var l=this.listenerTree,v;for(r=0;r<n;r++)if(v=i[r],l=l[v]||(l[v]={}),r===n-1)return l._listeners?(typeof l._listeners=="function"&&(l._listeners=[l._listeners]),s?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,z.call(this,l._listeners.length,v))):l._listeners=t,!0;return!0}function I(e,t,s,n){for(var o=C(e),r=o.length,c,u,i,l=e._listeners,v;r-- >0;)u=o[r],c=e[u],u==="_listeners"?i=s:i=s?s.concat(u):[u],v=n||typeof u=="symbol",l&&t.push(v?i:i.join(this.delimiter)),typeof c=="object"&&I.call(this,c,t,i,v);return t}function B(e){for(var t=C(e),s=t.length,n,o,r;s-- >0;)o=t[s],n=e[o],n&&(r=!0,o!=="_listeners"&&!B(n)&&delete e[o]);return r}function p(e,t,s){this.emitter=e,this.event=t,this.listener=s}p.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function _(e,t,s){if(s===!0)o=!0;else if(s===!1)n=!0;else{if(!s||typeof s!="object")throw TypeError("options should be an object or true");var n=s.async,o=s.promisify,r=s.nextTick,c=s.objectify}if(n||r||o){var u=t,i=t._origin||t;if(r&&!m)throw Error("process.nextTick is not supported");o===a&&(o=t.constructor.name==="AsyncFunction"),t=function(){var l=arguments,v=this,D=this.event;return o?r?Promise.resolve():new Promise(function(x){w(x)}).then(function(){return v.event=D,u.apply(v,l)}):(r?process.nextTick:w)(function(){v.event=D,u.apply(v,l)})},t._async=!0,t._origin=i}return[t,c?new p(this,e,t):this]}function d(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,X.call(this,e)}d.EventEmitter2=d,d.prototype.listenTo=function(e,t,s){if(typeof e!="object")throw TypeError("target musts be an object");var n=this;s=Q(s,{on:a,off:a,reducers:a},{on:G,off:G,reducers:W});function o(r){if(typeof r!="object")throw TypeError("events must be an object");var c=s.reducers,u=te.call(n,e),i;u===-1?i=new $(n,e,s):i=n._observers[u];for(var l=C(r),v=l.length,D,x=typeof c=="function",y=0;y<v;y++)D=l[y],i.subscribe(D,r[D]||D,x?c:c&&c[D])}return f(t)?o(q(t)):o(typeof t=="string"?q(t.split(/\s+/)):t),this},d.prototype.stopListeningTo=function(e,t){var s=this._observers;if(!s)return!1;var n=s.length,o,r=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;n-- >0;)o=s[n],(!e||o._target===e)&&(o.unsubscribe(t),r=!0);return r},d.prototype.delimiter=".",d.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},d.prototype.getMaxListeners=function(){return this._maxListeners},d.prototype.event="",d.prototype.once=function(e,t,s){return this._once(e,t,!1,s)},d.prototype.prependOnceListener=function(e,t,s){return this._once(e,t,!0,s)},d.prototype._once=function(e,t,s,n){return this._many(e,1,t,s,n)},d.prototype.many=function(e,t,s,n){return this._many(e,t,s,!1,n)},d.prototype.prependMany=function(e,t,s,n){return this._many(e,t,s,!0,n)},d.prototype._many=function(e,t,s,n,o){var r=this;if(typeof s!="function")throw new Error("many only accepts instances of Function");function c(){return--t===0&&r.off(e,c),s.apply(this,arguments)}return c._origin=s,this._on(e,c,n,o)},d.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||j.call(this);var e=arguments[0],t,s=this.wildcard,n,o,r,c,u;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(s&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(o=e.length,R){for(r=0;r<o;r++)if(typeof e[r]=="symbol"){u=!0;break}}u||(e=e.join(this.delimiter))}var i=arguments.length,l;if(this._all&&this._all.length)for(l=this._all.slice(),r=0,o=l.length;r<o;r++)switch(this.event=e,i){case 1:l[r].call(this,e);break;case 2:l[r].call(this,e,arguments[1]);break;case 3:l[r].call(this,e,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(s)l=[],M.call(this,l,t,this.listenerTree,0,o);else if(l=this._events[e],typeof l=="function"){switch(this.event=e,i){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(n=new Array(i-1),c=1;c<i;c++)n[c-1]=arguments[c];l.apply(this,n)}return!0}else l&&(l=l.slice());if(l&&l.length){if(i>3)for(n=new Array(i-1),c=1;c<i;c++)n[c-1]=arguments[c];for(r=0,o=l.length;r<o;r++)switch(this.event=e,i){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,n)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||j.call(this);var e=arguments[0],t=this.wildcard,s,n,o,r,c,u;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(s=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(r=e.length,R){for(c=0;c<r;c++)if(typeof e[c]=="symbol"){n=!0;break}}n||(e=e.join(this.delimiter))}var i=[],l=arguments.length,v;if(this._all)for(c=0,r=this._all.length;c<r;c++)switch(this.event=e,l){case 1:i.push(this._all[c].call(this,e));break;case 2:i.push(this._all[c].call(this,e,arguments[1]));break;case 3:i.push(this._all[c].call(this,e,arguments[1],arguments[2]));break;default:i.push(this._all[c].apply(this,arguments))}if(t?(v=[],M.call(this,v,s,this.listenerTree,0)):v=this._events[e],typeof v=="function")switch(this.event=e,l){case 1:i.push(v.call(this));break;case 2:i.push(v.call(this,arguments[1]));break;case 3:i.push(v.call(this,arguments[1],arguments[2]));break;default:for(o=new Array(l-1),u=1;u<l;u++)o[u-1]=arguments[u];i.push(v.apply(this,o))}else if(v&&v.length){if(v=v.slice(),l>3)for(o=new Array(l-1),u=1;u<l;u++)o[u-1]=arguments[u];for(c=0,r=v.length;c<r;c++)switch(this.event=e,l){case 1:i.push(v[c].call(this));break;case 2:i.push(v[c].call(this,arguments[1]));break;case 3:i.push(v[c].call(this,arguments[1],arguments[2]));break;default:i.push(v[c].apply(this,o))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(i)},d.prototype.on=function(e,t,s){return this._on(e,t,!1,s)},d.prototype.prependListener=function(e,t,s){return this._on(e,t,!0,s)},d.prototype.onAny=function(e){return this._onAny(e,!1)},d.prototype.prependAny=function(e){return this._onAny(e,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},d.prototype._on=function(e,t,s,n){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||j.call(this);var o=this,r;return n!==a&&(r=_.call(this,e,t,n),t=r[0],o=r[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(g.call(this,e,t,s),o):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),s?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,z.call(this,this._events[e].length,e))):this._events[e]=t,o)},d.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var s,n=[];if(this.wildcard){var o=typeof e=="string"?e.split(this.delimiter):e.slice();if(n=M.call(this,null,o,this.listenerTree,0),!n)return this}else{if(!this._events[e])return this;s=this._events[e],n.push({_listeners:s})}for(var r=0;r<n.length;r++){var c=n[r];if(s=c._listeners,f(s)){for(var u=-1,i=0,l=s.length;i<l;i++)if(s[i]===t||s[i].listener&&s[i].listener===t||s[i]._origin&&s[i]._origin===t){u=i;break}if(u<0)continue;return this.wildcard?c._listeners.splice(u,1):this._events[e].splice(u,1),s.length===0&&(this.wildcard?delete c._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(s===t||s.listener&&s.listener===t||s._origin&&s._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&B(this.listenerTree),this},d.prototype.offAny=function(e){var t=0,s=0,n;if(e&&this._all&&this._all.length>0){for(n=this._all,t=0,s=n.length;t<s;t++)if(e===n[t])return n.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(n=this._all,this._removeListener)for(t=0,s=n.length;t<s;t++)this.emit("removeListenerAny",n[t]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(e){if(e===a)return!this._events||j.call(this),this;if(this.wildcard){var t=M.call(this,null,e,this.listenerTree,0),s,n;if(!t)return this;for(n=0;n<t.length;n++)s=t[n],s._listeners=null;this.listenerTree&&B(this.listenerTree)}else this._events&&(this._events[e]=null);return this},d.prototype.listeners=function(e){var t=this._events,s,n,o,r,c;if(e===a){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(s=C(t),r=s.length,o=[];r-- >0;)n=t[s[r]],typeof n=="function"?o.push(n):o.push.apply(o,n);return o}else{if(this.wildcard){if(c=this.listenerTree,!c)return[];var u=[],i=typeof e=="string"?e.split(this.delimiter):e.slice();return M.call(this,u,i,c,0),u}return t?(n=t[e],n?typeof n=="function"?[n]:n:[]):[]}},d.prototype.eventNames=function(e){var t=this._events;return this.wildcard?I.call(this,this.listenerTree,[],null,e):t?C(t):[]},d.prototype.listenerCount=function(e){return this.listeners(e).length},d.prototype.hasListeners=function(e){if(this.wildcard){var t=[],s=typeof e=="string"?e.split(this.delimiter):e.slice();return M.call(this,t,s,this.listenerTree,0),t.length>0}var n=this._events,o=this._all;return!!(o&&o.length||n&&(e===a?C(n).length:n[e]))},d.prototype.listenersAny=function(){return this._all?this._all:[]},d.prototype.waitFor=function(e,t){var s=this,n=typeof t;return n==="number"?t={timeout:t}:n==="function"&&(t={filter:t}),t=Q(t,{timeout:0,filter:a,handleError:!1,Promise,overload:!1},{filter:G,Promise:ne}),Z(t.Promise,function(o,r,c){function u(){var i=t.filter;if(!(i&&!i.apply(s,arguments)))if(s.off(e,u),t.handleError){var l=arguments[0];l?r(l):o(J.apply(null,arguments).slice(1))}else o(J.apply(null,arguments))}c(function(){s.off(e,u)}),s._on(e,u,!1)},{timeout:t.timeout,overload:t.overload})};function O(e,t,s){s=Q(s,{Promise,timeout:0,overload:!1},{Promise:ne});var n=s.Promise;return Z(n,function(o,r,c){var u;if(typeof e.addEventListener=="function"){u=function(){o(J.apply(null,arguments))},c(function(){e.removeEventListener(t,u)}),e.addEventListener(t,u,{once:!0});return}var i=function(){l&&e.removeListener("error",l),o(J.apply(null,arguments))},l;t!=="error"&&(l=function(v){e.removeListener(t,i),r(v)},e.once("error",l)),c(function(){l&&e.removeListener("error",l),e.removeListener(t,i)}),e.once(t,i)},{timeout:s.timeout,overload:s.overload})}var T=d.prototype;if(Object.defineProperties(d,{defaultMaxListeners:{get:function(){return T._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");T._maxListeners=e},enumerable:!0},once:{value:O,writable:!0,configurable:!0}}),Object.defineProperties(T,{_maxListeners:{value:E,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return d});else if(typeof Se=="object")je.exports=d;else{var L=new Function("","return this")();L.EventEmitter2=d}})()});var Be=De((En,Ue)=>{Ue.exports=Me()});var lt=bt(Be(),1);var xt="as",Tt="=",gt="break",Ot="else",yt="enum",wt="export",It="if",Lt="import",At="->",Pt="is",Nt="loop",Ct="mut",Rt="native",kt="object",Dt="fn",St="return",jt="self",Mt="template",Ut=Object.freeze({ALIAS:xt,ASSIGN:Tt,BREAK:gt,ELSE:Ot,ENUMERATION:yt,EXPORT:wt,IF:It,IMPORT:Lt,INTO:At,IS:Pt,LOOP:Nt,MUTABLE:Ct,NATIVE:Rt,OBJECT:kt,PROCEDURE:Dt,RETURN:St,SELF:jt,TEMPLATE:Mt}),Fe=Ut;var Bt="array",Ft="assignment",zt="branch-default",Yt="branch-value",Ht="break",Xt="condition",Vt="declaration",Gt="enumeration",Kt="export",Zt="expression",Wt="import",Qt="instance",Jt="label",qt="literal",$t="loop",es="module",ts="mutable",ss="name-list",ns="native",os="object",rs="procedure",cs="procedure-call",is="return",as="self",ls="submodule",us="template",fs="type-pair",hs=Object.freeze({ARRAY:Bt,ASSIGNMENT:Ft,BRANCH_DEFAULT:zt,BRANCH_VALUE:Yt,BREAK:Ht,CONDITION:Xt,DECLARATION:Vt,ENUMERATION:Gt,EXPORT:Kt,EXPRESSION:Zt,IMPORT:Wt,INSTANCE:Qt,LABEL:Jt,LITERAL:qt,LOOP:$t,MODULE:es,MUTABLE:ts,NAME_LIST:ss,NATIVE:ns,OBJECT:os,PROCEDURE:rs,PROCEDURE_CALL:cs,RETURN:is,SELF:as,SUBMODULE:ls,TEMPLATE:us,TYPE_PAIR:fs}),ze=hs;var ps=Object.freeze({COLON:58,COMMA:44,DIGIT_ZERO:48,DIGIT_NINE:57,DOT:46,HASHTAG:35,HORIZONTAL_TAB:9,HYPHEN_MINUS:45,LEFT_CURLY_BRACKET:123,LEFT_PARENTHESIS:40,LEFT_SQUARE_BRACKET:91,LINE_BREAK:10,NULL:0,PLUS_SIGN:43,RIGHT_CURLY_BRACKET:125,RIGHT_PARENTHESIS:41,RIGHT_SQUARE_BRACKET:93,SEMICOLON:59,SPACE:32}),Ye=ps;var ds=Object.freeze([]),ms=Object.freeze({}),_s="",Es="	",vs=`
`,bs="UTF-8",xs=Object.freeze({EMPTY_ARRAY:ds,EMPTY_OBJECT:ms,EMPTY_STRING:_s,HORIZONTAL_TAB:Es,LINE_BREAK:vs,UNICODE_TEXT:bs,Codes:Ye,Keys:Fe,Types:ze}),fe=xs;var{EMPTY_STRING:Ts,UNICODE_TEXT:Ie}=fe,gs=44,Os=48,ys=57,ws=46,Is=45,Ls=43,As=65,Ps=90,Ns=-1,Cs=1,Rs=new TextDecoder(Ie),ks=new TextEncoder,Ds=(a,h,f=0,E=a.length|0,m=0,R=h.length|0)=>{for(m=m|0,f=f|0,R=R|0,E=E|0;;){let P=f>=E,b=m>=R;if(P||b)break;let C=a[f],j=h[m];if(f=f+1|0,m=m+1|0,C<j)return Ns;if(C>j)return Cs}return 0},Ss=(a,h,f=0,E=a.length|0,m=0,R=h.length|0)=>{for(m=m|0,f=f|0,R=R|0,E=E|0;;){let P=m>=R,b=f>=E;if(P||b)break;h[m]=a[f],m=m+1|0,f=f+1|0}},js=(a,h,f=0,E=a.length|0,m=0,R=h.length|0)=>{f=f|0,m=m|0,E=E|0,R=R|0;let P=E-f|0,b=R-m|0;if(P!==b)return!1;for(;;){let w=f>=E,C=m>=R;if(w||C)break;let X=a[f],z=h[m];if(f=f+1|0,m=m+1|0,X!==z)return!1}return!0},Ms=a=>{a=a>>>0;let h=0,f=0;for(;f=(f<<1|1)>>>0,!(f>a);)h=h+1|0;return h},Ve=Object.freeze([48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]),we=(a,h,f,E)=>{for(a=a>>>0,E=E??h.length|0,f=f|0,E=E|0;a>0&&E>f;)E=E-1|0,h[E]=Ve[a&15],a=a>>>4},Us=(a,h,f,E)=>{let m=f|0,R=f+E|0;if(E===0)return!1;let P=h[m];for((P===Ls||P===Is)&&(m=m+1|0);m<R;){let b=h[m];if(m=m+1|0,!(Os<=b&&b<=ys||(ws===b||gs===b)))return!1}return!0},Bs=a=>{let h=a>=As,f=a<=Ps;return h&&f},Ee=128,ve=127,Ge=-1,le=64,Le=a=>{a=a|0;let h=[];for(;;){let f=a&ve;a=a>>7;let E=a===0,m=(f&le)===0,R=E&&m,P=a===-1,b=(f&le)!==0;if(R||P&&b){h.push(f);break}f=f|Ee,h.push(f)}return h},Fs=a=>{let h=[],f=!0;for(;f;){let E=a&ve;a>>=7,a===0&&!(E&le)||a===-1&&E&le?f=!1:E|=Ee,h.push(E)}return h},Ke=(a,h)=>{h=h|0;let f=0,E=0;for(;;){let m=a[h]|0;h=h+1|0;let R=(m&ve)<<E;if(E=E+7|0,f=f|R,(m&Ee)===0){let b=(m&le)!==0,w=E<32;if(b&&w){let j=Ge<<E;f=f|j}break}}return f},zs=(a,h)=>{h=h|0;let f=0,E=0;for(;;){let m=a[h]|0;h=h+1|0;let R=(m&ve)<<E;if(E=E+7|0,f=f|R,!(m&Ee)){if(m&le){let P=Ge<<E;f=f|P}break}}return f},Ys=a=>Rs.decode(a),Hs=a=>ks.encode(a),Xs=(a=Ts)=>{let h=a.length|0,f=Le(h),E=Buffer.from(a,Ie);return Object.freeze([...f,...E])},Vs=(a,h)=>{h=h|0;let f=Ke(a,h),E=Le(f).length;return h=h+E|0,a.subarray(h,h+f|0).toString(Ie)},Gs=58,Ks=46,he=32,Oe=48,Zs=67,ce=new Uint8Array(Zs),He=ce.subarray(0,8),_e=ce.subarray(10,49),Xe=ce.subarray(51,68),ye=16,Ws=2;ce[8]=Gs;ce[9]=he;ce[49]=he;ce[50]=he;var Qs=(a,h)=>{h=h??console.log;let f=32,E=126,m=a.length|0,R=0;for(;m>0;){He.fill(Oe),we(R,He),_e.fill(he),Xe.fill(he);let P=m>=ye?ye:m;m=m-ye|0;let b=0,w=0;for(let j=1;j<=P;j=j+1|0){let X=a[R]&255;_e[b+0|0]=Oe,_e[b+1|0]=Oe,we(X,_e,b,b+2|0);let z=Ks;f<=X&&X<=E&&(z=X),Xe[w]=z,R=R+1|0,b=b+2|0,w=w+1|0,j%Ws===0&&(b=b+1|0)}let C=String.fromCodePoint(...ce);h(C)}},Js=function*(a,h){let f=a.length|0,E=h.length|0,m=0;for(;m<f&&m<E;){let R=a[m],P=h[m];yield[R,P],m=m+1|0}},qs=function*(a,h,f){let E=a.length|0,m=h.length|0,R=f.length|0,P=0;for(;P<E&&P<m&&P<R;){let b=a[P],w=h[P],C=f[P];yield[b,w,C],P=P+1|0}},$s=Object.freeze({ARRAY_COMPARE:Ds,ARRAY_COPY:Ss,ARRAY_EQUAL:js,BIT_DEPTH:Ms,HEX_DIGITS:Ve,HEX_ENCODE:we,IS_NUMBER:Us,IS_UPPERCASE:Bs,LEB128_DECODE:Ke,LEB128_DECODE_SIGNED:zs,LEB128_ENCODE:Le,LEB128_ENCODE_SIGNED:Fs,UTF8_DECODE:Ys,UTF8_ENCODE:Hs,WASM_STRING_ENCODE:Xs,WASM_STRING_DECODE:Vs,XXD_DUMP_HEX:Qs,ZIP2:Js,ZIP3:qs}),Ze=$s;var{EMPTY_ARRAY:re,EMPTY_OBJECT:Pn,EMPTY_STRING:Nn,UNICODE_TEXT:Cn}=fe,{BIT_DEPTH:ut,HEX_ENCODE:Ae,LEB128_ENCODE:k,ZIP2:We}=Ze,{Types:se}=fe,Qe=Object.freeze({[se.BRANCH_VALUE]:1,[se.BRANCH_DEFAULT]:2}),en=new Set(["done","error"]),Je=Object.freeze([0,97,115,109]),qe=Object.freeze([1,0,0,0]),Pe=48,$e=10,et=7,tt=3,st=1,nt=64,ot=96,pe=127,rt=0,ct=2,tn=12,sn=13,Ne=65,nn=71,be=32,on=33,it=15,Ce=11,rn=Object.freeze({type:"native",octets:Object.freeze([106])}),cn=Object.freeze({type:"native",octets:Object.freeze([108])}),an=Object.freeze({type:"native",octets:Object.freeze([110])}),xe=new Map;xe.set("Flogram.+",rn);xe.set("Flogram.*",cn);xe.set("Flogram./",an);var ln=Object.freeze({type:"native",code:126,evaluate:parseInt}),un=Object.freeze({type:"native",code:126,evaluate:parseInt}),fn=Object.freeze({type:"native",code:124,evaluate:parseFloat}),Re=Object.freeze({type:"native",code:127,evaluate:parseInt}),Te=Object.freeze({type:"native",code:126,evaluate:parseInt}),hn=Object.freeze({type:"native",code:125,evaluate:parseFloat}),ee=new Map;ee.set("Flogram.Bool",Re);ee.set("Flogram.FP64",fn);ee.set("Flogram.I64",ln);ee.set("Flogram.U64",un);ee.set("Flogram.FP32",hn);ee.set("Flogram.I32",Re);ee.set("Flogram.U32",Te);ee.set("Flogram.I16",Re);ee.set("Flogram.U16",Te);ee.set("Flogram.I8",Te);ee.set("Flogram.U8",Te);var ue=1,de=2,at=a=>a.join("."),pn=(a,h)=>{let f=Qe[a.type]|0,E=Qe[h.type]|0;return f-E|0},ft=a=>(h,f)=>{let E=()=>{let{labels:b}=f,w=ut(b.length|0),C=new Map(Object.entries(b)),X=Object.freeze({type:"list",bitDepth:w,evaluate:z=>C.get(z)});return a.set(h,X),X},m=()=>{let b=[],w=[],C=()=>{let V=Object.freeze({type:"back"});b.unshift(V)},j=(V,G)=>{let W={type:"path",category:G,path:V};b.unshift(W)},X=V=>{let G={type:"name",name:V};b.unshift(G)},z=(V,G,W)=>{C(),j(G,W),X(V)},{members:J}=f,q=new Map;for(let V of J){let{name:G,path:W,type:Z}=V,te=Object.freeze({category:Z,path:W});q.set(G,te),z(G,W,Z)}let $=0,Q=new Map;for(;b.length>0;){let V=b.shift();switch(V.type){case"back":{w.pop();break}case"path":{let{path:G,category:W}=V,Z=()=>{let M=w.join("."),g=Object.freeze({category:W,index:$,path:G});Q.set(M,g),$=$+1|0};if(W==="pointer"){Z();break}let te=a.get(G);switch(te.type){case"native":case"list":{Z();break}case"object":{let{members:M}=te;for(let[g,I]of M){let{category:B,path:p}=I;z(g,p,B)}break}}break}case"name":{let{name:G}=V;w.push(G);break}}}let ne={type:"object",members:q,indivisibles:Q};return a.set(h,ne),ne};switch(f.type){case"list":return E();case"object":return m()}let R=b=>{let w=[],C=[b];for(;C.length>0;){let j=C.shift(),{description:X}=j;switch(X.type){case"object":{let{members:z}=X,J=z.map(q=>{let{path:$}=q;return a.get($)});C.unshift(...J);break}}}return w};return data.map(R)},dn=()=>{let a=new Map,h=new lt.default;h.on("done",(P,b)=>{(a.get("done")||re).forEach(C=>{C(P,b)})});let f=(P,b)=>{if(en.has(P)){let w=a.get(P)||[];w.push(b),a.set(P,w)}},E=P=>{let b=new Map,w=new Map,C=p=>{let _=[],{inputs:d,locals:O,outputs:T,statements:L}=p,e=x=>y=>({type:"branch",branch:y,values:x}),t=x=>({type:"statement",statement:x}),s=x=>{let y=new Map;return Object.keys(x).forEach(N=>{let A=x[N],{path:S,type:K}=A,Y=b.get(S);y.set(N,Y)}),y},n=s(d),o=s(T),r=L.map(t);r.push({type:"block-end"});let c=x=>{let{branch:y,values:N}=x;switch(y.type){case se.BRANCH_VALUE:{let{statements:A}=y;_.push(ct,nt);let S=We(N,y.values);for(let[Y,H]of S)switch(Y.type){case"local":{let{label:F}=Y,U=O.get(F),{index:oe,path:ie}=U,ae=b.get(ie).parse(H),ge=k(oe);_.push(be),_.push(...ge);let ht=k(ae);_.push(Ne),_.push(...ht),_.push(nn),_.push(sn,0);break}}r.unshift({type:"branch-close"});let K=A.map(t);r.unshift(...K);break}}},u=x=>{_.push(tn,1),_.push(Ce)},i=x=>{let{statement:y}=x;switch(y.type){case se.CONDITION:{_.push(ct,nt),r.unshift({type:"block-end"});let{values:N,branches:A}=y;A.sort(pn);let S=N.map(H=>({type:"local",label:H})),K=e(S),Y=A.map(K);r.unshift(...Y);break}case se.RETURN:{let{keys:N,map:A}=T,S=N.map(H=>{let F=A.get(H),{path:U}=F;return b.get(U)}),{values:K}=y,Y=We(K,S);for(let[H,F]of Y){let U=F.parse(H),oe=k(U);_.push(Ne),_.push(...oe)}_.push(it);break}}},l=x=>{_.push(Ce)};for(;r.length>0;){let x=r.shift();switch(x.type){case"block-end":{l(x);break}case"branch":{c(x);break}case"branch-close":{u(x);break}case"statement":{i(x);break}}}let v=O.size-d.keys.length|0;return _=[...k(v),..._],_},j=()=>{let p=[];for(let[L,e]of w){let t=C(e),s=t.length|0,n=k(s);p=[...p,...n,...t]}let _=w.size|0;p=[...k(_),...p];let O=p.length|0,T=k(O);return p=[$e,...T,...p],p},X=()=>{let p=[];for(let[O,T]of w){let{inputs:L,outputs:e}=T,{keys:t}=L,{keys:s}=e,n=t.length,o=s.length,r=Array(n).fill(pe),c=Array(o).fill(pe),u=[ot,n,...r,o,...c];p=[...p,...u]}p=[...k(w.size|0),...p];let d=k(p.length);return p=[st,...d,...p],p},z=()=>{let p=[],_=new Uint8Array(8),d=k(8),O=k(rt);for(let[e,t]of w){let{index:s}=t,n=k(s);_.fill(Pe),Ae(s,_),p=[...p,...d,..._,...O,...n]}p=[...k(w.size),...p];let L=k(p.length);return p=[et,...L,...p],p},J=()=>{let p=[];for(let O=0;O<w.size;O=O+1|0){let T=k(O);p=[...p,...T]}p=[...k(w.size),...p];let d=k(p.length);return p=[tt,...d,...p],p},q=(p,_)=>{let d=new Map,O=_.map(T=>T.key);_.forEach(T=>{let{key:L,value:e}=T,t=e.join("."),s=[];for(let[n,o]of b)if(n.endsWith(t)){let r={type:"enumeration",path:n};s.push(r)}s.length===1&&d.set(L,s[0])}),p.map=d,p.keys=O},$=(p,_,d)=>{let{items:O,name:T}=d;_.push(T);let L={type:de};p.push(L);let e=D=>D.type===se.LABEL,t=D=>D.name,s=O.filter(e).map(t),n=ut(s.length),o=new Map;s.forEach((D,x)=>{o.set(D,x)});let c={type:"list",bitDepth:n,labels:s,parse:D=>o.get(D)},u=at(_);b.set(u,c);let i=D=>D.type!==se.LABEL,l=D=>({type:ue,node:D}),v=O.filter(i).map(l);p.push(...v)},Q=0,ne=(p,_,d)=>{let{head:O,body:T}=d,{name:L,inputs:e,outputs:t}=O,s=new Map;e.forEach((i,l)=>{let{key:v,value:D}=i,x=D.join("."),y=[];for(let[N,A]of b)if(N.endsWith(x)){let S={type:"enumeration",path:N};y.push(S)}if(y.length===1){let A={...y[0],index:l};s.set(v,A)}}),_.push(L);let n={type:de};p.push(n);let o=at(_),r={};q(r,e);let c={};q(c,t);let u={index:Q,locals:s,inputs:r,outputs:c,statements:T};w.set(o,u),Q=Q+1|0},V=(p,_,d)=>{let{items:O,name:T}=d;_.push(T);let L={type:de};p.push(L);let e=O.map(t=>({type:ue,node:t}));p.push(...e)},G=p=>{let _=[],O=[{type:ue,node:p}];for(;O.length>0;){let T=O.pop();switch(T.type){case ue:{let{node:L}=T;switch(L.type){case se.ENUMERATION:{$(O,_,L);break}case se.MODULE:{V(O,_,L);break}}break}case de:{_.pop();break}}}},W=p=>{let _=[],O=[{type:ue,node:p}];for(;O.length>0;){let T=O.pop();switch(T.type){case ue:{let{node:L}=T;switch(L.type){case se.MODULE:{V(O,_,L);break}case se.PROCEDURE:{ne(O,_,L);break}}break}case de:{_.pop();break}}}};G(P),W(P);let Z={};if(b.size>0){let p=Z.data||{};Z.data=p;let _=p.types||[];p.types=_;for(let[d,O]of b){let{type:T,labels:L,bitDepth:e}=O,t={path:d,type:T,labels:L,bitDepth:e};_.push(t)}}if(w.size>0){let p=T=>{let{map:L,keys:e}=T,t=n=>{let o=L.get(n);return{name:n,...o}};return e.map(t)},_=Z.code||{};Z.code=_;let d=_.procedures||[];_.procedures=d;let O=new Uint8Array(8);for(let[T,L]of w){let{index:e,inputs:t,outputs:s}=L;O.fill(Pe),Ae(e,O);let n=String.fromCodePoint(...O),o=p(t),r=p(s),c={key:n,path:T,inputs:o,outputs:r};d.push(c)}}let te=X(),M=J(),g=z(),I=j(),B=new Uint8Array([...Je,...qe,...te,...M,...g,...I]);h.emit("done",Z,B)},m=(P,b)=>{let{data:w,code:C}=P;w=w??re,C=C??re;let{allTypes:j}=b;j=j??new Map(ee);let X=ft(j);for(let g of w){let{path:I,description:B}=g;X(I,B)}let z=new Map;C.forEach((g,I)=>{let{path:B}=g,p={index:I,...g};z.set(B,p)});let J=g=>{let I=[],{description:B}=g,{inputs:p,outputs:_,locals:d,statements:O}=B;p=p??re,_=_??re,d=d??re;let T=0,L=new Map,e=A=>{let{name:S,path:K}=A,Y={index:T,...A};L.set(S,Y);let H=j.get(K);switch(H.type){case"native":case"list":{T=T+1|0;break}case"object":{let{indivisibles:F}=H;T=T+F.size|0;break}}},t=T|0;p.forEach(e);let n=(T|0)-t|0,o=T|0;d.forEach(e);let c=(T|0)-o|0,u=A=>({type:"statement",statement:A}),i=O.map(u);i.push({type:"block-end"});let l=A=>{let S=xe.get(A);if(S){let{octets:K}=S;I.push(...K);return}},v=A=>{let{inputs:S}=A,K=H=>{switch(H.type){case"expression":{v(H);break}case"input":case"local":{let{name:F}=H,U=L.get(F),{index:oe}=U,ie=k(oe);I.push(be),I.push(...ie);break}case"literal":{let{literal:F}=H,U=F>>0,oe=k(U);I.push(Ne),I.push(...oe);break}}};S=S??re,S.forEach(K);let{path:Y}=A;l(Y)},D=A=>{let{target:S,source:K}=A;switch(K.type){case"expression":{v(K);break}}switch(S.type){case"local":{let{name:Y}=S,H=L.get(Y),{index:F}=H,U=k(F);I.push(on),I.push(...U);break}}},x=A=>{let{statement:S}=A;switch(S.type){case"assign":{D(S);break}case"return":{let{values:K}=S;K.forEach(Y=>{switch(Y.type){case"input":case"local":{let{name:H}=Y,F=L.get(H),{index:U,path:oe}=F,ie=j.get(oe);switch(ie.type){case"native":case"list":{let me=k(U);I.push(be),I.push(...me);break}case"object":{let{indivisibles:me}=ie,ae=0;for(;ae<me.size;){let ge=k(U+ae);I.push(be),I.push(...ge),ae=ae+1|0}break}}break}}}),I.push(it);break}}},y=A=>{I.push(Ce)};for(;i.length>0;){let A=i.shift();switch(A.type){case"block-end":{y(A);break}case"statement":{x(A);break}}}let N=d.length|0;return N>0?I=[1,...k(N),pe,...I]:I=[0,...I],I},q=()=>{let g=[],I=0;for(let d of z.values()){let O=J(d),T=O.length|0,L=k(T);g=[...g,...L,...O],I=I+1|0}g=[...k(I),...g];let p=g.length|0,_=k(p);return g=[$e,..._,...g],g},$=()=>{let g=[],I=0,B=0,p=O=>{let{path:T}=O,L=j.get(T);switch(L.type){case"native":case"list":{B=B+1|0;break}case"object":{let{indivisibles:e}=L;B=B+e.size|0;break}}};for(let O of z.values()){let{description:T}=O,{inputs:L,outputs:e}=T;L=L??re,e=e??re;let{path:t}=O,s=B|0;L.forEach(p);let o=(B|0)-s|0,r=B|0;e.forEach(p);let u=(B|0)-r|0,i=Array(o).fill(pe),l=Array(u).fill(pe),v=[ot,o,...i,u,...l];g=[...g,...v],I=I+1|0}g=[...k(I),...g];let d=k(g.length);return g=[st,...d,...g],g},Q=()=>{let g=[],I=new Uint8Array(8),B=k(8),p=k(rt),_=0;for(let T of z.values()){let{index:L}=T,e=k(L);I.fill(Pe),Ae(L,I),g=[...g,...B,...I,...p,...e];let t=String.fromCodePoint(...I);T.key=t,_=_+1|0}g=[...k(_),...g];let O=k(g.length);return g=[et,...O,...g],g},ne=()=>{let g=[],I=0;for(let _ of z.values()){let{index:d}=_,O=k(d);g=[...g,...O],I=I+1|0}g=[...k(I),...g];let p=k(g.length);return g=[tt,...p,...g],g},V=$(),G=ne(),W=Q(),Z=q(),te=new Uint8Array([...Je,...qe,...V,...G,...W,...Z]),M={};if(z.size>0){let g={};M.code=g;let I=[];g.procedures=[...z.values()]}h.emit("done",M,te)};return Object.freeze({compile:(P,b)=>{if(b){let{input:w}=b;if(!w){E(P);return}switch(w){case"modern":{m(P,b);return}}}E(P)},on:f})},mn=Object.freeze({create:dn,dataFlattener:ft}),Rn=mn;export{Rn as default};
/*! Bundled license information:

eventemitter2/lib/eventemitter2.js:
  (*!
   * EventEmitter2
   * https://github.com/hij1nx/EventEmitter2
   *
   * Copyright (c) 2013 hij1nx
   * Licensed under the MIT license.
   *)
*/
